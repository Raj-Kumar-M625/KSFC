@model List<KAR.KSFC.Components.Common.Dto.IDM.UnitDetails.AssetLiabalityDTO>

@{
    int count = 0; int count1 = 0;
    Layout = null;
}

<div class="pre-scrollable" >
 <div class="col-md-2 mt-2 mb-4">
        <div id="">
            <strong><label>Name of Promoter: </label></strong>
             <input type="text" value="@ViewBag.PromoterName" disabled />
        </div>

    </div>
    <table class="table table-striped table-bordered table-sm table-responsive-xl" id="tblAssetList" aria-labelledby="tblAssetList-tab">
        <thead>
            <tr>
                <th class="th2b">S. No.</th>
                <th class="th3">Name of Asset</th>
                <th class="th3a">Value</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Count() > 0)
            {
                @foreach (var item in Model)
                {
                    @if (item.IdmAssetValue != null)
                    {
                        count++;
                        <tr class="trow">
                            <td>@count</td>
                            <td>@Html.DisplayFor(modelItem => item.AssettypeDets)</td>
                            <td align="right">@Html.DisplayFor(modelItem => item.IdmAssetValue)</td>
                        </tr>
                    }
                }
            }
            else
            {
                <tr>
                    <td colspan="8">
                        No Data Available.
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <div class="col-md-4 mt-2 mb-4 float-end Asset">
        <div id="">
            <strong><label>Total Asset: </label></strong>
            <input type="number" id="totalasset" disabled style="text-align:right" />
        </div>

    </div>

    <table class="table table-striped table-bordered table-sm table-responsive-xl" id="tblLiabilityList" aria-labelledby="tblLiabilityList-tab">
        <thead>
            <tr>
                <th class="th2b">S. No.</th>
                <th class="th3">Name of Liabilities</th>
                <th class="th3a">Value</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Count() > 0)
            {
                @foreach (var item in Model)
                {
                    @if (item.LiabVal != null)
                    {
                        count1++;
                        <tr class="trow">
                            <td>@count1</td>
                            <td>@Html.DisplayFor(modelItem => item.LiabDesc)</td>
                            <td align="right">@Html.DisplayFor(modelItem => item.LiabVal)</td>
                        </tr>
                    }
                }
            }
            else
            {
                <tr>
                    <td colspan="8">
                        No Data Available.
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <div class="col-md-4 mt-2 mb-4 float-end Liabilities">
        <div class="">
            <strong><label>Total Liabilities: </label></strong>
            <input type="number" id="totalliability" disabled style="text-align:right" />
        </div>
    </div>
    
   <div class="col-md-4 mb-4 float-end Networth">
        <div class="">
            <strong><label> Total Networth: </label></strong>
            <input type="number" id="totalnetworth" disabled style="text-align:right" />
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $('tblLiabilityList').DataTable();
    });

    $(document).ready(function() {
        $('tblAssetList').DataTable();
    });

    $("#tblAssetList .trow").each(function() {
        debugger;
        var total = 0;
        var totalvalue = ($(this).find("td:eq(2)").text());
        total = parseInt(totalvalue);
        var res = $("#totalasset").val();
        if (res > 0 || res != "") {
            var sum = total + parseInt(res);
             var sum = sum.toFixed(2);
            $("#totalasset").val(sum);
        }
        else {
            var total = total.toFixed(2);
            $("#totalasset").val(total);
        }
    });
    $("#tblLiabilityList .trow").each(function() {
        debugger;
        var total = 0;
        var totalvalue = ($(this).find("td:eq(2)").text());
        total = parseInt(totalvalue);
        var res = $("#totalliability").val();
        if (res > 0 || res != "") {
            var sum = total + parseInt(res);
             var sum = sum.toFixed(2);
            $("#totalliability").val(sum);
        }
        else {
             var total = total.toFixed(2);
            $("#totalliability").val(total);
        }
    });

    $(document).ready(function () {
        debugger;
        var num = $('#totalasset').val();
        var num1 = $('#totalliability').val();
        var sum = num - num1;
        var sum = sum.toFixed(2);
        var doc = $('#totalnetworth').val(sum);
      
    });
</script>