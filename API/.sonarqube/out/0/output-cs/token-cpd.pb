Ó
MD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\External\Interface\IEmailService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
External% -
.- .
	Interface. 7
{ 
public 

	interface 
IEmailService "
{		 
Task

 
<

 
bool

 
>

 
SendEmailAsync

 !
(

! "
EmailServiceRequest

" 5
mailRequest

6 A
)

A B
;

B C
} 
} ∂
KD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\External\Interface\IPanService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
External% -
.- .
	Interface. 7
{ 
public 

	interface 
IPanService  
{		 
public

 
Task

 
<

 
RegdUserDTO

 
>

  
IsPanAlreadyExist

! 2
(

2 3
string

3 9
panNo

: ?
,

? @
CancellationToken

@ Q
token

R W
)

W X
;

X Y
} 
} Í
KD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\External\Interface\ISmsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
External% -
.- .
	Interface. 7
{ 
public		 

	interface		 
ISmsService		  
{

 
public 
Task 
< 

SmsInfoDTO 
> 
SendSMS  '
(' (
string( .
mobileNo/ 7
,7 8
string9 ?
process@ G
)G H
;H I
public 
Task 
< 
string 
> 
SendSms #
(# $
SmsDataModel$ 0
sdm1 4
)4 5
;5 6
} 
} Ö)
JD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\External\Service\EmailService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
External% -
.- .
Service. 5
{ 
public 

class 
EmailService 
: 
IEmailService  -
{ 
private 
readonly 
MailSettings %
_mailSettings& 3
;3 4
public 
EmailService 
( 
IOptions $
<$ %
MailSettings% 1
>1 2
mailSettings3 ?
)? @
{ 	
_mailSettings 
= 
mailSettings (
.( )
Value) .
;. /
} 	
public 
async 
Task 
< 
bool 
> 
SendEmailAsync  .
(. /
EmailServiceRequest/ B
mailRequestC N
)N O
{ 	
try 
{ 
var 
email 
= 
new 
MimeMessage  +
(+ ,
), -
;- .
email 
. 
Sender 
= 
MailboxAddress -
.- .
Parse. 3
(3 4
_mailSettings4 A
.A B
MailB F
)F G
;G H
email 
. 
To 
. 
Add 
( 
MailboxAddress +
.+ ,
Parse, 1
(1 2
mailRequest2 =
.= >
ToEmail> E
)E F
)F G
;G H
email 
. 
Subject 
= 
mailRequest  +
.+ ,
Subject, 3
;3 4
var 
builder 
= 
new !
BodyBuilder" -
(- .
). /
;/ 0
if   
(   
mailRequest   
.    
Attachments    +
!=  , .
null  / 3
)  3 4
{!! 
byte"" 
["" 
]"" 
	fileBytes"" $
;""$ %
foreach## 
(## 
var##  
file##! %
in##& (
mailRequest##) 4
.##4 5
Attachments##5 @
)##@ A
{$$ 
if%% 
(%% 
file%%  
.%%  !
Length%%! '
>%%( )
$num%%* +
)%%+ ,
{&& 
using'' !
(''" #
var''# &
ms''' )
=''* +
new'', /
MemoryStream''0 <
(''< =
)''= >
)''> ?
{(( 
file))  $
.))$ %
CopyTo))% +
())+ ,
ms)), .
))). /
;))/ 0
	fileBytes**  )
=*** +
ms**, .
.**. /
ToArray**/ 6
(**6 7
)**7 8
;**8 9
}++ 
builder,, #
.,,# $
Attachments,,$ /
.,,/ 0
Add,,0 3
(,,3 4
file,,4 8
.,,8 9
FileName,,9 A
,,,A B
	fileBytes,,C L
,,,L M
ContentType,,N Y
.,,Y Z
Parse,,Z _
(,,_ `
file,,` d
.,,d e
ContentType,,e p
),,p q
),,q r
;,,r s
}-- 
}.. 
}// 
builder00 
.00 
HtmlBody00  
=00! "
mailRequest00# .
.00. /
Body00/ 3
;003 4
email11 
.11 
Body11 
=11 
builder11 $
.11$ %
ToMessageBody11% 2
(112 3
)113 4
;114 5
using22 
var22 
smtp22 
=22  
new22! $
MailKit22% ,
.22, -
Net22- 0
.220 1
Smtp221 5
.225 6

SmtpClient226 @
(22@ A
)22A B
;22B C
smtp33 
.33 
Connect33 
(33 
_mailSettings33 *
.33* +
Host33+ /
,33/ 0
_mailSettings331 >
.33> ?
Port33? C
,33C D
SecureSocketOptions33E X
.33X Y
StartTls33Y a
)33a b
;33b c
smtp44 
.44 
Authenticate44 !
(44! "
_mailSettings44" /
.44/ 0
Mail440 4
,444 5
_mailSettings446 C
.44C D
Password44D L
)44L M
;44M N
await55 
smtp55 
.55 
	SendAsync55 $
(55$ %
email55% *
)55* +
;55+ ,
smtp66 
.66 

Disconnect66 
(66  
true66  $
)66$ %
;66% &
return77 
true77 
;77 
}88 
catch99 
(99 
System99 
.99 
	Exception99 #
ex99$ &
)99& '
{:: 
return;; 
false;; 
;;; 
}<< 
}>> 	
}?? 
}@@ •2
HD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\External\Service\PanService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
External

% -
.

- .
Service

. 5
{ 
public 

class 

PanService 
: 
IPanService )
{ 
private 
readonly 
IEntityRepository *
<* +
RegduserTab+ 6
>6 7
_regUserRepository8 J
;J K
private 
readonly 
IEntityRepository *
<* +
Promoter+ 3
>3 4
_promoterRepository5 H
;H I
private 
readonly 
IEntityRepository *
<* +
	UnitInfo1+ 4
>4 5
_unitrRepository6 F
;F G
private 
readonly 
IEntityRepository *
<* +
	OffcCdtab+ 4
>4 5
_Officerepository6 G
;G H
public 

PanService 
( 
IEntityRepository +
<+ ,
RegduserTab, 7
>7 8
regUserRepository9 J
,J K
IEntityRepositoryL ]
<] ^
	OffcCdtab^ g
>g h
Officerepositoryi y
,y z
IEntityRepository	{ å
<
å ç
Promoter
ç ï
>
ï ñ 
promoterRepository
ó ©
,
© ™
IEntityRepository
´ º
<
º Ω
	UnitInfo1
Ω ∆
>
∆ «
unitrRepository
» ◊
)
◊ ÿ
{ 	
_regUserRepository 
=  
regUserRepository! 2
;2 3
_promoterRepository 
=  !
promoterRepository" 4
;4 5
_unitrRepository 
= 
unitrRepository .
;. /
_Officerepository 
= 
Officerepository  0
;0 1
} 	
public 
async 
Task 
< 
RegdUserDTO %
>% &
IsPanAlreadyExist' 8
(8 9
string9 ?
panNo@ E
,E F
CancellationTokenG X
tokenY ^
)^ _
{ 	
string 
branch 
= 
String "
." #
Empty# (
;( )
var 
user 
= 
await 
_regUserRepository /
./ 0+
FirstOrDefaultByExpressionAsync0 O
(O P
xP Q
=>R T
xU V
.V W
UserPanW ^
==_ a
panNob g
,g h
tokeni n
)n o
.o p
ConfigureAwaitp ~
(~ 
false	 Ñ
)
Ñ Ö
;
Ö Ü
var 
promoter 
= 
await  
_promoterRepository! 4
.4 5+
FirstOrDefaultByExpressionAsync5 T
(T U
xU V
=>W Y
xZ [
.[ \
PanNo\ a
==b d
panNoe j
,j k
tokenl q
)q r
.r s
ConfigureAwait	s Å
(
Å Ç
false
Ç á
)
á à
;
à â
var   
unit   
=   
await   
_unitrRepository   -
.  - .+
FirstOrDefaultByExpressionAsync  . M
(  M N
x  N O
=>  P R
x  S T
.  T U
UtPan  U Z
==  [ ]
panNo  ^ c
,  c d
token  e j
)  j k
.  k l
ConfigureAwait  l z
(  z {
false	  { Ä
)
  Ä Å
;
  Å Ç
if"" 
("" 
unit"" 
!="" 
null"" 
)"" 
{## 
var$$ 

branchData$$ 
=$$  
await$$! &
_Officerepository$$' 8
.$$8 9+
FirstOrDefaultByExpressionAsync$$9 X
($$X Y
a$$Y Z
=>$$[ ]
a$$^ _
.$$_ `
OffcCd$$` f
==$$g i
unit$$j n
.$$n o
UtOffc$$o u
,$$u v
token$$w |
)$$| }
.$$} ~
ConfigureAwait	$$~ å
(
$$å ç
false
$$ç í
)
$$í ì
;
$$ì î
branch%% 
=%% 

branchData%% #
.%%# $
OffcNam%%$ +
;%%+ ,
}&& 
if(( 
((( 
user(( 
!=(( 
null(( 
)(( 
{)) 
return** 
new** 
RegdUserDTO** &
(**& '
)**' (
{**) *
Branch**+ 1
=**2 3
branch**4 :
,**: ;
mobile**< B
=**C D
user**E I
.**I J
UserMobileno**J V
,**V W
Pan**X [
=**\ ]
user**^ b
.**b c
UserPan**c j
}**k l
;**l m
}++ 
if-- 
(-- 
promoter-- 
!=-- 
null--  
)--  !
{.. 
return// 
new// 
RegdUserDTO// &
(//& '
)//' (
{//) *
Branch//+ 1
=//2 3
branch//4 :
,//: ;
mobile//< B
=//C D
promoter//E M
.//M N

PromMobile//N X
,//X Y
Pan//Z ]
=//^ _
promoter//` h
.//h i
PanNo//i n
,//n o
Name//p t
=//u v
promoter//w 
.	// Ä
PromName
//Ä à
}
//â ä
;
//ä ã
}00 
if22 
(22 
unit22 
!=22 
null22 
)22 
{33 
return44 
new44 
RegdUserDTO44 &
{44' (
Pan44) ,
=44- .
unit44/ 3
.443 4
UtPan444 9
,449 :
Branch44; A
=44B C
branch44D J
??44K M
string44N T
.44T U
Empty44U Z
,44Z [
mobile44\ b
=44c d
$str44e g
}44h i
;44i j
}55 
return66 
null66 
;66 
}77 	
}88 
}99 õ±
HD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\External\Service\SmsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
External% -
.- .
Service. 5
{ 
public 

class 

SmsService 
: 
ISmsService )
{ 
private 
readonly 
IConfiguration '
_configureure( 5
;5 6
private 
readonly 
IHttpClientFactory +
_clientFactory, :
;: ;
private 
readonly 
List 
< 
SMSTemplateDTO ,
>, -
_templateList. ;
;; <
public 

SmsService 
( 
IConfiguration (
	configure) 2
,2 3
IHttpClientFactory4 F
clientFactoryG T
)T U
{ 	
this   
.   
_configureure   
=    
	configure  ! *
;  * +
this!! 
.!! 
_clientFactory!! 
=!!  !
clientFactory!!" /
;!!/ 0
_templateList"" 
="" 
GetSMSTemplates"" +
(""+ ,
)"", -
;""- .
}## 	
private%% 
int%% 
GenarateOtp%% 
(%%  
)%%  !
{&& 	
Random'' 
random'' 
='' 
new'' 
(''  
)''  !
;''! "
bool(( !
isSmsServiceAvailable(( &
=((' (
Convert(() 0
.((0 1
	ToBoolean((1 :
(((: ;
_configureure((; H
[((H I
$str((I d
]((d e
)((e f
;((f g
if)) 
()) 
!)) !
isSmsServiceAvailable)) &
)))& '
{** 
int++ 

defaultOtp++ 
=++  
Convert++! (
.++( )
ToInt32++) 0
(++0 1
_configureure++1 >
[++> ?
$str++? O
]++O P
)++P Q
;++Q R
return,, 

defaultOtp,, !
;,,! "
}-- 
return.. 
random.. 
... 
Next.. 
(.. 
$num.. %
,..% &
$num..' -
)..- .
;... /
}// 	
private11 
string11 
CreateSmsMessage11 '
(11' (
int11( +
otp11, /
,11/ 0
string111 7
process118 ?
)11? @
{22 	
var33 
message33 
=33 
_templateList33 '
.33' (
Where33( -
(33- .
x33. /
=>330 2
x333 4
.334 5
Key335 8
.338 9
Equals339 ?
(33? @
process33@ G
)33G H
)33H I
.33I J
FirstOrDefault33J X
(33X Y
)33Y Z
;33Z [
return44 
message44 
.44 
Value44  
.44  !
Replace44! (
(44( )
$str44) /
,44/ 0
otp441 4
.444 5
ToString445 =
(44= >
)44> ?
)44? @
;44@ A
}55 	
public77 
async77 
Task77 
<77 

SmsInfoDTO77 $
>77$ %
SendSMS77& -
(77- .
string77. 4
mobileNo775 =
,77= >
string77? E
process77F M
)77M N
{88 	
try99 
{:: 

SmsInfoDTO;; 
smsResponseDTO;; )
;;;) *
var<< 
otp<< 
=<< 
GenarateOtp<< %
(<<% &
)<<& '
;<<' (
var== 
message== 
=== 
CreateSmsMessage== .
(==. /
otp==/ 2
,==2 3
process==4 ;
)==; <
;==< =
bool>> !
isSmsServiceAvailable>> *
=>>+ ,
Convert>>- 4
.>>4 5
	ToBoolean>>5 >
(>>> ?
_configureure>>? L
[>>L M
$str>>M h
]>>h i
)>>i j
;>>j k
if?? 
(?? 
!?? !
isSmsServiceAvailable?? *
)??* +
{@@ 
returnAA 
smsResponseDTOAA )
=AA* +
newAA, /

SmsInfoDTOAA0 :
(AA: ;
)AA; <
{BB 
otpCC 
=CC 
ConvertCC %
.CC% &
ToStringCC& .
(CC. /
otpCC/ 2
)CC2 3
,CC3 4
MobileDD 
=DD  
mobileNoDD! )
,DD) *
StatusEE 
=EE  
$strEE! +
}FF 
;FF 
}GG 
stringHH 
usernameHH 
=HH  !
_configureureHH" /
[HH/ 0
$strHH0 >
]HH> ?
;HH? @
stringII 
passwordII 
=II  !
_configureureII" /
[II/ 0
$strII0 >
]II> ?
;II? @
stringJJ 
senderidJJ 
=JJ  !
_configureureJJ" /
[JJ/ 0
$strJJ0 ?
]JJ? @
;JJ@ A
stringKK 
	secureKeyKK  
=KK! "
_configureureKK# 0
[KK0 1
$strKK1 F
]KKF G
;KKG H
stringLL 

templateIdLL !
=LL" #
_configureureLL$ 1
[LL1 2
$strLL2 C
]LLC D
;LLD E
stringMM 
urlMM 
=MM 
_configureureMM *
[MM* +
$strMM+ 4
]MM4 5
;MM5 6
ServicePointManagerOO #
.OO# $
SecurityProtocolOO$ 4
=OO5 6 
SecurityProtocolTypeOO7 K
.OOK L
Tls12OOL Q
;OOQ R
ServicePointManagerQQ #
.QQ# $/
#ServerCertificateValidationCallbackQQ$ G
=QQH I
(QQJ K
senderQQK Q
,QQQ R
certQQS W
,QQW X
chainQQY ^
,QQ^ _
errsQQ` d
)QQd e
=>QQf h
trueQQi m
;QQm n
varSS 
requestSS 
=SS 
(SS 
HttpWebRequestSS -
)SS- .

WebRequestSS. 8
.SS8 9
CreateSS9 ?
(SS? @
urlSS@ C
)SSC D
;SSD E
requestUU 
.UU 
ProtocolVersionUU '
=UU( )
HttpVersionUU* 5
.UU5 6
	Version10UU6 ?
;UU? @
requestVV 
.VV 
	KeepAliveVV !
=VV" #
falseVV$ )
;VV) *
requestWW 
.WW 
ServicePointWW $
.WW$ %
ConnectionLimitWW% 4
=WW5 6
$numWW7 8
;WW8 9
requestXX 
.XX 
	UserAgentXX !
=XX" #
$strXX$ [
;XX[ \
requestYY 
.YY 
MethodYY 
=YY  
$strYY! '
;YY' (
requestZZ 
.ZZ 
ContentTypeZZ #
=ZZ$ %
$strZZ& I
;ZZI J
var\\ 
query\\ 
=\\ 
new\\ 
StringBuilder\\  -
(\\- .
)\\. /
;\\/ 0
query^^ 
.^^ 
Append^^ 
(^^ 
$str^^ (
)^^( )
.^^) *
Append^^* 0
(^^0 1
HttpUtility^^1 <
.^^< =
	UrlEncode^^= F
(^^F G
username^^G O
)^^O P
)^^P Q
;^^Q R
query__ 
.__ 
Append__ 
(__ 
$str__ )
)__) *
.__* +
Append__+ 1
(__1 2
HttpUtility__2 =
.__= >
	UrlEncode__> G
(__G H
SMSSecurity__H S
.__S T
HashData__T \
(__\ ]
password__] e
,__e f
$str__g m
)__m n
)__n o
)__o p
;__p q
query`` 
.`` 
Append`` 
(`` 
$str`` /
)``/ 0
.``0 1
Append``1 7
(``7 8
HttpUtility``8 C
.``C D
	UrlEncode``D M
(``M N
$str``N Y
)``Y Z
)``Z [
;``[ \
queryaa 
.aa 
Appendaa 
(aa 
$straa (
)aa( )
.aa) *
Appendaa* 0
(aa0 1
HttpUtilityaa1 <
.aa< =
	UrlEncodeaa= F
(aaF G
messageaaG N
)aaN O
)aaO P
;aaP Q
querybb 
.bb 
Appendbb 
(bb 
$strbb )
)bb) *
.bb* +
Appendbb+ 1
(bb1 2
HttpUtilitybb2 =
.bb= >
	UrlEncodebb> G
(bbG H
mobileNobbH P
)bbP Q
)bbQ R
;bbR S
querycc 
.cc 
Appendcc 
(cc 
$strcc )
)cc) *
.cc* +
Appendcc+ 1
(cc1 2
HttpUtilitycc2 =
.cc= >
	UrlEncodecc> G
(ccG H
senderidccH P
)ccP Q
)ccQ R
;ccR S
querydd 
.dd 
Appenddd 
(dd 
$strdd $
)dd$ %
.dd% &
Appenddd& ,
(dd, -
HttpUtilitydd- 8
.dd8 9
	UrlEncodedd9 B
(ddB C
SMSSecurityee 
.ee  
HashDataee  (
(ee( )
usernameee) 1
+ee2 3
senderidee4 <
+ee= >
messageee? F
+eeG H
	secureKeyeeI R
,eeR S
$streeT \
)ee\ ]
)ee] ^
)ee^ _
;ee_ `
queryff 
.ff 
Appendff 
(ff 
$strff +
)ff+ ,
.ff, -
Appendff- 3
(ff3 4
HttpUtilityff4 ?
.ff? @
	UrlEncodeff@ I
(ffI J

templateIdffJ T
)ffT U
)ffU V
;ffV W
varii 
bytesii 
=ii 
Encodingii $
.ii$ %
ASCIIii% *
.ii* +
GetBytesii+ 3
(ii3 4
queryii4 9
.ii9 :
ToStringii: B
(iiB C
)iiC D
)iiD E
;iiE F
requestkk 
.kk 
ContentLengthkk %
=kk& '
byteskk( -
.kk- .
Lengthkk. 4
;kk4 5
usingmm 
(mm 
varmm 
rsmm 
=mm 
requestmm  '
.mm' (
GetRequestStreammm( 8
(mm8 9
)mm9 :
)mm: ;
{nn 
rsoo 
.oo 
Writeoo 
(oo 
bytesoo "
)oo" #
;oo# $
}pp 
usingrr 
(rr 
varrr 
responserr #
=rr$ %
awaitrr& +
requestrr, 3
.rr3 4
GetResponseAsyncrr4 D
(rrD E
)rrE F
)rrF G
{ss 
usingtt 
(tt 
vartt 

dataStreamtt )
=tt* +
responsett, 4
.tt4 5
GetResponseStreamtt5 F
(ttF G
)ttG H
)ttH I
{uu 
usingvv 
(vv 
varvv "
readervv# )
=vv* +
newvv, /
StreamReadervv0 <
(vv< =

dataStreamvv= G
)vvG H
)vvH I
{ww 
returnxx "
smsResponseDTOxx# 1
=xx2 3
newxx4 7

SmsInfoDTOxx8 B
(xxB C
)xxC D
{yy 
otpzz  #
=zz$ %
Convertzz& -
.zz- .
ToStringzz. 6
(zz6 7
otpzz7 :
)zz: ;
,zz; <
Mobile{{  &
={{' (
mobileNo{{) 1
,{{1 2
Status||  &
=||' (
$str||) -
}}} 
;}} 
}~~ 
} 
}
ÄÄ 
}
ÇÇ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
)
ÉÉ 
{
ÑÑ 
throw
ÜÜ 
;
ÜÜ 
}
áá 
}
àà 	
public
ää 
async
ää 
Task
ää 
<
ää 
string
ää  
>
ää  !
SendSms
ää" )
(
ää) *
SmsDataModel
ää* 6
sdm
ää7 :
)
ää: ;
{
ãã 	
string
åå 
username
åå 
=
åå 
_configureure
åå +
[
åå+ ,
$str
åå, :
]
åå: ;
;
åå; <
string
çç 
password
çç 
=
çç 
_configureure
çç +
[
çç+ ,
$str
çç, :
]
çç: ;
;
çç; <
string
éé 
senderid
éé 
=
éé 
_configureure
éé +
[
éé+ ,
$str
éé, ;
]
éé; <
;
éé< =
string
èè 
	secureKey
èè 
=
èè 
_configureure
èè ,
[
èè, -
$str
èè- B
]
èèB C
;
èèC D
string
êê 

templateid
êê 
=
êê 
_configureure
êê  -
[
êê- .
$str
êê. ?
]
êê? @
;
êê@ A
string
ëë 
url
ëë 
=
ëë 
_configureure
ëë &
[
ëë& '
$str
ëë' 0
]
ëë0 1
;
ëë1 2
bool
ìì #
isSmsServiceAvailable
ìì &
=
ìì' (
Convert
ìì) 0
.
ìì0 1
	ToBoolean
ìì1 :
(
ìì: ;
_configureure
ìì; H
[
ììH I
$str
ììI d
]
ììd e
)
ììe f
;
ììf g
if
îî 
(
îî 
!
îî #
isSmsServiceAvailable
îî &
)
îî& '
{
ïï 
return
ññ 
$str
ññ 
;
ññ 
}
óó !
ServicePointManager
öö 
.
öö  
SecurityProtocol
öö  0
=
öö1 2"
SecurityProtocolType
öö3 G
.
ööG H
Tls12
ööH M
;
ööM N!
ServicePointManager
úú 
.
úú  1
#ServerCertificateValidationCallback
úú  C
=
úúD E
(
úúF G
sender
úúG M
,
úúM N
cert
úúO S
,
úúS T
chain
úúU Z
,
úúZ [
errs
úú\ `
)
úú` a
=>
úúb d
true
úúe i
;
úúi j
var
ûû 
request
ûû 
=
ûû 
(
ûû 
HttpWebRequest
ûû )
)
ûû) *

WebRequest
ûû* 4
.
ûû4 5
Create
ûû5 ;
(
ûû; <
url
ûû< ?
)
ûû? @
;
ûû@ A
request
†† 
.
†† 
ProtocolVersion
†† #
=
††$ %
HttpVersion
††& 1
.
††1 2
	Version10
††2 ;
;
††; <
request
°° 
.
°° 
	KeepAlive
°° 
=
°° 
false
°°  %
;
°°% &
request
¢¢ 
.
¢¢ 
ServicePoint
¢¢  
.
¢¢  !
ConnectionLimit
¢¢! 0
=
¢¢1 2
$num
¢¢3 4
;
¢¢4 5
request
££ 
.
££ 
	UserAgent
££ 
=
££ 
$str
££  W
;
££W X
request
§§ 
.
§§ 
Method
§§ 
=
§§ 
$str
§§ #
;
§§# $
request
•• 
.
•• 
ContentType
•• 
=
••  !
$str
••" E
;
••E F
var
ßß 
query
ßß 
=
ßß 
new
ßß 
StringBuilder
ßß )
(
ßß) *
)
ßß* +
;
ßß+ ,
query
©© 
.
©© 
Append
©© 
(
©© 
$str
©© $
)
©©$ %
.
©©% &
Append
©©& ,
(
©©, -
HttpUtility
©©- 8
.
©©8 9
	UrlEncode
©©9 B
(
©©B C
username
©©C K
)
©©K L
)
©©L M
;
©©M N
query
™™ 
.
™™ 
Append
™™ 
(
™™ 
$str
™™ %
)
™™% &
.
™™& '
Append
™™' -
(
™™- .
HttpUtility
™™. 9
.
™™9 :
	UrlEncode
™™: C
(
™™C D
SMSSecurity
™™D O
.
™™O P
HashData
™™P X
(
™™X Y
password
™™Y a
,
™™a b
$str
™™c i
)
™™i j
)
™™j k
)
™™k l
;
™™l m
query
´´ 
.
´´ 
Append
´´ 
(
´´ 
$str
´´ +
)
´´+ ,
.
´´, -
Append
´´- 3
(
´´3 4
HttpUtility
´´4 ?
.
´´? @
	UrlEncode
´´@ I
(
´´I J
$str
´´J U
)
´´U V
)
´´V W
;
´´W X
query
¨¨ 
.
¨¨ 
Append
¨¨ 
(
¨¨ 
$str
¨¨ $
)
¨¨$ %
.
¨¨% &
Append
¨¨& ,
(
¨¨, -
HttpUtility
¨¨- 8
.
¨¨8 9
	UrlEncode
¨¨9 B
(
¨¨B C
sdm
¨¨C F
.
¨¨F G
Message
¨¨G N
)
¨¨N O
)
¨¨O P
;
¨¨P Q
query
≠≠ 
.
≠≠ 
Append
≠≠ 
(
≠≠ 
$str
≠≠ %
)
≠≠% &
.
≠≠& '
Append
≠≠' -
(
≠≠- .
HttpUtility
≠≠. 9
.
≠≠9 :
	UrlEncode
≠≠: C
(
≠≠C D
sdm
≠≠D G
.
≠≠G H
MobileNumber
≠≠H T
)
≠≠T U
)
≠≠U V
;
≠≠V W
query
ÆÆ 
.
ÆÆ 
Append
ÆÆ 
(
ÆÆ 
$str
ÆÆ %
)
ÆÆ% &
.
ÆÆ& '
Append
ÆÆ' -
(
ÆÆ- .
HttpUtility
ÆÆ. 9
.
ÆÆ9 :
	UrlEncode
ÆÆ: C
(
ÆÆC D
senderid
ÆÆD L
)
ÆÆL M
)
ÆÆM N
;
ÆÆN O
query
ØØ 
.
ØØ 
Append
ØØ 
(
ØØ 
$str
ØØ  
)
ØØ  !
.
ØØ! "
Append
ØØ" (
(
ØØ( )
HttpUtility
ØØ) 4
.
ØØ4 5
	UrlEncode
ØØ5 >
(
ØØ> ?
SMSSecurity
∞∞ 
.
∞∞ 
HashData
∞∞ $
(
∞∞$ %
username
∞∞% -
+
∞∞. /
senderid
∞∞0 8
+
∞∞9 :
sdm
∞∞; >
.
∞∞> ?
Message
∞∞? F
+
∞∞G H
	secureKey
∞∞I R
,
∞∞R S
$str
∞∞T \
)
∞∞\ ]
)
∞∞] ^
)
∞∞^ _
;
∞∞_ `
query
±± 
.
±± 
Append
±± 
(
±± 
$str
±± '
)
±±' (
.
±±( )
Append
±±) /
(
±±/ 0
HttpUtility
±±0 ;
.
±±; <
	UrlEncode
±±< E
(
±±E F

templateid
±±F P
)
±±P Q
)
±±Q R
;
±±R S
query
≤≤ 
.
≤≤ 
Append
≤≤ 
(
≤≤ 
$str
≤≤ '
)
≤≤' (
.
≤≤( )
Append
≤≤) /
(
≤≤/ 0
HttpUtility
≤≤0 ;
.
≤≤; <
	UrlEncode
≤≤< E
(
≤≤E F

templateid
≤≤F P
)
≤≤P Q
)
≤≤Q R
;
≤≤R S
var
¥¥ 
bytes
¥¥ 
=
¥¥ 
Encoding
¥¥  
.
¥¥  !
ASCII
¥¥! &
.
¥¥& '
GetBytes
¥¥' /
(
¥¥/ 0
query
¥¥0 5
.
¥¥5 6
ToString
¥¥6 >
(
¥¥> ?
)
¥¥? @
)
¥¥@ A
;
¥¥A B
request
∂∂ 
.
∂∂ 
ContentLength
∂∂ !
=
∂∂" #
bytes
∂∂$ )
.
∂∂) *
Length
∂∂* 0
;
∂∂0 1
using
∏∏ 
(
∏∏ 
var
∏∏ 
rs
∏∏ 
=
∏∏ 
request
∏∏ #
.
∏∏# $
GetRequestStream
∏∏$ 4
(
∏∏4 5
)
∏∏5 6
)
∏∏6 7
{
ππ 
rs
∫∫ 
.
∫∫ 
Write
∫∫ 
(
∫∫ 
bytes
∫∫ 
)
∫∫ 
;
∫∫  
}
ªª 
using
ΩΩ 
(
ΩΩ 
var
ΩΩ 
response
ΩΩ 
=
ΩΩ  !
request
ΩΩ" )
.
ΩΩ) *
GetResponse
ΩΩ* 5
(
ΩΩ5 6
)
ΩΩ6 7
)
ΩΩ7 8
using
øø 
(
øø 
var
øø 

dataStream
øø !
=
øø" #
response
øø$ ,
.
øø, -
GetResponseStream
øø- >
(
øø> ?
)
øø? @
)
øø@ A
using
¿¿ 
(
¿¿ 
var
¿¿ 
reader
¿¿ 
=
¿¿ 
new
¿¿  #
StreamReader
¿¿$ 0
(
¿¿0 1

dataStream
¿¿1 ;
)
¿¿; <
)
¿¿< =
{
¡¡ 
var
ƒƒ 
match
ƒƒ 
=
ƒƒ 
Regex
ƒƒ !
.
ƒƒ! "
Match
ƒƒ" '
(
ƒƒ' (
reader
ƒƒ( .
.
ƒƒ. /
	ReadToEnd
ƒƒ/ 8
(
ƒƒ8 9
)
ƒƒ9 :
,
ƒƒ: ;
$str
ƒƒ< T
+
ƒƒU V
username
ƒƒW _
)
ƒƒ_ `
;
ƒƒ` a
if
≈≈ 
(
≈≈ 
!
≈≈ 
match
≈≈ 
.
≈≈ 
Success
≈≈ "
)
≈≈" #
{
∆∆ 
return
«« 
$str
«« J
;
««J K
}
»» 
return
…… 
match
…… 
.
…… 
Groups
…… #
[
……# $
$num
……$ %
]
……% &
.
……& '
Value
……' ,
.
……, -
ToString
……- 5
(
……5 6
)
……6 7
;
……7 8
}
   
}
ÕÕ 	
private
œœ 
List
œœ 
<
œœ 
SMSTemplateDTO
œœ #
>
œœ# $
GetSMSTemplates
œœ% 4
(
œœ4 5
)
œœ5 6
{
–– 	
var
—— $
jsonSerializerSettings
—— &
=
——' (
new
——) ,$
JsonSerializerSettings
——- C
(
——C D
)
——D E
;
——E F$
jsonSerializerSettings
““ "
.
““" ##
MissingMemberHandling
““# 8
=
““9 :#
MissingMemberHandling
““; P
.
““P Q
Ignore
““Q W
;
““W X
var
”” 
data
”” 
=
”” 
JsonConvert
”” "
.
””" #
DeserializeObject
””# 4
<
””4 5
List
””5 9
<
””9 :
SMSTemplateDTO
””: H
>
””H I
>
””I J
(
””J K
File
””K O
.
””O P
ReadAllText
””P [
(
””[ \
$str
””\ n
)
””n o
,
””o p%
jsonSerializerSettings””q á
)””á à
;””à â
return
‘‘ 
data
‘‘ 
;
‘‘ 
}
’’ 	
}
÷÷ 
}◊◊ Ô
YD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\AdminModule\IAssignOffice.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
AdminModule

8 C
{ 
public 

	interface 
IAssignOffice "
{ 
public 
Task 
< 
List 
< )
EmployeeDesignationHistoryDTO 6
>6 7
>7 8 
GetAllEmployeeBranch9 M
(M N
CancellationTokenN _
Token` e
)e f
;f g
public 
Task 
< 
List 
< )
EmployeeDesignationHistoryDTO 6
>6 7
>7 8(
GetAllEmployeeBranchByFilter9 U
(U V
CancellationTokenV g
Tokenh m
,m n
stringo u

ticket_num	v Ä
=
Å Ç
null
É á
)
á à
;
à â
public 
Task 
< 
int 
> 
SaveEmployeeCheckIn ,
(, -
TblEmpdesigTab- ;
CheckIn_dets< H
,H I
CancellationTokenJ [
Token\ a
)a b
;b c
public 
Task 
< 
int 
>  
SaveEmployeeCheckOut -
(- .
TblEmpdesigTab. <
Checkout_dets= J
,J K
CancellationTokenL ]
Token^ c
)c d
;d e
public 
Task 
< )
EmployeeDesignationHistoryDTO 1
>1 2$
DeleteEmployeeBranchById3 K
(K L
stringL R

ticket_numS ]
,] ^
CancellationToken_ p
Tokenq v
)v w
;w x
} 
} ¶8
\D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\AdminModule\IEmployeeService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8
AdminModule		8 C
{

 
public 

	interface 
IEmployeeService %
{ 
public 
Task 
< 
bool 
> "
IsEmployeeNumberUnique 0
(0 1
string1 7
empNo8 =
,= >
CancellationToken? P
tokenQ V
)V W
;W X
public 
Task 
< 
List 
< 
EmployeeDTO $
>$ %
>% &
GetAllEmployees' 6
(6 7
CancellationToken7 H
TokenI N
)N O
;O P
public 
Task 
< 
EmployeeDTO 
>  
GetAllEmployeesById! 4
(4 5
string5 ;

ticket_num< F
,F G
CancellationTokenH Y
TokenZ _
)_ `
;` a
public 
Task 
< 
bool 
> 
DeleteEmployeeById ,
(, -
string- 3

ticket_num4 >
,> ?
CancellationToken@ Q
TokenR W
)W X
;X Y
public 
Task 
< 
List 
< 
EmployeeDTO $
>$ %
>% &#
GetAllEmployeesByFilter' >
(> ?
CancellationToken? P
TokenQ V
,V W
stringX ^

ticket_num_ i
=j k
nulll p
,p q
stringr x
	desg_code	y Ç
=
É Ñ
null
Ö â
,
â ä
string
ã ë
pan_num
í ô
=
ö õ
null
ú †
,
† °
int
¢ •
?
• ¶
phone
ß ¨
=
≠ Æ
$num
Ø ∞
)
∞ ±
;
± ≤
public 
Task 
< 
List 
< 
TblTrgEmpGrade '
>' (
>( )"
GetEmployeeDesignation* @
(@ A
CancellationTokenA R
TokenS X
)X Y
;Y Z
public 
Task 
< 
List 
< 
TblEmpdesighistTab +
>+ ,
>, -"
GetEmployeeDesiHistory. D
(D E
stringE K

employeeIdL V
,V W
CancellationTokenX i
Tokenj o
)o p
;p q
public 
Task 
< 
List 
< 
TblEmpdscTab %
>% &
>& '
GetEmployeeDSC( 6
(6 7
string7 =

employeeId> H
,H I
CancellationTokenJ [
Token\ a
)a b
;b c
public 
Task 
< 
List 
< 
TblEmploginTab '
>' (
>( )#
GetEmployeeLoginDetails* A
(A B
stringB H

employeeIdI S
,S T
CancellationTokenU f
Tokeng l
)l m
;m n
public 
Task 
< 
TblEmploginTab "
>" #
SaveEmployeeCheckIn$ 7
(7 8
TblEmploginTab8 F
Checkout_dataG T
,T U
CancellationTokenV g
Tokenh m
)m n
;n o
public 
Task 
< 
( 
bool 
, 
string !
)! "
>" #
SaveEmployeeDetails$ 7
(7 8
EmployeeDTO8 C
employeeD L
,L M
CancellationTokenN _
Token` e
)e f
;f g
public 
Task 
< 
List 
< 
OfficeMasterDto (
>( )
>) *
GetAllOffices+ 8
(8 9
CancellationToken9 J
TokenK P
)P Q
;Q R
public 
Task 
< 
List 
< 
ChairMasterDto '
>' (
>( )
GetAllChairs* 6
(6 7
string7 =
officeId> F
,F G
CancellationTokenH Y
TokenZ _
)_ `
;` a
public 
Task 
< 
bool 
> 
CheckOut "
(" #
CheckOutDto# .
dto/ 2
,2 3
CancellationToken4 E
TokenF K
)K L
;L M
public 
Task 
< 
bool 
> 
Checkin !
(! "
AssignOfficeDto" 1

requestObj2 <
,< =
CancellationToken> O
TokenP U
)U V
;V W
public 
Task 
< 
List 
< (
AssignOfficeMasterHistoryDto 5
>5 6
>6 7+
GetAllAssignDataUsingEmployeeId8 W
(W X
stringX ^

employeeId_ i
,i j
CancellationTokenk |
Token	} Ç
)
Ç É
;
É Ñ
public 
Task 
< 
List 
< 
ModuleMasterDto (
>( )
>) *

GetModules+ 5
(5 6
CancellationToken6 G
TokenH M
)M N
;N O
public 
Task 
< 
List 
< 
RoleMasterDto &
>& '
>' (
GetRoles) 1
(1 2
string2 8
moduleId9 A
,A B
CancellationTokenC T
TokenU Z
)Z [
;[ \
public 
Task 
< 
int 
> 
AssignRoleAndModule ,
(, -
AssignRoleDto- :

requestObj; E
,E F
CancellationTokenG X
TokenY ^
)^ _
;_ `
public   
Task   
<   
bool   
>   
RemoveAssignedRole   ,
(  , -
string  - 3
empId  4 9
,  9 :
string  ; A
moduleId  B J
,  J K
string  L R
roleId  S Y
,  Y Z
CancellationToken  [ l
Token  m r
)  r s
;  s t
public!! 
Task!! 
<!! 
List!! 
<!! 
AssignRoleDto!! &
>!!& '
>!!' ("
GetEmployeeRoleDetails!!) ?
(!!? @
string!!@ F

employeeId!!G Q
,!!Q R
CancellationToken!!S d
Token!!e j
)!!j k
;!!k l
}## 
}$$ …
iD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\AdminModule\IGenericAdminModuleRepository.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
AdminModule8 C
{ 
public

 

	interface

 )
IGenericAdminModuleRepository

 2
{ 
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
;W X
public 
Task 
< 
object 
> 
UpdateAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
;Z [
public## 
Task## 
<## 
object## 
>## 
DeleteAsync## '
(##' (
object##( .
Id##/ 1
,##1 2
CancellationToken##3 D
cancellationToken##E V
)##V W
;##W X
public** 
Task** 
<** 
List** 
<** 
object** 
>**  
>**  !
GetAllAsync**" -
(**- .
CancellationToken**. ?
cancellationToken**@ Q
)**Q R
;**R S
public22 
Task22 
<22 
object22 
>22 
GetByIdAsync22 (
(22( )
object22) /
Id220 2
,222 3
CancellationToken224 E
cancellationToken22F W
)22W X
;22X Y
}44 
}55 ø
ÖD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\AssociateSisterConcernDetails\ISisterConcernDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J)
AssociateSisterConcernDetailsJ g
{		 
public 

	interface !
ISisterConcernDetails *
{ 	
public 
Task 
< 
IEnumerable 
<  #
SisterConcernDetailsDTO  7
>7 8
>8 9#
AddSisterConcernDetails: Q
(Q R
ListR V
<V W#
SisterConcernDetailsDTOW n
>n o
SisterConcernDTO	p Ä
,
Ä Å
CancellationToken
Ç ì
token
î ô
)
ô ö
;
ö õ
public 
Task 
< 
IEnumerable 
<  #
SisterConcernDetailsDTO  7
>7 8
>8 9&
UpdateSisterConcernDetails: T
(T U
ListU Y
<Y Z#
SisterConcernDetailsDTOZ q
>q r
SisterConcernDTO	s É
,
É Ñ
CancellationToken
Ö ñ
token
ó ú
)
ú ù
;
ù û
public%% 
Task%% 
<%% 
List%% 
<%% #
SisterConcernDetailsDTO%% 0
>%%0 1
>%%1 2'
GetByIdSisterConcernDetails%%3 N
(%%N O
int%%O R
	enquiryId%%S \
,%%\ ]
CancellationToken%%^ o
token%%p u
)%%u v
;%%v w
public-- 
Task-- 
<-- 
bool-- 
>-- &
DeleteSisterConcernDetails-- 4
(--4 5
int--5 8
EnqSisId--9 A
,--A B
CancellationToken--C T
token--U Z
)--Z [
;--[ \
public.. 
Task.. 
<.. 
bool.. 
>.. -
!DeleteSisterConcernDetailsByEnqId.. ;
(..; <
int..< ?
	EnqtempId..@ I
,..I J
CancellationToken..K \
token..] b
)..b c
;..c d
}// 	
}00 ’
éD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\AssociateSisterConcernDetails\ISisterConcernFinancialDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J)
AssociateSisterConcernDetailsJ g
{		 
public 

	interface *
ISisterConcernFinancialDetails 3
{ 
public 
Task 
< 
IEnumerable 
<  ,
 SisterConcernFinancialDetailsDTO  @
>@ A
>A B,
 AddSisterConcernFinancialDetailsC c
(c d
Listd h
<h i-
 SisterConcernFinancialDetailsDTO	i â
>
â ä
SisterConcernDTO
ã õ
,
õ ú
CancellationToken
ù Æ
token
Ø ¥
)
¥ µ
;
µ ∂
public 
Task 
< 
IEnumerable 
<  ,
 SisterConcernFinancialDetailsDTO  @
>@ A
>A B/
#UpdateSisterConcernFinancialDetailsC f
(f g
Listg k
<k l-
 SisterConcernFinancialDetailsDTO	l å
>
å ç
SisterConcernDTO
é û
,
û ü
CancellationToken
† ±
token
≤ ∑
)
∑ ∏
;
∏ π
public%% 
Task%% 
<%% 
List%% 
<%% ,
 SisterConcernFinancialDetailsDTO%% 9
>%%9 :
>%%: ;0
$GetByIdSisterConcernFinancialDetails%%< `
(%%` a
int%%a d
	enquiryId%%e n
,%%n o
CancellationToken	%%p Å
token
%%Ç á
)
%%á à
;
%%à â
public-- 
Task-- 
<-- 
bool-- 
>-- /
#DeleteSisterConcernFinancialDetails-- =
(--= >
int--> A
	enquiryId--B K
,--K L
CancellationToken--M ^
token--_ d
)--d e
;--e f
public55 
Task55 
<55 ,
 SisterConcernFinancialDetailsDTO55 4
>554 50
$GetBySisterIdConcernFinancialDetails556 Z
(55Z [
int55[ ^
sisterId55_ g
,55g h
CancellationToken55i z
token	55{ Ä
)
55Ä Å
;
55Å Ç
}66 
}77 Ô
^D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\IEnquiryHome.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8
EnquirySubmission		8 I
{

 
public 

	interface 
IEnquiryHomeService (
{ 
public 
Task 
< 
bool 
> 
DeleteEnquiryAsync ,
(, -
int- 0
	enquiryId1 :
,: ;
CancellationToken< M
tokenN S
)S T
;T U
public 
Task 
< 
IEnumerable 
<  
EnquirySummary  .
>. /
>/ 0
GetAllEnquiryAsync1 C
(C D
CancellationTokenE V
tokenW \
)\ ]
;] ^
public## 
Task## 
<## 

EnquiryDTO## 
>## 
GetEnquiryByIdAsync##  3
(##3 4
int##4 7
Id##8 :
,##: ;
CancellationToken##< M
token##N S
)##S T
;##T U
public,, 
Task,, 
<,, 
int,, 
>,, 
SubmitEnquiry,, &
(,,& '
string,,' -
summary,,. 5
,,,5 6
int,,7 :
	enquiryId,,; D
,,,D E
CancellationToken,,F W
token,,X ]
),,] ^
;,,^ _
public44 
Task44 
<44 
int44 
>44 
AddNewEnqiry44 %
(44% &
string44& ,
pan44- 0
,440 1
CancellationToken442 C
token44D I
)44I J
;44J K
public:: 
Task:: 
<:: 
IEnumerable:: 
<::  
EnquirySummary::  .
>::. /
>::/ 0(
GetAllEnquiriesForAdminAsync::1 M
(::M N
CancellationToken::N _
token::` e
)::e f
;::f g
Task;; 
<;; 
bool;; 
>;; 
UpdateEnquiryStatus;; &
(;;& '
int;;' *
	enquiryId;;+ 4
,;;4 5
int;;6 9
	EnqStatus;;: C
,;;C D
CancellationToken;;E V
token;;W \
);;\ ]
;;;] ^
Task<< 
<<< 
int<< 
><< 5
)UpdateEnquiryAssociateSisterConcernStatus<< ;
(<<; <
int<<< ?
	enquiryId<<@ I
,<<I J
bool<<K O
Status<<P V
,<<V W
CancellationToken<<X i
token<<j o
)<<o p
;<<p q
}== 
}>> ˚
pD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\ProjectDetails\IMeansofFinance.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
EnquirySubmission

8 I
.

I J
ProjectDetails

J X
{ 
public 

	interface 
IMeansofFinance $
{ 
public 
Task 
< $
ProjectMeansOfFinanceDTO ,
>, - 
GetAllMeansOfFinance. B
(B C$
ProjectMeansOfFinanceDTOC [!
ProjectMeansOfFinance\ q
,q r
CancellationToken	s Ñ
token
Ö ä
)
ä ã
;
ã å
public 
Task 
< 
IEnumerable 
<  $
ProjectMeansOfFinanceDTO  8
>8 9
>9 :
AddMeansOfFinance; L
(L M
ListM Q
<Q R$
ProjectMeansOfFinanceDTOR j
>j k"
ProjectMeansOfFinance	l Å
,
Å Ç
CancellationToken
É î
token
ï ö
)
ö õ
;
õ ú
public 
Task 
< 
IEnumerable 
<  $
ProjectMeansOfFinanceDTO  8
>8 9
>9 : 
UpdateMeansOfFinance; O
(O P
ListP T
<T U$
ProjectMeansOfFinanceDTOU m
>m n"
ProjectMeansOfFinance	o Ñ
,
Ñ Ö
CancellationToken
Ü ó
token
ò ù
)
ù û
;
û ü
public 
Task 
< 
bool 
>  
DeleteMeansOfFinance .
(. /
int/ 2
Id3 5
,5 6
CancellationToken7 H
tokenI N
)N O
;O P
public 
Task 
< $
ProjectMeansOfFinanceDTO ,
>, -!
GetByIdMeansOfFinance. C
(C D
intD G
IdH J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
} 
} ˛
tD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\ProjectDetails\IProjectCostDetails.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
EnquirySubmission

8 I
.

I J
ProjectDetails

J X
{ 
public 

	interface 
IProjectCostDetails (
{ 
public 
Task 
< !
ProjectCostDetailsDTO )
>) *
GetAllProjectCosts+ =
(= >
CancellationToken> O
tokenP U
)U V
;V W
public 
Task 
< 
List 
< !
ProjectCostDetailsDTO .
>. /
>/ 0!
AddProjectCostDetails1 F
(F G
ListG K
<K L!
ProjectCostDetailsDTOL a
>a b
projectCostc n
,n o
CancellationToken	p Å
token
Ç á
)
á à
;
à â
public 
Task 
< 
bool 
> $
UpdateProjectCostDetails 2
(2 3!
ProjectCostDetailsDTO3 H
projectCostI T
,T U
CancellationTokenV g
tokenh m
)m n
;n o
public 
Task 
< 
bool 
> $
DeleteProjectCostDetails 2
(2 3
int3 6
Id7 9
,9 :
CancellationToken; L
tokenM R
)R S
;S T
public 
Task 
< !
ProjectCostDetailsDTO )
>) *%
GetByIdProjectCostDetails+ D
(D E
intE H
IdI K
,K L
CancellationTokenM ^
token_ d
)d e
;e f
} 
}  
yD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\ProjectDetails\IProjectFinancialDetails.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
EnquirySubmission

8 I
.

I J
ProjectDetails

J X
{ 
public 

	interface $
IProjectFinancialDetails -
{ 
public 
Task 
< *
ProjectFinancialYearDetailsDTO 2
>2 3"
GetAllProjectFinancial4 J
(J K*
ProjectFinancialYearDetailsDTOK i
projectCostj u
,u v
CancellationToken	w à
token
â é
)
é è
;
è ê
public 
Task 
< 
IEnumerable 
<  *
ProjectFinancialYearDetailsDTO  >
>> ?
>? @&
AddProjectFinancialDetailsA [
([ \
List\ `
<` a*
ProjectFinancialYearDetailsDTOa 
>	 Ä
projectCost
Å å
,
å ç
CancellationToken
é ü
token
† •
)
• ¶
;
¶ ß
public 
Task 
< 
IEnumerable 
<  *
ProjectFinancialYearDetailsDTO  >
>> ?
>? @)
UpdateProjectFinancialDetailsA ^
(^ _
List_ c
<c d+
ProjectFinancialYearDetailsDTO	d Ç
>
Ç É
projectFinancial
Ñ î
,
î ï
CancellationToken
ñ ß
token
® ≠
)
≠ Æ
;
Æ Ø
public 
Task 
< 
bool 
> )
DeleteProjectFinancialDetails 7
(7 8
int8 ;
Id< >
,> ?
CancellationToken@ Q
tokenR W
)W X
;X Y
public 
Task 
< *
ProjectFinancialYearDetailsDTO 2
>2 3*
GetByIdProjectFinancialDetails4 R
(R S
intS V
IdW Y
,Y Z
CancellationToken[ l
tokenm r
)r s
;s t
} 
} ª
wD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\ProjectDetails\IWorkingCapitalDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J
ProjectDetailsJ X
{		 
public 

	interface "
IWorkingCapitalDetails +
{ 
public 
Task 
< ,
 ProjectWorkingCapitalDeatailsDTO 4
>4 5$
AddWorkingCapitalDetails6 N
(N O,
 ProjectWorkingCapitalDeatailsDTOO o
WorkingCapitalDTO	p Å
,
Å Ç
CancellationToken
É î
token
ï ö
)
ö õ
;
õ ú
public 
Task 
< ,
 ProjectWorkingCapitalDeatailsDTO 4
>4 5'
UpdateWorkingCapitalDetails6 Q
(Q R,
 ProjectWorkingCapitalDeatailsDTOR r
WorkingCapitalDTO	s Ñ
,
Ñ Ö
CancellationToken
Ü ó
token
ò ù
)
ù û
;
û ü
public%% 
Task%% 
<%% ,
 ProjectWorkingCapitalDeatailsDTO%% 4
>%%4 5(
GetByIdWorkingCapitalDetails%%6 R
(%%R S
int%%S V
	enquiryId%%W `
,%%` a
CancellationToken%%b s
token%%t y
)%%y z
;%%z {
public-- 
Task-- 
<-- 
bool-- 
>-- '
DeleteWorkingCapitalDetails-- 5
(--5 6
int--6 9
	enquiryId--: C
,--C D
CancellationToken--E V
token--W \
)--\ ]
;--] ^
}.. 
}// ˘
äD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\PromoterGuarantorDetails\IGuarantorAssetsNetWorthDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J$
PromoterGuarantorDetailsJ b
{		 
public 

	interface +
IGuarantorAssetsNetWorthDetails 4
{ 
public 
Task 
< 
IEnumerable #
<# $&
GuarantorAssetsNetWorthDTO$ >
>> ?
>? @-
!AddGuarantorAssetsNetWorthDetailsA b
(b c
Listc g
<g h'
GuarantorAssetsNetWorthDTO	h Ç
>
Ç É!
GuarantorAssetNWDTO
Ñ ó
,
ó ò
CancellationToken
ô ™
token
´ ∞
)
∞ ±
;
± ≤
public 
Task 
< 
IEnumerable 
<  &
GuarantorAssetsNetWorthDTO  :
>: ;
>; <0
$UpdateGuarantorAssetsNetWorthDetails= a
(a b
Listb f
<f g'
GuarantorAssetsNetWorthDTO	g Å
>
Å Ç!
GuarantorAssetNWDTO
É ñ
,
ñ ó
CancellationToken
ò ©
token
™ Ø
)
Ø ∞
;
∞ ±
public&& 
Task&& 
<&& 
List&& 
<&& &
GuarantorAssetsNetWorthDTO&& 3
>&&3 4
>&&4 51
%GetByIdGuarantorAssetsNetWorthDetails&&6 [
(&&[ \
int&&\ _
	enquiryId&&` i
,&&i j
CancellationToken&&k |
token	&&} Ç
)
&&Ç É
;
&&É Ñ
public.. 
Task.. 
<.. 
bool.. 
>.. 0
$DeleteGuarantorAssetsNetWorthDetails.. B
(..B C
int..C F
	enquiryId..G P
,..P Q
CancellationToken..R c
token..d i
)..i j
;..j k
}// 	
}00 ﬁ
|D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\PromoterGuarantorDetails\IGuarantorDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J$
PromoterGuarantorDetailsJ b
{ 
public 

	interface 
IGuarantorDetails &
{ 
public 
Task 
< 
IEnumerable #
<# $
GuarantorDetailsDTO$ 7
>7 8
>8 9
AddGuarantorDetails: M
(M N
ListN R
<R S
GuarantorDetailsDTOS f
>f g
GuarantorDTOh t
,t u
CancellationToken	v á
token
à ç
)
ç é
;
é è
public 
Task 
< 
IEnumerable #
<# $
GuarantorDetailsDTO$ 7
>7 8
>8 9"
UpdateGuarantorDetails: P
(P Q
ListQ U
<U V
GuarantorDetailsDTOV i
>i j
GuarantorDTOk w
,w x
CancellationToken	y ä
token
ã ê
)
ê ë
;
ë í
public$$ 
Task$$ 
<$$ 
List$$ 
<$$ 
GuarantorDetailsDTO$$ 0
>$$0 1
>$$1 2#
GetByIdGuarantorDetails$$3 J
($$J K
int$$K N
	enquiryId$$O X
,$$X Y
CancellationToken$$Z k
token$$l q
)$$q r
;$$r s
public,, 
Task,, 
<,, 
bool,, 
>,, "
DeleteGuarantorDetails,, 4
(,,4 5
int,,5 8
	EnqGuarId,,9 B
,,,B C
CancellationToken,,D U
token,,V [
),,[ \
;,,\ ]
}-- 	
}.. œ
ÖD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\PromoterGuarantorDetails\IGuarantorLiabilityDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J$
PromoterGuarantorDetailsJ b
{		 
public 

	interface &
IGuarantorLiabilityDetails /
{ 
public 
Task 
< 
IEnumerable 
<  (
GuarantorLiabilityDetailsDTO  <
>< =
>= >(
AddGuarantorLiabilityDetails? [
([ \
List\ `
<` a(
GuarantorLiabilityDetailsDTOa }
>} ~
GuarantorDTO	 ã
,
ã å
CancellationToken
ç û
token
ü §
)
§ •
;
• ¶
public 
Task 
< 
IEnumerable 
<  (
GuarantorLiabilityDetailsDTO  <
>< =
>= >+
UpdateGuarantorLiabilityDetails? ^
(^ _
List_ c
<c d)
GuarantorLiabilityDetailsDTO	d Ä
>
Ä Å
GuarantorDTO
Ç é
,
é è
CancellationToken
ê °
token
¢ ß
)
ß ®
;
® ©
public%% 
Task%% 
<%% 
List%% 
<%% (
GuarantorLiabilityDetailsDTO%% 5
>%%5 6
>%%6 7,
 GetByIdGuarantorLiabilityDetails%%8 X
(%%X Y
int%%Y \
	enquiryId%%] f
,%%f g
CancellationToken%%h y
token%%z 
)	%% Ä
;
%%Ä Å
public-- 
Task-- 
<-- 
bool-- 
>-- +
DeleteGuarantorLiabilityDetails-- 9
(--9 :
int--: =
	enquiryId--> G
,--G H
CancellationToken--I Z
token--[ `
)--` a
;--a b
}// 
}00 ¡
ÜD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\PromoterGuarantorDetails\IGuarantorLiabilityNetWorth.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J$
PromoterGuarantorDetailsJ b
{		 
public 

	interface '
IGuarantorLiabilityNetWorth 0
{ 
public 
Task 
< 
IEnumerable 
<  '
GuarantorNetWorthDetailsDTO  ;
>; <
>< ='
AddGuarantorNetWorthDetails> Y
(Y Z
ListZ ^
<^ _'
GuarantorNetWorthDetailsDTO_ z
>z {
NetWorthDTO	| á
,
á à
CancellationToken
â ö
token
õ †
)
† °
;
° ¢
public 
Task 
< 
IEnumerable 
<  '
GuarantorNetWorthDetailsDTO  ;
>; <
>< =*
UpdateGuarantorNetWorthDetails> \
(\ ]
List] a
<a b'
GuarantorNetWorthDetailsDTOb }
>} ~
NetWorthDTO	 ä
,
ä ã
CancellationToken
å ù
token
û £
)
£ §
;
§ •
public%% 
Task%% 
<%% 
List%% 
<%% '
GuarantorNetWorthDetailsDTO%% 4
>%%4 5
>%%5 6+
GetByIdGuarantorNetWorthDetails%%7 V
(%%V W
int%%W Z
	enquiryId%%[ d
,%%d e
CancellationToken%%f w
token%%x }
)%%} ~
;%%~ 
public-- 
Task-- 
<-- 
bool-- 
>-- *
DeleteGuarantorNetWorthDetails-- 8
(--8 9
int--9 <
	enquiryId--= F
,--F G
CancellationToken--H Y
token--Z _
)--_ `
;--` a
}.. 	
}// Â
âD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\PromoterGuarantorDetails\IPromoterAssetsNetWorthDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J$
PromoterGuarantorDetailsJ b
{		 
public 

	interface *
IPromoterAssetsNetWorthDetails 3
{ 	
public 
Task 
< 
IEnumerable #
<# $%
PromoterAssetsNetWorthDTO$ =
>= >
>> ?,
 AddPromoterAssetsNetWorthDetails@ `
(` a
Lista e
<e f%
PromoterAssetsNetWorthDTOf 
>	 Ä
AssetsNetWorthDTO
Å í
,
í ì
CancellationToken
î •
token
¶ ´
)
´ ¨
;
¨ ≠
public 
Task 
< 
IEnumerable 
<  %
PromoterAssetsNetWorthDTO  9
>9 :
>: ;/
#UpdatePromoterAssetsNetWorthDetails< _
(_ `
List` d
<d e%
PromoterAssetsNetWorthDTOe ~
>~ 
AssetsNetWorthDTO
Ä ë
,
ë í
CancellationToken
ì §
token
• ™
)
™ ´
;
´ ¨
public&& 
Task&& 
<&& 
List&& 
<&& %
PromoterAssetsNetWorthDTO&& 2
>&&2 3
>&&3 40
$GetByIdPromoterAssetsNetWorthDetails&&5 Y
(&&Y Z
int&&Z ]
	enquiryId&&^ g
,&&g h
CancellationToken&&i z
token	&&{ Ä
)
&&Ä Å
;
&&Å Ç
public.. 
Task.. 
<.. 
bool.. 
>.. /
#DeletePromoterAssetsNetWorthDetails.. A
(..A B
int..B E
	enquiryId..F O
,..O P
CancellationToken..Q b
token..c h
)..h i
;..i j
}// 	
}00 ÿ
{D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\PromoterGuarantorDetails\IPromoterDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J$
PromoterGuarantorDetailsJ b
{		 
public 

	interface 
IPromoterDetails %
{ 	
public 
Task 
< 
IEnumerable #
<# $
PromoterDetailsDTO$ 6
>6 7
>7 8
AddPromoterDetails9 K
(K L
ListL P
<P Q
PromoterDetailsDTOQ c
>c d
PromoterDTOe p
,p q
CancellationToken	r É
token
Ñ â
)
â ä
;
ä ã
public 
Task 
< 
IEnumerable #
<# $
PromoterDetailsDTO$ 6
>6 7
>7 8!
UpdatePromoterDetails9 N
(N O
ListO S
<S T
PromoterDetailsDTOT f
>f g
PromoterDTOh s
,s t
CancellationToken	u Ü
token
á å
)
å ç
;
ç é
public%% 
Task%% 
<%% 
IEnumerable%% #
<%%# $
PromoterDetailsDTO%%$ 6
>%%6 7
>%%7 8"
GetByIdPromoterDetails%%9 O
(%%O P
int%%P S
	enquiryId%%T ]
,%%] ^
CancellationToken%%_ p
token%%q v
)%%v w
;%%w x
public-- 
Task-- 
<-- 
bool-- 
>-- !
DeletePromoterDetails-- 3
(--3 4
int--4 7
	EnqPromId--8 A
,--A B
CancellationToken--C T
token--U Z
)--Z [
;--[ \
}// 	
}00 ø
ÑD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\PromoterGuarantorDetails\IPromoterLiabilityDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J$
PromoterGuarantorDetailsJ b
{ 
public 

	interface %
IPromoterLiabilityDetails .
{ 
public 
Task 
< 
IEnumerable 
<  '
PromoterLiabilityDetailsDTO  ;
>; <
>< ='
AddPromoterLiabilityDetails> Y
(Y Z
ListZ ^
<^ _'
PromoterLiabilityDetailsDTO_ z
>z {
ProLiabilityDTO	| ã
,
ã å
CancellationToken
ç û
token
ü §
)
§ •
;
• ¶
public 
Task 
< 
IEnumerable 
<  '
PromoterLiabilityDetailsDTO  ;
>; <
>< =*
UpdatePromoterLiabilityDetails> \
(\ ]
List] a
<a b'
PromoterLiabilityDetailsDTOb }
>} ~
PromoterDTO	 ä
,
ä ã
CancellationToken
å ù
token
û £
)
£ §
;
§ •
public$$ 
Task$$ 
<$$ 
List$$ 
<$$ '
PromoterLiabilityDetailsDTO$$ 4
>$$4 5
>$$5 6+
GetByIdPromoterLiabilityDetails$$7 V
($$V W
int$$W Z
	enquiryId$$[ d
,$$d e
CancellationToken$$f w
token$$x }
)$$} ~
;$$~ 
public,, 
Task,, 
<,, 
bool,, 
>,, *
DeletePromoterLiabilityDetails,, 8
(,,8 9
int,,9 <
	enquiryId,,= F
,,,F G
CancellationToken,,H Y
token,,Z _
),,_ `
;,,` a
}.. 
}// ˜
ÖD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\PromoterGuarantorDetails\IPromoterLiabilityNetWorth.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8
EnquirySubmission		8 I
.		I J$
PromoterGuarantorDetails		J b
{

 
public 

	interface &
IPromoterLiabilityNetWorth /
{ 
public 
Task 
< 
IEnumerable 
<  &
PromoterNetWorthDetailsDTO  :
>: ;
>; </
#AddPromoterLiabilityNetWorthDetails= `
(` a
Lista e
<e f'
PromoterNetWorthDetailsDTO	f Ä
>
Ä Å)
GuarantorNetWorthDetailsDTO
Ç ù
,
ù û
CancellationToken
ü ∞
token
± ∂
)
∂ ∑
;
∑ ∏
public 
Task 
< 
IEnumerable 
<  &
PromoterNetWorthDetailsDTO  :
>: ;
>; <2
&UpdatePromoterLiabilityNetWorthDetails= c
(c d
Listd h
<h i'
PromoterNetWorthDetailsDTO	i É
>
É Ñ
PromoterDTO
Ö ê
,
ê ë
CancellationToken
í £
token
§ ©
)
© ™
;
™ ´
public&& 
Task&& 
<&& 
List&& 
<&& &
PromoterNetWorthDetailsDTO&& 3
>&&3 4
>&&4 53
'GetByIdPromoterLiabilityNetWorthDetails&&6 ]
(&&] ^
int&&^ a
	enquiryId&&b k
,&&k l
CancellationToken&&m ~
token	&& Ñ
)
&&Ñ Ö
;
&&Ö Ü
public.. 
Task.. 
<.. 
bool.. 
>.. 2
&DeletePromoterLiabilityNetWorthDetails.. @
(..@ A
int..A D
	enquiryId..E N
,..N O
CancellationToken..P a
token..b g
)..g h
;..h i
}// 	
}00 €
zD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\SecurityDocumentDetails\ISecurityDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
EnquirySubmission8 I
.I J#
SecurityDocumentDetailsJ a
{ 
public 

	interface 
ISecurityDetails %
{ 
public 
Task 
< 
IEnumerable 
<  
SecurityDetailsDTO  2
>2 3
>3 4
AddSecurityDetails5 G
(G H
ListH L
<L M
SecurityDetailsDTOM _
>_ `
SecurityDetailsDTOa s
,s t
CancellationToken	u Ü
token
á å
)
å ç
;
ç é
public 
Task 
< 
IEnumerable 
<  
SecurityDetailsDTO  2
>2 3
>3 4!
UpdateSecurityDetails5 J
(J K
ListK O
<O P
SecurityDetailsDTOP b
>b c
SecurityDetailsDTOd v
,v w
CancellationToken	x â
token
ä è
)
è ê
;
ê ë
public%% 
Task%% 
<%% 
List%% 
<%% 
SecurityDetailsDTO%% +
>%%+ ,
>%%, -"
GetByIdSecurityDetails%%. D
(%%D E
int%%E H
	enquiryId%%I R
,%%R S
CancellationToken%%T e
token%%f k
)%%k l
;%%l m
public-- 
Task-- 
<-- 
bool-- 
>-- !
DeleteSecurityDetails-- /
(--/ 0
int--0 3
	enquiryId--4 =
,--= >
CancellationToken--? P
token--Q V
)--V W
;--W X
}.. 
}00 ¿
mD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\UnitDetails\IAddressDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
UnitDetails8 C
.C D
EnquirySubmissionD U
{ 
public 

	interface 
IAddressDetails $
{ 
public 
Task 
< 
IEnumerable 
<  
AddressDetailsDTO  1
>1 2
>2 3
AddAddressDetails4 E
(E F
ListF J
<J K
AddressDetailsDTOK \
>\ ]

addressDTO^ h
,h i
CancellationTokenj {
token	| Å
)
Å Ç
;
Ç É
public 
Task 
< 
IEnumerable 
<  
AddressDetailsDTO  1
>1 2
>2 3 
UpdateAddressDetails4 H
(H I
ListI M
<M N
AddressDetailsDTON _
>_ `

addressDTOa k
,k l
CancellationTokenm ~
token	 Ñ
)
Ñ Ö
;
Ö Ü
public$$ 
Task$$ 
<$$ 
AddressDetailsDTO$$ %
>$$% &!
GetByIdAddressDetails$$' <
($$< =
int$$= @
id$$A C
,$$C D
CancellationToken$$E V
token$$W \
)$$\ ]
;$$] ^
public,, 
Task,, 
<,, 
List,, 
<,, 
AddressDetailsDTO,, *
>,,* +
>,,+ ,(
GetAddressDetailsByEnquiryId,,- I
(,,I J
int,,J M
	enquiryId,,N W
,,,W X
CancellationToken,,Y j
token,,k p
),,p q
;,,q r
public44 
Task44 
<44 
bool44 
>44  
DeleteAddressDetails44 -
(44- .
int44. 1
	enquiryId442 ;
,44; <
CancellationToken44= N
token44O T
)44T U
;44U V
}55 
}66 â
jD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\UnitDetails\IBankDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
UnitDetails8 C
.C D
EnquirySubmissionD U
{		 
public 

	interface 
IBankDetails !
{ 
public 
Task 
< 
BankDetailsDTO "
>" #
AddBankDetailsAsync$ 7
(7 8
BankDetailsDTO8 F
bankDTOG N
,N O
CancellationTokenP a
tokenb g
)g h
;h i
public 
Task 
< 
BankDetailsDTO "
>" #"
UpdateBankDetailsAsync$ :
(: ;
BankDetailsDTO; I
bankDTOJ Q
,Q R
CancellationTokenS d
tokene j
)j k
;k l
public%% 
Task%% 
<%% 
BankDetailsDTO%% "
>%%" ##
GetByIdBankDetailsAsync%%$ ;
(%%; <
int%%< ?
	enquiryId%%@ I
,%%I J
CancellationToken%%K \
token%%] b
)%%b c
;%%c d
public-- 
Task-- 
<-- 
bool-- 
>-- "
DeleteBankDetailsAsync-- 0
(--0 1
int--1 4
	enquiryId--5 >
,--> ?
CancellationToken--@ Q
token--R W
)--W X
;--X Y
}.. 
}// å
kD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\UnitDetails\IBasicDetails.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
UnitDetails8 C
.C D
EnquirySubmissionD U
{ 
public

 

	interface

 
IBasicDetails

 "
{ 
public 
Task 
< 
BasicDetailsDto #
># $
AddBasicDetails% 4
(4 5
BasicDetailsDto5 D
basicDetailsDTOE T
,T U
CancellationTokenV g
tokenh m
)m n
;n o
public 
Task 
< 
BasicDetailsDto #
># $
UpdateBasicDetails% 7
(7 8
BasicDetailsDto8 G
basicDetailsDTOH W
,W X
CancellationTokenY j
tokenk p
)p q
;q r
public"" 
Task"" 
<"" 
BasicDetailsDto"" #
>""# $
GetBasicDetails""% 4
(""4 5
int""5 8
	enquiryId""9 B
,""B C
CancellationToken""D U
token""V [
)""[ \
;""\ ]
public** 
Task** 
<** 
bool** 
>** 
DeleteBasicDetails** +
(**+ ,
int**, /
	enquiryId**0 9
,**9 :
CancellationToken**; L
token**M R
)**R S
;**S T
}++ 
},, ±
rD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\EnquirySubmission\UnitDetails\IRegistrationDetails.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8
UnitDetails		8 C
.		C D
EnquirySubmission		D U
{

 
public 

	interface  
IRegistrationDetails )
{ 
public 
Task 
< 
IEnumerable 
<  $
RegistrationNoDetailsDTO  8
>8 9
>9 :"
AddRegistrationDetails; Q
(Q R
ListR V
<V W$
RegistrationNoDetailsDTOW o
>o p
registrationDTO	q Ä
,
Ä Å
CancellationToken
Ç ì
token
î ô
)
ô ö
;
ö õ
public 
Task 
< 
IEnumerable 
<  $
RegistrationNoDetailsDTO  8
>8 9
>9 :%
UpdateRegistrationDetails; T
(T U
ListU Y
<Y Z$
RegistrationNoDetailsDTOZ r
>r s
registrationDTO	t É
,
É Ñ
CancellationToken
Ö ñ
token
ó ú
)
ú ù
;
ù û
public&& 
Task&& 
<&& 
IEnumerable&& 
<&&  $
RegistrationNoDetailsDTO&&  8
>&&8 9
>&&9 :-
!GetRegistrationDetailsByEnquiryId&&; \
(&&\ ]
int&&] `
	enquiryId&&a j
,&&j k
CancellationToken&&l }
token	&&~ É
)
&&É Ñ
;
&&Ñ Ö
public.. 
Task.. 
<.. $
RegistrationNoDetailsDTO.. ,
>.., -(
GetRegistrationNoDetailsById... J
(..J K
int..K N
Id..O Q
,..Q R
CancellationToken..S d
token..e j
)..j k
;..k l
public66 
Task66 
<66 
bool66 
>66 %
DeleteRegistrationDetails66 2
(662 3
int663 6
	enquiryId667 @
,66@ A
CancellationToken66B S
token66T Y
)66Y Z
;66Z [
}77 
}88 È!
OD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IAccountService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
{ 
public		 

	interface		 
IAccountService		 $
{

 
public 
Task 
< 
bool 
> 
SaveUserTryAction +
(+ ,
string, 2

verDetails3 =
,= >
string? E
verTypeF M
,M N
stringO U
	verStatusV _
,_ `
inta d
regIde j
,j k
stringk q
Processr y
,y z
CancellationToken	{ å
token
ç í
)
í ì
;
ì î
public 
Task 
< 
int 
> 
SaveRegistration )
() *
RegduserTab* 5
registrationDetails6 I
,I J
CancellationTokenK \
token] b
)b c
;c d
public 
Task 
< 
bool 
> 
IsIpUnderKSWAN (
(( )
string) /
ip0 2
,2 3
CancellationToken4 E
tokenF K
)K L
;L M
public 
Task 
< 
TblEmpdscTab  
>  !

AdminLogin" ,
(, -
string- 3
empId4 9
,9 :
string; A
passwordB J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
public 
Task 
< 
bool 
> 
IsCustAlreadyActive -
(- .
string. 4
panNum5 ;
,; <
CancellationToken= N
tokenO T
)T U
;U V
public 
Task 
< 
string 
> 
GetUserMobile )
() *
string* 0
panNum1 7
,7 8
CancellationToken9 J
tokenK P
)P Q
;Q R
public 
Task 
< 
bool 
> 
IsAdmAlreadyActive ,
(, -
string- 3

EmployeeId4 >
,> ?
CancellationToken@ Q
tokenR W
)W X
;X Y
public 
Task 
< 
TblEmpdscTab  
>  !"
KsfcUserForgotPassword" 8
(8 9
string9 ?
empId@ E
,E F
CancellationTokenG X
tokenY ^
)^ _
;_ `
public 
Task 
< 
bool 
> 
UpdateNewpassword +
(+ ,
string, 2
empId3 8
,8 9
string: @
newPasswordA L
,L M
CancellationTokenN _
token` e
)e f
;f g
public 
Task 
< 
bool 
> 
AdminLogout %
(% &
string& ,
empId- 2
,2 3
CancellationToken4 E
tokenF K
)K L
;L M
public 
Task 
< 
TblEmpdscTab  
>  !
EmpPasswordChange" 3
(3 4
PasswordChangeDTO4 E
infoF J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
public 
Task 
< 
bool 
> 
CustomerLogout (
(( )
string) /
panNum0 6
,6 7
CancellationToken8 I
tokenJ O
)O P
;P Q
public 
Task 
< 
List 
< 
string 
>  
>  !
GetAssignedRoles" 2
(2 3
string3 9
empId: ?
,? @
CancellationTokenA R
tokenS X
)X Y
;Y Z
} 
} ‡Ä
ND:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\ICommonService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
{		 
public

 

	interface

 
ICommonService

 #
{ 
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, - 
GetOfficeBranchAsync. B
(B C
CancellationTokenC T
tokenU Z
)Z [
;[ \
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -
GetLoanPurposeAsync. A
(A B
CancellationTokenB S
tokenT Y
)Y Z
;Z [
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -
GetSizeOfFirmAsync. @
(@ A
CancellationTokenA R
tokenS X
)X Y
;Y Z
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -
GetDistrictAsync. >
(> ?
CancellationToken? P
tokenQ V
)V W
;W X
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -$
GetNatureOfPremisesAsync. F
(F G
CancellationTokenG X
tokenY ^
)^ _
;_ `
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -
GetTalukaAsync. <
(< =
int= @

DistrictIdA K
,K L
CancellationTokenM ^
token_ d
)d e
;e f
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -
GetHobliAsync. ;
(; <
int< ?
TalukaId@ H
,H I
CancellationTokenJ [
token\ a
)a b
;b c
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -
GetVillageAsync. =
(= >
int> A
HobliIdB I
,I J
CancellationTokenK \
token] b
)b c
;c d
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -$
GetRegistrationTypeAsync. F
(F G
CancellationTokenG X
tokenY ^
)^ _
;_ `
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -'
GetPositionDesignationAsync. I
(I J
CancellationTokenJ [
token\ a
)a b
;b c
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -#
GetConstituenttypeAsync. E
(E F
CancellationTokenF W
tokenX ]
)] ^
;^ _
public 
Task 
< 
IEnumerable 
<  !
ConstitutionMasterDTO  5
>5 6
>6 7"
GetAllConstitutionData8 N
(N O
CancellationTokenO `
tokena f
)f g
;g h
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -"
GetDomicileStatusAsync. D
(D E
CancellationTokenE V
tokenW \
)\ ]
;] ^
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -!
GetModeofAcquireAsync. C
(C D
CancellationTokenD U
tokenV [
)[ \
;\ ]
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -"
GetNameOFFacilityAsync. D
(D E
CancellationTokenE V
tokenW \
)\ ]
;] ^
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -!
GetFinancialYearAsync. C
(C D
CancellationTokenD U
tokenV [
)[ \
;\ ]
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -&
GetFinancialComponentAsync. H
(H I
CancellationTokenI Z
token[ `
)` a
;a b
public 
Task 
< 
IEnumerable 
<  
DropDownDTO  +
>+ ,
>, -'
GetPojectCostComponentAsync. I
(I J
CancellationTokenJ [
token\ a
)a b
;b c
public   
Task   
<   
IEnumerable   
<    
DropDownDTO    +
>  + ,
>  , -*
GetMeansofFinanceCategoryAsync  . L
(  L M
CancellationToken  M ^
token  _ d
)  d e
;  e f
public!! 
Task!! 
<!! 
IEnumerable!! 
<!!  
DropDownDTO!!  +
>!!+ ,
>!!, -
GetFinanceTypeAsync!!. A
(!!A B
int!!B E

mfCategory!!F P
,!!P Q
CancellationToken!!R c
token!!d i
)!!i j
;!!j k
public"" 
Task"" 
<"" 
IEnumerable"" 
<""  
DropDownDTO""  +
>""+ ,
>"", - 
GetSecurityTypeAsync"". B
(""B C
CancellationToken""C T
token""U Z
)""Z [
;""[ \
public## 
Task## 
<## 
IEnumerable## 
<##  
DropDownDTO##  +
>##+ ,
>##, -#
GetSecurityDetailsAsync##. E
(##E F
CancellationToken##F W
token##X ]
)##] ^
;##^ _
public$$ 
Task$$ 
<$$ 
IEnumerable$$ 
<$$  
DropDownDTO$$  +
>$$+ ,
>$$, -
GetRelationAsync$$. >
($$> ?
CancellationToken$$? P
token$$Q V
)$$V W
;$$W X
public%% 
Task%% 
<%% %
VillageTalukaHobliDistDTO%% -
>%%- .*
GetVillageTalukaHobliDistAsync%%/ M
(%%M N
int%%N Q
VillageCode%%R ]
,%%] ^
CancellationToken%%_ p
token%%q v
)%%v w
;%%w x
public&& 
Task&& 
<&& 
IEnumerable&& 
<&&  
DropDownDTO&&  +
>&&+ ,
>&&, -
GetAddressTypeAsync&&. A
(&&A B
CancellationToken&&B S
token&&T Y
)&&Y Z
;&&Z [
public(( 
Task(( 
<(( 
IEnumerable(( 
<((  
DropDownDTO((  +
>((+ ,
>((, -
GetAllPromotorClass((. A
(((A B
CancellationToken((B S
token((T Y
)((Y Z
;((Z [
public)) 
Task)) 
<)) 
IEnumerable)) 
<))  
DropDownDTO))  +
>))+ ,
>)), -'
GetAllSecurityCategoryAsync)). I
())I J
CancellationToken))J [
token))\ a
)))a b
;))b c
public** 
Task** 
<** 
IEnumerable** 
<**  
DropDownDTO**  +
>**+ ,
>**, -$
GetAllSecurityTypesAsync**. F
(**F G
CancellationToken**G X
token**Y ^
)**^ _
;**_ `
public++ 
Task++ 
<++ 
IEnumerable++ 
<++  
DropDownDTO++  +
>+++ ,
>++, -)
GetAllSubRegistrarOfficeAsync++. K
(++K L
CancellationToken++L ]
token++^ c
)++c d
;++d e
public,, 
Task,, 
<,, 
IEnumerable,, 
<,,  
DropDownDTO,,  +
>,,+ ,
>,,, -
GetAllBankIfscCode,,. @
(,,@ A
CancellationToken,,A R
token,,S X
),,X Y
;,,Y Z
public-- 
Task-- 
<-- 
IEnumerable-- 
<--  
DropDownDTO--  +
>--+ ,
>--, -
GetAllChargeType--. >
(--> ?
CancellationToken--? P
token--Q V
)--V W
;--W X
public.. 
Task.. 
<.. 
IEnumerable.. 
<..  
DropDownDTO..  +
>..+ ,
>.., - 
GetAllConditionTypes... B
(..B C
CancellationToken..C T
token..U Z
)..Z [
;..[ \
public// 
Task// 
<// 
IEnumerable// 
<//  
DropDownDTO//  +
>//+ ,
>//, -!
GetAllConditionStages//. C
(//C D
CancellationToken//D U
token//V [
)//[ \
;//\ ]
public00 
Task00 
<00 
IEnumerable00 
<00  
DropDownDTO00  +
>00+ ,
>00, -
GetAllConditionDesc00. A
(00A B
CancellationToken00B S
token00T Y
)00Y Z
;00Z [
public11 
Task11 
<11 
IEnumerable11 
<11  
DropDownDTO11  +
>11+ ,
>11, -&
GetAllConditionStageMaster11. H
(11H I
CancellationToken11I Z
token11[ `
)11` a
;11a b
public33 
Task33 
<33 
IEnumerable33 
<33  
DropDownDTO33  +
>33+ ,
>33, -
GetAllForm8and1333. >
(33> ?
CancellationToken33? P
token33Q V
)33V W
;33W X
public55 
Task55 
<55 
IEnumerable55 
<55  
DropDownDTO55  +
>55+ ,
>55, -
GetAllPromoterState55. A
(55A B
CancellationToken55B S
token55T Y
)55Y Z
;55Z [
public66 
Task66 
<66 
IEnumerable66 
<66  
DropDownDTO66  +
>66+ ,
>66, -
GetAllPromoterNames66. A
(66A B
CancellationToken66B S
token66T Y
)66Y Z
;66Z [
public88 
Task88 
<88 
IEnumerable88 
<88  
DropDownDTO88  +
>88+ ,
>88, -
GetAllPromoterPhNo88. @
(88@ A
CancellationToken88A R
token88S X
)88X Y
;88Y Z
public99 
Task99 
<99 
IEnumerable99 
<99  
DropDownDTO99  +
>99+ ,
>99, -"
GetAllPromoterDistrict99. D
(99D E
CancellationToken99E V
token99W \
)99\ ]
;99] ^
public== 
Task== 
<== 
IEnumerable== 
<==  
DropDownDTO==  +
>==+ ,
>==, -!
GetAllDistrictDetails==. C
(==C D
CancellationToken==D U
token==V [
)==[ \
;==\ ]
public>> 
Task>> 
<>> 
IEnumerable>> 
<>>  
DropDownDTO>>  +
>>>+ ,
>>>, -
GetAllTalukDetails>>. @
(>>@ A
CancellationToken>>A R
token>>S X
)>>X Y
;>>Y Z
public?? 
Task?? 
<?? 
IEnumerable?? 
<??  
DropDownDTO??  +
>??+ ,
>??, -
GetAllHobliDetails??. @
(??@ A
CancellationToken??A R
token??S X
)??X Y
;??Y Z
public@@ 
Task@@ 
<@@ 
IEnumerable@@ 
<@@  
DropDownDTO@@  +
>@@+ ,
>@@, - 
GetAllVillageDetails@@. B
(@@B C
CancellationToken@@C T
token@@U Z
)@@Z [
;@@[ \
publicAA 
TaskAA 
<AA 
IEnumerableAA 
<AA  
DropDownDTOAA  +
>AA+ ,
>AA, - 
GetAllPincodeDetailsAA. B
(AAB C
CancellationTokenAAC T
tokenAAU Z
)AAZ [
;AA[ \
publicCC 
TaskCC 
<CC 
IEnumerableCC 
<CC  
DropDownDTOCC  +
>CC+ ,
>CC, -!
GetAllPromotorSubClasCC. C
(CCC D
CancellationTokenCCD U
tokenCCV [
)CC[ \
;CC\ ]
publicDD 
TaskDD 
<DD 
IEnumerableDD 
<DD  
DropDownDTODD  +
>DD+ ,
>DD, -
GetAllPromotorQualDD. @
(DD@ A
CancellationTokenDDA R
tokenDDS X
)DDX Y
;DDY Z
publicEE 
TaskEE 
<EE 
IEnumerableEE 
<EE  
DropDownDTOEE  +
>EE+ ,
>EE, -
GetAllAccountTypeEE. ?
(EE? @
CancellationTokenEE@ Q
tokenEER W
)EEW X
;EEX Y
publicGG 
TaskGG 
<GG 
IEnumerableGG 
<GG  
DropDownDTOGG  +
>GG+ ,
>GG, -!
GetNameOfProductAsyncGG. C
(GGC D
CancellationTokenGGD U
tokenGGV [
)GG[ \
;GG\ ]
publicII 
TaskII 
<II 
IEnumerableII 
<II  
DropDownDTOII  +
>II+ ,
>II, -
GetIndustryTypeII. =
(II= >
CancellationTokenII> O
tokenIIP U
)IIU V
;IIV W
publicKK 
TaskKK 
<KK 
IEnumerableKK 
<KK  
DropDownDTOKK  +
>KK+ ,
>KK, -!
GetAssetCategoryAsyncKK. C
(KKC D
CancellationTokenKKD U
tokenKKV [
)KK[ \
;KK\ ]
publicLL 
TaskLL 
<LL 
IEnumerableLL 
<LL  
DropDownDTOLL  +
>LL+ ,
>LL, -
GetAssetTypeAsyncLL. ?
(LL? @
CancellationTokenLL@ Q
tokenLLR W
)LLW X
;LLX Y
publicMM 
TaskMM 
<MM 
IEnumerableMM 
<MM  
DropDownDTOMM  +
>MM+ ,
>MM, -
GetAllStateZoneMM. =
(MM= >
CancellationTokenMM> O
tokenMMP U
)MMU V
;MMV W
publicNN 
TaskNN 
<NN 
IEnumerableNN 
<NN  
DropDownDTONN  +
>NN+ ,
>NN, - 
GetAllAllocationCodeNN. B
(NNB C
CancellationTokenNNC T
tokenNNU Z
)NNZ [
;NN[ \
publicOO 
TaskOO 
<OO 
IEnumerableOO 
<OO  
DropDownDTOOO  +
>OO+ ,
>OO, -$
GetAllOtherDebitsDetailsOO. F
(OOF G
CancellationTokenOOG X
tokenOOY ^
)OO^ _
;OO_ `
publicRR 
TaskRR 
<RR 
IEnumerableRR 
<RR  
DropDownDTORR  +
>RR+ ,
>RR, -
GetAllLandTypeRR. <
(RR< =
CancellationTokenRR= N
tokenRRO T
)RRT U
;RRU V
publicUU 
TaskUU 
<UU 
IEnumerableUU 
<UU  
DropDownDTOUU  +
>UU+ ,
>UU, -
GetAllUomMasterUU. =
(UU= >
CancellationTokenUU> O
tokenUUP U
)UUU V
;UUV W
}VV 
}WW á
cD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\AuditModule\IAuditService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8
	IDMModule		8 A
.		A B
AuditModule		B M
{

 
public 

	interface 
IAuditService "
{ 
Task 
< 
IEnumerable 
< 
IdmAuditDetailsDTO +
>+ ,
>, -)
GetAllAuditClearanceListAsync. K
(K L
longL P
accountNumberQ ^
,^ _
CancellationToken` q
tokenr w
)w x
;x y
Task 
< 
bool 
> '
UpdateAuditClearanceDetails .
(. /
IdmAuditDetailsDTO/ A
AuditDTOB J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
Task 
< 
bool 
> '
CreateAuditClearanceDetails .
(. /
IdmAuditDetailsDTO/ A
AuditDTOB J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
Task 
< 
bool 
> '
DeleteAuditClearanceDetails .
(. /
IdmAuditDetailsDTO/ A
AuditDTOB J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
} 
} ˜
ìD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\CreationOfDisbursmentProposalModule\ICreationOfDisbursmentProposalService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
	IDMModule8 A
.A B/
#CreationOfDisbursmentProposalModuleB e
{ 
public 

	interface 1
%ICreationOfDisbursmentProposalService :
{ 
Task 
< 
IEnumerable 
< 
IdmDsbdetsDTO &
>& '
>' (*
GetAllRecomDisbursementDetails) G
(G H
longH L
accountNumberM Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task 
< 
IEnumerable 
< 
TblAllcCdTabDTO (
>( )
>) *$
GetAllocationCodeDetails+ C
(C D
CancellationTokenD U
tokenV [
)[ \
;\ ]
Task 
< 
IEnumerable 
< 
TblIdmReleDetlsDTO +
>+ ,
>, -.
"GetRecomDisbursementReleaseDetails. P
(P Q
CancellationTokenQ b
tokenc h
)h i
;i j
Task 
< 
IdmDsbdetsDTO 
> )
UpdateRecomDisbursementDetail 9
(9 :
IdmDsbdetsDTO: G
idmDsbdetsDTOH U
,U V
CancellationTokenW h
tokeni n
)n o
;o p
Task 
< 
IEnumerable 
< 
TblIdmReleDetlsDTO +
>+ ,
>, -!
GetAllProposalDetails. C
(C D
longD H
accountNumberI V
,V W
CancellationTokenX i
tokenj o
)o p
;p q
Task 
< 
TblIdmReleDetlsDTO 
>   
CreateProposalDetail! 5
(5 6
TblIdmReleDetlsDTO6 H
tblIdmReleDetlsDTOI [
,[ \
CancellationToken] n
tokeno t
)t u
;u v
Task 
< 
TblIdmReleDetlsDTO 
>   
UpdateProposalDetail! 5
(5 6
TblIdmReleDetlsDTO6 H
tblIdmReleDetlsDTOI [
,[ \
CancellationToken] n
tokeno t
)t u
;u v
Task 
< 
TblIdmReleDetlsDTO 
>   
DeleteProposalDetail! 5
(5 6
TblIdmReleDetlsDTO6 H
tblIdmReleDetlsDTOI [
,[ \
CancellationToken] n
tokeno t
)t u
;u v
Task"" 
<"" 
IEnumerable"" 
<"" 
TblIdmBenfDetDTO"" )
>"") *
>""* +$
GetAllBeneficiaryDetails"", D
(""D E
long""E I
accountNumber""J W
,""W X
CancellationToken""Y j
token""k p
)""p q
;""q r
Task## 
<## 
TblIdmBenfDetDTO## 
>## $
UpdateBeneficiaryDetails## 7
(##7 8
TblIdmBenfDetDTO##8 H
beneficiaryDet##I W
,##W X
CancellationToken##Y j
token##k p
)##p q
;##q r
}%% 
}&& Œ
öD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\CreationOfSecurityandAquisitionAssetModule\ICreationOfSecurityandAquisitionAsset.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
	IDMModule

8 A
.

A B0
$CreationOfSecurityandAquisitionAsset

B f
{ 
public 

	interface 1
%ICreationOfSecurityandAquisitionAsset :
{ 
Task 
< 
IEnumerable 
< 
TblIdmIrLandDTO (
>( )
>) *:
.GetAllCreationOfSecurityandAquisitionAssetList+ Y
(Y Z
longZ ^
accountNumber_ l
,l m
CancellationTokenn 
token
Ä Ö
)
Ö Ü
;
Ü á
Task 
< 
bool 
> (
UpadteLandAcquisitionDetails /
(/ 0
TblIdmIrLandDTO0 ?
LandDTO@ G
,G H
CancellationTokenI Z
token[ `
)` a
;a b
Task 
< 
IEnumerable 
< 
IdmIrPlmcDTO %
>% &
>& '-
!GetAllMachineryAcquisitionDetails( I
(I J
longJ N
accountNumberO \
,\ ]
CancellationToken^ o
tokenp u
)u v
;v w
Task 
< 
bool 
> -
!UpadteMachineryAcquisitionDetails 4
(4 5
IdmIrPlmcDTO5 A

MachineDTOB L
,L M
CancellationTokenN _
token` e
)e f
;f g
Task 
< 
IEnumerable 
< /
#TblIdmBuildingAcquisitionDetailsDTO <
>< =
>= >,
 GetAllBuildingAcquisitionDetails? _
(_ `
long` d
accountNumbere r
,r s
CancellationToken	t Ö
token
Ü ã
)
ã å
;
å ç
Task 
< 
bool 
> +
UpdateBuildingAcquisitionDetail 2
(2 3/
#TblIdmBuildingAcquisitionDetailsDTO3 V/
#tblidmBuildingAcquisitionDetailsDTOW z
,z {
CancellationToken	| ç
token
é ì
)
ì î
;
î ï
Task 
< 
IEnumerable 
< 
TblIdmIrFurnDTO (
>( )
>) *.
"GetFurnitureAcquisitionDetailsList+ M
(M N
longN R
accountNumberS `
,` a
CancellationTokenb s
tokent y
)y z
;z {
Task 
< 
bool 
> &
UpdateFurnitureAcquisition -
(- .
TblIdmIrFurnDTO. =
FurnitureAcqDTO> M
,M N
CancellationTokenO `
tokena f
)f g
;g h
}!! 
}"" †0
qD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\DisbursementModule\IDisbursementService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
	IDMModule

8 A
.

A B
DisbursementModule

B T
{ 
public 

	interface  
IDisbursementService )
{ 
Task 
< 
IEnumerable 
<  
LoanAccountNumberDTO -
>- .
>. /
GetAccountNumber0 @
(@ A
CancellationTokenA R
tokenS X
)X Y
;Y Z
Task 
< 
IEnumerable 
< !
LDConditionDetailsDTO .
>. /
>/ 0-
!GetDisbursementConditionListAsync1 R
(R S
longS W
accountNumberX e
,e f
CancellationTokeng x
tokeny ~
)~ 
;	 Ä
Task 
< 
bool 
> -
!DeleteDisbursementCondtionDetails 4
(4 5!
LDConditionDetailsDTO5 J
CondtionDTOK V
,V W
CancellationTokenX i
tokenj o
)o p
;p q
Task 
< 
bool 
> .
"UpdateDisbursementConditionDetails 5
(5 6!
LDConditionDetailsDTO6 K
CondtionDTOL W
,W X
CancellationTokenY j
tokenk p
)p q
;q r
Task 
< 
bool 
> .
"CreateDisbursementConditionDetails 5
(5 6!
LDConditionDetailsDTO6 K
CondtionDTOL W
,W X
CancellationTokenY j
tokenk p
)p q
;q r
Task 
< 
IEnumerable 
< '
AdditionConditionDetailsDTO 4
>4 5
>5 6)
GetAdditionConditionListAsync7 T
(T U
longU Y
accountNumberZ g
,g h
CancellationTokeni z
token	{ Ä
)
Ä Å
;
Å Ç
Task 
< 
bool 
> ,
 UpdateAdditionalConditionDetails 3
(3 4'
AdditionConditionDetailsDTO4 O
CondtionDTOP [
,[ \
CancellationToken] n
tokeno t
)t u
;u v
Task 
< 
bool 
> ,
 CreateAdditionalConditionDetails 3
(3 4'
AdditionConditionDetailsDTO4 O
CondtionDTOP [
,[ \
CancellationToken] n
tokeno t
)t u
;u v
Task 
< 
bool 
> +
DeleteAdditionalCondtionDetails 2
(2 3'
AdditionConditionDetailsDTO3 N
CondtionDTOO Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task 
< 
IEnumerable 
< 
Form8AndForm13DTO *
>* +
>+ ,)
GetAllForm8AndForm13ListAsync- J
(J K
longK O
accountNumberP ]
,] ^
CancellationToken_ p
tokenq v
)v w
;w x
Task   
<   
bool   
>   '
UpdateForm8AndForm13Details   .
(  . /
Form8AndForm13DTO  / @
form8and13DTO  A N
,  N O
CancellationToken  P a
token  b g
)  g h
;  h i
Task!! 
<!! 
bool!! 
>!! '
CreateForm8AndForm13Details!! .
(!!. /
Form8AndForm13DTO!!/ @
form8and13DTO!!A N
,!!N O
CancellationToken!!P a
token!!b g
)!!g h
;!!h i
Task"" 
<"" 
bool"" 
>"" '
DeleteForm8AndForm13Details"" .
("". /
Form8AndForm13DTO""/ @
form8and13DTO""A N
,""N O
CancellationToken""P a
token""b g
)""g h
;""h i
Task'' 
<'' 
IdmSidbiApprovalDTO''  
>''  !!
GetSidbiApprovalAsync''" 7
(''7 8
long''8 <
accountNumber''= J
,''J K
CancellationToken''L ]
token''^ c
)''c d
;''d e
Task(( 
<(( 
bool(( 
>(( &
UpdateSidbiApprovalDetails(( -
(((- .
IdmSidbiApprovalDTO((. A
sidbi((B G
,((G H
CancellationToken((I Z
token(([ `
)((` a
;((a b
Task,, 
<,, '
IdmFirstInvestmentClauseDTO,, (
>,,( ))
GetFirstInvestmentClauseAsync,,* G
(,,G H
long,,H L
accountNumber,,M Z
,,,Z [
CancellationToken,,\ m
token,,n s
),,s t
;,,t u
Task-- 
<-- 
bool-- 
>-- 1
%UpdateAllFirstInvestmentClauseDetails-- 8
(--8 9'
IdmFirstInvestmentClauseDTO--9 T
idmFICDetail--U a
,--a b
CancellationToken--c t
token--u z
)--z {
;--{ |
Task11 
<11 
IEnumerable11 
<11 
RelaxationDTO11 &
>11& '
>11' (!
GetAllOtherRelaxation11( =
(11= >
long11> B
accountNumber11C P
,11P Q
CancellationToken11R c
token11d i
)11i j
;11j k
Task22 
<22 
List22 
<22 
RelaxationDTO22 
>22  
>22  !!
UpdateOtherRelaxation22" 7
(227 8
List228 <
<22< =
RelaxationDTO22= J
>22J K
relax22L Q
,22Q R
CancellationToken22S d
token22e j
)22j k
;22k l
}55 
}66 ∆
}D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\EntryOfOtherDebitsModule\IEntryOfOtherDebitsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
	IDMModule8 A
.A B$
EntryOfOtherDebitsModuleB Z
{ 
public 

	interface &
IEntryOfOtherDebitsService /
{ 
Task 
< 
IEnumerable 
< "
IdmOthdebitsDetailsDTO /
>/ 0
>0 1!
GetAllOtherDebitsList2 G
(G H
longH L
accountNumberM Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task 
< 
bool 
> #
UpdateOtherDebitDetails *
(* +"
IdmOthdebitsDetailsDTO+ A
othdebitB J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
Task 
< 
bool 
> #
DeleteOtherDebitDetails *
(* +"
IdmOthdebitsDetailsDTO+ A
othdebitB J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
Task 
< 
bool 
> #
CreateOtherDebitDetails *
(* +"
IdmOthdebitsDetailsDTO+ A
othdebitB J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
Task 
< 
bool 
> #
SubmitOtherDebitDetails *
(* +"
IdmOthdebitsDetailsDTO+ A
othdebitB J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
} 
} ﬁ
YD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\IIdmFileService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
	IDMModule

8 A
{ 
public 

	interface 
IIdmFileService $
{ 
Task 
< 
ldDocumentDto 
> 

UploadFile &
(& '
byte' +
[+ ,
], -
bytes. 3
,3 4
int5 8
subModuleId9 D
,D E
stringF L
subModuleTypeM Z
,Z [
string\ b

mainModulec m
,m n
IConfigurationo }
	configure	~ á
,
á à
CancellationToken
â ö
token
õ †
)
† °
;
° ¢
Task 
< 
IdmFileUploadDto 
>  
GetEncryptedFileById 3
(3 4
string4 :

mainModule; E
,E F
stringG M

documentIdN X
,X Y
CancellationTokenZ k
tokenl q
)q r
;r s
Task 
< 
List 
< 
ldDocumentDto 
>  
>  !
GetFileListAsync" 2
(2 3
string3 9

mainModule: D
,D E
CancellationTokenE V
tokenW \
)\ ]
;] ^
Task 
< 
bool 
> 
DeleteFileAsync "
(" #
string# )

mainModule* 4
,4 5
string5 ;

documentId< F
,F G
IConfigurationH V
	configureW `
,` a
CancellationTokenb s
tokent y
)y z
;z {
} 
} ë
UD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\IIdmService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
	IDMModule8 A
{ 
public 

	interface 
IIdmService  
{		 
Task

 
<

 
IEnumerable

 
<

  
LoanAccountNumberDTO

 -
>

- .
>

. /
GetAccountNumber

0 @
(

@ A
string

A G
EmpId

H M
,

M N
CancellationToken

O `
token

a f
)

f g
;

g h
} 
} ín
yD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\InspectionOfUnitModule\IInspectionOfUnitService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
	IDMModule

8 A
.

A B"
InspectionOfUnitModule

B X
{ 
public 

	interface $
IInspectionOfUnitService -
{ 
Task 
< 
IEnumerable 
<  
LoanAccountNumberDTO -
>- .
>. /
GetAccountNumber0 @
(@ A
CancellationTokenA R
tokenS X
)X Y
;Y Z
Task 
< 
IEnumerable 
< 
IdmDchgLandDetDTO *
>* +
>+ ,)
GetAllLandInspectionListAsync- J
(J K
longK O
accountNumberP ]
,] ^
long_ c
InspectionIdd p
,p q
CancellationToken	r É
token
Ñ â
)
â ä
;
ä ã
Task 
< 
bool 
> '
DeleteLandInspectionDetails .
(. /
IdmDchgLandDetDTO/ @
landInspectionDTOA R
,R S
CancellationTokenT e
tokenf k
)k l
;l m
Task 
< 
bool 
> '
UpdateLandInspectionDetails .
(. /
IdmDchgLandDetDTO/ @
landInspectionDTOA R
,R S
CancellationTokenT e
tokenf k
)k l
;l m
Task 
< 
bool 
> '
CreateLandInspectionDetails .
(. /
IdmDchgLandDetDTO/ @
landInspectionDTOA R
,R S
CancellationTokenT e
tokenf k
)k l
;l m
Task 
< 
IEnumerable 
< 
IdmDspInspDTO &
>& '
>' ('
GetAllInspectionDetailsList) D
(D E
longE I
accountNumberJ W
,W X
CancellationTokenY j
tokenk p
)p q
;q r
Task 
< 
bool 
> #
UpdateInspectionDetails *
(* +
IdmDspInspDTO+ 8
InspectionDTO9 F
,F G
CancellationTokenH Y
tokenZ _
)_ `
;` a
Task 
< 
bool 
> #
CreateInspectionDetails *
(* +
IdmDspInspDTO+ 8
inspectionDTO9 F
,F G
CancellationTokenH Y
tokenZ _
)_ `
;` a
Task 
< 
bool 
> #
DeleteInspectionDetails *
(* +
IdmDspInspDTO+ 8
InspectionDTO9 F
,F G
CancellationTokenH Y
tokenZ _
)_ `
;` a
Task$$ 
<$$ 
IEnumerable$$ 
<$$ !
IdmDchgBuildingDetDTO$$ .
>$$. /
>$$/ 0(
GetAllBuildingInspectionList$$1 M
($$M N
long$$N R
accountNumber$$S `
,$$` a
long$$b f
InspectionId$$g s
,$$s t
CancellationToken	$$t Ö
token
$$Ü ã
)
$$ã å
;
$$å ç
Task%% 
<%% 
bool%% 
>%% +
CreateBuilidngInspectionDetails%% 2
(%%2 3!
IdmDchgBuildingDetDTO%%3 H
BuildingDto%%I T
,%%T U
CancellationToken%%V g
token%%h m
)%%m n
;%%n o
Task&& 
<&& 
bool&& 
>&& +
UpdateBuilidngInspectionDetails&& 2
(&&2 3!
IdmDchgBuildingDetDTO&&3 H
BuildingDto&&I T
,&&T U
CancellationToken&&V g
token&&h m
)&&m n
;&&n o
Task'' 
<'' 
bool'' 
>'' +
DeleteBuilidngInspectionDetails'' 2
(''2 3!
IdmDchgBuildingDetDTO''3 H
BuildingDto''I T
,''T U
CancellationToken''V g
token''h m
)''m n
;''n o
Task++ 
<++ 
bool++ 
>++ 1
%CreateWorkingCapitalInspectionDetails++ 8
(++8 9$
IdmDchgWorkingCapitalDTO++9 Q
workingCapital++R `
,++` a
CancellationToken++b s
token++t y
)++y z
;++z {
Task.. 
<.. 
IEnumerable.. 
<.. 0
$IdmBuildingMaterialSiteInspectionDTO.. =
>..= >
>..> ?5
)GetAllBuildingMaterialInspectionListAsync..@ i
(..i j
long..j n
accountNumber..o |
,..| }
long	..~ Ç
InspectionId
..É è
,
..è ê
CancellationToken
..ë ¢
token
..£ ®
)
..® ©
;
..© ™
Task// 
<// 
bool// 
>// /
#DeleteBuildMatSiteInspectionDetails// 6
(//6 70
$IdmBuildingMaterialSiteInspectionDTO//7 [ 
bildMatInspectionDTO//\ p
,//p q
CancellationToken	//r É
token
//Ñ â
)
//â ä
;
//ä ã
Task00 
<00 
bool00 
>00 /
#UpdateBuildMatSiteInspectionDetails00 6
(006 70
$IdmBuildingMaterialSiteInspectionDTO007 [ 
bildMatInspectionDTO00\ p
,00p q
CancellationToken	00r É
token
00Ñ â
)
00â ä
;
00ä ã
Task11 
<11 
bool11 
>11 /
#CreateBuildMatSiteInspectionDetails11 6
(116 70
$IdmBuildingMaterialSiteInspectionDTO117 [ 
bildMatInspectionDTO11\ p
,11p q
CancellationToken	11r É
token
11Ñ â
)
11â ä
;
11ä ã
Task44 
<44 
IEnumerable44 
<44 
IdmDChgFurnDTO44 '
>44' (
>44( ))
GetAllFurnitureInspectionList44* G
(44G H
long44H L
accountNumber44M Z
,44Z [
long44[ _
InspectionId44` l
,44l m
CancellationToken44m ~
token	44 Ñ
)
44Ñ Ö
;
44Ö Ü
Task55 
<55 
bool55 
>55 ,
 DeleteFurnitureInspectionDetails55 3
(553 4
IdmDChgFurnDTO554 B"
furnitureInspectionDTO55C Y
,55Y Z
CancellationToken55[ l
token55m r
)55r s
;55s t
Task66 
<66 
bool66 
>66 ,
 UpdateFurnitureInspectionDetails66 3
(663 4
IdmDChgFurnDTO664 B"
furnitureInspectionDTO66C Y
,66Y Z
CancellationToken66[ l
token66m r
)66r s
;66s t
Task77 
<77 
bool77 
>77 ,
 CreateFurnitureInspectionDetails77 3
(773 4
IdmDChgFurnDTO774 B"
furnitureInspectionDTO77C Y
,77Y Z
CancellationToken77[ l
token77m r
)77r s
;77s t
Task;; 
<;; 
IEnumerable;; 
<;; *
IdmDchgIndigenousInspectionDTO;; 7
>;;7 8
>;;8 98
,GetAllIndigenousMachineryInspectionListAsync;;: f
(;;f g
long;;g k
accountNumber;;l y
,;;y z
int;;{ ~
InspectionId	;; ã
,
;;ã å
CancellationToken
;;ç û
token
;;ü §
)
;;§ •
;
;;• ¶
Task== 
<== 
IEnumerable== 
<== !
TblMachineryStatusDto== .
>==. /
>==/ 0%
GetAllMachineryStatusList==1 J
(==J K
CancellationToken==K \
token==] b
)==b c
;==c d
Task?? 
<?? 
IEnumerable?? 
<?? 
TblProcureMastDto?? *
>??* +
>??+ ,
GetAllProcureList??- >
(??> ?
CancellationToken??? P
token??Q V
)??V W
;??W X
TaskAA 
<AA 
boolAA 
>AA 6
*DeleteIndigenousMachineryInspectionDetailsAA =
(AA= >*
IdmDchgIndigenousInspectionDTOAA> \ 
bildMatInspectionDTOAA] q
,AAq r
CancellationToken	AAs Ñ
token
AAÖ ä
)
AAä ã
;
AAã å
TaskBB 
<BB 
boolBB 
>BB 6
*UpdateIndigenousMachineryInspectionDetailsBB =
(BB= >*
IdmDchgIndigenousInspectionDTOBB> \ 
bildMatInspectionDTOBB] q
,BBq r
CancellationToken	BBs Ñ
token
BBÖ ä
)
BBä ã
;
BBã å
TaskCC 
<CC 
boolCC 
>CC 6
*CreateIndigenousMachineryInspectionDetailsCC =
(CC= >*
IdmDchgIndigenousInspectionDTOCC> \ 
bildMatInspectionDTOCC] q
,CCq r
CancellationToken	CCs Ñ
token
CCÖ ä
)
CCä ã
;
CCã å
TaskGG 
<GG 
IEnumerableGG 
<GG %
IdmDchgImportMachineryDTOGG 2
>GG2 3
>GG3 4%
GetAllImportMachineryListGG5 N
(GGN O
longGGO S
accountNumberGGT a
,GGa b
longGGc g
InspectionIdGGh t
,GGt u
CancellationToken	GGv á
token
GGà ç
)
GGç é
;
GGé è
TaskHH 
<HH 
boolHH 
>HH (
CreateImportMachineryDetailsHH /
(HH/ 0%
IdmDchgImportMachineryDTOHH0 I
importMachineryHHJ Y
,HHY Z
CancellationTokenHH[ l
tokenHHm r
)HHr s
;HHs t
TaskII 
<II 
boolII 
>II (
UpdateImportMachineryDetailsII /
(II/ 0%
IdmDchgImportMachineryDTOII0 I
importMachineryIIJ Y
,IIY Z
CancellationTokenII[ l
tokenIIm r
)IIr s
;IIs t
TaskJJ 
<JJ 
boolJJ 
>JJ (
DeleteImportMachineryDetailsJJ /
(JJ/ 0%
IdmDchgImportMachineryDTOJJ0 I
importMachineryJJJ Y
,JJY Z
CancellationTokenJJ[ l
tokenJJm r
)JJr s
;JJs t
TaskOO 
<OO 
IEnumerableOO 
<OO $
IdmDchgMeansOfFinanceDTOOO 1
>OO1 2
>OO2 3$
GetAllMeansOfFinanceListOO4 L
(OOL M
longOOM Q
accountNumberOOR _
,OO_ `
CancellationTokenOOa r
tokenOOs x
)OOx y
;OOy z
TaskPP 
<PP 
boolPP 
>PP '
CreateMeansOfFinanceDetailsPP .
(PP. /$
IdmDchgMeansOfFinanceDTOPP/ G
meansOfFinancePPH V
,PPV W
CancellationTokenPPX i
tokenPPj o
)PPo p
;PPp q
TaskQQ 
<QQ 
boolQQ 
>QQ '
UpdateMeansOfFinanceDetailsQQ .
(QQ. /$
IdmDchgMeansOfFinanceDTOQQ/ G
meansOfFinanceQQH V
,QQV W
CancellationTokenQQX i
tokenQQj o
)QQo p
;QQp q
TaskRR 
<RR 
boolRR 
>RR '
DeleteMeansOfFinanceDetailsRR .
(RR. /$
IdmDchgMeansOfFinanceDTORR/ G
meansOfFinanceRRH V
,RRV W
CancellationTokenRRX i
tokenRRj o
)RRo p
;RRp q
TaskUU 
<UU 
IEnumerableUU 
<UU #
IdmDsbLetterOfCreditDTOUU 0
>UU0 1
>UU1 2/
#GetAllLetterOfCreditDetailListAsyncUU3 V
(UUV W
longUUW [
accountNumberUU\ i
,UUi j
CancellationTokenUUk |
token	UU} Ç
)
UUÇ É
;
UUÉ Ñ
TaskVV 
<VV 
boolVV 
>VV '
DeleteLetterOfCreditDetailsVV .
(VV. /#
IdmDsbLetterOfCreditDTOVV/ F$
letterOfCreditDetailsDTOVVG _
,VV_ `
CancellationTokenVVa r
tokenVVs x
)VVx y
;VVy z
TaskWW 
<WW 
boolWW 
>WW '
UpdateLetterOfCreditDetailsWW .
(WW. /#
IdmDsbLetterOfCreditDTOWW/ F$
letterOfCreditDetailsDTOWWG _
,WW_ `
CancellationTokenWWa r
tokenWWs x
)WWx y
;WWy z
TaskXX 
<XX 
boolXX 
>XX '
CreateLetterOfCreditDetailsXX .
(XX. /#
IdmDsbLetterOfCreditDTOXX/ F$
letterOfCreditDetailsDTOXXG _
,XX_ `
CancellationTokenXXa r
tokenXXs x
)XXx y
;XXy z
Task\\ 
<\\ 
IEnumerable\\ 
<\\ !
IdmDchgProjectCostDTO\\ .
>\\. /
>\\/ 0(
GetAllProjectCostDetailsList\\1 M
(\\M N
long\\N R
accountNumber\\S `
,\\` a
CancellationToken\\b s
token\\t y
)\\y z
;\\z {
Task^^ 
<^^ 
bool^^ 
>^^ $
UpdateProjectCostDetails^^ +
(^^+ ,!
IdmDchgProjectCostDTO^^, A

PrjCostDTO^^B L
,^^L M
CancellationToken^^N _
token^^` e
)^^e f
;^^f g
Task__ 
<__ 
bool__ 
>__ $
CreateProjectCostDetails__ +
(__+ ,!
IdmDchgProjectCostDTO__, A

PrjCostDTO__B L
,__L M
CancellationToken__N _
token__` e
)__e f
;__f g
Task`` 
<`` 
bool`` 
>`` $
DeleteProjectCostDetails`` +
(``+ ,!
IdmDchgProjectCostDTO``, A

PrjCostDTO``B L
,``L M
CancellationToken``N _
token``` e
)``e f
;``f g
}cc 
}dd ‘,
}D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\LegalDocumentationModule\ILegalDocumentationService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8
	IDMModule		8 A
.		A B$
LegalDocumentationModule		B Z
{

 
public 

	interface &
ILegalDocumentationService /
{ 
Task 
< 
IEnumerable 
< !
IdmSecurityDetailsDTO .
>. /
>/ 0)
GetPrimaryCollateralListAsync1 N
(N O
longO S
accountNumberT a
,a b
CancellationTokenc t
tokenu z
)z {
;{ |
Task 
< 
bool 
> )
UpdatePrimaryCollateralDetail 0
(0 1!
IdmSecurityDetailsDTO1 F 
lDSecurityDetailsDTOG [
,[ \
CancellationToken] n
tokeno t
)t u
;u v
Task 
< 
IEnumerable 
< 
HypoAssetDetailDTO +
>+ ,
>, -$
GetAllHypothecationAsync. F
(F G
longG K
accountNumberL Y
,Y Z
CancellationToken[ l
tokenm r
)r s
;s t
Task 
< 
IEnumerable 
<  
AssetRefnoDetailsDTO -
>- .
>. /#
GetAllAssetRefListAsync0 G
(G H
longH L
accountNumberM Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task 
< 
bool 
> (
UpdateLDHypothecationDetails /
(/ 0 
IdmHypotheDetailsDTO0 D
lDHypotheDetailsDTOE X
,X Y
CancellationTokenZ k
tokenl q
)q r
;r s
Task 
< 
bool 
> &
DeleteHypothecationDetails -
(- . 
IdmHypotheDetailsDTO. B
lDHypotheDetailsDTOC V
,V W
CancellationTokenX i
tokenj o
)o p
;p q
Task 
< 
bool 
> (
CreateLDHypothecationDetails /
(/ 0 
IdmHypotheDetailsDTO0 D
lDHypotheDetailsDTOE X
,X Y
CancellationTokenZ k
tokenl q
)q r
;r s
Task&& 
<&& 
IEnumerable&& 
<&& "
IdmCersaiRegDetailsDTO&& /
>&&/ 0
>&&0 1)
GetAllCERSAIRegistrationAsync&&2 O
(&&O P
long&&P T
accountNumber&&U b
,&&b c
CancellationToken&&d u
token&&v {
)&&{ |
;&&| }
Task'' 
<'' 
bool'' 
>'' $
UpdateLDCersaiRegDetails'' +
(''+ ,"
IdmCersaiRegDetailsDTO'', B
CersaiRegDTO''C O
,''O P
CancellationToken''Q b
token''c h
)''h i
;''i j
Task.. 
<.. 
IEnumerable.. 
<.. !
LDConditionDetailsDTO.. .
>... /
>../ 0$
GetAllConditionListAsync..1 I
(..I J
long..J N
accountNumber..O \
,..\ ]
CancellationToken..^ o
token..p u
)..u v
;..v w
Task// 
<// 
bool// 
>// #
DeleteLDCondtionDetails// *
(//* +!
LDConditionDetailsDTO//+ @
CondtionDTO//A L
,//L M
CancellationToken//N _
token//` e
)//e f
;//f g
Task00 
<00 
bool00 
>00 $
UpdateLDConditionDetails00 +
(00+ ,!
LDConditionDetailsDTO00, A
CondtionDTO00B M
,00M N
CancellationToken00O `
token00a f
)00f g
;00g h
Task11 
<11 
bool11 
>11 $
CreateLDConditionDetails11 +
(11+ ,!
LDConditionDetailsDTO11, A
CondtionDTO11B M
,11M N
CancellationToken11O `
token11a f
)11f g
;11g h
Task88 
<88 
IEnumerable88 
<88  
IdmSecurityChargeDTO88 -
>88- .
>88. /%
GetAllSecurityChargeAsync880 I
(88I J
long88J N
accountNumber88O \
,88\ ]
CancellationToken88^ o
token88p u
)88u v
;88v w
Task99 
<99 
bool99 
>99 '
UpdateSecurityChargeDetails99 .
(99. / 
IdmSecurityChargeDTO99/ C 
lDSecurityDetailsDTO99D X
,99X Y
CancellationToken99Z k
token99l q
)99q r
;99r s
TaskAA 
<AA 
boolAA 
>AA (
UpdateLDGuarantorDeedDetailsAA /
(AA/ 0&
IdmGuarantorDeedDetailsDTOAA0 J
GuarantorListDTOAAK [
,AA[ \
CancellationTokenAA] n
tokenAAo t
)AAt u
;AAu v
TaskBB 
<BB 
IEnumerableBB 
<BB &
IdmGuarantorDeedDetailsDTOBB 3
>BB3 4
>BB4 5$
GetAllGuarantorListAsyncBB6 N
(BBN O
longBBO S
accountNumberBBT a
,BBa b
CancellationTokenBBc t
tokenBBu z
)BBz {
;BB{ |
}EE 
}FF ±
uD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\LoanAllocationModule\ILoanAllocationService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8
	IDMModule		8 A
.		A B 
LoanAllocationModule		B V
{

 
public 

	interface "
ILoanAllocationService +
{ 
Task 
< 
IEnumerable 
< 
TblIdmDhcgAllcDTO *
>* +
>+ ,$
GetAllLoanAllocationList- E
(E F
longF J
accountNumberK X
,X Y
CancellationTokenZ k
tokenl q
)q r
;r s
Task 
< 
bool 
> '
UpdateLoanAllocationDetails .
(. /
TblIdmDhcgAllcDTO/ @
AllocationDTOA N
,N O
CancellationTokenP a
tokenb g
)g h
;h i
Task 
< 
bool 
> '
CreateLoanAllocationDetails .
(. /
TblIdmDhcgAllcDTO/ @
AllocationDTOA N
,N O
CancellationTokenP a
tokenb g
)g h
;h i
Task 
< 
bool 
> '
DeleteLoanAllocationDetails .
(. /
TblIdmDhcgAllcDTO/ @
AllocationDTOA N
,N O
CancellationTokenP a
tokenb g
)g h
;h i
} 
} ≤d
oD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDMModule\UnitDetailsModule\IUnitDetailsService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
.

7 8
	IDMModule

8 A
.

A B
UnitDetailsModule

B S
{ 
public 

	interface 
IUnitDetailsService (
{ 
Task 
< 
IdmUnitDetailDTO 
> 
GetNameOfUnit ,
(, -
long- 1
accountNumber2 ?
,? @
CancellationTokenA R
tokenS X
)X Y
;Y Z
Task 
< 
IdmUnitDetailDTO 
> 
UpdateNameOfUnit /
(/ 0
IdmUnitDetailDTO0 @
idmUnitDetailA N
,N O
CancellationTokenP a
tokenb g
)g h
;h i
Task 
< 
IEnumerable 
< 
IdmUnitAddressDTO *
>* +
>+ , 
GetAllAddressDetails- A
(A B
longB F
accountNumberG T
,T U
CancellationTokenV g
tokenh m
)m n
;n o
Task 
< 
IEnumerable 
< 
TblPincodeMasterDTO ,
>, -
>- .&
GetAllMasterPinCodeDetails/ I
(I J
CancellationTokenJ [
token\ a
)a b
;b c
Task 
< 
IEnumerable 
< #
PincodeDistrictCdtabDTO 0
>0 1
>1 2(
GetAllPinCodeDistrictDetails3 O
(O P
CancellationTokenP a
tokenb g
)g h
;h i
Task 
< 
bool 
>  
UpdateAddressDetails '
(' (
IdmUnitAddressDTO( 9
PromAddressDto: H
,H I
CancellationTokenJ [
token\ a
)a b
;b c
Task 
< 
IEnumerable 
< 
TlqCdTabDTO $
>$ %
>% &
GetAllTalukDetails' 9
(9 :
CancellationToken: K
tokenL Q
)Q R
;R S
Task 
< 
IEnumerable 
< 
HobCdtabDTO $
>$ %
>% &
GetAllHobliDetails' 9
(9 :
CancellationToken: K
tokenL Q
)Q R
;R S
Task 
< 
IEnumerable 
< 
VilCdTabDTO $
>$ %
>% & 
GetAllVillageDetails' ;
(; <
CancellationToken< M
tokenN S
)S T
;T U
Task 
< 
IEnumerable 
< 
IdmPromoterDTO '
>' (
>( )(
GetAllPromoterProfileDetails* F
(F G
longG K
?K L
accountNumberM Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task   
<   
IEnumerable   
<   
TblPromcdtabDTO   (
>  ( )
>  ) *.
"GetAllMasterPromoterProfileDetails  + M
(  M N
CancellationToken  N _
token  ` e
)  e f
;  f g
Task!! 
<!! 
bool!! 
>!! (
CreatePromoterProfileDetails!! /
(!!/ 0
IdmPromoterDTO!!0 >
PromprofileDto!!? M
,!!M N
CancellationToken!!O `
token!!a f
)!!f g
;!!g h
Task"" 
<"" 
bool"" 
>"" (
UpdatePromoterProfileDetails"" /
(""/ 0
IdmPromoterDTO""0 >
PromprofileDto""? M
,""M N
CancellationToken""O `
token""a f
)""f g
;""g h
Task## 
<## 
bool## 
>## (
DeletePromoterProfileDetails## /
(##/ 0
IdmPromoterDTO##0 >
PromprofileDto##? M
,##M N
CancellationToken##O `
token##a f
)##f g
;##g h
Task'' 
<'' 
IEnumerable'' 
<'' %
IdmPromoterBankDetailsDTO'' 2
>''2 3
>''3 4"
GetAllPromoterBankInfo''5 K
(''K L
long''L P
?''P Q
accountNumber''R _
,''_ `
CancellationToken''a r
token''s x
)''x y
;''y z
Task(( 
<(( 
bool(( 
>(( "
CreatePromoterBankInfo(( )
((() *%
IdmPromoterBankDetailsDTO((* C$
changePromoterBankDetail((D \
,((\ ]
CancellationToken((^ o
token((p u
)((u v
;((v w
Task)) 
<)) 
bool)) 
>)) "
UpdatePromoterBankInfo)) )
())) *%
IdmPromoterBankDetailsDTO))* C$
changePromoterBankDetail))D \
,))\ ]
CancellationToken))^ o
token))p u
)))u v
;))v w
Task** 
<** 
bool** 
>** "
DeletePromoterBankInfo** )
(**) *%
IdmPromoterBankDetailsDTO*** C$
changePromoterBankDetail**D \
,**\ ]
CancellationToken**^ o
token**p u
)**u v
;**v w
Task.. 
<.. 
IEnumerable.. 
<.. 
IdmPromAddressDTO.. *
>..* +
>..+ ,(
GetAllPromoterAddressDetails..- I
(..I J
long..J N
?..N O
accountNumber..P ]
,..] ^
CancellationToken.._ p
token..q v
)..v w
;..w x
Task// 
<// 
bool// 
>// $
UpdatePromAddressDetails// +
(//+ ,
IdmPromAddressDTO//, =
PromAddressDto//> L
,//L M
CancellationToken//N _
token//` e
)//e f
;//f g
Task00 
<00 
bool00 
>00 $
CreatePromAddressDetails00 +
(00+ ,
IdmPromAddressDTO00, =
PromAddressDto00> L
,00L M
CancellationToken00N _
token00` e
)00e f
;00f g
Task11 
<11 
bool11 
>11 $
DeletePromAddressDetails11 +
(11+ ,
IdmPromAddressDTO11, =
PromAddressDto11> L
,11L M
CancellationToken11N _
token11` e
)11e f
;11f g
Task55 
<55 
IEnumerable55 
<55 
IdmUnitProductsDTO55 +
>55+ ,
>55, - 
GetAllProductDetails55. B
(55B C
long55C G
accountNumber55H U
,55U V
CancellationToken55W h
token55i n
)55n o
;55o p
Task66 
<66 
IEnumerable66 
<66 
TblProdCdtabDTO66 (
>66( )
>66) *
GetAllProductList66+ <
(66< =
CancellationToken66= N
token66O T
)66T U
;66U V
Task77 
<77 
bool77 
>77  
CreateProductDetails77 '
(77' (
IdmUnitProductsDTO77( :

ProductDTO77; E
,77E F
CancellationToken77G X
token77Y ^
)77^ _
;77_ `
Task88 
<88 
bool88 
>88  
UpdateProductDetails88 '
(88' (
IdmUnitProductsDTO88( :

ProductDTO88; E
,88E F
CancellationToken88G X
token88Y ^
)88^ _
;88_ `
Task99 
<99 
bool99 
>99  
DeleteProductDetails99 '
(99' (
IdmUnitProductsDTO99( :
ProDetailsDto99; H
,99H I
CancellationToken99J [
token99\ a
)99a b
;99b c
Task== 
<== 
IEnumerable== 
<== #
IdmChangeBankDetailsDTO== 0
>==0 1
>==1 2'
GetAllChangeBankDetailsList==3 N
(==N O
long==O S
?==S T
accountNumber==U b
,==b c
CancellationToken==d u
token==v {
)=={ |
;==| }
Task>> 
<>> 
IEnumerable>> 
<>> 
IfscMasterDTO>> &
>>>& '
>>>' (!
GetAllIfscBankDetails>>) >
(>>> ?
CancellationToken>>@ Q
token>>R W
)>>W X
;>>X Y
Task?? 
<?? 
bool?? 
>?? #
CreateChangeBankDetails?? *
(??* +#
IdmChangeBankDetailsDTO??+ B
changeBankDetail??C S
,??S T
CancellationToken??U f
token??g l
)??l m
;??m n
Task@@ 
<@@ 
bool@@ 
>@@ #
UpdateChangeBankDetails@@ *
(@@* +#
IdmChangeBankDetailsDTO@@+ B
changeBankDetail@@C S
,@@S T
CancellationToken@@U f
token@@g l
)@@l m
;@@m n
TaskAA 
<AA 
boolAA 
>AA #
DeleteChangeBankDetailsAA *
(AA* +#
IdmChangeBankDetailsDTOAA+ B
changeBankDetailAAC S
,AAS T
CancellationTokenAAU f
tokenAAg l
)AAl m
;AAm n
TaskEE 
<EE 
IEnumerableEE 
<EE 
IdmPromAssetDetDTOEE +
>EE+ ,
>EE, -&
GetAllPromoterAssetDetailsEE. H
(EEH I
longEEI M
accountNumberEEN [
,EE[ \
CancellationTokenEE] n
tokenEEo t
)EEt u
;EEu v
TaskFF 
<FF 
boolFF 
>FF 
CreateAssetDetailsFF %
(FF% &
IdmPromAssetDetDTOFF& 8
AssetDTOFF9 A
,FFA B
CancellationTokenFFC T
tokenFFU Z
)FFZ [
;FF[ \
TaskGG 
<GG 
boolGG 
>GG 
UpdateAssetDetailsGG %
(GG% &
IdmPromAssetDetDTOGG& 8
AssetDTOGG9 A
,GGA B
CancellationTokenGGC T
tokenGGU Z
)GGZ [
;GG[ \
TaskHH 
<HH 
boolHH 
>HH 
DeleteAssetDetailsHH %
(HH% &
IdmPromAssetDetDTOHH& 8
AssetdetailsDTOHH9 H
,HHH I
CancellationTokenHHJ [
tokenHH\ a
)HHa b
;HHb c
TaskLL 
<LL 
IEnumerableLL 
<LL !
TblPromoterLiabDetDTOLL .
>LL. /
>LL/ 0&
GetAllPromoterLiabiltyInfoLL1 K
(LLK L
longLLL P
?LLP Q
accountNumberLLR _
,LL_ `
CancellationTokenLLa r
tokenLLs x
)LLx y
;LLy z
TaskMM 
<MM 
boolMM 
>MM &
CreatePromoterLiabiltyInfoMM -
(MM- .!
TblPromoterLiabDetDTOMM. C
PromLiabDtoMMD O
,MMO P
CancellationTokenMMQ b
tokenMMc h
)MMh i
;MMi j
TaskNN 
<NN 
boolNN 
>NN &
UpdatePromoterLiabiltyInfoNN -
(NN- .!
TblPromoterLiabDetDTONN. C
PromLiabDtoNND O
,NNO P
CancellationTokenNNQ b
tokenNNc h
)NNh i
;NNi j
TaskOO 
<OO 
boolOO 
>OO &
DeletePromoterLiabiltyInfoOO -
(OO- .!
TblPromoterLiabDetDTOOO. C
PromLiabDtoOOD O
,OOO P
CancellationTokenOOQ b
tokenOOc h
)OOh i
;OOi j
TaskSS 
<SS 
IEnumerableSS 
<SS !
TblPromoterNetWortDTOSS .
>SS. /
>SS/ 0"
GetAllPromoterNetWorthSS1 G
(SSG H
longSSH L
?SSL M
accountNumberSSN [
,SS[ \
CancellationTokenSS] n
tokenSSo t
)SSt u
;SSu v
TaskTT 
<TT 
boolTT 
>TT $
SaveAssetNetworthDetailsTT +
(TT+ ,!
TblPromoterNetWortDTOTT, A
PromoterNWDetailTTB R
,TTR S
CancellationTokenTTT e
tokenTTf k
)TTk l
;TTl m
TaskUU 
<UU 
boolUU 
>UU (
SaveLiabilityNetworthDetailsUU /
(UU/ 0!
TblPromoterNetWortDTOUU0 E
PromoterNWDetailUUF V
,UUV W
CancellationTokenUUX i
tokenUUj o
)UUo p
;UUp q
}XX 
}YY Ï
KD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IDSCService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
{ 
public 

	interface 
IDscService  
{		 
public

 
Task

 
<

 
TblEmpdscTab

  
>

  !
AuthenticateDSC

" 1
(

1 2
string

2 8
pubKey

9 ?
,

? @
string

A G
empId

H M
,

M N
CancellationToken

O `
token

a f
)

f g
;

g h
} 
} ê
LD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IFileService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
	Interface

. 7
{ 
public 

	interface 
IFileService !
{ 
public 
Task 
< 
FileDetailsDTO "
>" # 
GetEncryptedFileById$ 8
(8 9
string9 ?

documentId@ J
,J K
CancellationTokenL ]
token^ c
)c d
;d e
public 
Task 
< 
EnqDocumentDTO "
>" #

UploadFile$ .
(. /
byte/ 3
[3 4
]4 5
bytes6 ;
,; <
int= @
enqIdA F
,F G
DocumentTypeEnumH X
documentTypeY e
,e f
FileTypesEnumg t
	fileTypesu ~
,~ 
IConfiguration
Ä é
	configure
è ò
,
ò ô
CancellationToken
ö ´
token
¨ ±
)
± ≤
;
≤ ≥
public%% 
Task%% 
<%% 
bool%% 
>%% 
DeleteFileAsync%% *
(%%* +
int%%+ .

documentId%%/ 9
,%%9 :
IConfiguration%%; I
	configure%%J S
,%%S T
CancellationToken%%U f
token%%g l
)%%l m
;%%m n
public.. 
Task.. 
<.. 
IEnumerable.. 
<..  
EnqDocumentDTO..  .
>... /
>../ 0
GetFileListAsync..1 A
(..A B
int..B E
enqId..F K
,..K L
string..L R
process..S Z
,..Z [
DocumentTypeEnum..\ l
documentType..m y
,..y z
CancellationToken	..z ã
token
..å ë
)
..ë í
;
..í ì
}// 
}00 •
ND:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IMobileService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
{ 
public 

	interface 
IMobileService #
{		 
public

 
Task

 
<

 
RegdUserDTO

 
>

  &
IsMobileNumberAlreadyExist

! ;
(

; <
string

< B
	mobileNum

C L
,

L M
CancellationToken

N _
token

` e
)

e f
;

f g
public 
Task 
< 
OtpTab 
> !
IsGeneratedOtpExpired 1
(1 2
string2 8
	mobileNum9 B
,B C
CancellationTokenC T
tokenU Z
)Z [
;[ \
public 
Task 
SaveOtp 
( 
string "
otp# &
,& '
string( .
	mobileNum/ 8
,8 9
bool: >
	verStatus? H
,H I
stringJ P
processQ X
,X Y
CancellationTokenZ k
tokenl q
)q r
;r s
public 
Task 
< 
bool 
> 
IsOtpVerSuccessfull -
(- .
string. 4
otp5 8
,8 9
string: @
	mobileNumA J
,J K
stringK Q
processR Y
,Y Z
CancellationToken[ l
tokenm r
)r s
;s t
public 
Task 
< 
OtpTab 
>  
PostSuccessDeleteRec 0
(0 1
string1 7
mobile8 >
,> ?
string@ F
processG N
,N O
CancellationTokenP a
tokenb g
)g h
;h i
public 
Task 
< 
string 
> 
FetchMobileByPan ,
(, -
string- 3
panNum4 :
,: ;
CancellationToken< M
tokenN S
)S T
;T U
} 
} Ö
MD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\ITokenService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
{ 
public		 

	interface		 
ITokenService		 "
{

 
string 
GenerateAccessToken "
(" #
IEnumerable# .
<. /
Claim/ 4
>4 5
claims6 <
)< =
;= >
string  
GenerateRefreshToken #
(# $
)$ %
;% &
ClaimsPrincipal (
GetPrincipalFromExpiredToken 4
(4 5
string5 ;
token< A
)A B
;B C
public 
Task 
< 
TokenDTO 
> 
Refresh %
(% &
TokenDTO& .

tokenModel/ 9
,9 :
CancellationToken; L
tokenM R
)R S
;S T
public 
Task 
< 
TokenDTO 
> 
PromoterRefresh -
(- .
TokenDTO. 6

tokenModel7 A
,A B
CancellationTokenC T
tokenU Z
)Z [
;[ \
} 
} ∑

OD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\IUserLogHistory.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
{ 
public 

	interface 
IUserLogHistory $
{ 
public 
Task 
< 
bool 
> &
UpdateCustomerLoginHistory 4
(4 5
string5 ;
IP< >
,> ?
string@ F
panNumG M
,M N
stringO U
AccessTokenV a
,a b
stringc i
RefreshTokenj v
,v w
CancellationToken	x â
token
ä è
)
è ê
;
ê ë
public		 
Task		 
<		 
bool		 
>		 #
UpdateAdminLoginHistory		 1
(		1 2
string		2 8
empId		9 >
,		> ?
string		@ F
AccessToken		G R
,		R S
string		T Z
RefreshToken		[ g
,		g h
string		i o
ip		p r
,		r s
CancellationToken			t Ö
token
		Ü ã
)
		ã å
;
		å ç
} 
} —
uD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\LoanAccountingPromoter\ILoanAccountingPromoterService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8"
LoanAccountingPromoter		8 N
{

 
public 

	interface *
ILoanAccountingPromoterService 3
{ 
Task 
< 
IEnumerable 
<  
LoanAccountNumberDTO -
>- .
>. /
GetAccountNumber0 @
(@ A
CancellationTokenA R
tokenS X
,X Y
stringZ `
EmpIda f
)f g
;g h
} 
} ÿ
åD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\LoanAccountingPromoter\LoanRelatedReceiptProm\ILoanRelatedReceiptPromService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8"
LoanAccountingPromoter		8 N
.		N O"
LoanRelatedReceiptProm		O e
{

 
public 

	interface *
ILoanRelatedReceiptPromService 3
{ 
Task 
< 
IEnumerable 
< %
TblLaReceiptPaymentDetDTO 2
>2 3
>3 4,
 GetAllGenerateReceiptPaymentList5 U
(U V
longV Z
accountNumber[ h
,h i
CancellationTokenj {
token	| Å
)
Å Ç
;
Ç É
Task 
< 
bool 
> *
UpdateCreatePromPaymentDetails 1
(1 2
List2 6
<6 7%
TblLaReceiptPaymentDetDTO7 P
>P Q
ReceiptPaymentDtoR c
,c d
CancellationTokene v
tokenw |
)| }
;} ~
Task 
< 
IEnumerable 
< %
TblLaReceiptPaymentDetDTO 2
>2 3
>3 4$
GetAllRecipetsForPayment5 M
(M N
intN Q
	PaymnetIdR [
,[ \
CancellationToken] n
tokeno t
)t u
;u v
} 
} ´
eD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\LoanAccounting\ILoanAccountingService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
	Interface. 7
.7 8
LoanAccounting8 F
{ 
public 

	interface "
ILoanAccountingService +
{ 
Task 
< 
IEnumerable 
<  
LoanAccountNumberDTO -
>- .
>. /
GetAccountNumber0 @
(@ A
CancellationTokenA R
tokenS X
,X Y
stringZ `
EmpIda f
)f g
;g h
Task 
< 
IEnumerable 
< 
CodeTableDTO %
>% &
>& '
GetCodetable( 4
(4 5
CancellationToken5 F
tokenG L
)L M
;M N
} 
} ê
|D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Interface\LoanAccounting\LoanRelatedReceipt\ILoanRelatedReceiptService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
	Interface		. 7
.		7 8
LoanAccounting		8 F
.		F G
LoanRelatedReceipt		G Y
{

 
public 

	interface &
ILoanRelatedReceiptService /
{ 
Task 
< 
IEnumerable 
< %
TblLaReceiptPaymentDetDTO 2
>2 3
>3 4$
GetAllReceiptPaymentList5 M
(M N
longN R
accountNumberS `
,` a
CancellationTokenb s
tokent y
)y z
;z {
Task 
< 
bool 
> '
UpdateReceiptPaymentDetails .
(. /%
TblLaReceiptPaymentDetDTO/ H
ReceiptPaymentDtoI Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task 
< 
bool 
> '
DeleteReceiptPaymentDetails .
(. /%
TblLaReceiptPaymentDetDTO/ H
ReceiptPaymentDtoI Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task 
< 
IEnumerable 
< 
TblLaReceiptDetDTO +
>+ ,
>, -
GetAllReceiptRefNum. A
(A B
CancellationTokenB S
tokenT Y
)Y Z
;Z [
Task 
< 
IEnumerable 
< 
TblLaPaymentDetDTO +
>+ ,
>, -
GetAllPaymentRefNum. A
(A B
CancellationTokenB S
tokenT Y
)Y Z
;Z [
Task 
< 
bool 
> (
ApproveReceiptPaymentDetails /
(/ 0%
TblLaReceiptPaymentDetDTO0 I
ReceiptPaymentDtoJ [
,[ \
CancellationToken] n
tokeno t
)t u
;u v
Task 
< 
bool 
> '
RejectReceiptPaymentDetails .
(. /%
TblLaReceiptPaymentDetDTO/ H
ReceiptPaymentDtoI Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task 
< 
bool 
> &
UpdateCreatePaymentDetails -
(- .
List. 2
<2 3%
TblLaReceiptPaymentDetDTO3 L
>L M
ReceiptPaymentDtoN _
,_ `
CancellationTokena r
tokens x
)x y
;y z
Task 
< 
bool 
> '
CreateReceiptPaymentDetails .
(. /%
TblLaReceiptPaymentDetDTO/ H
ReceiptPaymentDtoI Z
,Z [
CancellationToken\ m
tokenn s
)s t
;t u
Task 
< 
bool 
>  
CreatePaymentDetails '
(' (
TblLaPaymentDetDTO( :

PaymentDto; E
,E F
CancellationTokenG X
tokenY ^
)^ _
;_ `
} 
} œ»
LD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AccountService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
{ 
public 

class 
AccountService 
:  !
IAccountService" 1
{ 
private 
readonly 
IEntityRepository *
<* +
NuserhistoryTab+ :
>: ;
_smsTrackRepository< O
;O P
private 
readonly 
IEntityRepository *
<* +
RegduserTab+ 6
>6 7
_regdUserRepository8 K
;K L
private 
readonly 
IEntityRepository *
<* +
TblEmpdscTab+ 7
>7 8
_empRepository9 G
;G H
private 
readonly 
IEntityRepository *
<* +
PromsessionTab+ 9
>9 :"
_custSessionRepository; Q
;Q R
private 
readonly 
IEntityRepository *
<* +
EmpsessionTab+ 8
>8 9!
_empSessionRepository: O
;O P
private 
readonly 
IEntityRepository *
<* +
IpCdtab+ 2
>2 3
_ipRepository4 A
;A B
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private   
readonly   
IUnitOfWork   $
_work  % *
;  * +
public-- 
AccountService-- 
(-- 
IEntityRepository-- /
<--/ 0
TblEmpdscTab--0 <
>--< =
empRepository--> K
,--K L
IMapper--M T
mapper--U [
,--[ \
IEntityRepository--] n
<--n o
PromsessionTab--o }
>--} ~"
custSessionRepository	-- î
,
--î ï
IEntityRepository.. 
<.. 
NuserhistoryTab.. ,
>.., -
smsTrackRepository... @
,..@ A
IEntityRepository..B S
<..S T
RegduserTab..T _
>.._ `
regdUserRepository..a s
,..s t
IEntityRepository	..u Ü
<
..Ü á
EmpsessionTab
..á î
>
..î ï"
empSessionRepository
..ñ ™
,
..™ ´
IEntityRepository// 
<// 
IpCdtab// %
>//% &
ipRepository//' 3
,//3 4
UserInfo//5 =
userInfo//> F
,//F G
IUnitOfWork//H S
work//T X
)//X Y
{00 	
_smsTrackRepository22 
=22  !
smsTrackRepository22" 4
;224 5
_regdUserRepository33 
=33  !
regdUserRepository33" 4
;334 5
_empRepository44 
=44 
empRepository44 *
;44* +"
_custSessionRepository55 "
=55# $!
custSessionRepository55% :
;55: ;!
_empSessionRepository66 !
=66" # 
empSessionRepository66$ 8
;668 9
_ipRepository77 
=77 
ipRepository77 (
;77( )
	_userInfo88 
=88 
userInfo88  
;88  !
_mapper99 
=99 
mapper99 
;99 
_work:: 
=:: 
work:: 
;:: 
};; 	
publicEE 
asyncEE 
TaskEE 
<EE 
boolEE 
>EE 
SaveUserTryActionEE  1
(EE1 2
stringEE2 8

verDetailsEE9 C
,EEC D
stringEEE K
verTypeEEL S
,EES T
stringEEU [
statusEE\ b
,EEb c
intEEd g
regIdEEh m
,EEm n
stringEEo u
ProcessEEv }
,EE} ~
CancellationToken	EE ê
token
EEë ñ
)
EEñ ó
{FF 	
NuserhistoryTabGG 

nUserTrackGG &
=GG' (
newGG) ,
(GG, -
)GG- .
{HH 
VerTypeII 
=II 
verTypeII !
,II! "

VerDetailsJJ 
=JJ 

verDetailsJJ '
,JJ' (
	VerStatusKK 
=KK 
statusKK "
,KK" #
VerDateLL 
=LL 
DateTimeLL "
.LL" #
NowLL# &
,LL& '
IsActiveMM 
=MM 
trueMM 
,MM  
	IsDeletedNN 
=NN 
falseNN !
,NN! "
	CreatedByOO 
=OO 
	_userInfoOO %
.OO% &
UserIdOO& ,
,OO, -
CreatedDatePP 
=PP 
DateTimePP &
.PP& '
UtcNowPP' -
,PP- .
ProcessQQ 
=QQ 
ProcessQQ !
}RR 
;RR 
awaitSS 
_smsTrackRepositorySS %
.SS% &
AddAsyncSS& .
(SS. /

nUserTrackSS/ 9
,SS9 :
tokenSS; @
)SS@ A
.SSA B
ConfigureAwaitSSB P
(SSP Q
falseSSQ V
)SSV W
;SSW X
awaitTT 
_workTT 
.TT 
CommitAsyncTT #
(TT# $
tokenTT$ )
)TT) *
.TT* +
ConfigureAwaitTT+ 9
(TT9 :
falseTT: ?
)TT? @
;TT@ A
returnUU 
trueUU 
;UU 
}VV 	
publicXX 
asyncXX 
TaskXX 
<XX 
intXX 
>XX 
SaveRegistrationXX /
(XX/ 0
RegduserTabXX0 ;
registrationDetailsXX< O
,XXO P
CancellationTokenXXQ b
tokenXXc h
)XXh i
{YY 	
registrationDetailsZZ 
.ZZ  
UserRegnDateZZ  ,
=ZZ- .
DateTimeZZ/ 7
.ZZ7 8
NowZZ8 ;
;ZZ; <
registrationDetails[[ 
.[[  
IsActive[[  (
=[[) *
true[[+ /
;[[/ 0
registrationDetails\\ 
.\\  
	IsDeleted\\  )
=\\* +
false\\, 1
;\\1 2
registrationDetails]] 
.]]  
	CreatedBy]]  )
=]]* +
	_userInfo]], 5
.]]5 6
UserId]]6 <
;]]< =
registrationDetails^^ 
.^^  
CreatedDate^^  +
=^^, -
DateTime^^. 6
.^^6 7
UtcNow^^7 =
;^^= >
var`` 
data`` 
=`` 
await`` 
_regdUserRepository`` 0
.``0 1
AddAsync``1 9
(``9 :
registrationDetails``: M
,``M N
token``O T
)``T U
.``U V
ConfigureAwait``V d
(``d e
false``e j
)``j k
;``k l
awaitaa 
_workaa 
.aa 
CommitAsyncaa #
(aa# $
tokenaa$ )
)aa) *
.aa* +
ConfigureAwaitaa+ 9
(aa9 :
falseaa: ?
)aa? @
;aa@ A
returnbb 
(bb 
intbb 
)bb 
databb 
.bb 
	UserRowIdbb &
;bb& '
}cc 	
publicee 
asyncee 
Taskee 
<ee 
boolee 
>ee 
IsIpUnderKSWANee  .
(ee. /
stringee/ 5
ipee6 8
,ee8 9
CancellationTokenee: K
tokeneeL Q
)eeQ R
{ff 	
varhh 
ipDethh 
=hh 
awaithh 
_ipRepositoryhh +
.hh+ ,+
FirstOrDefaultByExpressionAsynchh, K
(hhK L
xhhL M
=>hhN P
xhhQ R
.hhR S
IphhS U
==hhV X
iphhY [
&&hh\ ^
xhh_ `
.hh` a
IsActivehha i
==hhj l
truehhm q
&&hhr t
xhhu v
.hhv w
	IsDeleted	hhw Ä
==
hhÅ É
false
hhÑ â
,
hhâ ä
token
hhã ê
)
hhê ë
.
hhë í
ConfigureAwait
hhí †
(
hh† °
false
hh° ¶
)
hh¶ ß
;
hhß ®
ifjj 
(jj 
ipDetjj 
!=jj 
nulljj 
)jj 
{kk 
returnll 
truell 
;ll 
}mm 
returnoo 
falseoo 
;oo 
}pp 	
publicrr 
asyncrr 
Taskrr 
<rr 
TblEmpdscTabrr &
>rr& '

AdminLoginrr( 2
(rr2 3
stringrr3 9
empIdrr: ?
,rr? @
stringrrA G
passwordrrH P
,rrP Q
CancellationTokenrrR c
tokenrrd i
)rri j
{ss 	
returnuu 
awaituu 
_empRepositoryuu +
.uu+ ,7
+FindByFirstOrDefalutMatchingPropertiesAsyncuu, W
(uuW X
tokenuuX ]
,uu] ^
xuu_ `
=>uua c
xuud e
.uue f
EmpIduuf k
==uul n
empIduuo t
&&uuu w
xuux y
.uuy z
EmpPswd	uuz Å
==
uuÇ Ñ
password
uuÖ ç
&&
uué ê
x
uuë í
.
uuí ì
IsActive
uuì õ
==
uuú û
true
uuü £
&&
uu§ ¶
x
uuß ®
.
uu® ©
	IsDeleted
uu© ≤
==
uu≥ µ
false
uu∂ ª
,
uuª º
include
uuΩ ƒ
=>
uu≈ «
include
uu» œ
.
uuœ –
Emp
uu– ”
)
uu” ‘
.
uu‘ ’
ConfigureAwait
uu’ „
(
uu„ ‰
false
uu‰ È
)
uuÈ Í
;
uuÍ Î
}ww 	
publicyy 
asyncyy 
Taskyy 
<yy 
Listyy 
<yy 
stringyy %
>yy% &
>yy& '
GetAssignedRolesyy( 8
(yy8 9
stringyy9 ?
empIdyy@ E
,yyE F
CancellationTokenyyG X
tokenyyY ^
)yy^ _
{zz 	
return|| 
new|| 
List|| 
<|| 
string|| "
>||" #
{||$ %
$str||& -
,||- .
$str||/ :
,||: ;
$str||< @
,||@ A
$str||A P
,||P Q
$str||R f
}||g h
;||h i
}~~ 	
public
ÄÄ 
async
ÄÄ 
Task
ÄÄ 
<
ÄÄ 
bool
ÄÄ 
>
ÄÄ !
IsCustAlreadyActive
ÄÄ  3
(
ÄÄ3 4
string
ÄÄ4 :
panNum
ÄÄ; A
,
ÄÄA B
CancellationToken
ÄÄC T
token
ÄÄU Z
)
ÄÄZ [
{
ÅÅ 	
var
ÉÉ 

activeUser
ÉÉ 
=
ÉÉ 
await
ÉÉ "$
_custSessionRepository
ÉÉ# 9
.
ÉÉ9 :-
FirstOrDefaultByExpressionAsync
ÉÉ: Y
(
ÉÉY Z
x
ÉÉZ [
=>
ÉÉ\ ^
x
ÉÉ_ `
.
ÉÉ` a
PromPan
ÉÉa h
==
ÉÉi k
panNum
ÉÉl r
&&
ÉÉs u
x
ÉÉv w
.
ÉÉw x
SessionStatusÉÉx Ö
==ÉÉÜ à
trueÉÉâ ç
&&ÉÉé ê
xÉÉë í
.ÉÉí ì
IsActiveÉÉì õ
==ÉÉú û
trueÉÉü £
&&ÉÉ§ ¶
xÉÉß ®
.ÉÉ® ©
	IsDeletedÉÉ© ≤
==ÉÉ≥ µ
falseÉÉ∂ ª
,ÉÉª º
tokenÉÉΩ ¬
)ÉÉ¬ √
.ÉÉ√ ƒ
ConfigureAwaitÉÉƒ “
(ÉÉ“ ”
falseÉÉ” ÿ
)ÉÉÿ Ÿ
;ÉÉŸ ⁄
if
ÖÖ 
(
ÖÖ 

activeUser
ÖÖ 
!=
ÖÖ 
null
ÖÖ "
)
ÖÖ" #
{
ÜÜ 
if
áá 
(
áá 

activeUser
áá 
.
áá '
Accesstokenexpirydatetime
áá 8
>
áá9 :
DateTime
áá; C
.
ááC D
Now
ááD G
)
ááG H
{
àà 
return
ââ 
true
ââ 
;
ââ  
}
ää 
else
ãã 
{
åå 
return
çç 
false
çç  
;
çç  !
}
éé 
}
èè 
return
ëë 
false
ëë 
;
ëë 
}
ìì 	
public
ïï 
async
ïï 
Task
ïï 
<
ïï 
bool
ïï 
>
ïï  
IsAdmAlreadyActive
ïï  2
(
ïï2 3
string
ïï3 9

EmployeeId
ïï: D
,
ïïD E
CancellationToken
ïïF W
token
ïïX ]
)
ïï] ^
{
ññ 	
var
òò 
user
òò 
=
òò 
await
òò #
_empSessionRepository
òò 2
.
òò2 3-
FirstOrDefaultByExpressionAsync
òò3 R
(
òòR S
x
òòS T
=>
òòU W
x
òòX Y
.
òòY Z
EmpId
òòZ _
==
òò` b

EmployeeId
òòc m
&&
òòn p
x
òòq r
.
òòr s
SessionStatusòòs Ä
==òòÅ É
trueòòÑ à
&&òòâ ã
xòòå ç
.òòç é
IsActiveòòé ñ
==òòó ô
trueòòö û
&&òòü °
xòò¢ £
.òò£ §
	IsDeletedòò§ ≠
==òòÆ ∞
falseòò± ∂
,òò∂ ∑
tokenòò∏ Ω
)òòΩ æ
.òòæ ø
ConfigureAwaitòòø Õ
(òòÕ Œ
falseòòŒ ”
)òò” ‘
;òò‘ ’
if
öö 
(
öö 
user
öö 
!=
öö 
null
öö 
)
öö 
{
õõ 
if
úú 
(
úú 
user
úú 
.
úú '
Accesstokenexpirydatetime
úú 2
>
úú3 4
DateTime
úú5 =
.
úú= >
Now
úú> A
)
úúA B
{
ùù 
return
ûû 
true
ûû 
;
ûû  
}
üü 
else
†† 
{
°° 
return
¢¢ 
false
¢¢  
;
¢¢  !
}
££ 
}
§§ 
return
¶¶ 
false
¶¶ 
;
¶¶ 
}
®® 	
public
™™ 
async
™™ 
Task
™™ 
<
™™ 
TblEmpdscTab
™™ &
>
™™& '$
KsfcUserForgotPassword
™™( >
(
™™> ?
string
™™? E
empId
™™F K
,
™™K L
CancellationToken
™™M ^
token
™™_ d
)
™™d e
{
´´ 	
var
≠≠ 
user
≠≠ 
=
≠≠ 
await
≠≠ 
_empRepository
≠≠ +
.
≠≠+ ,9
+FindByFirstOrDefalutMatchingPropertiesAsync
≠≠, W
(
≠≠W X
token
≠≠X ]
,
≠≠] ^
x
≠≠_ `
=>
≠≠a c
x
≠≠d e
.
≠≠e f
EmpId
≠≠f k
==
≠≠l n
empId
≠≠o t
&&
≠≠u w
x
≠≠x y
.
≠≠y z
IsActive≠≠z Ç
==≠≠É Ö
true≠≠Ü ä
&&≠≠ã ç
x≠≠é è
.≠≠è ê
	IsDeleted≠≠ê ô
==≠≠ö ú
false≠≠ù ¢
,≠≠¢ £
include≠≠§ ´
=>≠≠¨ Æ
include≠≠Ø ∂
.≠≠∂ ∑
Emp≠≠∑ ∫
)≠≠∫ ª
.≠≠ª º
ConfigureAwait≠≠º  
(≠≠  À
false≠≠À –
)≠≠– —
;≠≠— “
return
ØØ 
user
ØØ 
;
ØØ 
}
±± 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
bool
≥≥ 
>
≥≥ 
UpdateNewpassword
≥≥  1
(
≥≥1 2
string
≥≥2 8
empId
≥≥9 >
,
≥≥> ?
string
≥≥@ F
newPassword
≥≥G R
,
≥≥R S
CancellationToken
≥≥T e
token
≥≥f k
)
≥≥k l
{
¥¥ 	
var
∂∂ 
user
∂∂ 
=
∂∂ 
await
∂∂ 
_empRepository
∂∂ +
.
∂∂+ ,-
FirstOrDefaultByExpressionAsync
∂∂, K
(
∂∂K L
x
∂∂L M
=>
∂∂N P
x
∂∂Q R
.
∂∂R S
EmpId
∂∂S X
==
∂∂Y [
empId
∂∂\ a
&&
∂∂b d
x
∂∂e f
.
∂∂f g
IsActive
∂∂g o
==
∂∂p r
true
∂∂s w
&&
∂∂x z
x
∂∂{ |
.
∂∂| }
	IsDeleted∂∂} Ü
==∂∂á â
false∂∂ä è
,∂∂è ê
token∂∂ë ñ
)∂∂ñ ó
.∂∂ó ò
ConfigureAwait∂∂ò ¶
(∂∂¶ ß
false∂∂ß ¨
)∂∂¨ ≠
;∂∂≠ Æ
if
∏∏ 
(
∏∏ 
user
∏∏ 
!=
∏∏ 
null
∏∏ 
)
∏∏ 
{
ππ 
user
∫∫ 
.
∫∫ 
EmpPswd
∫∫ 
=
∫∫ 
newPassword
∫∫ *
;
∫∫* +
user
ªª 
.
ªª 

IsPswdChng
ªª 
=
ªª  !
true
ªª" &
;
ªª& '
user
ºº 
.
ºº 

ModifiedBy
ºº 
=
ºº  !
	_userInfo
ºº" +
.
ºº+ ,
UserId
ºº, 2
;
ºº2 3
user
ΩΩ 
.
ΩΩ 
ModifiedDate
ΩΩ !
=
ΩΩ" #
DateTime
ΩΩ$ ,
.
ΩΩ, -
UtcNow
ΩΩ- 3
;
ΩΩ3 4
}
ææ 
await
øø 
_empRepository
øø  
.
øø  !
UpdateAsync
øø! ,
(
øø, -
user
øø- 1
,
øø1 2
token
øø3 8
)
øø8 9
.
øø9 :
ConfigureAwait
øø: H
(
øøH I
false
øøI N
)
øøN O
;
øøO P
await
¿¿ 
_work
¿¿ 
.
¿¿ 
CommitAsync
¿¿ #
(
¿¿# $
token
¿¿$ )
)
¿¿) *
.
¿¿* +
ConfigureAwait
¿¿+ 9
(
¿¿9 :
false
¿¿: ?
)
¿¿? @
;
¿¿@ A
return
¡¡ 
true
¡¡ 
;
¡¡ 
}
¬¬ 	
public
ƒƒ 
async
ƒƒ 
Task
ƒƒ 
<
ƒƒ 
bool
ƒƒ 
>
ƒƒ 
CustomerLogout
ƒƒ  .
(
ƒƒ. /
string
ƒƒ/ 5
panNum
ƒƒ6 <
,
ƒƒ< =
CancellationToken
ƒƒ> O
token
ƒƒP U
)
ƒƒU V
{
≈≈ 	
var
«« 
item
«« 
=
«« 
await
«« $
_custSessionRepository
«« 3
.
««3 4-
FirstOrDefaultByExpressionAsync
««4 S
(
««S T
x
««T U
=>
««V X
x
««Y Z
.
««Z [
PromPan
««[ b
==
««c e
panNum
««f l
,
««l m
token
««n s
)
««s t
.
««t u
ConfigureAwait««u É
(««É Ñ
false««Ñ â
)««â ä
;««ä ã
if
»» 
(
»» 
item
»» 
!=
»» 
null
»» 
)
»» 
{
…… 
item
   
.
   
LogoutDateTime
   #
=
  $ %
DateTime
  & .
.
  . /
Now
  / 2
;
  2 3
item
ÀÀ 
.
ÀÀ 
SessionStatus
ÀÀ "
=
ÀÀ# $
false
ÀÀ% *
;
ÀÀ* +
}
ÃÃ 
await
ÕÕ $
_custSessionRepository
ÕÕ (
.
ÕÕ( )
UpdateAsync
ÕÕ) 4
(
ÕÕ4 5
item
ÕÕ5 9
,
ÕÕ9 :
token
ÕÕ; @
)
ÕÕ@ A
.
ÕÕA B
ConfigureAwait
ÕÕB P
(
ÕÕP Q
false
ÕÕQ V
)
ÕÕV W
;
ÕÕW X
await
ŒŒ 
_work
ŒŒ 
.
ŒŒ 
CommitAsync
ŒŒ #
(
ŒŒ# $
token
ŒŒ$ )
)
ŒŒ) *
.
ŒŒ* +
ConfigureAwait
ŒŒ+ 9
(
ŒŒ9 :
false
ŒŒ: ?
)
ŒŒ? @
;
ŒŒ@ A
return
œœ 
true
œœ 
;
œœ 
}
–– 	
public
““ 
async
““ 
Task
““ 
<
““ 
bool
““ 
>
““ 
AdminLogout
““  +
(
““+ ,
string
““, 2
empId
““3 8
,
““8 9
CancellationToken
““: K
token
““L Q
)
““Q R
{
”” 	
var
’’ 
user
’’ 
=
’’ 
await
’’ #
_empSessionRepository
’’ 2
.
’’2 3-
FirstOrDefaultByExpressionAsync
’’3 R
(
’’R S
x
’’S T
=>
’’U W
x
’’X Y
.
’’Y Z
EmpId
’’Z _
==
’’` b
empId
’’c h
,
’’h i
token
’’j o
)
’’o p
.
’’p q
ConfigureAwait
’’q 
(’’ Ä
false’’Ä Ö
)’’Ö Ü
;’’Ü á
if
◊◊ 
(
◊◊ 
user
◊◊ 
!=
◊◊ 
null
◊◊ 
)
◊◊ 
{
ÿÿ 
user
ŸŸ 
.
ŸŸ 
SessionStatus
ŸŸ "
=
ŸŸ# $
false
ŸŸ% *
;
ŸŸ* +
user
⁄⁄ 
.
⁄⁄ 
LogoutDateTime
⁄⁄ #
=
⁄⁄$ %
DateTime
⁄⁄& .
.
⁄⁄. /
Now
⁄⁄/ 2
;
⁄⁄2 3
}
€€ 
await
‹‹ #
_empSessionRepository
‹‹ '
.
‹‹' (
UpdateAsync
‹‹( 3
(
‹‹3 4
user
‹‹4 8
,
‹‹8 9
token
‹‹: ?
)
‹‹? @
.
‹‹@ A
ConfigureAwait
‹‹A O
(
‹‹O P
false
‹‹P U
)
‹‹U V
;
‹‹V W
await
›› 
_work
›› 
.
›› 
CommitAsync
›› #
(
››# $
token
››$ )
)
››) *
.
››* +
ConfigureAwait
››+ 9
(
››9 :
false
››: ?
)
››? @
;
››@ A
return
ﬁﬁ 
true
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 	
public
·· 
async
·· 
Task
·· 
<
·· 
TblEmpdscTab
·· &
>
··& '
EmpPasswordChange
··( 9
(
··9 :
PasswordChangeDTO
··: K
info
··L P
,
··P Q
CancellationToken
··R c
token
··d i
)
··i j
{
‚‚ 	
var
‰‰ 
item
‰‰ 
=
‰‰ 
await
‰‰ 
_empRepository
‰‰ +
.
‰‰+ ,-
FirstOrDefaultByExpressionAsync
‰‰, K
(
‰‰K L
x
‰‰L M
=>
‰‰N P
x
‰‰Q R
.
‰‰R S
EmpId
‰‰S X
==
‰‰Y [
info
‰‰\ `
.
‰‰` a
EmpId
‰‰a f
&&
‰‰g i
x
‰‰j k
.
‰‰k l
EmpPswd
‰‰l s
==
‰‰t v
info
‰‰w {
.
‰‰{ |
OldPassword‰‰| á
,‰‰á à
token‰‰â é
)‰‰é è
.‰‰è ê
ConfigureAwait‰‰ê û
(‰‰û ü
false‰‰ü §
)‰‰§ •
;‰‰• ¶
if
ÊÊ 
(
ÊÊ 
item
ÊÊ 
!=
ÊÊ 
null
ÊÊ 
)
ÊÊ 
{
ÁÁ 
item
ËË 
.
ËË 
EmpPswd
ËË 
=
ËË 
info
ËË #
.
ËË# $
NewPassword
ËË$ /
;
ËË/ 0
item
ÈÈ 
.
ÈÈ 

IsPswdChng
ÈÈ 
=
ÈÈ  !
false
ÈÈ" '
;
ÈÈ' (
item
ÍÍ 
.
ÍÍ 

ModifiedBy
ÍÍ 
=
ÍÍ  !
	_userInfo
ÍÍ" +
.
ÍÍ+ ,
UserId
ÍÍ, 2
;
ÍÍ2 3
item
ÎÎ 
.
ÎÎ 
ModifiedDate
ÎÎ !
=
ÎÎ" #
DateTime
ÎÎ$ ,
.
ÎÎ, -
UtcNow
ÎÎ- 3
;
ÎÎ3 4
await
ÏÏ 
_empRepository
ÏÏ $
.
ÏÏ$ %
UpdateAsync
ÏÏ% 0
(
ÏÏ0 1
item
ÏÏ1 5
,
ÏÏ5 6
token
ÏÏ7 <
)
ÏÏ< =
.
ÏÏ= >
ConfigureAwait
ÏÏ> L
(
ÏÏL M
false
ÏÏM R
)
ÏÏR S
;
ÏÏS T
await
ÌÌ 
_work
ÌÌ 
.
ÌÌ 
CommitAsync
ÌÌ '
(
ÌÌ' (
token
ÌÌ( -
)
ÌÌ- .
.
ÌÌ. /
ConfigureAwait
ÌÌ/ =
(
ÌÌ= >
false
ÌÌ> C
)
ÌÌC D
;
ÌÌD E
}
ÔÔ 
return
 
item
 
;
 
}
ÚÚ 	
public
˙˙ 
async
˙˙ 
Task
˙˙ 
<
˙˙ 
string
˙˙  
>
˙˙  !
GetUserMobile
˙˙" /
(
˙˙/ 0
string
˙˙0 6
panNum
˙˙7 =
,
˙˙= >
CancellationToken
˙˙? P
token
˙˙Q V
)
˙˙V W
{
˚˚ 	
var
¸¸ 
data
¸¸ 
=
¸¸ 
await
¸¸ !
_regdUserRepository
¸¸ 0
.
¸¸0 1-
FirstOrDefaultByExpressionAsync
¸¸1 P
(
¸¸P Q
x
¸¸Q R
=>
¸¸S U
x
¸¸V W
.
¸¸W X
UserPan
¸¸X _
==
¸¸` b
panNum
¸¸c i
&&
¸¸j l
x
¸¸m n
.
¸¸n o
IsActive
¸¸o w
==
¸¸x z
true
¸¸{ 
&&¸¸Ä Ç
x¸¸É Ñ
.¸¸Ñ Ö
	IsDeleted¸¸Ö é
==¸¸è ë
false¸¸í ó
,¸¸ó ò
token¸¸ô û
)¸¸û ü
.¸¸ü †
ConfigureAwait¸¸† Æ
(¸¸Æ Ø
false¸¸Ø ¥
)¸¸¥ µ
;¸¸µ ∂
if
˝˝ 
(
˝˝ 
data
˝˝ 
!=
˝˝ 
null
˝˝ 
)
˝˝ 
{
˛˛ 
return
ˇˇ 
data
ˇˇ 
.
ˇˇ 
UserMobileno
ˇˇ (
;
ˇˇ( )
}
ÄÄ 
return
ÅÅ 
String
ÅÅ 
.
ÅÅ 
Empty
ÅÅ 
;
ÅÅ  
}
ÇÇ 	
}
ÉÉ 
}ÑÑ ÓF
]D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\AssignOfficeService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
AdminModule6 A
{ 
public 

class 
AssignOfficeService $
:% &
IAssignOffice' 4
{ 
private 
readonly 
IEntityRepository *
<* +
TblEmploginTab+ 9
>9 : 
_assignofficeService; O
;O P
private 
readonly 
IEntityRepository *
<* +
TblEmpdesigTab+ 9
>9 :
_desgService; G
;G H
private 
readonly 
IUnitOfWork $
_unitOfWorkService% 7
;7 8
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
ITokenService &
_tokenService' 4
;4 5
public 
AssignOfficeService "
(" #
IEntityRepository# 4
<4 5
TblEmploginTab5 C
>C D
assignofficeServiceE X
,X Y
IEntityRepositoryZ k
<k l
TblEmpdesigTabl z
>z {
desgService	| á
,
á à
IUnitOfWork
â î
unitOfWorkService
ï ¶
,
¶ ß
IMapper
® Ø

smsService
∞ ∫
,
∫ ª
ITokenService
º …
tokenService
  ÷
)
÷ ◊
{ 	 
_assignofficeService  
=! "
assignofficeService# 6
;6 7
_desgService 
= 
desgService &
;& '
_unitOfWorkService   
=    
unitOfWorkService  ! 2
;  2 3
_tokenService!! 
=!! 
tokenService!! (
;!!( )
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
List$$ 
<$$ )
EmployeeDesignationHistoryDTO$$ <
>$$< =
>$$= > 
GetAllEmployeeBranch$$? S
($$S T
CancellationToken$$T e
Token$$f k
)$$k l
{%% 	
List&& 
<&& )
EmployeeDesignationHistoryDTO&& .
>&&. /
lis_dsc&&0 7
=&&8 9
new&&: =
(&&= >
)&&> ?
;&&? @
var'' 
emp_details'' 
='' 
await'' #
_desgService''$ 0
.''0 1!
FindByExpressionAsync''1 F
(''F G
x''G H
=>''I K
x''L M
.''M N
EmpId''N S
==''T V
x''W X
.''X Y
EmpId''Y ^
,''^ _
Token''` e
)''e f
;''f g
lis_dsc)) 
=)) 
_mapper)) 
.)) 
Map)) !
<))! "
List))" &
<))& ')
EmployeeDesignationHistoryDTO))' D
>))D E
>))E F
())F G
emp_details))G R
)))R S
;))S T
return** 
lis_dsc** 
;** 
}++ 	
public-- 
async-- 
Task-- 
<-- 
List-- 
<-- )
EmployeeDesignationHistoryDTO-- <
>--< =
>--= >(
GetAllEmployeeBranchByFilter--? [
(--[ \
CancellationToken--\ m
Token--n s
,--s t
string--u {

ticket_num	--| Ü
=
--á à
null
--â ç
)
--ç é
{.. 	
List// 
<// )
EmployeeDesignationHistoryDTO// .
>//. /
lis_dsc//0 7
=//8 9
new//: =
(//= >
)//> ?
;//? @
var00 
emp_details00 
=00 
await00 #
_desgService00$ 0
.000 1!
FindByExpressionAsync001 F
(00F G
x00G H
=>00I K
x00L M
.00M N
EmpId00N S
==00T V

ticket_num00W a
,00a b
Token00c h
)00h i
;00i j
lis_dsc22 
=22 
_mapper22 
.22 
Map22 !
<22! "
List22" &
<22& ')
EmployeeDesignationHistoryDTO22' D
>22D E
>22E F
(22F G
emp_details22G R
)22R S
;22S T
return33 
lis_dsc33 
;33 
}44 	
public66 
async66 
Task66 
<66 
int66 
>66 
SaveEmployeeCheckIn66 2
(662 3
TblEmpdesigTab663 A
CheckIn_dets66B N
,66N O
CancellationToken66P a
Token66b g
)66g h
{77 	
CheckIn_dets99 
.99 
IsActive99 !
=99" #
true99$ (
;99( )
CheckIn_dets:: 
.:: 
	IsDeleted:: "
=::# $
false::% *
;::* +
CheckIn_dets;; 
.;; 
	CreatedBy;; "
=;;# $
	_userInfo;;% .
.;;. /
Name;;/ 3
;;;3 4
CheckIn_dets<< 
.<< 
CreatedDate<< $
=<<% &
DateTime<<' /
.<</ 0
Now<<0 3
;<<3 4
await>> 
_desgService>> 
.>> 
AddAsync>> &
(>>& '
CheckIn_dets>>' 3
,>>3 4
Token>>5 :
)>>: ;
;>>; <
return?? 
$num?? 
;?? 
}@@ 	
publicAA	 
asyncAA 
TaskAA 
<AA 
intAA 
>AA  
SaveEmployeeCheckOutAA  4
(AA5 6
TblEmpdesigTabAA6 D
Checkout_detsAAE R
,AAR S
CancellationTokenAAT e
TokenAAf k
)AAk l
{BB 	
TblEmpdesigTabCC 
	exis_DataCC $
=CC% &
awaitCC' ,
_desgServiceCC- 9
.CC9 :+
FirstOrDefaultByExpressionAsyncCC: Y
(CCY Z
xCCZ [
=>CC\ ^
xCC_ `
.CC` a
EmpIdCCa f
==CCg i
Checkout_detsCCj w
.CCw x
EmpIdCCx }
,CC} ~
Token	CC Ñ
)
CCÑ Ö
;
CCÖ Ü
ifDD 
(DD 
	exis_DataDD 
==DD 
nullDD !
)DD! "
{EE 
Checkout_detsFF 
.FF 
IsActiveFF &
=FF' (
trueFF) -
;FF- .
Checkout_detsGG 
.GG 
	IsDeletedGG '
=GG( )
falseGG* /
;GG/ 0
Checkout_detsHH 
.HH 
	CreatedByHH '
=HH( )
	_userInfoHH* 3
.HH3 4
NameHH4 8
;HH8 9
Checkout_detsII 
.II 
ModifiedDateII *
=II+ ,
DateTimeII- 5
.II5 6
NowII6 9
;II9 :
awaitKK 
_desgServiceKK "
.KK" #
AddAsyncKK# +
(KK+ ,
Checkout_detsKK, 9
,KK9 :
TokenKK; @
)KK@ A
;KKA B
returnLL 
$numLL 
;LL 
}MM 
elseNN 
{OO 
returnPP 
$numPP 
;PP 
}QQ 
}SS 	
publicTT 
asyncTT 
TaskTT 
<TT )
EmployeeDesignationHistoryDTOTT 7
>TT7 8$
DeleteEmployeeBranchByIdTT9 Q
(TTQ R
stringTTR X

ticket_numTTY c
,TTc d
CancellationTokenTTe v
TokenTTw |
)TT| }
{UU 	
TblEmpdesigTabVV 
emp_detailsVV &
=VV' (
awaitVV) .
_desgServiceVV/ ;
.VV; <+
FirstOrDefaultByExpressionAsyncVV< [
(VV[ \
xVV\ ]
=>VV^ `
xVVa b
.VVb c
IsActiveVVc k
==VVl n
trueVVo s
,VVs t
TokenVVu z
)VVz {
;VV{ |
emp_detailsWW 
.WW 
IsActiveWW  
=WW! "
falseWW# (
;WW( )
emp_detailsXX 
.XX 
	IsDeletedXX !
=XX" #
trueXX$ (
;XX( )
emp_detailsYY 
.YY 
ModifiedDateYY $
=YY% &
DateTimeYY' /
.YY/ 0
NowYY0 3
;YY3 4
await[[ 
_desgService[[ 
.[[ 
UpdateAsync[[ *
([[* +
emp_details[[+ 6
,[[6 7
Token[[8 =
)[[= >
;[[> ?
return]] 
_mapper]] 
.]] 
Map]] 
<]] )
EmployeeDesignationHistoryDTO]] <
>]]< =
(]]= >
emp_details]]> I
)]]I J
;]]J K
}__ 	
}aa 
}bb ‚
ZD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\AttributeService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
Service

. 5
.

5 6
AdminModule

6 A
{ 
public 

class 
AttributeService !
:" #)
IGenericAdminModuleRepository$ A
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public 
AttributeService 
(  
IEntityRepository  1
<1 2
OtpTab2 8
>8 9
entityRepository: J
)J K
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
List 
< 
object 
>  
>  !
GetAllAsync" -
(- .
CancellationToken. ?
cancellationToken@ Q
)Q R
{ 	
throw   
new   #
NotImplementedException   -
(  - .
)  . /
;  / 0
}!! 	
public## 
Task## 
<## 
object## 
>## 
GetByIdAsync## (
(##( )
object##) /
model##0 5
,##5 6
CancellationToken##7 H
cancellationToken##I Z
)##Z [
{$$ 	
throw%% 
new%% #
NotImplementedException%% -
(%%- .
)%%. /
;%%/ 0
}&& 	
public(( 
Task(( 
<(( 
object(( 
>(( 
UpdateAsync(( '
(((' (
object((( .
model((/ 4
,((4 5
CancellationToken((6 G
cancellationToken((H Y
)((Y Z
{)) 	
throw** 
new** #
NotImplementedException** -
(**- .
)**. /
;**/ 0
}++ 	
},, 
}-- Ü
fD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\AttributeUnitOperatorService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
AdminModule6 A
{ 
public 

class (
AttributeUnitOperatorService -
:. /)
IGenericAdminModuleRepository0 M
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public (
AttributeUnitOperatorService +
(+ ,
IEntityRepository, =
<= >
OtpTab> D
>D E
entityRepositoryF V
)V W
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public   
Task   
<   
List   
<   
object   
>    
>    !
GetAllAsync  " -
(  - .
CancellationToken  . ?
cancellationToken  @ Q
)  Q R
{!! 	
throw"" 
new"" #
NotImplementedException"" -
(""- .
)"". /
;""/ 0
}## 	
public%% 
Task%% 
<%% 
object%% 
>%% 
GetByIdAsync%% (
(%%( )
object%%) /
model%%0 5
,%%5 6
CancellationToken%%7 H
cancellationToken%%I Z
)%%Z [
{&& 	
throw'' 
new'' #
NotImplementedException'' -
(''- .
)''. /
;''/ 0
}(( 	
public** 
Task** 
<** 
object** 
>** 
UpdateAsync** '
(**' (
object**( .
model**/ 4
,**4 5
CancellationToken**6 G
cancellationToken**H Y
)**Y Z
{++ 	
throw,, 
new,, #
NotImplementedException,, -
(,,- .
),,. /
;,,/ 0
}-- 	
}.. 
}// Ó
^D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\AttributeUnitService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
AdminModule6 A
{ 
public 

class  
AttributeUnitService %
:& ')
IGenericAdminModuleRepository( E
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public  
AttributeUnitService #
(# $
IEntityRepository$ 5
<5 6
OtpTab6 <
>< =
entityRepository> N
)N O
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public   
Task   
<   
List   
<   
object   
>    
>    !
GetAllAsync  " -
(  - .
CancellationToken  . ?
cancellationToken  @ Q
)  Q R
{!! 	
throw"" 
new"" #
NotImplementedException"" -
(""- .
)"". /
;""/ 0
}## 	
public%% 
Task%% 
<%% 
object%% 
>%% 
GetByIdAsync%% (
(%%( )
object%%) /
model%%0 5
,%%5 6
CancellationToken%%7 H
cancellationToken%%I Z
)%%Z [
{&& 	
throw'' 
new'' #
NotImplementedException'' -
(''- .
)''. /
;''/ 0
}(( 	
public** 
Task** 
<** 
object** 
>** 
UpdateAsync** '
(**' (
object**( .
model**/ 4
,**4 5
CancellationToken**6 G
cancellationToken**H Y
)**Y Z
{++ 	
throw,, 
new,, #
NotImplementedException,, -
(,,- .
),,. /
;,,/ 0
}-- 	
}.. 
}// ÷
VD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\ChairService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
AdminModule6 A
{ 
public 

class 
ChairService 
: )
IGenericAdminModuleRepository  =
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public 
ChairService 
( 
IEntityRepository -
<- .
OtpTab. 4
>4 5
entityRepository6 F
)F G
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public   
Task   
<   
List   
<   
object   
>    
>    !
GetAllAsync  " -
(  - .
CancellationToken  . ?
cancellationToken  @ Q
)  Q R
{!! 	
throw"" 
new"" #
NotImplementedException"" -
(""- .
)"". /
;""/ 0
}## 	
public%% 
Task%% 
<%% 
object%% 
>%% 
GetByIdAsync%% (
(%%( )
object%%) /
model%%0 5
,%%5 6
CancellationToken%%7 H
cancellationToken%%I Z
)%%Z [
{&& 	
throw'' 
new'' #
NotImplementedException'' -
(''- .
)''. /
;''/ 0
}(( 	
public** 
Task** 
<** 
object** 
>** 
UpdateAsync** '
(**' (
object**( .
model**/ 4
,**4 5
CancellationToken**6 G
cancellationToken**H Y
)**Y Z
{++ 	
throw,, 
new,, #
NotImplementedException,, -
(,,- .
),,. /
;,,/ 0
}-- 	
}.. 
}// è
iD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\DelegationOfPowerHistoryService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
Service		. 5
.		5 6
AdminModule		6 A
{

 
public 

class +
DelegationOfPowerHistoryService 0
:1 2)
IGenericAdminModuleRepository3 P
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public +
DelegationOfPowerHistoryService .
(. /
IEntityRepository/ @
<@ A
OtpTabA G
>G H
entityRepositoryI Y
)Y Z
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
List 
< 
object 
>  
>  !
GetAllAsync" -
(- .
CancellationToken. ?
cancellationToken@ Q
)Q R
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
}   	
public"" 
Task"" 
<"" 
object"" 
>"" 
GetByIdAsync"" (
(""( )
object"") /
model""0 5
,""5 6
CancellationToken""7 H
cancellationToken""I Z
)""Z [
{## 	
throw$$ 
new$$ #
NotImplementedException$$ -
($$- .
)$$. /
;$$/ 0
}%% 	
public'' 
Task'' 
<'' 
object'' 
>'' 
UpdateAsync'' '
(''' (
object''( .
model''/ 4
,''4 5
CancellationToken''6 G
cancellationToken''H Y
)''Y Z
{(( 	
throw)) 
new)) #
NotImplementedException)) -
())- .
))). /
;))/ 0
}** 	
}++ 
},, ˙
bD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\DelegationOfPowerService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
AdminModule6 A
{ 
public 

class $
DelegationOfPowerService )
:* +)
IGenericAdminModuleRepository, I
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public $
DelegationOfPowerService '
(' (
IEntityRepository( 9
<9 :
OtpTab: @
>@ A
entityRepositoryB R
)R S
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public   
Task   
<   
List   
<   
object   
>    
>    !
GetAllAsync  " -
(  - .
CancellationToken  . ?
cancellationToken  @ Q
)  Q R
{!! 	
throw"" 
new"" #
NotImplementedException"" -
(""- .
)"". /
;""/ 0
}## 	
public%% 
Task%% 
<%% 
object%% 
>%% 
GetByIdAsync%% (
(%%( )
object%%) /
model%%0 5
,%%5 6
CancellationToken%%7 H
cancellationToken%%I Z
)%%Z [
{&& 	
throw'' 
new'' #
NotImplementedException'' -
(''- .
)''. /
;''/ 0
}(( 	
public** 
Task** 
<** 
object** 
>** 
UpdateAsync** '
(**' (
object**( .
model**/ 4
,**4 5
CancellationToken**6 G
cancellationToken**H Y
)**Y Z
{++ 	
throw,, 
new,, #
NotImplementedException,, -
(,,- .
),,. /
;,,/ 0
}-- 	
}.. 
}// Ä
dD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\EmployeeChairDetailService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
Service		. 5
.		5 6
AdminModule		6 A
{

 
public 

class &
EmployeeChairDetailService +
:, -)
IGenericAdminModuleRepository. K
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public &
EmployeeChairDetailService )
() *
IEntityRepository* ;
<; <
OtpTab< B
>B C
entityRepositoryD T
)T U
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
List 
< 
object 
>  
>  !
GetAllAsync" -
(- .
CancellationToken. ?
cancellationToken@ Q
)Q R
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
}   	
public"" 
Task"" 
<"" 
object"" 
>"" 
GetByIdAsync"" (
(""( )
object"") /
model""0 5
,""5 6
CancellationToken""7 H
cancellationToken""I Z
)""Z [
{## 	
throw$$ 
new$$ #
NotImplementedException$$ -
($$- .
)$$. /
;$$/ 0
}%% 	
public'' 
Task'' 
<'' 
object'' 
>'' 
UpdateAsync'' '
(''' (
object''( .
model''/ 4
,''4 5
CancellationToken''6 G
cancellationToken''H Y
)''Y Z
{(( 	
throw)) 
new)) #
NotImplementedException)) -
())- .
))). /
;))/ 0
}** 	
}++ 
},, É
eD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\EmployeeChairHistoryService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
AdminModule6 A
{ 
public 

class '
EmployeeChairHistoryService ,
:- .)
IGenericAdminModuleRepository/ L
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public '
EmployeeChairHistoryService *
(* +
IEntityRepository+ <
<< =
OtpTab= C
>C D
entityRepositoryE U
)U V
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public   
Task   
<   
List   
<   
object   
>    
>    !
GetAllAsync  " -
(  - .
CancellationToken  . ?
cancellationToken  @ Q
)  Q R
{!! 	
throw"" 
new"" #
NotImplementedException"" -
(""- .
)"". /
;""/ 0
}## 	
public%% 
Task%% 
<%% 
object%% 
>%% 
GetByIdAsync%% (
(%%( )
object%%) /
model%%0 5
,%%5 6
CancellationToken%%7 H
cancellationToken%%I Z
)%%Z [
{&& 	
throw'' 
new'' #
NotImplementedException'' -
(''- .
)''. /
;''/ 0
}(( 	
public** 
Task** 
<** 
object** 
>** 
UpdateAsync** '
(**' (
object**( .
model**/ 4
,**4 5
CancellationToken**6 G
cancellationToken**H Y
)**Y Z
{++ 	
throw,, 
new,, #
NotImplementedException,, -
(,,- .
),,. /
;,,/ 0
}-- 	
}.. 
}// øô
YD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\EmployeeService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
AdminModule6 A
{ 
public 

class 
EmployeeService  
:! "
IEmployeeService# 3
{ 
private 
readonly 
IEntityRepository *
<* +
TblEmpdesighistTab+ =
>= >
_desgHistory? K
;K L
private 
readonly 
IEntityRepository *
<* +
TblEmpdesigTab+ 9
>9 :
_empDesignation; J
;J K
private 
readonly 
IEntityRepository *
<* +
TblEmpdscTab+ 7
>7 8
_empDSC9 @
;@ A
private 
readonly 
IEntityRepository *
<* +
TblEmploginTab+ 9
>9 :
	_empLogin; D
;D E
private 
readonly 
IEntityRepository *
<* +
TblTrgEmpGrade+ 9
>9 :
	_empGrade; D
;D E
private 
readonly 
IEntityRepository *
<* +
TblTrgEmployee+ 9
>9 :
_empContext; F
;F G
private## 
readonly## 
IEntityRepository## *
<##* +
	OffcCdtab##+ 4
>##4 5
_officeDtlContext##6 G
;##G H
private$$ 
readonly$$ 
IEntityRepository$$ *
<$$* +
TblChairCdtab$$+ 8
>$$8 9
_chairDtlContext$$: J
;$$J K
private%% 
readonly%% 
IEntityRepository%% *
<%%* +
TblEmpchairhistDet%%+ =
>%%= >#
_empChairHistoryContext%%? V
;%%V W
private(( 
readonly(( 
IEntityRepository(( *
<((* +
TblModuleCdtab((+ 9
>((9 :
_moduleContext((; I
;((I J
private)) 
readonly)) 
IEntityRepository)) *
<))* +
TblRoleCdtab))+ 7
>))7 8
_roleContext))9 E
;))E F
private** 
readonly** 
IEntityRepository** *
<*** +
TblEmprolehistDet**+ <
>**< =
_roleDtlContext**> M
;**M N
private.. 
readonly.. 
IUnitOfWork.. $
_unitOfWorkService..% 7
;..7 8
private11 
readonly11 
UserInfo11 !
	_userInfo11" +
;11+ ,
private22 
readonly22 
IMapper22  
_mapper22! (
;22( )
public55 
EmployeeService55 
(55 
IEntityRepository66 
<66 
RegduserTab66 )
>66) *
regdUserRepository66+ =
,66= >
IEntityRepository77 
<77 
TblTrgEmpGrade77 ,
>77, -
empGrade77. 6
,776 7
IEntityRepository88 
<88 
TblTrgEmployee88 ,
>88, -
employeeList88. :
,88: ;
IEntityRepository99 
<99 
TblEmpdesighistTab99 0
>990 1
desgHistory992 =
,99= >
IEntityRepository:: 
<:: 
TblEmpdesigTab:: ,
>::, -
empDesignation::. <
,::< =
IEntityRepository;; 
<;; 
TblEmpdscTab;; *
>;;* +
empDSC;;, 2
,;;2 3
IEntityRepository<< 
<<< 
TblEmploginTab<< ,
><<, -
empLogin<<. 6
,<<6 7
UserInfo== 
UserInfo== 
,== 
IMapper>> 
Mapper>> 
,>> 
IUnitOfWork>> '

unitOfWork>>( 2
,>>2 3
IEntityRepository?? 
<?? 
	OffcCdtab?? '
>??' (
officeDetails??) 6
,??6 7
IEntityRepository@@ 
<@@ 
TblChairCdtab@@ +
>@@+ ,
chairDtlContext@@- <
,@@< =
IEntityRepositoryAA 
<AA 
TblEmpchairhistDetAA 0
>AA0 1"
empChairHistoryDetailsAA2 H
,AAH I
IEntityRepositoryBB 
<BB 
TblRoleCdtabBB *
>BB* +
roleContextBB, 7
,BB7 8
IEntityRepositoryCC 
<CC 
TblModuleCdtabCC ,
>CC, -
moduleContextCC. ;
,CC; <
IEntityRepositoryDD 
<DD 
TblEmprolehistDetDD /
>DD/ 0
roleDtlContextDD1 ?
)EE 
{FF 	
_empContextGG 
=GG 
employeeListGG &
;GG& '
_desgHistoryHH 
=HH 
desgHistoryHH &
;HH& '
_empDesignationII 
=II 
empDesignationII ,
;II, -
_empDSCJJ 
=JJ 
empDSCJJ 
;JJ 
	_empLoginKK 
=KK 
empLoginKK  
;KK  !
	_userInfoLL 
=LL 
UserInfoLL  
;LL  !
_mapperMM 
=MM 
MapperMM 
;MM 
_unitOfWorkServiceNN 
=NN  

unitOfWorkNN! +
;NN+ ,
	_empGradeOO 
=OO 
empGradeOO  
;OO  !
_chairDtlContextPP 
=PP 
chairDtlContextPP .
;PP. /
_officeDtlContextQQ 
=QQ 
officeDetailsQQ  -
;QQ- .#
_empChairHistoryContextRR #
=RR$ %"
empChairHistoryDetailsRR& <
;RR< =
_roleContextSS 
=SS 
roleContextSS &
;SS& '
_moduleContextTT 
=TT 
moduleContextTT *
;TT* +
_roleDtlContextUU 
=UU 
roleDtlContextUU ,
;UU, -
}VV 	
publicXX 
asyncXX 
TaskXX 
<XX 
boolXX 
>XX 
DeleteEmployeeByIdXX  2
(XX2 3
stringXX3 9

ticket_numXX: D
,XXD E
CancellationTokenXXF W
TokenXXX ]
)XX] ^
{YY 	
varZZ 
Emp_detailsZZ 
=ZZ 
awaitZZ #
_empContextZZ$ /
.ZZ/ 0+
FirstOrDefaultByExpressionAsyncZZ0 O
(ZZO P
xZZP Q
=>ZZR T
xZZU V
.ZZV W
TeyTicketNumZZW c
==ZZd f

ticket_numZZg q
,ZZq r
TokenZZs x
)ZZx y
;ZZy z
Emp_details\\ 
.\\ 
IsActive\\  
=\\! "
false\\# (
;\\( )
Emp_details]] 
.]] 
	IsDeleted]] !
=]]" #
true]]$ (
;]]( )
Emp_details^^ 
.^^ 

ModifiedBy^^ "
=^^# $
	_userInfo^^% .
.^^. /
Name^^/ 3
;^^3 4
Emp_details__ 
.__ 
ModifiedDate__ $
=__% &
DateTime__' /
.__/ 0
Now__0 3
;__3 4
awaitaa 
_empContextaa 
.aa 
UpdateAsyncaa )
(aa) *
Emp_detailsaa* 5
,aa5 6
Tokenaa7 <
)aa< =
.aa= >
ConfigureAwaitaa> L
(aaL M
falseaaM R
)aaR S
;aaS T
awaitbb 
_unitOfWorkServicebb $
.bb$ %
CommitAsyncbb% 0
(bb0 1
Tokenbb1 6
)bb6 7
;bb7 8
returncc 
truecc 
;cc 
}dd 	
publicff 
asyncff 
Taskff 
<ff 
Listff 
<ff 
EmployeeDTOff *
>ff* +
>ff+ ,
GetAllEmployeesff- <
(ff< =
CancellationTokenff= N
TokenffO T
)ffT U
{gg 	
varhh 
Emp_detailshh 
=hh 
awaithh #
_empContexthh$ /
.hh/ 0!
FindByExpressionAsynchh0 E
(hhE F
xhhF G
=>hhH J
xhhK L
.hhL M
IsActivehhM U
==hhV X
truehhY ]
&&hh^ `
xhha b
.hhb c
	IsDeletedhhc l
==hhm o
falsehhp u
,hhu v
Tokenhhw |
)hh| }
;hh} ~
varjj 
Lis_Employeejj 
=jj 
_mapperjj &
.jj& '
Mapjj' *
<jj* +
Listjj+ /
<jj/ 0
EmployeeDTOjj0 ;
>jj; <
>jj< =
(jj= >
Emp_detailsjj> I
)jjI J
;jjJ K
returnll 
Lis_Employeell 
;ll  
}mm 	
publicoo 
asyncoo 
Taskoo 
<oo 
Listoo 
<oo 
EmployeeDTOoo *
>oo* +
>oo+ ,#
GetAllEmployeesByFilteroo- D
(ooD E
CancellationTokenooE V
TokenooW \
,oo\ ]
stringoo^ d

ticket_numooe o
=oop q
nulloor v
,oov w
stringoox ~
	desg_code	oo à
=
ooâ ä
null
ooã è
,
ooè ê
string
ooë ó
pan_num
ooò ü
=
oo† °
null
oo¢ ¶
,
oo¶ ß
int
oo® ´
?
oo´ ¨
phone
oo≠ ≤
=
oo≥ ¥
$num
ooµ ∂
)
oo∂ ∑
{pp 	
varqq 
emp_detailsqq 
=qq 
awaitqq #
_empContextqq$ /
.qq/ 0!
FindByExpressionAsyncqq0 E
(qqE F
xqqF G
=>qqH J
(qqK L
xqqL M
.qqM N
TeyTicketNumqqN Z
==qq[ ]

ticket_numqq^ h
||qqi k
xqql m
.qqm n
TeyGradeCodeqqn z
==qq{ }
	desg_code	qq~ á
||
qqà ä
x
qqã å
.
qqå ç
	TeyPanNum
qqç ñ
==
qqó ô
pan_num
qqö °
||
qq¢ §
x
qq• ¶
.
qq¶ ß
EmpMobileNo
qqß ≤
==
qq≥ µ
phone
qq∂ ª
.
qqª º
ToString
qqº ƒ
(
qqƒ ≈
)
qq≈ ∆
||
qq« …
x
qq  À
.
qqÀ Ã
TeyPermanentPhone
qqÃ ›
==
qqﬁ ‡
phone
qq· Ê
||
qqÁ È
x
qqÍ Î
.
qqÎ Ï
TeyPresentPhone
qqÏ ˚
==
qq¸ ˛
phone
qqˇ Ñ
)
qqÑ Ö
&&
qqÜ à
(
qqâ ä
x
qqä ã
.
qqã å
IsActive
qqå î
==
qqï ó
true
qqò ú
)
qqú ù
,
qqù û
Token
qqü §
)
qq§ •
;
qq• ¶
varss 
lis_Employeess 
=ss 
_mapperss &
.ss& '
Mapss' *
<ss* +
Listss+ /
<ss/ 0
EmployeeDTOss0 ;
>ss; <
>ss< =
(ss= >
emp_detailsss> I
)ssI J
;ssJ K
returnuu 
lis_Employeeuu 
;uu  
}vv 	
publicxx 
asyncxx 
Taskxx 
<xx 
boolxx 
>xx "
IsEmployeeNumberUniquexx  6
(xx6 7
stringxx7 =
empNoxx> C
,xxC D
CancellationTokenxxE V
tokenxxW \
)xx\ ]
{yy 	
varzz 
datazz 
=zz 
awaitzz 
_empContextzz (
.zz( )+
FirstOrDefaultByExpressionAsynczz) H
(zzH I
xzzI J
=>zzK M
xzzN O
.zzO P
TeyTicketNumzzP \
==zz] _
empNozz` e
&&zzf h
xzzi j
.zzj k
IsActivezzk s
==zzt v
truezzw {
&&zz| ~
x	zz Ä
.
zzÄ Å
	IsDeleted
zzÅ ä
==
zzã ç
false
zzé ì
,
zzì î
token
zzï ö
)
zzö õ
.
zzõ ú
ConfigureAwait
zzú ™
(
zz™ ´
false
zz´ ∞
)
zz∞ ±
;
zz± ≤
if{{ 
({{ 
data{{ 
!={{ 
null{{ 
){{ 
return|| 
false|| 
;|| 
return~~ 
true~~ 
;~~ 
} 	
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
EmployeeDTO
ÅÅ %
>
ÅÅ% &!
GetAllEmployeesById
ÅÅ' :
(
ÅÅ: ;
string
ÅÅ; A

ticket_num
ÅÅB L
,
ÅÅL M
CancellationToken
ÅÅN _
Token
ÅÅ` e
)
ÅÅe f
{
ÇÇ 	
var
ÉÉ 
empObj
ÉÉ 
=
ÉÉ 
new
ÉÉ 
EmployeeDTO
ÉÉ (
(
ÉÉ( )
)
ÉÉ) *
;
ÉÉ* +
var
ÑÑ 
emp_details
ÑÑ 
=
ÑÑ 
await
ÑÑ #
_empContext
ÑÑ$ /
.
ÑÑ/ 0-
FirstOrDefaultByExpressionAsync
ÑÑ0 O
(
ÑÑO P
x
ÑÑP Q
=>
ÑÑR T
x
ÑÑU V
.
ÑÑV W
TeyTicketNum
ÑÑW c
==
ÑÑd f

ticket_num
ÑÑg q
&&
ÑÑr t
x
ÑÑu v
.
ÑÑv w
IsActive
ÑÑw 
==ÑÑÄ Ç
trueÑÑÉ á
&&ÑÑà ä
xÑÑã å
.ÑÑå ç
	IsDeletedÑÑç ñ
==ÑÑó ô
falseÑÑö ü
,ÑÑü †
TokenÑÑ° ¶
)ÑÑ¶ ß
;ÑÑß ®
var
ÖÖ 
emp_designation
ÖÖ 
=
ÖÖ  !
await
ÖÖ" '
_empDesignation
ÖÖ( 7
.
ÖÖ7 8-
FirstOrDefaultByExpressionAsync
ÖÖ8 W
(
ÖÖW X
x
ÖÖX Y
=>
ÖÖZ \
x
ÖÖ] ^
.
ÖÖ^ _
EmpId
ÖÖ_ d
==
ÖÖe g

ticket_num
ÖÖh r
,
ÖÖr s
Token
ÖÖt y
)
ÖÖy z
;
ÖÖz {
var
ÜÜ 
	isCheckIn
ÜÜ 
=
ÜÜ 
await
ÜÜ !%
_empChairHistoryContext
ÜÜ" 9
.
ÜÜ9 :-
FirstOrDefaultByExpressionAsync
ÜÜ: Y
(
ÜÜY Z
x
ÜÜZ [
=>
ÜÜ\ ^
x
ÜÜ_ `
.
ÜÜ` a
EmpId
ÜÜa f
==
ÜÜg i

ticket_num
ÜÜj t
,
ÜÜt u
Token
ÜÜv {
)
ÜÜ{ |
;
ÜÜ| }
if
àà 
(
àà 
emp_details
àà 
!=
àà 
null
àà #
)
àà# $
{
ââ 
empObj
ää 
.
ää 
TeyTicketNum
ää #
=
ää$ %
emp_details
ää& 1
?
ää1 2
.
ää2 3
TeyTicketNum
ää3 ?
;
ää? @
empObj
ãã 
.
ãã 
TeyName
ãã 
=
ãã  
emp_details
ãã! ,
?
ãã, -
.
ãã- .
TeyName
ãã. 5
;
ãã5 6
empObj
åå 
.
åå 
	TeyPanNum
åå  
=
åå! "
emp_details
åå# .
?
åå. /
.
åå/ 0
	TeyPanNum
åå0 9
;
åå9 :
empObj
çç 
.
çç  
TeyPresentAddress1
çç )
=
çç* +
emp_details
çç, 7
?
çç7 8
.
çç8 9 
TeyPresentAddress1
çç9 K
;
ççK L
if
éé 
(
éé 
emp_details
éé 
?
éé  
.
éé  !
TeyBirthDate
éé! -
!=
éé. 0
null
éé1 5
)
éé5 6
empObj
èè 
.
èè 
TeyBirthDate
èè '
=
èè( )
(
èè* +
DateTime
èè+ 3
)
èè3 4
emp_details
èè4 ?
?
èè? @
.
èè@ A
TeyBirthDate
èèA M
;
èèM N
empObj
êê 
.
êê "
TeyLastdatePromotion
êê +
=
êê, -
emp_details
êê. 9
?
êê9 :
.
êê: ;"
TeyLastdatePromotion
êê; O
;
êêO P
empObj
ëë 
.
ëë 
TeyPresentCity
ëë %
=
ëë& '
emp_details
ëë( 3
?
ëë3 4
.
ëë4 5
TeyPresentCity
ëë5 C
;
ëëC D
empObj
íí 
.
íí 
TeyPresentZip
íí $
=
íí% &
emp_details
íí' 2
?
íí2 3
.
íí3 4
TeyPresentZip
íí4 A
;
ííA B
empObj
ìì 
.
ìì 
TeySex
ìì 
=
ìì 
emp_details
ìì  +
?
ìì+ ,
.
ìì, -
TeySex
ìì- 3
;
ìì3 4
empObj
îî 
.
îî 
EmpMobileNo
îî "
=
îî# $
emp_details
îî% 0
.
îî0 1
EmpMobileNo
îî1 <
;
îî< =
empObj
ïï 
.
ïï 
TeyPresentEmail
ïï &
=
ïï' (
emp_details
ïï) 4
?
ïï4 5
.
ïï5 6
TeyPresentEmail
ïï6 E
;
ïïE F
empObj
ññ 
.
ññ 
IsCheckedIn
ññ "
=
ññ# $
	isCheckIn
ññ% .
!=
ññ/ 1
null
ññ2 6
;
ññ6 7
if
óó 
(
óó 
emp_designation
óó #
!=
óó$ &
null
óó' +
)
óó+ ,
{
òò 
empObj
ôô 
.
ôô 
EmpDesignation
ôô )
.
ôô) *
IcDesigCode
ôô* 5
=
ôô6 7
emp_designation
ôô8 G
.
ôôG H
IcDesigCode
ôôH S
;
ôôS T
empObj
öö 
.
öö 
EmpDesignation
öö )
.
öö) *
IcDate
öö* 0
=
öö1 2
emp_designation
öö3 B
.
ööB C
IcDate
ööC I
;
ööI J
empObj
õõ 
.
õõ 
EmpDesignation
õõ )
.
õõ) *
SubstDesigCode
õõ* 8
=
õõ9 :
emp_designation
õõ; J
.
õõJ K
SubstDesigCode
õõK Y
;
õõY Z
empObj
úú 
.
úú 
EmpDesignation
úú )
.
úú) *
	SubstDate
úú* 3
=
úú4 5
emp_designation
úú6 E
.
úúE F
	SubstDate
úúF O
;
úúO P
empObj
ùù 
.
ùù 
EmpDesignation
ùù )
.
ùù) *
PpDesignCode
ùù* 6
=
ùù7 8
emp_designation
ùù9 H
.
ùùH I
PpDesignCode
ùùI U
;
ùùU V
empObj
ûû 
.
ûû 
EmpDesignation
ûû )
.
ûû) *
PpDate
ûû* 0
=
ûû1 2
emp_designation
ûû3 B
.
ûûB C
PpDate
ûûC I
;
ûûI J
}
üü 
else
†† 
{
°° 
empObj
¢¢ 
.
¢¢ 
EmpDesignation
¢¢ )
=
¢¢* +
new
¢¢, /$
EmployeeDesignationDTO
¢¢0 F
(
¢¢F G
)
¢¢G H
;
¢¢H I
}
££ 
}
¶¶ 
else
ßß 
{
®® 
empObj
©© 
=
©© 
new
©© 
EmployeeDTO
©© (
(
©©( )
)
©©) *
;
©©* +
}
™™ 
return
¨¨ 
empObj
¨¨ 
;
¨¨ 
}
≠≠ 	
public
ØØ 
async
ØØ 
Task
ØØ 
<
ØØ 
List
ØØ 
<
ØØ 
TblTrgEmpGrade
ØØ -
>
ØØ- .
>
ØØ. /$
GetEmployeeDesignation
ØØ0 F
(
ØØF G
CancellationToken
ØØG X
Token
ØØY ^
)
ØØ^ _
{
∞∞ 	
var
±± 
empDesg_details
±± 
=
±±  !
await
±±" '
	_empGrade
±±( 1
.
±±1 2#
FindByExpressionAsync
±±2 G
(
±±G H
x
±±H I
=>
±±J L
x
±±M N
.
±±N O
IsActive
±±O W
==
±±X Z
true
±±[ _
&&
±±` b
x
±±c d
.
±±d e
	IsDeleted
±±e n
==
±±o q
false
±±r w
,
±±w x
Token
±±y ~
)
±±~ 
;±± Ä
var
≥≥ 
	lis_desig
≥≥ 
=
≥≥ 
_mapper
≥≥ #
.
≥≥# $
Map
≥≥$ '
<
≥≥' (
List
≥≥( ,
<
≥≥, -
TblTrgEmpGrade
≥≥- ;
>
≥≥; <
>
≥≥< =
(
≥≥= >
empDesg_details
≥≥> M
)
≥≥M N
;
≥≥N O
return
µµ 
	lis_desig
µµ 
;
µµ 
}
∏∏ 	
public
∫∫ 
async
∫∫ 
Task
∫∫ 
<
∫∫ 
List
∫∫ 
<
∫∫  
TblEmpdesighistTab
∫∫ 1
>
∫∫1 2
>
∫∫2 3$
GetEmployeeDesiHistory
∫∫4 J
(
∫∫J K
string
∫∫K Q

employeeId
∫∫R \
,
∫∫\ ]
CancellationToken
∫∫^ o
Token
∫∫p u
)
∫∫u v
{
ªª 	
var
ºº 
empDesg_details
ºº 
=
ºº  !
await
ºº" '
_empDesignation
ºº( 7
.
ºº7 8#
FindByExpressionAsync
ºº8 M
(
ººM N
x
ººN O
=>
ººP R
x
ººS T
.
ººT U
EmpId
ººU Z
==
ºº[ ]

employeeId
ºº^ h
,
ººh i
Token
ººj o
)
ººo p
;
ººp q
var
ææ 
lis_desigHis
ææ 
=
ææ 
_mapper
ææ &
.
ææ& '
Map
ææ' *
<
ææ* +
List
ææ+ /
<
ææ/ 0 
TblEmpdesighistTab
ææ0 B
>
ææB C
>
ææC D
(
ææD E
empDesg_details
ææE T
)
ææT U
;
ææU V
return
øø 
lis_desigHis
øø 
;
øø  
}
¿¿ 	
public
¬¬ 
async
¬¬ 
Task
¬¬ 
<
¬¬ 
List
¬¬ 
<
¬¬ 
TblEmpdscTab
¬¬ +
>
¬¬+ ,
>
¬¬, -
GetEmployeeDSC
¬¬. <
(
¬¬< =
string
¬¬= C

employeeId
¬¬D N
,
¬¬N O
CancellationToken
¬¬P a
Token
¬¬b g
)
¬¬g h
{
√√ 	
var
ƒƒ 
emp_details
ƒƒ 
=
ƒƒ 
await
ƒƒ #
_empDesignation
ƒƒ$ 3
.
ƒƒ3 4#
FindByExpressionAsync
ƒƒ4 I
(
ƒƒI J
x
ƒƒJ K
=>
ƒƒL N
x
ƒƒO P
.
ƒƒP Q
IcDesigCode
ƒƒQ \
==
ƒƒ] _

employeeId
ƒƒ` j
,
ƒƒj k
Token
ƒƒl q
)
ƒƒq r
;
ƒƒr s
var
∆∆ 
lis_dsc
∆∆ 
=
∆∆ 
_mapper
∆∆ !
.
∆∆! "
Map
∆∆" %
<
∆∆% &
List
∆∆& *
<
∆∆* +
TblEmpdscTab
∆∆+ 7
>
∆∆7 8
>
∆∆8 9
(
∆∆9 :
emp_details
∆∆: E
)
∆∆E F
;
∆∆F G
return
«« 
lis_dsc
«« 
;
«« 
}
»» 	
public
   
async
   
Task
   
<
   
List
   
<
   
TblEmploginTab
   -
>
  - .
>
  . /%
GetEmployeeLoginDetails
  0 G
(
  G H
string
  H N

employeeId
  O Y
,
  Y Z
CancellationToken
  [ l
Token
  m r
)
  r s
{
ÀÀ 	
var
ÃÃ 
emp_details
ÃÃ 
=
ÃÃ 
await
ÃÃ #
_empDesignation
ÃÃ$ 3
.
ÃÃ3 4#
FindByExpressionAsync
ÃÃ4 I
(
ÃÃI J
x
ÃÃJ K
=>
ÃÃL N
x
ÃÃO P
.
ÃÃP Q
IcDesigCode
ÃÃQ \
==
ÃÃ] _

employeeId
ÃÃ` j
,
ÃÃj k
Token
ÃÃl q
)
ÃÃq r
;
ÃÃr s
var
ŒŒ 
lis_empLogin
ŒŒ 
=
ŒŒ 
_mapper
ŒŒ &
.
ŒŒ& '
Map
ŒŒ' *
<
ŒŒ* +
List
ŒŒ+ /
<
ŒŒ/ 0
TblEmploginTab
ŒŒ0 >
>
ŒŒ> ?
>
ŒŒ? @
(
ŒŒ@ A
emp_details
ŒŒA L
)
ŒŒL M
;
ŒŒM N
return
œœ 
lis_empLogin
œœ 
;
œœ  
}
–– 	
public
““ 
async
““ 
Task
““ 
<
““ 
TblEmploginTab
““ (
>
““( )!
SaveEmployeeCheckIn
““* =
(
““= >
TblEmploginTab
““> L
Checkout_data
““M Z
,
““Z [
CancellationToken
““\ m
Token
““n s
)
““s t
{
”” 	
Checkout_data
‘‘ 
.
‘‘ 
IsActive
‘‘ "
=
‘‘# $
true
‘‘% )
;
‘‘) *
Checkout_data
’’ 
.
’’ 
	IsDeleted
’’ #
=
’’$ %
false
’’& +
;
’’+ ,
Checkout_data
÷÷ 
.
÷÷ 
	CreatedBy
÷÷ #
=
÷÷$ %
	_userInfo
÷÷& /
.
÷÷/ 0
Name
÷÷0 4
;
÷÷4 5
Checkout_data
◊◊ 
.
◊◊ 
CreatedDate
◊◊ %
=
◊◊& '
DateTime
◊◊( 0
.
◊◊0 1
Now
◊◊1 4
;
◊◊4 5
var
ŸŸ 
result
ŸŸ 
=
ŸŸ 
await
ŸŸ 
	_empLogin
ŸŸ (
.
ŸŸ( )
AddAsync
ŸŸ) 1
(
ŸŸ1 2
Checkout_data
ŸŸ2 ?
,
ŸŸ? @
Token
ŸŸA F
)
ŸŸF G
;
ŸŸG H
return
⁄⁄ 
_mapper
⁄⁄ 
.
⁄⁄ 
Map
⁄⁄ 
<
⁄⁄ 
TblEmploginTab
⁄⁄ -
>
⁄⁄- .
(
⁄⁄. /
result
⁄⁄/ 5
)
⁄⁄5 6
;
⁄⁄6 7
}
€€ 	
public
›› 
async
›› 
Task
›› 
<
›› 
(
›› 
bool
›› 
,
››  
string
››! '
)
››' (
>
››( )!
SaveEmployeeDetails
››* =
(
››= >
EmployeeDTO
››> I
employee
››J R
,
››R S
CancellationToken
››T e
Token
››f k
)
››k l
{
ﬁﬁ 	
TblEmpdscTab
ﬂﬂ !
registrationDetails
ﬂﬂ ,
=
ﬂﬂ- .
new
ﬂﬂ/ 2
TblEmpdscTab
ﬂﬂ3 ?
(
ﬂﬂ? @
)
ﬂﬂ@ A
;
ﬂﬂA B
var
‡‡ 
checkEmployeeDtls
‡‡ !
=
‡‡" #
await
‡‡$ )
_empContext
‡‡* 5
.
‡‡5 6-
FirstOrDefaultByExpressionAsync
‡‡6 U
(
‡‡U V
a
‡‡V W
=>
‡‡X Z
a
‡‡[ \
.
‡‡\ ]
TeyTicketNum
‡‡] i
==
‡‡j l
employee
‡‡m u
.
‡‡u v
TeyTicketNum‡‡v Ç
&&‡‡É Ö
a‡‡Ü á
.‡‡á à
IsActive‡‡à ê
==‡‡ë ì
true‡‡î ò
&&‡‡ô õ
a‡‡ú ù
.‡‡ù û
	IsDeleted‡‡û ß
==‡‡® ™
false‡‡´ ∞
,‡‡∞ ±
Token‡‡≤ ∑
)‡‡∑ ∏
;‡‡∏ π
var
·· %
checkEmpDesignationDtls
·· '
=
··( )
await
··* /
_empDesignation
··0 ?
.
··? @-
FirstOrDefaultByExpressionAsync
··@ _
(
··_ `
a
··` a
=>
··b d
a
··e f
.
··f g
EmpId
··g l
==
··m o
employee
··p x
.
··x y
TeyTicketNum··y Ö
&&··Ü à
a··â ä
.··ä ã
IsActive··ã ì
==··î ñ
true··ó õ
&&··ú û
a··ü †
.··† °
	IsDeleted··° ™
==··´ ≠
false··Æ ≥
,··≥ ¥
Token··µ ∫
)··∫ ª
;··ª º
if
‰‰ 
(
‰‰ 
checkEmployeeDtls
‰‰ !
==
‰‰" $
null
‰‰% )
&&
‰‰* ,%
checkEmpDesignationDtls
‰‰- D
==
‰‰E G
null
‰‰H L
)
‰‰L M
{
ÂÂ 
var
ÊÊ 

validation
ÊÊ 
=
ÊÊ  
await
ÊÊ! &#
GetEmployeeValidation
ÊÊ' <
(
ÊÊ< =
employee
ÊÊ= E
,
ÊÊE F
Token
ÊÊG L
)
ÊÊL M
;
ÊÊM N
if
ÁÁ 
(
ÁÁ 

validation
ÁÁ 
.
ÁÁ 
Length
ÁÁ %
>
ÁÁ& '
$num
ÁÁ( )
)
ÁÁ) *
{
ËË 
return
ÈÈ 
(
ÈÈ 
false
ÈÈ !
,
ÈÈ! "

validation
ÈÈ# -
)
ÈÈ- .
;
ÈÈ. /
}
ÍÍ 
var
ÎÎ !
employeeDescription
ÎÎ '
=
ÎÎ( )
await
ÎÎ* /
_empDSC
ÎÎ0 7
.
ÎÎ7 8-
FirstOrDefaultByExpressionAsync
ÎÎ8 W
(
ÎÎW X
a
ÎÎX Y
=>
ÎÎZ \
a
ÎÎ] ^
.
ÎÎ^ _
EmpId
ÎÎ_ d
==
ÎÎe g
employee
ÎÎh p
.
ÎÎp q
TeyTicketNum
ÎÎq }
&&ÎÎ~ Ä
aÎÎÅ Ç
.ÎÎÇ É
IsActiveÎÎÉ ã
==ÎÎå é
trueÎÎè ì
&&ÎÎî ñ
aÎÎó ò
.ÎÎò ô
	IsDeletedÎÎô ¢
==ÎÎ£ •
falseÎÎ¶ ´
,ÎÎ´ ¨
TokenÎÎ≠ ≤
)ÎÎ≤ ≥
;ÎÎ≥ ¥
var
ÌÌ 
employeeDetails
ÌÌ #
=
ÌÌ$ %
_mapper
ÌÌ& -
.
ÌÌ- .
Map
ÌÌ. 1
<
ÌÌ1 2
TblTrgEmployee
ÌÌ2 @
>
ÌÌ@ A
(
ÌÌA B
employee
ÌÌB J
)
ÌÌJ K
;
ÌÌK L
TblEmpdesigTab
ÔÔ 
designations
ÔÔ +
=
ÔÔ, -
new
ÔÔ. 1
TblEmpdesigTab
ÔÔ2 @
(
ÔÔ@ A
)
ÔÔA B
;
ÔÔB C
employeeDetails
ÒÒ 
.
ÒÒ  
IsActive
ÒÒ  (
=
ÒÒ) *
true
ÒÒ+ /
;
ÒÒ/ 0
employeeDetails
ÚÚ 
.
ÚÚ  
	IsDeleted
ÚÚ  )
=
ÚÚ* +
false
ÚÚ, 1
;
ÚÚ1 2
employeeDetails
ÛÛ 
.
ÛÛ  
	CreatedBy
ÛÛ  )
=
ÛÛ* +
	_userInfo
ÛÛ, 5
.
ÛÛ5 6
UserId
ÛÛ6 <
;
ÛÛ< =
employeeDetails
ÙÙ 
.
ÙÙ  
CreatedDate
ÙÙ  +
=
ÙÙ, -
System
ÙÙ. 4
.
ÙÙ4 5
DateTime
ÙÙ5 =
.
ÙÙ= >
Now
ÙÙ> A
;
ÙÙA B
employeeDetails
ıı 
.
ıı  
UniqueId
ıı  (
=
ıı) *
System
ıı+ 1
.
ıı1 2
Guid
ıı2 6
.
ıı6 7
NewGuid
ıı7 >
(
ıı> ?
)
ıı? @
.
ıı@ A
ToString
ııA I
(
ııI J
)
ııJ K
;
ııK L
employeeDetails
ˆˆ 
.
ˆˆ  
TeyUnitCode
ˆˆ  +
=
ˆˆ, -
$str
ˆˆ. 4
;
ˆˆ4 5
employeeDetails
˜˜ 
.
˜˜  
TeyCurrentUnit
˜˜  .
=
˜˜/ 0
$str
˜˜1 7
;
˜˜7 8
designations
˘˘ 
.
˘˘ 
EmpId
˘˘ "
=
˘˘# $
employee
˘˘% -
.
˘˘- .
TeyTicketNum
˘˘. :
;
˘˘: ;
designations
˙˙ 
.
˙˙ 
SubstDesigCode
˙˙ +
=
˙˙, -
employee
˙˙. 6
.
˙˙6 7
EmpDesignation
˙˙7 E
.
˙˙E F
SubstDesigCode
˙˙F T
;
˙˙T U
designations
˚˚ 
.
˚˚ 
	SubstDate
˚˚ &
=
˚˚' (
employee
˚˚) 1
.
˚˚1 2
EmpDesignation
˚˚2 @
.
˚˚@ A
	SubstDate
˚˚A J
;
˚˚J K
designations
¸¸ 
.
¸¸ 
PpDesignCode
¸¸ )
=
¸¸* +
employee
¸¸, 4
.
¸¸4 5
EmpDesignation
¸¸5 C
.
¸¸C D
PpDesignCode
¸¸D P
;
¸¸P Q
designations
˝˝ 
.
˝˝ 
PpDate
˝˝ #
=
˝˝$ %
employee
˝˝& .
.
˝˝. /
EmpDesignation
˝˝/ =
.
˝˝= >
PpDate
˝˝> D
;
˝˝D E
designations
˛˛ 
.
˛˛ 
IcDate
˛˛ #
=
˛˛$ %
employee
˛˛& .
.
˛˛. /
EmpDesignation
˛˛/ =
.
˛˛= >
IcDate
˛˛> D
;
˛˛D E
designations
ˇˇ 
.
ˇˇ 
IcDesigCode
ˇˇ (
=
ˇˇ) *
employee
ˇˇ+ 3
.
ˇˇ3 4
EmpDesignation
ˇˇ4 B
.
ˇˇB C
IcDesigCode
ˇˇC N
;
ˇˇN O
designations
ÄÄ 
.
ÄÄ 
	CreatedBy
ÄÄ &
=
ÄÄ' (
	_userInfo
ÄÄ) 2
.
ÄÄ2 3
UserId
ÄÄ3 9
;
ÄÄ9 :
designations
ÅÅ 
.
ÅÅ 
CreatedDate
ÅÅ (
=
ÅÅ) *
DateTime
ÅÅ+ 3
.
ÅÅ3 4
Now
ÅÅ4 7
;
ÅÅ7 8
designations
ÇÇ 
.
ÇÇ 
IsActive
ÇÇ %
=
ÇÇ& '
true
ÇÇ( ,
;
ÇÇ, -
designations
ÉÉ 
.
ÉÉ 
	IsDeleted
ÉÉ &
=
ÉÉ' (
false
ÉÉ) .
;
ÉÉ. /!
registrationDetails
ÖÖ #
.
ÖÖ# $
EmpId
ÖÖ$ )
=
ÖÖ* +
employee
ÖÖ, 4
.
ÖÖ4 5
TeyTicketNum
ÖÖ5 A
;
ÖÖA B!
registrationDetails
ÜÜ #
.
ÜÜ# $
EmpPswd
ÜÜ$ +
=
ÜÜ, -
SecurityHandler
ÜÜ. =
.
ÜÜ= >
Base64Encode
ÜÜ> J
(
ÜÜJ K
$str
ÜÜK U
)
ÜÜU V
;
ÜÜV W!
registrationDetails
áá #
.
áá# $
IsActive
áá$ ,
=
áá- .
true
áá/ 3
;
áá3 4!
registrationDetails
àà #
.
àà# $
	IsDeleted
àà$ -
=
àà. /
false
àà0 5
;
àà5 6
await
ää 
_empContext
ää !
.
ää! "
AddAsync
ää" *
(
ää* +
employeeDetails
ää+ :
,
ää: ;
Token
ää< A
)
ääA B
;
ääB C
await
ãã 
_empDesignation
ãã %
.
ãã% &
AddAsync
ãã& .
(
ãã. /
designations
ãã/ ;
,
ãã; <
Token
ãã= B
)
ããB C
;
ããC D
if
åå 
(
åå !
employeeDescription
åå '
==
åå( *
null
åå+ /
)
åå/ 0
{
çç !
registrationDetails
éé '
.
éé' (

IsPswdChng
éé( 2
=
éé3 4
false
éé5 :
;
éé: ;
await
èè 
_empDSC
èè !
.
èè! "
AddAsync
èè" *
(
èè* +!
registrationDetails
èè+ >
,
èè> ?
Token
èè@ E
)
èèE F
;
èèF G
}
êê 
}
ëë 
else
íí 
{
ìì 
var
îî !
getUserLoginDetails
îî '
=
îî( )
await
îî* /
_empDSC
îî0 7
.
ïï -
FirstOrDefaultByExpressionAsync
ïï 4
(
ïï4 5
x
ïï5 6
=>
ïï7 9
x
ïï: ;
.
ïï; <
EmpId
ïï< A
==
ïïB D
checkEmployeeDtls
ïïE V
.
ïïV W
TeyTicketNum
ïïW c
,
ïïc d
Token
ïïe j
)
ïïj k
;
ïïk l
checkEmployeeDtls
óó !
.
óó! "
TeyName
óó" )
=
óó* +
employee
óó, 4
.
óó4 5
TeyName
óó5 <
.
óó< =
ToUpper
óó= D
(
óóD E
)
óóE F
;
óóF G
checkEmployeeDtls
òò !
.
òò! "
TeySex
òò" (
=
òò) *
employee
òò+ 3
.
òò3 4
TeySex
òò4 :
;
òò: ;
checkEmployeeDtls
ôô !
.
ôô! "
TeyBirthDate
ôô" .
=
ôô/ 0
employee
ôô1 9
.
ôô9 :
TeyBirthDate
ôô: F
;
ôôF G
checkEmployeeDtls
öö !
.
öö! " 
TeyPresentAddress1
öö" 4
=
öö5 6
employee
öö7 ?
.
öö? @ 
TeyPresentAddress1
öö@ R
.
ööR S
ToUpper
ööS Z
(
ööZ [
)
öö[ \
;
öö\ ]
checkEmployeeDtls
õõ !
.
õõ! "
TeyPresentCity
õõ" 0
=
õõ1 2
employee
õõ3 ;
.
õõ; <
TeyPresentCity
õõ< J
.
õõJ K
ToUpper
õõK R
(
õõR S
)
õõS T
;
õõT U
checkEmployeeDtls
úú !
.
úú! "
TeyPresentZip
úú" /
=
úú0 1
employee
úú2 :
.
úú: ;
TeyPresentZip
úú; H
.
úúH I
ToUpper
úúI P
(
úúP Q
)
úúQ R
;
úúR S
checkEmployeeDtls
ùù !
.
ùù! "
	TeyPanNum
ùù" +
=
ùù, -
employee
ùù. 6
.
ùù6 7
	TeyPanNum
ùù7 @
.
ùù@ A
ToUpper
ùùA H
(
ùùH I
)
ùùI J
;
ùùJ K
checkEmployeeDtls
ûû !
.
ûû! "
EmpMobileNo
ûû" -
=
ûû. /
employee
ûû0 8
.
ûû8 9
EmpMobileNo
ûû9 D
.
ûûD E
ToString
ûûE M
(
ûûM N
)
ûûN O
;
ûûO P
checkEmployeeDtls
üü !
.
üü! "
TeyPresentEmail
üü" 1
=
üü2 3
employee
üü4 <
.
üü< =
TeyPresentEmail
üü= L
.
üüL M
ToLower
üüM T
(
üüT U
)
üüU V
;
üüV W
checkEmployeeDtls
†† !
.
††! ""
TeyLastdatePromotion
††" 6
=
††7 8
employee
††9 A
.
††A B"
TeyLastdatePromotion
††B V
;
††V W
checkEmployeeDtls
°° !
.
°°! "

ModifiedBy
°°" ,
=
°°- .
	_userInfo
°°/ 8
.
°°8 9
UserId
°°9 ?
;
°°? @
checkEmployeeDtls
¢¢ !
.
¢¢! "
ModifiedDate
¢¢" .
=
¢¢/ 0
System
¢¢1 7
.
¢¢7 8
DateTime
¢¢8 @
.
¢¢@ A
UtcNow
¢¢A G
;
¢¢G H
checkEmployeeDtls
££ !
.
££! "
TeyUnitCode
££" -
=
££. /
$str
££0 6
;
££6 7
checkEmployeeDtls
§§ !
.
§§! "
TeyCurrentUnit
§§" 0
=
§§1 2
$str
§§3 9
;
§§9 :
checkEmployeeDtls
•• !
.
••! "
IsActive
••" *
=
••+ ,
true
••- 1
;
••1 2
checkEmployeeDtls
¶¶ !
.
¶¶! "
	IsDeleted
¶¶" +
=
¶¶, -
false
¶¶. 3
;
¶¶3 4
if
®® 
(
®® !
getUserLoginDetails
®® '
!=
®®( *
null
®®+ /
)
®®/ 0
{
©© !
getUserLoginDetails
™™ '
.
™™' (

ModifiedBy
™™( 2
=
™™3 4
	_userInfo
™™5 >
.
™™> ?
UserId
™™? E
;
™™E F!
getUserLoginDetails
´´ '
.
´´' (
ModifiedDate
´´( 4
=
´´5 6
DateTime
´´7 ?
.
´´? @
UtcNow
´´@ F
;
´´F G
await
¨¨ 
_empDSC
¨¨ !
.
¨¨! "
UpdateAsync
¨¨" -
(
¨¨- .!
getUserLoginDetails
¨¨. A
,
¨¨A B
Token
¨¨C H
)
¨¨H I
;
¨¨I J
}
≠≠ %
checkEmpDesignationDtls
ØØ '
.
ØØ' (

ModifiedBy
ØØ( 2
=
ØØ3 4
	_userInfo
ØØ5 >
.
ØØ> ?
UserId
ØØ? E
;
ØØE F%
checkEmpDesignationDtls
∞∞ '
.
∞∞' (
ModifiedDate
∞∞( 4
=
∞∞5 6
DateTime
∞∞7 ?
.
∞∞? @
UtcNow
∞∞@ F
;
∞∞F G%
checkEmpDesignationDtls
±± '
.
±±' (
SubstDesigCode
±±( 6
=
±±7 8
employee
±±9 A
.
±±A B
EmpDesignation
±±B P
.
±±P Q
SubstDesigCode
±±Q _
;
±±_ `%
checkEmpDesignationDtls
≤≤ '
.
≤≤' (
	SubstDate
≤≤( 1
=
≤≤2 3
employee
≤≤4 <
.
≤≤< =
EmpDesignation
≤≤= K
.
≤≤K L
	SubstDate
≤≤L U
;
≤≤U V%
checkEmpDesignationDtls
≥≥ '
.
≥≥' (
PpDesignCode
≥≥( 4
=
≥≥5 6
employee
≥≥7 ?
.
≥≥? @
EmpDesignation
≥≥@ N
.
≥≥N O
PpDesignCode
≥≥O [
;
≥≥[ \%
checkEmpDesignationDtls
¥¥ '
.
¥¥' (
PpDate
¥¥( .
=
¥¥/ 0
employee
¥¥1 9
.
¥¥9 :
EmpDesignation
¥¥: H
.
¥¥H I
PpDate
¥¥I O
;
¥¥O P%
checkEmpDesignationDtls
µµ '
.
µµ' (
IcDate
µµ( .
=
µµ/ 0
employee
µµ1 9
.
µµ9 :
EmpDesignation
µµ: H
.
µµH I
IcDate
µµI O
;
µµO P%
checkEmpDesignationDtls
∂∂ '
.
∂∂' (
IcDesigCode
∂∂( 3
=
∂∂4 5
employee
∂∂6 >
.
∂∂> ?
EmpDesignation
∂∂? M
.
∂∂M N
IcDesigCode
∂∂N Y
;
∂∂Y Z
await
∏∏ 
_empContext
∏∏ !
.
∏∏! "
UpdateAsync
∏∏" -
(
∏∏- .
checkEmployeeDtls
∏∏. ?
,
∏∏? @
Token
∏∏A F
)
∏∏F G
;
∏∏G H
await
ππ 
_empDesignation
ππ %
.
ππ% &
UpdateAsync
ππ& 1
(
ππ1 2%
checkEmpDesignationDtls
ππ2 I
,
ππI J
Token
ππK P
)
ππP Q
;
ππQ R
}
∫∫ 
await
ºº  
_unitOfWorkService
ºº $
.
ºº$ %
CommitAsync
ºº% 0
(
ºº0 1
Token
ºº1 6
)
ºº6 7
;
ºº7 8
return
ææ 
(
ææ 
true
ææ 
,
ææ 
$str
ææ ;
)
ææ; <
;
ææ< =
}
øø 	
public
√√ 
async
√√ 
Task
√√ 
<
√√ 
List
√√ 
<
√√ 
OfficeMasterDto
√√ .
>
√√. /
>
√√/ 0
GetAllOffices
√√1 >
(
√√> ?
CancellationToken
√√? P
Token
√√Q V
)
√√V W
{
ƒƒ 	
var
≈≈ 
result
≈≈ 
=
≈≈ 
await
≈≈ 
_officeDtlContext
≈≈ 0
.
≈≈0 1#
FindByExpressionAsync
≈≈1 F
(
≈≈F G
x
≈≈G H
=>
≈≈I K
x
≈≈L M
.
≈≈M N
OffcCd
≈≈N T
==
≈≈U W
x
≈≈X Y
.
≈≈Y Z
OffcCd
≈≈Z `
,
≈≈` a
Token
≈≈b g
)
≈≈g h
;
≈≈h i
var
∆∆ 
	resultObj
∆∆ 
=
∆∆ 
new
∆∆ 
List
∆∆  $
<
∆∆$ %
OfficeMasterDto
∆∆% 4
>
∆∆4 5
(
∆∆5 6
)
∆∆6 7
;
∆∆7 8
foreach
»» 
(
»» 
var
»» 
item
»» 
in
»»  
result
»»! '
)
»»' (
{
…… 
	resultObj
   
.
   
Add
   
(
   
new
   !
OfficeMasterDto
  " 1
(
  1 2
)
  2 3
{
ÀÀ 
OffcCd
ÃÃ 
=
ÃÃ 
item
ÃÃ !
.
ÃÃ! "
OffcCd
ÃÃ" (
,
ÃÃ( )
OffcNam
ÕÕ 
=
ÕÕ 
item
ÕÕ "
.
ÕÕ" #
OffcNam
ÕÕ# *
,
ÕÕ* +
}
ŒŒ 
)
ŒŒ 
;
ŒŒ 
}
–– 
return
—— 
	resultObj
—— 
;
—— 
}
““ 	
public
‘‘ 
async
‘‘ 
Task
‘‘ 
<
‘‘ 
List
‘‘ 
<
‘‘ 
ChairMasterDto
‘‘ -
>
‘‘- .
>
‘‘. /
GetAllChairs
‘‘0 <
(
‘‘< =
string
‘‘= C
officeId
‘‘D L
,
‘‘L M
CancellationToken
‘‘N _
Token
‘‘` e
)
‘‘e f
{
’’ 	
var
÷÷ 
result
÷÷ 
=
÷÷ 
await
÷÷ 
_chairDtlContext
÷÷ /
.
÷÷/ 0#
FindByExpressionAsync
÷÷0 E
(
÷÷E F
x
÷÷F G
=>
÷÷H J
x
÷÷K L
.
÷÷L M
OffcCd
÷÷M S
==
÷÷T V
Convert
÷÷W ^
.
÷÷^ _
ToByte
÷÷_ e
(
÷÷e f
officeId
÷÷f n
)
÷÷n o
,
÷÷o p
Token
÷÷q v
)
÷÷v w
;
÷÷w x
var
◊◊ 
	resultObj
◊◊ 
=
◊◊ 
new
◊◊ 
List
◊◊  $
<
◊◊$ %
ChairMasterDto
◊◊% 3
>
◊◊3 4
(
◊◊4 5
)
◊◊5 6
;
◊◊6 7
foreach
ÿÿ 
(
ÿÿ 
var
ÿÿ 
item
ÿÿ 
in
ÿÿ  
result
ÿÿ! '
)
ÿÿ' (
{
ŸŸ 
	resultObj
⁄⁄ 
.
⁄⁄ 
Add
⁄⁄ 
(
⁄⁄ 
new
⁄⁄ !
ChairMasterDto
⁄⁄" 0
(
⁄⁄0 1
)
⁄⁄1 2
{
€€ 

OfficeCode
‹‹ 
=
‹‹  
item
‹‹! %
.
‹‹% &
OffcCd
‹‹& ,
,
‹‹, -
Id
›› 
=
›› 
item
›› 
.
›› 
ChairId
›› %
,
››% &
Description
ﬁﬁ 
=
ﬁﬁ  !
item
ﬁﬁ" &
.
ﬁﬁ& '
	ChairDesc
ﬁﬁ' 0
,
ﬁﬁ0 1
Code
ﬂﬂ 
=
ﬂﬂ 
item
ﬂﬂ 
.
ﬂﬂ  
	ChairCode
ﬂﬂ  )
}
‡‡ 
)
‡‡ 
;
‡‡ 
}
‚‚ 
return
„„ 
	resultObj
„„ 
;
„„ 
}
‰‰ 	
public
ÊÊ 
async
ÊÊ 
Task
ÊÊ 
<
ÊÊ 
bool
ÊÊ 
>
ÊÊ 
Checkin
ÊÊ  '
(
ÊÊ' (
AssignOfficeDto
ÊÊ( 7

requestObj
ÊÊ8 B
,
ÊÊB C
CancellationToken
ÊÊD U
Token
ÊÊV [
)
ÊÊ[ \
{
ÁÁ 	
var
ÈÈ 1
#checkIfEmployeeIDisAlreadyAvailable
ÈÈ 3
=
ÈÈ4 5
await
ÈÈ6 ;%
_empChairHistoryContext
ÈÈ< S
.
ÈÈS T#
FindByExpressionAsync
ÈÈT i
(
ÈÈi j
x
ÈÈj k
=>
ÈÈl n
x
ÈÈo p
.
ÈÈp q
EmpId
ÈÈq v
==
ÈÈw y

requestObjÈÈz Ñ
.ÈÈÑ Ö
TeyTicketNumÈÈÖ ë
&&
ÍÍ 
x
ÍÍ 
.
ÍÍ 
OffcCd
ÍÍ 
==
ÍÍ 
Convert
ÍÍ "
.
ÍÍ" #
ToByte
ÍÍ# )
(
ÍÍ) *

requestObj
ÍÍ* 4
.
ÍÍ4 5
OfficeId
ÍÍ5 =
)
ÍÍ= >
&&
ÎÎ 
x
ÎÎ 
.
ÎÎ 
	ChairCode
ÎÎ 
==
ÎÎ 
Convert
ÎÎ %
.
ÎÎ% &
ToInt32
ÎÎ& -
(
ÎÎ- .

requestObj
ÎÎ. 8
.
ÎÎ8 9
ChairId
ÎÎ9 @
)
ÎÎ@ A
&&
ÏÏ 
x
ÏÏ 
.
ÏÏ 
TgesCode
ÏÏ 
==
ÏÏ 

requestObj
ÏÏ '
.
ÏÏ' (
OpsDesignationId
ÏÏ( 8
&&
ÌÌ 
x
ÌÌ 
.
ÌÌ 
IsActive
ÌÌ 
==
ÌÌ 
true
ÌÌ !
&&
ÓÓ 
x
ÓÓ 
.
ÓÓ 
	IsDeleted
ÓÓ 
==
ÓÓ 
false
ÓÓ #
,
ÓÓ# $
Token
ÔÔ 
)
ÔÔ 
;
ÔÔ 
if
ÚÚ 
(
ÚÚ 1
#checkIfEmployeeIDisAlreadyAvailable
ÚÚ 3
.
ÚÚ3 4
Count
ÚÚ4 9
>
ÚÚ: ;
$num
ÚÚ< =
)
ÚÚ= >
{
ÛÛ 
foreach
ÙÙ 
(
ÙÙ 
var
ÙÙ 
item
ÙÙ !
in
ÙÙ" $1
#checkIfEmployeeIDisAlreadyAvailable
ÙÙ% H
)
ÙÙH I
{
ıı 
item
˜˜ 
.
˜˜ 
IsActive
˜˜ !
=
˜˜" #
false
˜˜$ )
;
˜˜) *
item
¯¯ 
.
¯¯ 
	IsDeleted
¯¯ "
=
¯¯# $
true
¯¯% )
;
¯¯) *
item
˘˘ 
.
˘˘ 

ModifiedBy
˘˘ #
=
˘˘$ %
	_userInfo
˘˘& /
.
˘˘/ 0
UserId
˘˘0 6
;
˘˘6 7
item
˙˙ 
.
˙˙ 
ModifiedDate
˙˙ %
=
˙˙& '
DateTime
˙˙( 0
.
˙˙0 1
UtcNow
˙˙1 7
;
˙˙7 8
}
¸¸ 
var
˛˛ 
saveObj
˛˛ 
=
˛˛ 
new
˛˛ ! 
TblEmpchairhistDet
˛˛" 4
(
˛˛4 5
)
˛˛5 6
{
ˇˇ 
EmpId
ÄÄ 
=
ÄÄ 

requestObj
ÄÄ &
.
ÄÄ& '
TeyTicketNum
ÄÄ' 3
,
ÄÄ3 4
OffcCd
ÅÅ 
=
ÅÅ 
Convert
ÅÅ $
.
ÅÅ$ %
ToByte
ÅÅ% +
(
ÅÅ+ ,

requestObj
ÅÅ, 6
.
ÅÅ6 7
OfficeId
ÅÅ7 ?
)
ÅÅ? @
,
ÅÅ@ A
	ChairCode
ÇÇ 
=
ÇÇ 
Convert
ÇÇ  '
.
ÇÇ' (
ToInt32
ÇÇ( /
(
ÇÇ/ 0

requestObj
ÇÇ0 :
.
ÇÇ: ;
ChairId
ÇÇ; B
)
ÇÇB C
,
ÇÇC D
FromDate
ÉÉ 
=
ÉÉ 
DateTime
ÉÉ '
.
ÉÉ' (
Parse
ÉÉ( -
(
ÉÉ- .

requestObj
ÉÉ. 8
.
ÉÉ8 9
CommencementDate
ÉÉ9 I
)
ÉÉI J
,
ÉÉJ K
TgesCode
ÑÑ 
=
ÑÑ 

requestObj
ÑÑ )
.
ÑÑ) *
OpsDesignationId
ÑÑ* :
,
ÑÑ: ;
IsActive
ÖÖ 
=
ÖÖ 
true
ÖÖ #
,
ÖÖ# $
	CreatedBy
ÜÜ 
=
ÜÜ 
	_userInfo
ÜÜ  )
.
ÜÜ) *
UserId
ÜÜ* 0
,
ÜÜ0 1
CreatedDate
áá 
=
áá  !
DateTime
áá" *
.
áá* +
UtcNow
áá+ 1
,
áá1 2
	IsDeleted
àà 
=
àà 
false
àà  %
}
ââ 
;
ââ 
await
ãã %
_empChairHistoryContext
ãã -
.
ãã- .
UpdateAsync
ãã. 9
(
ãã9 :1
#checkIfEmployeeIDisAlreadyAvailable
ãã: ]
,
ãã] ^
Token
ãã_ d
)
ããd e
;
ããe f
await
åå %
_empChairHistoryContext
åå -
.
åå- .
AddAsync
åå. 6
(
åå6 7
saveObj
åå7 >
,
åå> ?
Token
åå@ E
)
ååE F
;
ååF G
}
éé 
else
èè 
{
êê 
var
ëë 
saveObj
ëë 
=
ëë 
new
ëë ! 
TblEmpchairhistDet
ëë" 4
(
ëë4 5
)
ëë5 6
{
íí 
EmpId
ìì 
=
ìì 

requestObj
ìì &
.
ìì& '
TeyTicketNum
ìì' 3
,
ìì3 4
OffcCd
îî 
=
îî 
Convert
îî $
.
îî$ %
ToByte
îî% +
(
îî+ ,

requestObj
îî, 6
.
îî6 7
OfficeId
îî7 ?
)
îî? @
,
îî@ A
	ChairCode
ïï 
=
ïï 
Convert
ïï  '
.
ïï' (
ToInt32
ïï( /
(
ïï/ 0

requestObj
ïï0 :
.
ïï: ;
ChairId
ïï; B
)
ïïB C
,
ïïC D
FromDate
ññ 
=
ññ 
DateTime
ññ '
.
ññ' (
Parse
ññ( -
(
ññ- .

requestObj
ññ. 8
.
ññ8 9
CommencementDate
ññ9 I
)
ññI J
,
ññJ K
TgesCode
óó 
=
óó 

requestObj
óó )
.
óó) *
OpsDesignationId
óó* :
,
óó: ;
IsActive
òò 
=
òò 
true
òò #
,
òò# $
	CreatedBy
ôô 
=
ôô 
	_userInfo
ôô  )
.
ôô) *
UserId
ôô* 0
,
ôô0 1
CreatedDate
öö 
=
öö  !
DateTime
öö" *
.
öö* +
UtcNow
öö+ 1
,
öö1 2
	IsDeleted
õõ 
=
õõ 
false
õõ  %
}
úú 
;
úú 
await
ûû %
_empChairHistoryContext
ûû -
.
ûû- .
AddAsync
ûû. 6
(
ûû6 7
saveObj
ûû7 >
,
ûû> ?
Token
ûû@ E
)
ûûE F
;
ûûF G
}
†† 
var
¢¢ 

saveResult
¢¢ 
=
¢¢ 
await
¢¢ " 
_unitOfWorkService
¢¢# 5
.
¢¢5 6
CommitAsync
¢¢6 A
(
¢¢A B
Token
¢¢B G
)
¢¢G H
;
¢¢H I
if
§§ 
(
§§ 

saveResult
§§ 
>
§§ 
$num
§§ 
)
§§ 
{
•• 
return
¶¶ 
true
¶¶ 
;
¶¶ 
}
ßß 
return
©© 
false
©© 
;
©© 
}
™™ 	
public
¨¨ 
async
¨¨ 
Task
¨¨ 
<
¨¨ 
List
¨¨ 
<
¨¨ *
AssignOfficeMasterHistoryDto
¨¨ ;
>
¨¨; <
>
¨¨< =-
GetAllAssignDataUsingEmployeeId
¨¨> ]
(
¨¨] ^
string
¨¨^ d

employeeId
¨¨e o
,
¨¨o p 
CancellationToken¨¨q Ç
Token¨¨É à
)¨¨à â
{
≠≠ 	
var
ØØ 
empOfficeDetails
ØØ  
=
ØØ! "
await
ØØ# (%
_empChairHistoryContext
ØØ) @
.
ØØ@ A#
FindByExpressionAsync
ØØA V
(
ØØV W
x
ØØW X
=>
ØØY [
x
ØØ\ ]
.
ØØ] ^
EmpId
ØØ^ c
==
ØØd f

employeeId
ØØg q
&&
ØØr t
x
ØØu v
.
ØØv w
IsActive
ØØw 
==ØØÄ Ç
trueØØÉ á
&&
∞∞ 
x
∞∞ 
.
∞∞ 
	IsDeleted
∞∞ 
==
∞∞ 
false
∞∞ #
,
∞∞# $
Token
∞∞% *
)
∞∞* +
;
∞∞+ ,
var
≥≥ 

AllOffices
≥≥ 
=
≥≥ 
await
≥≥ "
_officeDtlContext
≥≥# 4
.
≥≥4 5#
FindByExpressionAsync
≥≥5 J
(
≥≥J K
x
≥≥K L
=>
≥≥M O
x
≥≥P Q
.
≥≥Q R
OffcCd
≥≥R X
==
≥≥Y [
x
≥≥\ ]
.
≥≥] ^
OffcCd
≥≥^ d
,
≥≥d e
Token
≥≥f k
)
≥≥k l
;
≥≥l m
var
¥¥ 
AllChair
¥¥ 
=
¥¥ 
await
¥¥  
_chairDtlContext
¥¥! 1
.
¥¥1 2#
FindByExpressionAsync
¥¥2 G
(
¥¥G H
x
¥¥H I
=>
¥¥J L
x
¥¥M N
.
¥¥N O
	ChairCode
¥¥O X
==
¥¥Y [
x
¥¥\ ]
.
¥¥] ^
	ChairCode
¥¥^ g
,
¥¥g h
Token
¥¥i n
)
¥¥n o
;
¥¥o p
var
µµ 
AllDesignations
µµ 
=
µµ  !
await
µµ" '
	_empGrade
µµ( 1
.
µµ1 2#
FindByExpressionAsync
µµ2 G
(
µµG H
x
µµH I
=>
µµJ L
x
µµM N
.
µµN O
IsActive
µµO W
==
µµX Z
true
µµ[ _
&&
µµ` b
x
µµc d
.
µµd e
	IsDeleted
µµe n
==
µµo q
false
µµr w
,
µµw x
Token
µµy ~
)
µµ~ 
;µµ Ä
var
∑∑ 

testObjOne
∑∑ 
=
∑∑ 
empOfficeDetails
∑∑ -
.
∑∑- .
Join
∑∑. 2
(
∑∑2 3

AllOffices
∑∑3 =
,
∑∑= >
emp
∏∏ 
=>
∏∏  "
emp
∏∏# &
.
∏∏& '
OffcCd
∏∏' -
,
∏∏- .
off
ππ 
=>
ππ  "
off
ππ# &
.
ππ& '
OffcCd
ππ' -
,
ππ- .
(
∫∫ 
emp
∫∫  
,
∫∫  !
off
∫∫" %
)
∫∫% &
=>
∫∫' )
new
∫∫* -
{
ªª 

EmployeeId
ºº  *
=
ºº+ ,
emp
ºº- 0
.
ºº0 1
EmpId
ºº1 6
,
ºº6 7

OfficeCode
ΩΩ  *
=
ΩΩ+ ,
off
ΩΩ- 0
.
ΩΩ0 1
OffcCd
ΩΩ1 7
,
ΩΩ7 8

OfficeName
ææ  *
=
ææ+ ,
off
ææ- 0
.
ææ0 1
OffcNam
ææ1 8
,
ææ8 9
	ChairCode
øø  )
=
øø* +
emp
øø, /
.
øø/ 0
	ChairCode
øø0 9
,
øø9 :
OpDesigCode
¿¿  +
=
¿¿, -
emp
¿¿. 1
.
¿¿1 2
TgesCode
¿¿2 :
,
¿¿: ;
FromDate
¡¡  (
=
¡¡) *
emp
¡¡+ .
.
¡¡. /
FromDate
¡¡/ 7
}
√√ 
)
√√ 
.
√√ 
Join
√√ #
(
√√# $
AllChair
√√$ ,
,
√√, -
m
√√. /
=>
√√0 2
m
√√3 4
.
√√4 5
	ChairCode
√√5 >
,
√√> ?
n
√√@ A
=>
√√B D
n
√√E F
.
√√F G
	ChairCode
√√G P
,
√√P Q
(
√√R S
m
√√S T
,
√√T U
n
√√V W
)
√√W X
=>
√√Y [
new
√√\ _
{
ƒƒ 

EmployeeId
≈≈  *
=
≈≈+ ,
m
≈≈- .
.
≈≈. /

EmployeeId
≈≈/ 9
,
≈≈9 :

OfficeCode
∆∆  *
=
∆∆+ ,
m
∆∆- .
.
∆∆. /

OfficeCode
∆∆/ 9
,
∆∆9 :

OfficeName
««  *
=
««+ ,
m
««- .
.
««. /

OfficeName
««/ 9
,
««9 :
	ChairCode
»»  )
=
»»* +
m
»», -
.
»»- .
	ChairCode
»». 7
,
»»7 8
	ChairName
……  )
=
……* +
n
……, -
.
……- .
	ChairDesc
……. 7
,
……7 8
OpDesigCode
    +
=
  , -
m
  . /
.
  / 0
OpDesigCode
  0 ;
,
  ; <
FromDate
ÀÀ  (
=
ÀÀ) *
m
ÀÀ+ ,
.
ÀÀ, -
FromDate
ÀÀ- 5
}
ÃÃ 
)
ÃÃ 
.
ÃÃ 
Join
ÃÃ #
(
ÃÃ# $
AllDesignations
ÃÃ$ 3
,
ÃÃ3 4
a
ÃÃ5 6
=>
ÃÃ7 9
a
ÃÃ: ;
.
ÃÃ; <
OpDesigCode
ÃÃ< G
,
ÃÃG H
b
ÃÃI J
=>
ÃÃK M
b
ÃÃN O
.
ÃÃO P
TgesCode
ÃÃP X
,
ÃÃX Y
(
ÃÃZ [
a
ÃÃ[ \
,
ÃÃ\ ]
b
ÃÃ^ _
)
ÃÃ_ `
=>
ÃÃa c
new
ÃÃd g
{
ÕÕ 

EmployeeId
ŒŒ  *
=
ŒŒ+ ,
a
ŒŒ- .
.
ŒŒ. /

EmployeeId
ŒŒ/ 9
,
ŒŒ9 :

OfficeCode
œœ  *
=
œœ+ ,
a
œœ- .
.
œœ. /

OfficeCode
œœ/ 9
,
œœ9 :

OfficeName
––  *
=
––+ ,
a
––- .
.
––. /

OfficeName
––/ 9
,
––9 :
	ChairCode
——  )
=
——* +
a
——, -
.
——- .
	ChairCode
——. 7
,
——7 8
	ChairName
““  )
=
““* +
a
““, -
.
““- .
	ChairName
““. 7
,
““7 8
OpDesigCode
””  +
=
””, -
b
””. /
.
””/ 0
TgesCode
””0 8
,
””8 9
OpDesigName
‘‘  +
=
‘‘, -
b
‘‘. /
.
‘‘/ 0
TgesDesc
‘‘0 8
,
‘‘8 9
FromDate
’’  (
=
’’) *
a
’’+ ,
.
’’, -
FromDate
’’- 5
}
÷÷ 
)
÷÷ 
.
÷÷ 
ToList
÷÷ %
(
÷÷% &
)
÷÷& '
;
÷÷' (
var
ÿÿ 
responseObj
ÿÿ 
=
ÿÿ 
new
ÿÿ !
List
ÿÿ" &
<
ÿÿ& '*
AssignOfficeMasterHistoryDto
ÿÿ' C
>
ÿÿC D
(
ÿÿD E
)
ÿÿE F
;
ÿÿF G
if
⁄⁄ 
(
⁄⁄ 

testObjOne
⁄⁄ 
.
⁄⁄ 
Count
⁄⁄  
>
⁄⁄! "
$num
⁄⁄# $
)
⁄⁄$ %
{
€€ 
foreach
‹‹ 
(
‹‹ 
var
‹‹ 
item
‹‹ !
in
‹‹" $

testObjOne
‹‹% /
)
‹‹/ 0
{
›› 
responseObj
ﬁﬁ 
.
ﬁﬁ  
Add
ﬁﬁ  #
(
ﬁﬁ# $
new
ﬁﬁ$ '*
AssignOfficeMasterHistoryDto
ﬁﬁ( D
(
ﬁﬁD E
)
ﬁﬁE F
{
ﬂﬂ 

EmployeeId
‡‡ "
=
‡‡# $
item
‡‡% )
.
‡‡) *

EmployeeId
‡‡* 4
,
‡‡4 5

OfficeCode
·· "
=
··# $
item
··% )
.
··) *

OfficeCode
··* 4
.
··4 5
ToString
··5 =
(
··= >
)
··> ?
,
··? @

OfficeName
‚‚ "
=
‚‚# $
item
‚‚% )
.
‚‚) *

OfficeName
‚‚* 4
,
‚‚4 5
	ChairCode
„„ !
=
„„" #
item
„„$ (
.
„„( )
	ChairCode
„„) 2
.
„„2 3
ToString
„„3 ;
(
„„; <
)
„„< =
,
„„= >
	ChairName
‰‰ !
=
‰‰" #
item
‰‰$ (
.
‰‰( )
	ChairName
‰‰) 2
,
‰‰2 3
OpDesigCode
ÂÂ #
=
ÂÂ$ %
item
ÂÂ& *
.
ÂÂ* +
OpDesigCode
ÂÂ+ 6
,
ÂÂ6 7
OpDesigName
ÊÊ #
=
ÊÊ$ %
item
ÊÊ& *
.
ÊÊ* +
OpDesigName
ÊÊ+ 6
,
ÊÊ6 7
FromDate
ÁÁ  
=
ÁÁ! "
item
ÁÁ# '
.
ÁÁ' (
FromDate
ÁÁ( 0
.
ÁÁ0 1
ToString
ÁÁ1 9
(
ÁÁ9 :
)
ÁÁ: ;
,
ÁÁ; <
}
ËË 
)
ËË 
;
ËË 
}
ÈÈ 
}
ÍÍ 
return
ÏÏ 
responseObj
ÏÏ 
;
ÏÏ 
}
ÓÓ 	
public
 
async
 
Task
 
<
 
bool
 
>
 
CheckOut
  (
(
( )
CheckOutDto
) 4
dto
5 8
,
8 9
CancellationToken
: K
Token
L Q
)
Q R
{
ÒÒ 	
var
ÚÚ 
	getResult
ÚÚ 
=
ÚÚ 
await
ÚÚ !%
_empChairHistoryContext
ÚÚ" 9
.
ÚÚ9 :#
FindByExpressionAsync
ÚÚ: O
(
ÚÚO P
x
ÚÚP Q
=>
ÚÚR T
x
ÚÚU V
.
ÚÚV W
EmpId
ÚÚW \
==
ÚÚ] _
dto
ÚÚ` c
.
ÚÚc d

employeeId
ÚÚd n
&&
ÚÚo q
x
ÚÚr s
.
ÚÚs t
	ChairCode
ÚÚt }
==ÚÚ~ Ä
ConvertÚÚÅ à
.ÚÚà â
ToInt32ÚÚâ ê
(ÚÚê ë
dtoÚÚë î
.ÚÚî ï
	chairCodeÚÚï û
)ÚÚû ü
&&ÚÚ† ¢
xÚÚ£ §
.ÚÚ§ •
OffcCdÚÚ• ´
==ÚÚ¨ Æ
ConvertÚÚØ ∂
.ÚÚ∂ ∑
ToInt32ÚÚ∑ æ
(ÚÚæ ø
dtoÚÚø ¬
.ÚÚ¬ √
officeIdÚÚ√ À
)ÚÚÀ Ã
&&
ÙÙ 
x
ÙÙ 
.
ÙÙ 
TgesCode
ÙÙ 
==
ÙÙ  
dto
ÙÙ! $
.
ÙÙ$ %
opsDesignationId
ÙÙ% 5
,
ıı 
Token
ıı 
)
ıı 
;
ıı 
if
˜˜ 
(
˜˜ 
	getResult
˜˜ 
.
˜˜ 
Count
˜˜ 
>
˜˜  !
$num
˜˜" #
)
˜˜# $
{
¯¯ 
foreach
˘˘ 
(
˘˘ 
var
˘˘ 
item
˘˘ !
in
˘˘" $
	getResult
˘˘% .
)
˘˘. /
{
˙˙ 
item
˚˚ 
.
˚˚ 
IsActive
˚˚ !
=
˚˚" #
false
˚˚$ )
;
˚˚) *
item
¸¸ 
.
¸¸ 
	IsDeleted
¸¸ "
=
¸¸# $
true
¸¸% )
;
¸¸) *
item
˝˝ 
.
˝˝ 

ModifiedBy
˝˝ #
=
˝˝$ %
	_userInfo
˝˝& /
.
˝˝/ 0
UserId
˝˝0 6
;
˝˝6 7
item
˛˛ 
.
˛˛ 
ModifiedDate
˛˛ %
=
˛˛& '
DateTime
˛˛( 0
.
˛˛0 1
Now
˛˛1 4
;
˛˛4 5
}
ˇˇ 
await
ÅÅ %
_empChairHistoryContext
ÅÅ -
.
ÅÅ- .
UpdateAsync
ÅÅ. 9
(
ÅÅ9 :
	getResult
ÅÅ: C
,
ÅÅC D
Token
ÅÅE J
)
ÅÅJ K
;
ÅÅK L
await
ÉÉ  
_unitOfWorkService
ÉÉ (
.
ÉÉ( )
CommitAsync
ÉÉ) 4
(
ÉÉ4 5
Token
ÉÉ5 :
)
ÉÉ: ;
;
ÉÉ; <
return
ÖÖ 
true
ÖÖ 
;
ÖÖ 
}
ÜÜ 
else
áá 
{
àà 
return
ââ 
false
ââ 
;
ââ 
}
ää 
}
ãã 	
public
êê 
async
êê 
Task
êê 
<
êê 
List
êê 
<
êê 
ModuleMasterDto
êê .
>
êê. /
>
êê/ 0

GetModules
êê1 ;
(
êê; <
CancellationToken
êê< M
Token
êêN S
)
êêS T
{
ëë 	
var
íí 
response
íí 
=
íí 
new
íí 
List
íí #
<
íí# $
ModuleMasterDto
íí$ 3
>
íí3 4
(
íí4 5
)
íí5 6
;
íí6 7
var
ìì 
modules
ìì 
=
ìì 
await
ìì 
_moduleContext
ìì  .
.
ìì. /#
FindByExpressionAsync
ìì/ D
(
ììD E
x
ììE F
=>
ììG I
x
ììJ K
.
ììK L
ModuleId
ììL T
==
ììU W
x
ììX Y
.
ììY Z
ModuleId
ììZ b
&&
ììc e
x
ììf g
.
ììg h
	IsDeleted
ììh q
==
ììr t
false
ììu z
&&
ìì{ }
x
ìì~ 
.ìì Ä
IsActiveììÄ à
==ììâ ã
trueììå ê
,ììê ë
Tokenììí ó
)ììó ò
;ììò ô
if
îî 
(
îî 
modules
îî 
.
îî 
Count
îî 
>
îî 
$num
îî  !
)
îî! "
{
ïï 
foreach
ññ 
(
ññ 
var
ññ 
module
ññ #
in
ññ$ &
modules
ññ' .
)
ññ. /
{
óó 
response
òò 
.
òò 
Add
òò  
(
òò  !
new
òò! $
ModuleMasterDto
òò% 4
(
òò4 5
)
òò5 6
{
ôô 
Id
öö 
=
öö 
module
öö #
.
öö# $
ModuleId
öö$ ,
,
öö, -
Description
õõ #
=
õõ$ %
module
õõ& ,
.
õõ, -

ModuleDesc
õõ- 7
}
úú 
)
úú 
;
úú 
}
ûû 
}
üü 
return
†† 
response
†† 
;
†† 
}
°° 	
public
££ 
async
££ 
Task
££ 
<
££ 
List
££ 
<
££ 
RoleMasterDto
££ ,
>
££, -
>
££- .
GetRoles
££/ 7
(
££7 8
string
££8 >
moduleId
££? G
,
££G H
CancellationToken
££I Z
Token
££[ `
)
££` a
{
§§ 	
var
•• 
response
•• 
=
•• 
new
•• 
List
•• #
<
••# $
RoleMasterDto
••$ 1
>
••1 2
(
••2 3
)
••3 4
;
••4 5
var
¶¶ 
roles
¶¶ 
=
¶¶ 
await
¶¶ 
_roleContext
¶¶ *
.
¶¶* +#
FindByExpressionAsync
¶¶+ @
(
¶¶@ A
x
¶¶A B
=>
¶¶C E
x
¶¶F G
.
¶¶G H
ModuleId
¶¶H P
==
¶¶Q S
Convert
¶¶T [
.
¶¶[ \
ToInt32
¶¶\ c
(
¶¶c d
moduleId
¶¶d l
)
¶¶l m
&&
¶¶n p
x
¶¶q r
.
¶¶r s
IsActive
¶¶s {
==
¶¶| ~
true¶¶ É
&&¶¶Ñ Ü
x¶¶á à
.¶¶à â
	IsDeleted¶¶â í
==¶¶ì ï
false¶¶ñ õ
,¶¶õ ú
Token¶¶ù ¢
)¶¶¢ £
;¶¶£ §
if
®® 
(
®® 
roles
®® 
.
®® 
Count
®® 
>
®® 
$num
®® 
)
®®  
{
©© 
foreach
™™ 
(
™™ 
var
™™ 
role
™™ !
in
™™" $
roles
™™% *
)
™™* +
{
´´ 
response
¨¨ 
.
¨¨ 
Add
¨¨  
(
¨¨  !
new
¨¨! $
RoleMasterDto
¨¨% 2
(
¨¨2 3
)
¨¨3 4
{
≠≠ 
Id
ÆÆ 
=
ÆÆ 
role
ÆÆ !
.
ÆÆ! "
RoleId
ÆÆ" (
,
ÆÆ( )
Description
ØØ #
=
ØØ$ %
role
ØØ& *
.
ØØ* +
RoleDesc
ØØ+ 3
,
ØØ3 4
}
∞∞ 
)
∞∞ 
;
∞∞ 
}
±± 
}
≤≤ 
return
≥≥ 
response
≥≥ 
;
≥≥ 
}
¥¥ 	
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
int
∂∂ 
>
∂∂ !
AssignRoleAndModule
∂∂ 2
(
∂∂2 3
AssignRoleDto
∂∂3 @

requestObj
∂∂A K
,
∂∂K L
CancellationToken
∂∂M ^
Token
∂∂_ d
)
∂∂d e
{
∑∑ 	
var
∏∏ 
data
∏∏ 
=
∏∏ 
await
∏∏ 
_roleDtlContext
∏∏ ,
.
∏∏, -#
FindByExpressionAsync
∏∏- B
(
∏∏B C
x
∏∏C D
=>
∏∏E G
x
∏∏H I
.
∏∏I J
EmpId
∏∏J O
==
∏∏P R

requestObj
∏∏S ]
.
∏∏] ^
EmployeeNumber
∏∏^ l
&&
ππ 
x
ππ 
.
ππ 
RoleId
ππ 
==
ππ 
Convert
ππ "
.
ππ" #
ToInt32
ππ# *
(
ππ* +

requestObj
ππ+ 5
.
ππ5 6
RoleId
ππ6 <
)
ππ< =
&&
ππ> @
x
ππA B
.
ππB C
IsActive
ππC K
==
ππL N
true
ππO S
&&
ππT V
x
ππW X
.
ππX Y
	IsDeleted
ππY b
==
ππc e
false
ππf k
,
ππk l
Token
ππm r
)
ππr s
;
ππs t
if
∫∫ 
(
∫∫ 
data
∫∫ 
.
∫∫ 
Count
∫∫ 
>
∫∫ 
$num
∫∫ 
)
∫∫ 
{
ªª 
return
ºº 
$num
ºº 
;
ºº 
}
ΩΩ 
else
ææ 
{
øø 
var
¿¿ 
saveObj
¿¿ 
=
¿¿ 
new
¿¿ !
TblEmprolehistDet
¿¿" 3
(
¿¿3 4
)
¿¿4 5
;
¿¿5 6
saveObj
¡¡ 
.
¡¡ 
IsActive
¡¡  
=
¡¡! "
true
¡¡# '
;
¡¡' (
saveObj
¬¬ 
.
¬¬ 
	IsDeleted
¬¬ !
=
¬¬" #
false
¬¬$ )
;
¬¬) *
saveObj
√√ 
.
√√ 
	CreatedBy
√√ !
=
√√" #
	_userInfo
√√$ -
.
√√- .
UserId
√√. 4
;
√√4 5
saveObj
ƒƒ 
.
ƒƒ 
CreatedDate
ƒƒ #
=
ƒƒ$ %
DateTime
ƒƒ& .
.
ƒƒ. /
Now
ƒƒ/ 2
;
ƒƒ2 3
saveObj
≈≈ 
.
≈≈ 
EmpId
≈≈ 
=
≈≈ 

requestObj
≈≈  *
.
≈≈* +
EmployeeNumber
≈≈+ 9
;
≈≈9 :
saveObj
∆∆ 
.
∆∆ 
RoleId
∆∆ 
=
∆∆  
Convert
∆∆! (
.
∆∆( )
ToInt32
∆∆) 0
(
∆∆0 1

requestObj
∆∆1 ;
.
∆∆; <
RoleId
∆∆< B
)
∆∆B C
;
∆∆C D
await
»» 
_roleDtlContext
»» %
.
»»% &
AddAsync
»»& .
(
»». /
saveObj
»»/ 6
,
»»6 7
Token
»»8 =
)
»»= >
;
»»> ?
await
……  
_unitOfWorkService
…… (
.
……( )
CommitAsync
……) 4
(
……4 5
Token
……5 :
)
……: ;
;
……; <
}
   
return
ÃÃ 
$num
ÃÃ 
;
ÃÃ 
}
ÕÕ 	
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
bool
œœ 
>
œœ  
RemoveAssignedRole
œœ  2
(
œœ2 3
string
œœ3 9
empId
œœ: ?
,
œœ? @
string
œœA G
moduleId
œœH P
,
œœP Q
string
œœR X
roleId
œœY _
,
œœ_ `
CancellationToken
œœa r
Token
œœs x
)
œœx y
{
–– 	
var
—— 
data
—— 
=
—— 
await
—— 
_roleDtlContext
—— ,
.
——, -#
FindByExpressionAsync
——- B
(
——B C
x
——C D
=>
——E G
x
——H I
.
——I J
EmpId
——J O
==
——P R
empId
——S X
&&
““ 
x
““ 
.
““ 
RoleId
““ 
==
““ 
Convert
““ "
.
““" #
ToInt32
““# *
(
““* +
roleId
““+ 1
)
““1 2
&&
““3 5
x
““6 7
.
““7 8
IsActive
““8 @
==
““A C
true
““D H
&&
““I K
x
““L M
.
““M N
	IsDeleted
““N W
==
““X Z
false
““[ `
,
““` a
Token
““b g
)
““g h
;
““h i
if
”” 
(
”” 
data
”” 
.
”” 
Count
”” 
>
”” 
$num
”” 
)
”” 
{
‘‘ 
foreach
’’ 
(
’’ 
var
’’ 
item
’’ !
in
’’" $
data
’’% )
)
’’) *
{
÷÷ 
item
◊◊ 
.
◊◊ 
IsActive
◊◊ !
=
◊◊" #
false
◊◊$ )
;
◊◊) *
item
ÿÿ 
.
ÿÿ 
	IsDeleted
ÿÿ "
=
ÿÿ# $
true
ÿÿ% )
;
ÿÿ) *
item
ŸŸ 
.
ŸŸ 

ModifiedBy
ŸŸ #
=
ŸŸ$ %
	_userInfo
ŸŸ& /
.
ŸŸ/ 0
UserId
ŸŸ0 6
;
ŸŸ6 7
item
⁄⁄ 
.
⁄⁄ 
ModifiedDate
⁄⁄ %
=
⁄⁄& '
DateTime
⁄⁄( 0
.
⁄⁄0 1
Now
⁄⁄1 4
;
⁄⁄4 5
}
‹‹ 
await
ﬁﬁ 
_roleDtlContext
ﬁﬁ %
.
ﬁﬁ% &
UpdateAsync
ﬁﬁ& 1
(
ﬁﬁ1 2
data
ﬁﬁ2 6
,
ﬁﬁ6 7
Token
ﬁﬁ8 =
)
ﬁﬁ= >
;
ﬁﬁ> ?
await
ﬂﬂ  
_unitOfWorkService
ﬂﬂ (
.
ﬂﬂ( )
CommitAsync
ﬂﬂ) 4
(
ﬂﬂ4 5
Token
ﬂﬂ5 :
)
ﬂﬂ: ;
;
ﬂﬂ; <
return
‡‡ 
true
‡‡ 
;
‡‡ 
}
‚‚ 
return
„„ 
false
„„ 
;
„„ 
}
‰‰ 	
public
ÊÊ 
async
ÊÊ 
Task
ÊÊ 
<
ÊÊ 
List
ÊÊ 
<
ÊÊ 
AssignRoleDto
ÊÊ ,
>
ÊÊ, -
>
ÊÊ- .$
GetEmployeeRoleDetails
ÊÊ/ E
(
ÊÊE F
string
ÊÊF L

employeeId
ÊÊM W
,
ÊÊW X
CancellationToken
ÊÊY j
Token
ÊÊk p
)
ÊÊp q
{
ÁÁ 	
var
ËË 
empData
ËË 
=
ËË 
await
ËË 
_empContext
ËË  +
.
ËË+ ,#
FindByExpressionAsync
ËË, A
(
ËËA B
x
ËËB C
=>
ËËD F
x
ËËG H
.
ËËH I
TeyTicketNum
ËËI U
==
ËËV X

employeeId
ËËY c
&&
ËËd f
x
ËËg h
.
ËËh i
IsActive
ËËi q
==
ËËr t
true
ËËu y
&&
ËËz |
x
ËË} ~
.
ËË~ 
	IsDeletedËË à
==ËËâ ã
falseËËå ë
,ËËë í
TokenËËì ò
)ËËò ô
;ËËô ö
var
ÍÍ 
roleData
ÍÍ 
=
ÍÍ 
await
ÍÍ  
_roleDtlContext
ÍÍ! 0
.
ÍÍ0 1#
FindByExpressionAsync
ÍÍ1 F
(
ÍÍF G
x
ÍÍG H
=>
ÍÍI K
x
ÍÍL M
.
ÍÍM N
EmpId
ÍÍN S
==
ÍÍT V

employeeId
ÍÍW a
&&
ÍÍb d
x
ÍÍe f
.
ÍÍf g
IsActive
ÍÍg o
==
ÍÍp r
true
ÍÍs w
&&
ÍÍx z
x
ÍÍ{ |
.
ÍÍ| }
	IsDeletedÍÍ} Ü
==ÍÍá â
falseÍÍä è
,ÍÍè ê
TokenÍÍë ñ
)ÍÍñ ó
;ÍÍó ò
var
ÏÏ 
modules
ÏÏ 
=
ÏÏ 
await
ÏÏ 
_moduleContext
ÏÏ  .
.
ÏÏ. /#
FindByExpressionAsync
ÏÏ/ D
(
ÏÏD E
x
ÏÏE F
=>
ÏÏG I
x
ÏÏJ K
.
ÏÏK L
ModuleId
ÏÏL T
==
ÏÏU W
x
ÏÏX Y
.
ÏÏY Z
ModuleId
ÏÏZ b
&&
ÏÏc e
x
ÏÏf g
.
ÏÏg h
IsActive
ÏÏh p
==
ÏÏq s
true
ÏÏt x
&&
ÏÏy {
x
ÏÏ| }
.
ÏÏ} ~
	IsDeletedÏÏ~ á
==ÏÏà ä
falseÏÏã ê
,ÏÏê ë
TokenÏÏí ó
)ÏÏó ò
;ÏÏò ô
var
ÓÓ 
roles
ÓÓ 
=
ÓÓ 
await
ÓÓ 
_roleContext
ÓÓ *
.
ÓÓ* +#
FindByExpressionAsync
ÓÓ+ @
(
ÓÓ@ A
x
ÓÓA B
=>
ÓÓC E
x
ÓÓF G
.
ÓÓG H
RoleId
ÓÓH N
==
ÓÓO Q
x
ÓÓR S
.
ÓÓS T
RoleId
ÓÓT Z
&&
ÓÓ[ ]
x
ÓÓ^ _
.
ÓÓ_ `
IsActive
ÓÓ` h
==
ÓÓi k
true
ÓÓl p
&&
ÓÓq s
x
ÓÓt u
.
ÓÓu v
	IsDeleted
ÓÓv 
==ÓÓÄ Ç
falseÓÓÉ à
,ÓÓà â
TokenÓÓä è
)ÓÓè ê
;ÓÓê ë
var
 
data
 
=
 
empData
 
.
 
Join
 #
(
# $
roleData
$ ,
,
, -
emp
ÒÒ 
=>
ÒÒ 
emp
ÒÒ "
.
ÒÒ" #
TeyTicketNum
ÒÒ# /
,
ÒÒ/ 0
roleDtl
ÚÚ 
=>
ÚÚ  "
roleDtl
ÚÚ# *
.
ÚÚ* +
EmpId
ÚÚ+ 0
,
ÚÚ0 1
(
ÛÛ 
emp
ÛÛ 
,
ÛÛ 
roleDtl
ÛÛ %
)
ÛÛ% &
=>
ÛÛ' )
new
ÛÛ* -
{
ÙÙ 

EmployeeId
ıı &
=
ıı' (
emp
ıı) ,
.
ıı, -
TeyTicketNum
ıı- 9
.
ıı9 :
ToString
ıı: B
(
ııB C
)
ııC D
,
ııD E
EmployeeName
ˆˆ (
=
ˆˆ) *
emp
ˆˆ+ .
.
ˆˆ. /
TeyName
ˆˆ/ 6
,
ˆˆ6 7
Mobile
˜˜ "
=
˜˜# $
emp
˜˜% (
.
˜˜( )
EmpMobileNo
˜˜) 4
,
˜˜4 5
Email
¯¯ !
=
¯¯" #
emp
¯¯$ '
.
¯¯' (
TeyPresentEmail
¯¯( 7
,
¯¯7 8
RoleId
˘˘ "
=
˘˘# $
roleDtl
˘˘% ,
.
˘˘, -
RoleId
˘˘- 3
,
˘˘3 4
}
˙˙ 
)
˙˙ 
.
˙˙ 
Join
˙˙ 
(
˙˙  
roles
˙˙  %
,
˙˙% &
r
˚˚ 
=>
˚˚  
r
˚˚! "
.
˚˚" #
RoleId
˚˚# )
,
˚˚) *
d
¸¸ 
=>
¸¸  
d
¸¸! "
.
¸¸" #
RoleId
¸¸# )
,
¸¸) *
(
˝˝ 
r
˝˝ 
,
˝˝ 
d
˝˝  !
)
˝˝! "
=>
˝˝# %
new
˝˝& )
{
˛˛ 

EmployeeId
ˇˇ  *
=
ˇˇ+ ,
r
ˇˇ- .
.
ˇˇ. /

EmployeeId
ˇˇ/ 9
,
ˇˇ9 :
EmployeeName
ÄÄ  ,
=
ÄÄ- .
r
ÄÄ/ 0
.
ÄÄ0 1
EmployeeName
ÄÄ1 =
,
ÄÄ= >
Mobile
ÅÅ  &
=
ÅÅ' (
r
ÅÅ) *
.
ÅÅ* +
Mobile
ÅÅ+ 1
,
ÅÅ1 2
Email
ÇÇ  %
=
ÇÇ& '
r
ÇÇ( )
.
ÇÇ) *
Email
ÇÇ* /
,
ÇÇ/ 0
RoleId
ÉÉ  &
=
ÉÉ' (
r
ÉÉ) *
.
ÉÉ* +
RoleId
ÉÉ+ 1
,
ÉÉ1 2
RoleDsc
ÑÑ  '
=
ÑÑ( )
d
ÑÑ* +
.
ÑÑ+ ,
RoleDesc
ÑÑ, 4
,
ÑÑ4 5
ModuleId
ÖÖ  (
=
ÖÖ) *
d
ÖÖ+ ,
.
ÖÖ, -
ModuleId
ÖÖ- 5
}
ÜÜ 
)
ÜÜ 
.
ÜÜ 
Join
ÜÜ #
(
ÜÜ# $
modules
ÜÜ$ +
,
ÜÜ+ ,
r
áá  !
=>
áá" $
r
áá% &
.
áá& '
ModuleId
áá' /
,
áá/ 0
m
àà  !
=>
àà" $
m
àà% &
.
àà& '
ModuleId
àà' /
,
àà/ 0
(
àà1 2
r
àà2 3
,
àà3 4
m
àà5 6
)
àà6 7
=>
àà8 :
new
àà; >
{
ââ  !

EmployeeId
ää$ .
=
ää/ 0
r
ää1 2
.
ää2 3

EmployeeId
ää3 =
,
ää= >
EmployeeName
ãã$ 0
=
ãã1 2
r
ãã3 4
.
ãã4 5
EmployeeName
ãã5 A
,
ããA B
Mobile
åå$ *
=
åå+ ,
r
åå- .
.
åå. /
Mobile
åå/ 5
,
åå5 6
Email
çç$ )
=
çç* +
r
çç, -
.
çç- .
Email
çç. 3
,
çç3 4
RoleId
éé$ *
=
éé+ ,
r
éé- .
.
éé. /
RoleId
éé/ 5
,
éé5 6
RoleDsc
èè$ +
=
èè, -
r
èè. /
.
èè/ 0
RoleDsc
èè0 7
,
èè7 8

ModuleDesc
êê$ .
=
êê/ 0
m
êê1 2
.
êê2 3

ModuleDesc
êê3 =
,
êê= >
ModuleId
ëë$ ,
=
ëë- .
m
ëë/ 0
.
ëë0 1
ModuleId
ëë1 9
}
íí  !
)
íí! "
.
íí" #
ToList
íí# )
(
íí) *
)
íí* +
;
íí+ ,
var
ìì 
result
ìì 
=
ìì 
new
ìì 
List
ìì !
<
ìì! "
AssignRoleDto
ìì" /
>
ìì/ 0
(
ìì0 1
)
ìì1 2
;
ìì2 3
if
ïï 
(
ïï 
data
ïï 
.
ïï 
Count
ïï 
>
ïï 
$num
ïï 
)
ïï 
{
ññ 
foreach
óó 
(
óó 
var
óó 
i
óó 
in
óó !
data
óó" &
)
óó& '
{
òò 
result
ôô 
.
ôô 
Add
ôô 
(
ôô 
new
ôô "
AssignRoleDto
ôô# 0
(
ôô0 1
)
ôô1 2
{
öö 
EmployeeNumber
õõ &
=
õõ' (
i
õõ) *
.
õõ* +

EmployeeId
õõ+ 5
,
õõ5 6
EmployeeName
úú $
=
úú% &
i
úú' (
.
úú( )
EmployeeName
úú) 5
,
úú5 6
ModuleId
ùù  
=
ùù! "
i
ùù# $
.
ùù$ %
ModuleId
ùù% -
.
ùù- .
ToString
ùù. 6
(
ùù6 7
)
ùù7 8
,
ùù8 9

ModuleName
ûû "
=
ûû# $
i
ûû% &
.
ûû& '

ModuleDesc
ûû' 1
,
ûû1 2
RoleId
üü 
=
üü  
i
üü! "
.
üü" #
RoleId
üü# )
.
üü) *
ToString
üü* 2
(
üü2 3
)
üü3 4
,
üü4 5
RoleName
††  
=
††! "
i
††# $
.
††$ %
RoleDsc
††% ,
}
°° 
)
°° 
;
°° 
}
££ 
}
•• 
return
ßß 
result
ßß 
;
ßß 
}
®® 	
private
™™ 
async
™™ 
Task
™™ 
<
™™ 
string
™™ !
>
™™! "#
GetEmployeeValidation
™™# 8
(
™™8 9
EmployeeDTO
™™9 D
employee
™™E M
,
™™M N
CancellationToken
™™O `
Token
™™a f
)
™™f g
{
´´ 	
StringBuilder
¨¨ 

returnaDta
¨¨ $
=
¨¨% &
new
¨¨' *
StringBuilder
¨¨+ 8
(
¨¨8 9
)
¨¨9 :
;
¨¨: ;
var
≠≠ 
data
≠≠ 
=
≠≠ 
await
≠≠ 
_empContext
≠≠ (
.
≠≠( )#
FindByExpressionAsync
≠≠) >
(
≠≠> ?
a
≠≠? @
=>
≠≠A C
true
≠≠D H
==
≠≠I K
true
≠≠L P
,
≠≠Q R
Token
≠≠S X
)
≠≠X Y
;
≠≠Y Z
foreach
ÆÆ 
(
ÆÆ 
var
ÆÆ 
item
ÆÆ 
in
ÆÆ  
data
ÆÆ! %
)
ÆÆ% &
{
ØØ 
if
∞∞ 
(
∞∞ 
item
∞∞ 
.
∞∞ 
EmpMobileNo
∞∞ $
==
∞∞% '
employee
∞∞( 0
.
∞∞0 1
EmpMobileNo
∞∞1 <
&&
∞∞= ?
(
∞∞@ A
!
∞∞A B

returnaDta
∞∞B L
.
∞∞L M
ToString
∞∞M U
(
∞∞U V
)
∞∞V W
.
∞∞W X
Contains
∞∞X `
(
∞∞` a
$str
∞∞a i
)
∞∞i j
)
∞∞j k
)
∞∞k l
{
±± 

returnaDta
≤≤ 
.
≤≤ 
Append
≤≤ %
(
≤≤% &
$"
≤≤& (
$str
≤≤( /
"
≤≤/ 0
)
≤≤0 1
;
≤≤1 2
}
≥≥ 
if
¥¥ 
(
¥¥ 
item
¥¥ 
.
¥¥ 
	TeyPanNum
¥¥ "
==
¥¥# %
employee
¥¥& .
.
¥¥. /
	TeyPanNum
¥¥/ 8
&&
¥¥9 ;
(
¥¥< =
!
¥¥= >

returnaDta
¥¥> H
.
¥¥H I
ToString
¥¥I Q
(
¥¥Q R
)
¥¥R S
.
¥¥S T
Contains
¥¥T \
(
¥¥\ ]
$str
¥¥] b
)
¥¥b c
)
¥¥c d
)
¥¥d e
{
µµ 

returnaDta
∂∂ 
.
∂∂ 
Append
∂∂ %
(
∂∂% &
$"
∂∂& (
$str
∂∂( ,
"
∂∂, -
)
∂∂- .
;
∂∂. /
}
∑∑ 
if
∏∏ 
(
∏∏ 
item
∏∏ 
.
∏∏ 
TeyPresentEmail
∏∏ (
==
∏∏) +
employee
∏∏, 4
.
∏∏4 5
TeyPresentEmail
∏∏5 D
&&
∏∏E G
(
∏∏H I
!
∏∏I J

returnaDta
∏∏J T
.
∏∏T U
ToString
∏∏U ]
(
∏∏] ^
)
∏∏^ _
.
∏∏_ `
Contains
∏∏` h
(
∏∏h i
$str
∏∏i p
)
∏∏p q
)
∏∏q r
)
∏∏r s
{
ππ 

returnaDta
∫∫ 
.
∫∫ 
Append
∫∫ %
(
∫∫% &
$"
∫∫& (
$str
∫∫( .
"
∫∫. /
)
∫∫/ 0
;
∫∫0 1
}
ªª 
}
ºº 
return
ΩΩ 

returnaDta
ΩΩ 
.
ΩΩ 
ToString
ΩΩ &
(
ΩΩ& '
)
ΩΩ' (
;
ΩΩ( )
}
ææ 	
}
√√ 
}∆∆ ‚
ZD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\HierarchyService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
AdminModule6 A
{ 
public 

class 
HierarchyService !
:" #)
IGenericAdminModuleRepository$ A
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public 
HierarchyService 
(  
IEntityRepository  1
<1 2
OtpTab2 8
>8 9
entityRepository: J
)J K
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public   
Task   
<   
List   
<   
object   
>    
>    !
GetAllAsync  " -
(  - .
CancellationToken  . ?
cancellationToken  @ Q
)  Q R
{!! 	
throw"" 
new"" #
NotImplementedException"" -
(""- .
)"". /
;""/ 0
}## 	
public%% 
Task%% 
<%% 
object%% 
>%% 
GetByIdAsync%% (
(%%( )
object%%) /
model%%0 5
,%%5 6
CancellationToken%%7 H
cancellationToken%%I Z
)%%Z [
{&& 	
throw'' 
new'' #
NotImplementedException'' -
(''- .
)''. /
;''/ 0
}(( 	
public** 
Task** 
<** 
object** 
>** 
UpdateAsync** '
(**' (
object**( .
model**/ 4
,**4 5
CancellationToken**6 G
cancellationToken**H Y
)**Y Z
{++ 	
throw,, 
new,, #
NotImplementedException,, -
(,,- .
),,. /
;,,/ 0
}-- 	
}.. 
}// Ô
WD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\ModuleService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
Service

. 5
.

5 6
AdminModule

6 A
{ 
public 

class 
ModuleService 
:  )
IGenericAdminModuleRepository! >
{ 
private 
readonly 
IEntityRepository *
<* +
TblModuleCdtab+ 9
>9 :
_entityRepository; L
;L M
public 
ModuleService 
( 
IEntityRepository .
<. /
TblModuleCdtab/ =
>= >
entityRepository? O
)O P
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
async 
Task 
< 
object  
>  !
AddAsync" *
(* +
object+ 1
model2 7
,7 8
CancellationToken9 J
cancellationTokenK \
)\ ]
{ 	
return 
await 
_entityRepository )
.) *
AddAsync* 2
(2 3
(3 4
TblModuleCdtab4 B
)B C
modelC H
,H I
cancellationTokenJ [
)[ \
.\ ]
ConfigureAwait] k
(k l
falsel q
)q r
;r s
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
Id/ 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
List 
< 
object 
>  
>  !
GetAllAsync" -
(- .
CancellationToken. ?
cancellationToken@ Q
)Q R
{   	
throw!! 
new!! #
NotImplementedException!! -
(!!- .
)!!. /
;!!/ 0
}"" 	
public$$ 
Task$$ 
<$$ 
object$$ 
>$$ 
GetByIdAsync$$ (
($$( )
object$$) /
Id$$0 2
,$$2 3
CancellationToken$$4 E
cancellationToken$$F W
)$$W X
{%% 	
throw&& 
new&& #
NotImplementedException&& -
(&&- .
)&&. /
;&&/ 0
}'' 	
public)) 
Task)) 
<)) 
object)) 
>)) 
UpdateAsync)) '
())' (
object))( .
model))/ 4
,))4 5
CancellationToken))6 G
cancellationToken))H Y
)))Y Z
{** 	
throw++ 
new++ #
NotImplementedException++ -
(++- .
)++. /
;++/ 0
},, 	
}-- 
}.. ”
UD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\RoleService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
Service		. 5
.		5 6
AdminModule		6 A
{

 
public 

class 
RoleService 
: )
IGenericAdminModuleRepository <
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public 
RoleService 
( 
IEntityRepository ,
<, -
OtpTab- 3
>3 4
entityRepository5 E
)E F
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
List 
< 
object 
>  
>  !
GetAllAsync" -
(- .
CancellationToken. ?
cancellationToken@ Q
)Q R
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
}   	
public"" 
Task"" 
<"" 
object"" 
>"" 
GetByIdAsync"" (
(""( )
object"") /
model""0 5
,""5 6
CancellationToken""7 H
cancellationToken""I Z
)""Z [
{## 	
throw$$ 
new$$ #
NotImplementedException$$ -
($$- .
)$$. /
;$$/ 0
}%% 	
public'' 
Task'' 
<'' 
object'' 
>'' 
UpdateAsync'' '
(''' (
object''( .
model''/ 4
,''4 5
CancellationToken''6 G
cancellationToken''H Y
)''Y Z
{(( 	
throw)) 
new)) #
NotImplementedException)) -
())- .
))). /
;))/ 0
}** 	
}++ 
},, Î
]D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\AdminModule\SubAttributeService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
Service		. 5
.		5 6
AdminModule		6 A
{

 
public 

class 
SubAttributeService $
:% &)
IGenericAdminModuleRepository' D
{ 
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_entityRepository3 D
;D E
public 
SubAttributeService "
(" #
IEntityRepository# 4
<4 5
OtpTab5 ;
>; <
entityRepository= M
)M N
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
} 	
public 
Task 
< 
object 
> 
AddAsync $
($ %
object% +
model, 1
,1 2
CancellationToken3 D
cancellationTokenE V
)V W
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
object 
> 
DeleteAsync '
(' (
object( .
model/ 4
,4 5
CancellationToken6 G
cancellationTokenH Y
)Y Z
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
} 	
public 
Task 
< 
List 
< 
object 
>  
>  !
GetAllAsync" -
(- .
CancellationToken. ?
cancellationToken@ Q
)Q R
{ 	
throw 
new #
NotImplementedException -
(- .
). /
;/ 0
}   	
public"" 
Task"" 
<"" 
object"" 
>"" 
GetByIdAsync"" (
(""( )
object"") /
model""0 5
,""5 6
CancellationToken""7 H
cancellationToken""I Z
)""Z [
{## 	
throw$$ 
new$$ #
NotImplementedException$$ -
($$- .
)$$. /
;$$/ 0
}%% 	
public'' 
Task'' 
<'' 
object'' 
>'' 
UpdateAsync'' '
(''' (
object''( .
model''/ 4
,''4 5
CancellationToken''6 G
cancellationToken''H Y
)''Y Z
{(( 	
throw)) 
new)) #
NotImplementedException)) -
())- .
))). /
;))/ 0
}** 	
}++ 
},, Ÿ‚
KD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\CommonService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
{ 
public 

class 
CommonService 
:  
ICommonService! /
{ 
private 
readonly 
IEntityRepository *
<* +
	CnstCdtab+ 4
>4 5#
_constituencyRepository6 M
;M N
private 
readonly 
IEntityRepository *
<* +
TblPurpCdtab+ 7
>7 8"
_purposeLoanRepository9 O
;O P
private 
readonly 
IEntityRepository *
<* +
TblSizeCdtab+ 7
>7 8!
_sizeOfFirmRepository9 N
;N O
private 
readonly 
IEntityRepository *
<* +
TblProdCdtab+ 7
>7 8
_productRepository9 K
;K L
private 
readonly 
IEntityRepository *
<* +
TblPremCdtab+ 7
>7 8
_premisesRepository9 L
;L M
private 
readonly 
IEntityRepository *
<* +
	DistCdtab+ 4
>4 5
_districtRepository6 I
;I J
private 
readonly 
IEntityRepository *
<* +
TlqCdtab+ 3
>3 4
_talukaRepository5 F
;F G
private 
readonly 
IEntityRepository *
<* +
HobCdtab+ 3
>3 4
_hobliRepository5 E
;E F
private 
readonly 
IEntityRepository *
<* +
VilCdtab+ 3
>3 4
_villageRepository5 G
;G H
private 
readonly 
IEntityRepository *
<* +
TblPincodeMaster+ ;
>; <
_pincodeRepository= O
;O P
private 
readonly 
IEntityRepository *
<* +
	OffcCdtab+ 4
>4 5#
_officeBranchRepository6 M
;M N
private 
readonly 
IEntityRepository *
<* +
TblRegdetailsCdtab+ =
>= >"
_accountTypeRepository? U
;U V
private   
readonly   
IEntityRepository   *
<  * +
TblPdesigCdtab  + 9
>  9 : 
_promoterDesignation  ; O
;  O P
private!! 
readonly!! 
IEntityRepository!! *
<!!* +
TblDomiCdtab!!+ 7
>!!7 8
_domicileStatus!!9 H
;!!H I
private"" 
readonly"" 
IEntityRepository"" *
<""* +
TblBuildingCdtab""+ ;
>""; <
_promModeofAcquire""= O
;""O P
private## 
readonly## 
IEntityRepository## *
<##* + 
TblBankfacilityCdtab##+ ?
>##? @
_nameofFacility##A P
;##P Q
private$$ 
readonly$$ 
IEntityRepository$$ *
<$$* +
TblFinyearCdtab$$+ :
>$$: ;#
_financialYearAssociate$$< S
;$$S T
private%% 
readonly%% 
IEntityRepository%% *
<%%* +
TblFincompCdtab%%+ :
>%%: ;
_financialComponent%%< O
;%%O P
private&& 
readonly&& 
IEntityRepository&& *
<&&* +
TblPjcostCdtab&&+ 9
>&&9 :
_projCostComponent&&; M
;&&M N
private'' 
readonly'' 
IEntityRepository'' *
<''* +
TblPjmfcatCdtab''+ :
>'': ;#
_meansofFinanceCategory''< S
;''S T
private(( 
readonly(( 
IEntityRepository(( *
<((* +
TblPjmfCdtab((+ 7
>((7 8
_financialType((9 G
;((G H
private)) 
readonly)) 
IEntityRepository)) *
<))* +
TblPjsecCdtab))+ 8
>))8 9
_typesofSecurity)): J
;))J K
private** 
readonly** 
IEntityRepository** *
<*** +
TblSecCdtab**+ 6
>**6 7
_securityDetails**8 H
;**H I
private++ 
readonly++ 
IEntityRepository++ *
<++* +
TblPromrelCdtab+++ :
>++: ;
_relationDetails++< L
;++L M
private,, 
readonly,, 
IEntityRepository,, *
<,,* +
TblAddressCdtab,,+ :
>,,: ;
_addressType,,< H
;,,H I
private-- 
readonly-- 
IEntityRepository-- *
<--* +
TblIndCdtab--+ 6
>--6 7
_indtryType--8 C
;--C D
private.. 
readonly.. 
IEntityRepository.. *
<..* +
TblSecCdtab..+ 6
>..6 7'
_securityCategoryRepository..8 S
;..S T
private// 
readonly// 
IEntityRepository// *
<//* +
TblPjsecCdtab//+ 8
>//8 9#
_securityTypeRepository//: Q
;//Q R
private00 
readonly00 
IEntityRepository00 *
<00* +
TblSubRegistrarMast00+ >
>00> ?)
_subRegistrarOfficeRepository00@ ]
;00] ^
private11 
readonly11 
IEntityRepository11 *
<11* +
TbIIfscMaster11+ 8
>118 9#
_bankIfscCodeRepository11: Q
;11Q R
private22 
readonly22 
IEntityRepository22 *
<22* +
TblChargeType22+ 8
>228 9!
_chargeTypeRepository22: O
;22O P
private33 
readonly33 
IEntityRepository33 *
<33* +
TblCondTypeCdtab33+ ;
>33; <
_conditionTypes33= L
;33L M
private44 
readonly44 
IEntityRepository44 *
<44* +
TblCondStageMast44+ ;
>44; <
_conditionStages44= M
;44M N
private55 
readonly55 
IEntityRepository55 *
<55* +
TblCondStgMast55+ 9
>559 :!
_conditionStageMaster55; P
;55P Q
private66 
readonly66 
IEntityRepository66 *
<66* +
TblCondCdtab66+ 7
>667 8!
_conditionDescription669 N
;66N O
private77 
readonly77 
IEntityRepository77 *
<77* +
Tblfm8fm13CDTab77+ :
>77: ;
_form8and13list77< K
;77K L
private88 
readonly88 
IEntityRepository88 *
<88* +
TblPromCdtab88+ 7
>887 8
_promoterNames889 G
;88G H
private99 
readonly99 
IEntityRepository99 *
<99* + 
TblPincodeStateCdtab99+ ?
>99? @
_promoterState99A O
;99O P
private:: 
readonly:: 
IEntityRepository:: *
<::* +#
TblPincodeDistrictCdtab::+ B
>::B C
_promoterDistrict::D U
;::U V
private;; 
readonly;; 
IEntityRepository;; *
<;;* +
TblPsubclasCdtab;;+ ;
>;;; <
_promSubClas;;= I
;;;I J
private<< 
readonly<< 
IEntityRepository<< *
<<<* +
TblPqualCdtab<<+ 8
><<8 9
	_promQual<<: C
;<<C D
private== 
readonly== 
IEntityRepository== *
<==* +
TblAcTypeCdtab==+ 9
>==9 :
_acTypeRepository==; L
;==L M
private>> 
readonly>> 
IEntityRepository>> *
<>>* +
TblStateZone>>+ 7
>>>7 8

_stateZone>>9 C
;>>C D
private?? 
readonly?? 
IEntityRepository?? *
<??* +
TblAssetcatCdtab??+ ;
>??; <
_assetCategory??= K
;??K L
private@@ 
readonly@@ 
IEntityRepository@@ *
<@@* +
TblAssettypeCdtab@@+ <
>@@< =

_assetType@@> H
;@@H I
privateAA 
readonlyAA 
IEntityRepositoryAA *
<AA* +
TblAllcCdTabAA+ 7
>AA7 8
_allocationCodeAA9 H
;AAH I
privateBB 
readonlyBB 
IEntityRepositoryBB *
<BB* +
TblLandTypeMastBB+ :
>BB: ;
_landTypeRepositoryBB< O
;BBO P
privateCC 
readonlyCC 
IEntityRepositoryCC *
<CC* +
IdmOthdebitsMastCC+ ;
>CC; < 
_othdebitsRepositoryCC= Q
;CCQ R
privateDD 
readonlyDD 
IEntityRepositoryDD *
<DD* +
TblUMOMasterDD+ 7
>DD7 8 
_umoMasterRepositoryDD9 M
;DDM N
privateFF 
readonlyFF 
IMapperFF  
_mapperFF! (
;FF( )
publicII 
CommonServiceII 
(II 
IEntityRepositoryII .
<II. /
TblPurpCdtabII/ ;
>II; <!
purposeLoanRepositoryII= R
,IIR S
IEntityRepositoryIIT e
<IIe f
TblSizeCdtabIIf r
>IIr s!
sizeOfFirmRepository	IIt à
,
IIà â
IEntityRepositoryJJ 0
<JJ0 1
TblProdCdtabJJ1 =
>JJ= >
productRepositoryJJ? P
,JJP Q
IEntityRepositoryJJR c
<JJc d
TblPremCdtabJJd p
>JJp q
premisesRepository	JJr Ñ
,
JJÑ Ö
IEntityRepositoryKK 0
<KK0 1
	DistCdtabKK1 :
>KK: ;
districtRepositoryKK< N
,KKN O
IEntityRepositoryKKP a
<KKa b
TlqCdtabKKb j
>KKj k
talukaRepositoryKKl |
,KK| }
IEntityRepositoryLL 0
<LL0 1
HobCdtabLL1 9
>LL9 :
hobliRepositoryLL; J
,LLJ K
IEntityRepositoryLLL ]
<LL] ^
VilCdtabLL^ f
>LLf g
villageRepositoryLLh y
,LLy z
IEntityRepositoryMM 0
<MM0 1
	OffcCdtabMM1 :
>MM: ;"
officeBranchRepositoryMM< R
,MMR S
IEntityRepositoryNN 0
<NN0 1
TblRegdetailsCdtabNN1 C
>NNC D!
accountTypeRepositoryNNE Z
,NNZ [
IEntityRepositoryOO 0
<OO0 1
	CnstCdtabOO1 :
>OO: ;"
constituencyRepositoryOO< R
,OOR S
IEntityRepositoryPP 0
<PP0 1
TblPdesigCdtabPP1 ?
>PP? @
promoterDesignationPPA T
,PPT U
IEntityRepositoryQQ 0
<QQ0 1
TblDomiCdtabQQ1 =
>QQ= >
domicileStatusQQ? M
,QQM N
IEntityRepositoryTT 0
<TT0 1
TblBuildingCdtabTT1 A
>TTA B
promModeofAcquireTTC T
,TTT U
IEntityRepositoryUU 0
<UU0 1 
TblBankfacilityCdtabUU1 E
>UUE F
nameofFacilityUUG U
,UUU V
IEntityRepositoryVV 0
<VV0 1
TblFinyearCdtabVV1 @
>VV@ A"
financialYearAssociateVVB X
,VVX Y
IEntityRepositoryWW 0
<WW0 1
TblFincompCdtabWW1 @
>WW@ A
financialComponentWWB T
,WWT U
IEntityRepositoryXX 0
<XX0 1
TblPjcostCdtabXX1 ?
>XX? @
projCostComponentXXA R
,XXR S
IEntityRepositoryYY 0
<YY0 1
TblPjmfcatCdtabYY1 @
>YY@ A"
meansofFinanceCategoryYYB X
,YYX Y
IEntityRepositoryZZ 0
<ZZ0 1
TblPjmfCdtabZZ1 =
>ZZ= >
financialTypeZZ? L
,ZZL M
IEntityRepository[[ 0
<[[0 1
TblPjsecCdtab[[1 >
>[[> ?
typesofSecurity[[@ O
,[[O P
IEntityRepository\\ 0
<\\0 1
TblSecCdtab\\1 <
>\\< =
securityDetails\\> M
,\\M N
IEntityRepository]] 0
<]]0 1
TblPromrelCdtab]]1 @
>]]@ A
relationDetails]]B Q
,]]Q R
IEntityRepository^^ 0
<^^0 1
TblAddressCdtab^^1 @
>^^@ A
addressType^^B M
,^^M N
IEntityRepository__ 0
<__0 1
TblIndCdtab__1 <
>__< =
industryType__> J
,__J K
IEntityRepository`` 0
<``0 1
TblSecCdtab``1 <
>``< =&
securityCategoryRepository``> X
,``X Y
IEntityRepositoryaa 0
<aa0 1
TblPjsecCdtabaa1 >
>aa> ?"
securityTypeRepositoryaa@ V
,aaV W
IEntityRepositorybb 0
<bb0 1
TblSubRegistrarMastbb1 D
>bbD E(
subRegistrarOfficeRepositorybbF b
,bbb c
IEntityRepositorycc 0
<cc0 1
TbIIfscMastercc1 >
>cc> ?"
bankIfscCodeRepositorycc@ V
,ccV W
IEntityRepositorydd 0
<dd0 1
TblChargeTypedd1 >
>dd> ? 
chargeTypeRepositorydd@ T
,ddT U
IEntityRepositoryee 0
<ee0 1
TblCondTypeCdtabee1 A
>eeA B
conditionTypeseeC Q
,eeQ R
IEntityRepositoryff 0
<ff0 1
TblCondStageMastff1 A
>ffA B
conditionStagesffC R
,ffR S
IEntityRepositorygg 0
<gg0 1
TblCondCdtabgg1 =
>gg= >!
conditionDescriptionsgg? T
,ggT U
IEntityRepositoryhh  1
<hh1 2
Tblfm8fm13CDTabhh2 A
>hhA B
form8and13listhhC Q
,hhQ R
IMapperii &
mapperii' -
,ii- .
IEntityRepositoryii/ @
<ii@ A
TblCondStgMastiiA O
>iiO P 
conditionStageMasteriiQ e
,iie f
IEntityRepositoryjj 0
<jj0 1
TblPromCdtabjj1 =
>jj= >
promoterNamesjj? L
,jjL M
IEntityRepositorykk  1
<kk1 2 
TblPincodeStateCdtabkk2 F
>kkF G
promoterStatekkH U
,kkU V
IEntityRepositoryll  1
<ll1 2#
TblPincodeDistrictCdtabll2 I
>llI J
promoterDistrictllK [
,ll[ \
IEntityRepositorymm  1
<mm1 2
TblPsubclasCdtabmm2 B
>mmB C
promSubClasmmD O
,mmO P
IEntityRepositorynn  1
<nn1 2
TblAssetcatCdtabnn2 B
>nnB C
assetCategorynnD Q
,nnQ R
IEntityRepositoryoo  1
<oo1 2
TblAssettypeCdtaboo2 C
>ooC D
	assetTypeooE N
,ooN O
IEntityRepositorypp  1
<pp1 2
TblPqualCdtabpp2 ?
>pp? @
promQualppA I
,qq  !
IEntityRepositoryqq" 3
<qq3 4
TblAcTypeCdtabqq4 B
>qqB C
acTypeRepositoryqqD T
,qqT U
IEntityRepositoryrr  1
<rr1 2
TblStateZonerr2 >
>rr> ?
	stateZonerr@ I
,rrI J
IEntityRepositoryss  1
<ss1 2
TblUMOMasterss2 >
>ss> ?
umoMasterRepositoryss@ S
,ssS T
IEntityRepositoryssU f
<ssf g
TblAllcCdTabssg s
>sss t
allocationCode	ssu É
,
ssÉ Ñ
IEntityRepository
ssÖ ñ
<
ssñ ó
TblLandTypeMast
ssó ¶
>
ss¶ ß 
landTypeRepository
ss® ∫
,
ss∫ ª
IEntityRepository
ssº Õ
<
ssÕ Œ
IdmOthdebitsMast
ssŒ ﬁ
>
ssﬁ ﬂ!
othdebitsRepository
ss‡ Û
,
ssÛ Ù
IEntityRepository
ssı Ü
<
ssÜ á
TblPincodeMaster
ssá ó
>
ssó ò
pincodeRepository
ssô ™
)
ss™ ´
{tt 	"
_purposeLoanRepositoryuu "
=uu# $!
purposeLoanRepositoryuu% :
;uu: ;!
_sizeOfFirmRepositoryvv !
=vv" # 
sizeOfFirmRepositoryvv$ 8
;vv8 9
_productRepositoryww 
=ww  
productRepositoryww! 2
;ww2 3
_premisesRepositoryxx 
=xx  !
premisesRepositoryxx" 4
;xx4 5
_districtRepositoryyy 
=yy  !
districtRepositoryyy" 4
;yy4 5
_talukaRepositoryzz 
=zz 
talukaRepositoryzz  0
;zz0 1
_hobliRepository{{ 
={{ 
hobliRepository{{ .
;{{. /
_villageRepository|| 
=||  
villageRepository||! 2
;||2 3#
_officeBranchRepository}} #
=}}$ %"
officeBranchRepository}}& <
;}}< ="
_accountTypeRepository~~ "
=~~# $!
accountTypeRepository~~% :
;~~: ;#
_constituencyRepository #
=$ %"
constituencyRepository& <
;< ="
_promoterDesignation
ÄÄ  
=
ÄÄ! "!
promoterDesignation
ÄÄ# 6
;
ÄÄ6 7
_domicileStatus
ÅÅ 
=
ÅÅ 
domicileStatus
ÅÅ ,
;
ÅÅ, -
_assetCategory
ÇÇ 
=
ÇÇ 
assetCategory
ÇÇ *
;
ÇÇ* +

_assetType
ÉÉ 
=
ÉÉ 
	assetType
ÉÉ "
;
ÉÉ" # 
_promModeofAcquire
ÑÑ 
=
ÑÑ  
promModeofAcquire
ÑÑ! 2
;
ÑÑ2 3
_nameofFacility
ÖÖ 
=
ÖÖ 
nameofFacility
ÖÖ ,
;
ÖÖ, -%
_financialYearAssociate
ÜÜ #
=
ÜÜ$ %$
financialYearAssociate
ÜÜ& <
;
ÜÜ< =!
_financialComponent
áá 
=
áá  ! 
financialComponent
áá" 4
;
áá4 5 
_projCostComponent
àà 
=
àà  
projCostComponent
àà! 2
;
àà2 3%
_meansofFinanceCategory
ââ #
=
ââ$ %$
meansofFinanceCategory
ââ& <
;
ââ< =
_financialType
ää 
=
ää 
financialType
ää *
;
ää* +
_typesofSecurity
ãã 
=
ãã 
typesofSecurity
ãã .
;
ãã. /
_securityDetails
åå 
=
åå 
securityDetails
åå .
;
åå. /
_relationDetails
çç 
=
çç 
relationDetails
çç .
;
çç. /
_addressType
éé 
=
éé 
addressType
éé &
;
éé& '
_indtryType
èè 
=
èè 
industryType
èè &
;
èè& ')
_securityCategoryRepository
êê '
=
êê( )(
securityCategoryRepository
êê* D
;
êêD E%
_securityTypeRepository
ëë #
=
ëë$ %$
securityTypeRepository
ëë& <
;
ëë< =+
_subRegistrarOfficeRepository
íí )
=
íí* +*
subRegistrarOfficeRepository
íí, H
;
ííH I%
_bankIfscCodeRepository
ìì #
=
ìì$ %$
bankIfscCodeRepository
ìì& <
;
ìì< =#
_chargeTypeRepository
îî !
=
îî" #"
chargeTypeRepository
îî$ 8
;
îî8 9
_conditionTypes
ïï 
=
ïï 
conditionTypes
ïï ,
;
ïï, -
_conditionStages
ññ 
=
ññ 
conditionStages
ññ .
;
ññ. /#
_conditionDescription
óó !
=
óó" ##
conditionDescriptions
óó$ 9
;
óó9 :
_mapper
òò 
=
òò 
mapper
òò 
;
òò #
_conditionStageMaster
ôô !
=
ôô" #"
conditionStageMaster
ôô$ 8
;
ôô8 9
_form8and13list
öö 
=
öö 
form8and13list
öö ,
;
öö, -
_promoterNames
õõ 
=
õõ 
promoterNames
õõ *
;
õõ* +
_promoterState
úú 
=
úú 
promoterState
úú *
;
úú* +
_promoterDistrict
ùù 
=
ùù 
promoterDistrict
ùù  0
;
ùù0 1
_promSubClas
ûû 
=
ûû 
promSubClas
ûû &
;
ûû& '
	_promQual
üü 
=
üü 
promQual
üü  
;
üü  !
_acTypeRepository
†† 
=
†† 
acTypeRepository
††  0
;
††0 1

_stateZone
°° 
=
°° 
	stateZone
°° "
;
°°" #
_allocationCode
¢¢ 
=
¢¢ 
allocationCode
¢¢ ,
;
¢¢, -!
_landTypeRepository
££ 
=
££  ! 
landTypeRepository
££" 4
;
££4 5"
_othdebitsRepository
§§  
=
§§! "!
othdebitsRepository
§§# 6
;
§§6 7 
_pincodeRepository
•• 
=
••  
pincodeRepository
••! 2
;
••2 3"
_umoMasterRepository
¶¶  
=
¶¶! "!
umoMasterRepository
¶¶# 6
;
¶¶6 7
}
ßß 	
public
©© 
async
©© 
Task
©© 
<
©© 
IEnumerable
©© %
<
©©% &
DropDownDTO
©©& 1
>
©©1 2
>
©©2 3"
GetOfficeBranchAsync
©©4 H
(
©©H I
CancellationToken
©©I Z
token
©©[ `
)
©©` a
{
™™ 	
var
´´ 
data
´´ 
=
´´ 
await
´´ %
_officeBranchRepository
´´ 4
.
´´4 5#
FindByExpressionAsync
´´5 J
(
´´J K
x
´´K L
=>
´´M O
x
´´P Q
.
´´Q R
IsActive
´´R Z
==
´´[ ]
true
´´^ b
&&
´´c e
x
´´f g
.
´´g h
	IsDeleted
´´h q
==
´´r t
false
´´u z
,
´´z {
token´´| Å
)´´Å Ç
.´´Ç É
ConfigureAwait´´É ë
(´´ë í
false´´í ó
)´´ó ò
;´´ò ô
return
¨¨ 
data
¨¨ 
.
¨¨ 
Select
¨¨ 
(
¨¨ 
x
¨¨  
=>
¨¨! #
new
¨¨$ '
DropDownDTO
¨¨( 3
{
¨¨4 5
Text
¨¨6 :
=
¨¨; <
x
¨¨= >
.
¨¨> ?
OffcNam
¨¨? F
,
¨¨F G
Value
¨¨H M
=
¨¨N O
x
¨¨P Q
.
¨¨Q R
OffcCd
¨¨R X
}
¨¨Y Z
)
¨¨Z [
.
¨¨[ \
ToList
¨¨\ b
(
¨¨b c
)
¨¨c d
;
¨¨d e
}
≠≠ 	
public
ØØ 
async
ØØ 
Task
ØØ 
<
ØØ 
IEnumerable
ØØ %
<
ØØ% &
DropDownDTO
ØØ& 1
>
ØØ1 2
>
ØØ2 3!
GetLoanPurposeAsync
ØØ4 G
(
ØØG H
CancellationToken
ØØH Y
token
ØØZ _
)
ØØ_ `
{
∞∞ 	
var
±± 
data
±± 
=
±± 
await
±± $
_purposeLoanRepository
±± 3
.
±±3 4#
FindByExpressionAsync
±±4 I
(
±±I J
x
±±J K
=>
±±L N
x
±±O P
.
±±P Q
IsActive
±±Q Y
==
±±Z \
true
±±] a
&&
±±b d
x
±±e f
.
±±f g
	IsDeleted
±±g p
==
±±q s
false
±±t y
,
±±y z
token±±{ Ä
)±±Ä Å
.±±Å Ç
ConfigureAwait±±Ç ê
(±±ê ë
false±±ë ñ
)±±ñ ó
;±±ó ò
return
≤≤ 
data
≤≤ 
.
≤≤ 
Select
≤≤ 
(
≤≤ 
x
≤≤  
=>
≤≤! #
new
≤≤$ '
DropDownDTO
≤≤( 3
{
≤≤4 5
Text
≤≤6 :
=
≤≤; <
x
≤≤= >
.
≤≤> ?
PurpDets
≤≤? G
,
≤≤G H
Value
≤≤I N
=
≤≤O P
x
≤≤Q R
.
≤≤R S
PurpCd
≤≤S Y
}
≤≤Z [
)
≤≤[ \
.
≤≤\ ]
ToList
≤≤] c
(
≤≤c d
)
≤≤d e
;
≤≤e f
}
≥≥ 	
public
∑∑ 
async
∑∑ 
Task
∑∑ 
<
∑∑ 
IEnumerable
∑∑ %
<
∑∑% &
DropDownDTO
∑∑& 1
>
∑∑1 2
>
∑∑2 3&
GetNatureOfPremisesAsync
∑∑4 L
(
∑∑L M
CancellationToken
∑∑M ^
token
∑∑_ d
)
∑∑d e
{
∏∏ 	
var
ππ 
data
ππ 
=
ππ 
await
ππ !
_premisesRepository
ππ 0
.
ππ0 1#
FindByExpressionAsync
ππ1 F
(
ππF G
x
ππG H
=>
ππI K
x
ππL M
.
ππM N
IsActive
ππN V
==
ππW Y
true
ππZ ^
&&
ππ_ a
x
ππb c
.
ππc d
	IsDeleted
ππd m
==
ππn p
false
ππq v
,
ππv w
token
ππx }
)
ππ} ~
.
ππ~ 
ConfigureAwaitππ ç
(ππç é
falseππé ì
)ππì î
;ππî ï
return
∫∫ 
data
∫∫ 
.
∫∫ 
Select
∫∫ 
(
∫∫ 
x
∫∫  
=>
∫∫! #
new
∫∫$ '
DropDownDTO
∫∫( 3
{
∫∫4 5
Text
∫∫6 :
=
∫∫; <
x
∫∫= >
.
∫∫> ?
PremDets
∫∫? G
,
∫∫G H
Value
∫∫I N
=
∫∫O P
x
∫∫Q R
.
∫∫R S
PremCd
∫∫S Y
}
∫∫Z [
)
∫∫[ \
.
∫∫\ ]
ToList
∫∫] c
(
∫∫c d
)
∫∫d e
;
∫∫e f
}
ªª 	
public
ΩΩ 
async
ΩΩ 
Task
ΩΩ 
<
ΩΩ 
IEnumerable
ΩΩ %
<
ΩΩ% &
DropDownDTO
ΩΩ& 1
>
ΩΩ1 2
>
ΩΩ2 3 
GetSizeOfFirmAsync
ΩΩ4 F
(
ΩΩF G
CancellationToken
ΩΩG X
token
ΩΩY ^
)
ΩΩ^ _
{
ææ 	
var
øø 
data
øø 
=
øø 
await
øø #
_sizeOfFirmRepository
øø 2
.
øø2 3#
FindByExpressionAsync
øø3 H
(
øøH I
x
øøI J
=>
øøK M
x
øøN O
.
øøO P
IsActive
øøP X
==
øøY [
true
øø\ `
&&
øøa c
x
øød e
.
øøe f
	IsDeleted
øøf o
==
øøp r
false
øøs x
,
øøx y
token
øøz 
)øø Ä
.øøÄ Å
ConfigureAwaitøøÅ è
(øøè ê
falseøøê ï
)øøï ñ
;øøñ ó
return
¿¿ 
data
¿¿ 
.
¿¿ 
Select
¿¿ 
(
¿¿ 
x
¿¿  
=>
¿¿! #
new
¿¿$ '
DropDownDTO
¿¿( 3
{
¿¿4 5
Text
¿¿6 :
=
¿¿; <
x
¿¿= >
.
¿¿> ?
SizeDets
¿¿? G
,
¿¿G H
Value
¿¿I N
=
¿¿O P
x
¿¿Q R
.
¿¿R S
SizeCd
¿¿S Y
}
¿¿Z [
)
¿¿[ \
.
¿¿\ ]
ToList
¿¿] c
(
¿¿c d
)
¿¿d e
;
¿¿e f
}
¡¡ 	
public
√√ 
async
√√ 
Task
√√ 
<
√√ 
IEnumerable
√√ %
<
√√% &
DropDownDTO
√√& 1
>
√√1 2
>
√√2 3
GetDistrictAsync
√√4 D
(
√√D E
CancellationToken
√√E V
token
√√W \
)
√√\ ]
{
ƒƒ 	
var
≈≈ 
data
≈≈ 
=
≈≈ 
await
≈≈ !
_districtRepository
≈≈ 0
.
≈≈0 1#
FindByExpressionAsync
≈≈1 F
(
≈≈F G
x
≈≈G H
=>
≈≈I K
x
≈≈L M
.
≈≈M N
IsActive
≈≈N V
==
≈≈W Y
true
≈≈Z ^
&&
≈≈_ a
x
≈≈b c
.
≈≈c d
	IsDeleted
≈≈d m
==
≈≈n p
false
≈≈q v
,
≈≈v w
token
≈≈x }
)
≈≈} ~
.
≈≈~ 
ConfigureAwait≈≈ ç
(≈≈ç é
false≈≈é ì
)≈≈ì î
;≈≈î ï
return
∆∆ 
data
∆∆ 
.
∆∆ 
Select
∆∆ 
(
∆∆ 
x
∆∆  
=>
∆∆! #
new
∆∆$ '
DropDownDTO
∆∆( 3
{
∆∆4 5
Text
∆∆6 :
=
∆∆; <
x
∆∆= >
.
∆∆> ?
DistNam
∆∆? F
,
∆∆F G
Value
∆∆H M
=
∆∆N O
x
∆∆P Q
.
∆∆Q R
DistCd
∆∆R X
}
∆∆Y Z
)
∆∆Z [
.
∆∆[ \
ToList
∆∆\ b
(
∆∆b c
)
∆∆c d
;
∆∆d e
}
»» 	
public
   
async
   
Task
   
<
   
IEnumerable
   %
<
  % &
DropDownDTO
  & 1
>
  1 2
>
  2 3
GetTalukaAsync
  4 B
(
  B C
int
  C F

DistrictId
  G Q
,
  Q R
CancellationToken
  S d
token
  e j
)
  j k
{
ÀÀ 	
var
ÃÃ 
data
ÃÃ 
=
ÃÃ 
await
ÃÃ 
_talukaRepository
ÃÃ .
.
ÃÃ. /#
FindByExpressionAsync
ÃÃ/ D
(
ÃÃD E
x
ÃÃE F
=>
ÃÃG I
x
ÃÃJ K
.
ÃÃK L
DistCd
ÃÃL R
==
ÃÃS U

DistrictId
ÃÃV `
&&
ÃÃa c
x
ÃÃd e
.
ÃÃe f
IsActive
ÃÃf n
==
ÃÃo q
true
ÃÃr v
&&
ÃÃw y
x
ÃÃz {
.
ÃÃ{ |
	IsDeletedÃÃ| Ö
==ÃÃÜ à
falseÃÃâ é
,ÃÃé è
tokenÃÃê ï
)ÃÃï ñ
.ÃÃñ ó
ConfigureAwaitÃÃó •
(ÃÃ• ¶
falseÃÃ¶ ´
)ÃÃ´ ¨
;ÃÃ¨ ≠
return
ÕÕ 
data
ÕÕ 
.
ÕÕ 
Select
ÕÕ 
(
ÕÕ 
x
ÕÕ  
=>
ÕÕ! #
new
ÕÕ$ '
DropDownDTO
ÕÕ( 3
{
ÕÕ4 5
Text
ÕÕ6 :
=
ÕÕ; <
x
ÕÕ= >
.
ÕÕ> ?
TlqNam
ÕÕ? E
,
ÕÕE F
Value
ÕÕG L
=
ÕÕM N
x
ÕÕO P
.
ÕÕP Q
TlqCd
ÕÕQ V
}
ÕÕW X
)
ÕÕX Y
.
ÕÕY Z
ToList
ÕÕZ `
(
ÕÕ` a
)
ÕÕa b
;
ÕÕb c
}
ŒŒ 	
public
–– 
async
–– 
Task
–– 
<
–– 
IEnumerable
–– %
<
––% &
DropDownDTO
––& 1
>
––1 2
>
––2 3
GetHobliAsync
––4 A
(
––A B
int
––B E
TalukaId
––F N
,
––N O
CancellationToken
––P a
token
––b g
)
––g h
{
—— 	
var
““ 
data
““ 
=
““ 
await
““ 
_hobliRepository
““ -
.
““- .#
FindByExpressionAsync
““. C
(
““C D
x
““D E
=>
““F H
x
““I J
.
““J K
TlqCd
““K P
==
““Q S
TalukaId
““T \
&&
““] _
x
““` a
.
““a b
IsActive
““b j
==
““k m
true
““n r
&&
““s u
x
““v w
.
““w x
	IsDeleted““x Å
==““Ç Ñ
false““Ö ä
,““ä ã
token““å ë
)““ë í
.““í ì
ConfigureAwait““ì °
(““° ¢
false““¢ ß
)““ß ®
;““® ©
return
”” 
data
”” 
.
”” 
Select
”” 
(
”” 
x
””  
=>
””! #
new
””$ '
DropDownDTO
””( 3
{
””4 5
Text
””6 :
=
””; <
x
””= >
.
””> ?
HobNam
””? E
,
””E F
Value
””G L
=
””M N
x
””O P
.
””P Q
HobCd
””Q V
}
””W X
)
””X Y
.
””Y Z
ToList
””Z `
(
””` a
)
””a b
;
””b c
}
‘‘ 	
public
’’ 
async
’’ 
Task
’’ 
<
’’ 
IEnumerable
’’ %
<
’’% &
DropDownDTO
’’& 1
>
’’1 2
>
’’2 3
GetVillageAsync
’’4 C
(
’’C D
int
’’D G
HobliId
’’H O
,
’’O P
CancellationToken
’’Q b
token
’’c h
)
’’h i
{
÷÷ 	
var
◊◊ 
data
◊◊ 
=
◊◊ 
await
◊◊  
_villageRepository
◊◊ /
.
◊◊/ 0#
FindByExpressionAsync
◊◊0 E
(
◊◊E F
x
◊◊F G
=>
◊◊H J
x
◊◊K L
.
◊◊L M
HobCd
◊◊M R
==
◊◊S U
HobliId
◊◊V ]
&&
◊◊^ `
x
◊◊a b
.
◊◊b c
IsActive
◊◊c k
==
◊◊l n
true
◊◊o s
&&
◊◊t v
x
◊◊w x
.
◊◊x y
	IsDeleted◊◊y Ç
==◊◊É Ö
false◊◊Ü ã
,◊◊ã å
token◊◊ç í
)◊◊í ì
.◊◊ì î
ConfigureAwait◊◊î ¢
(◊◊¢ £
false◊◊£ ®
)◊◊® ©
;◊◊© ™
return
ÿÿ 
data
ÿÿ 
.
ÿÿ 
Select
ÿÿ 
(
ÿÿ 
x
ÿÿ  
=>
ÿÿ! #
new
ÿÿ$ '
DropDownDTO
ÿÿ( 3
{
ÿÿ4 5
Text
ÿÿ6 :
=
ÿÿ; <
x
ÿÿ= >
.
ÿÿ> ?
VilNam
ÿÿ? E
,
ÿÿE F
Value
ÿÿG L
=
ÿÿM N
x
ÿÿO P
.
ÿÿP Q
VilCd
ÿÿQ V
}
ÿÿW X
)
ÿÿX Y
.
ÿÿY Z
ToList
ÿÿZ `
(
ÿÿ` a
)
ÿÿa b
;
ÿÿb c
}
ŸŸ 	
public
€€ 
async
€€ 
Task
€€ 
<
€€ 
IEnumerable
€€ %
<
€€% &
DropDownDTO
€€& 1
>
€€1 2
>
€€2 3&
GetRegistrationTypeAsync
€€4 L
(
€€L M
CancellationToken
€€M ^
token
€€_ d
)
€€d e
{
‹‹ 	
var
›› 
data
›› 
=
›› 
await
›› $
_accountTypeRepository
›› 3
.
››3 4#
FindByExpressionAsync
››4 I
(
››I J
x
››J K
=>
››L N
x
››O P
.
››P Q
IsActive
››Q Y
==
››Z \
true
››] a
&&
››b d
x
››e f
.
››f g
	IsDeleted
››g p
==
››q s
false
››t y
,
››y z
token››{ Ä
)››Ä Å
.››Å Ç
ConfigureAwait››Ç ê
(››ê ë
false››ë ñ
)››ñ ó
;››ó ò
return
ﬁﬁ 
data
ﬁﬁ 
.
ﬁﬁ 
Select
ﬁﬁ 
(
ﬁﬁ 
x
ﬁﬁ  
=>
ﬁﬁ! #
new
ﬁﬁ$ '
DropDownDTO
ﬁﬁ( 3
{
ﬁﬁ4 5
Text
ﬁﬁ6 :
=
ﬁﬁ; <
x
ﬁﬁ= >
.
ﬁﬁ> ?

RegrefDets
ﬁﬁ? I
,
ﬁﬁI J
Value
ﬁﬁK P
=
ﬁﬁQ R
x
ﬁﬁS T
.
ﬁﬁT U
RegrefCd
ﬁﬁU ]
}
ﬁﬁ^ _
)
ﬁﬁ_ `
.
ﬁﬁ` a
ToList
ﬁﬁa g
(
ﬁﬁg h
)
ﬁﬁh i
;
ﬁﬁi j
}
ﬂﬂ 	
public
·· 
async
·· 
Task
·· 
<
·· 
IEnumerable
·· %
<
··% &
DropDownDTO
··& 1
>
··1 2
>
··2 3%
GetConstituenttypeAsync
··4 K
(
··K L
CancellationToken
··L ]
token
··^ c
)
··c d
{
‚‚ 	
var
„„ 
data
„„ 
=
„„ 
await
„„ %
_constituencyRepository
„„ 4
.
„„4 5#
FindByExpressionAsync
„„5 J
(
„„J K
x
„„K L
=>
„„M O
x
„„P Q
.
„„Q R
IsActive
„„R Z
==
„„[ ]
true
„„^ b
&&
„„c e
x
„„f g
.
„„g h
	IsDeleted
„„h q
==
„„r t
false
„„u z
,
„„z {
token„„| Å
)„„Å Ç
.„„Ç É
ConfigureAwait„„É ë
(„„ë í
false„„í ó
)„„ó ò
;„„ò ô
return
‰‰ 
data
‰‰ 
.
‰‰ 
Select
‰‰ 
(
‰‰ 
x
‰‰  
=>
‰‰! #
new
‰‰$ '
DropDownDTO
‰‰( 3
{
‰‰4 5
Text
‰‰6 :
=
‰‰; <
x
‰‰= >
.
‰‰> ?
CnstDets
‰‰? G
,
‰‰G H
Value
‰‰I N
=
‰‰O P
Convert
‰‰Q X
.
‰‰X Y
ToInt32
‰‰Y `
(
‰‰` a
x
‰‰a b
.
‰‰b c
CnstCd
‰‰c i
)
‰‰i j
}
‰‰k l
)
‰‰l m
.
‰‰m n
ToList
‰‰n t
(
‰‰t u
)
‰‰u v
;
‰‰v w
}
ÂÂ 	
public
ÊÊ 
async
ÊÊ 
Task
ÊÊ 
<
ÊÊ 
IEnumerable
ÊÊ %
<
ÊÊ% &#
ConstitutionMasterDTO
ÊÊ& ;
>
ÊÊ; <
>
ÊÊ< =$
GetAllConstitutionData
ÊÊ> T
(
ÊÊT U
CancellationToken
ÊÊU f
token
ÊÊg l
)
ÊÊl m
{
ÁÁ 	
var
ËË 
data
ËË 
=
ËË 
await
ËË %
_constituencyRepository
ËË 4
.
ËË4 5#
FindByExpressionAsync
ËË5 J
(
ËËJ K
x
ËËK L
=>
ËËM O
x
ËËP Q
.
ËËQ R
IsActive
ËËR Z
==
ËË[ ]
true
ËË^ b
&&
ËËc e
x
ËËf g
.
ËËg h
	IsDeleted
ËËh q
==
ËËr t
false
ËËu z
,
ËËz {
tokenËË| Å
)ËËÅ Ç
.ËËÇ É
ConfigureAwaitËËÉ ë
(ËËë í
falseËËí ó
)ËËó ò
;ËËò ô
return
ÈÈ 
_mapper
ÈÈ 
.
ÈÈ 
Map
ÈÈ 
<
ÈÈ 
List
ÈÈ #
<
ÈÈ# $#
ConstitutionMasterDTO
ÈÈ$ 9
>
ÈÈ9 :
>
ÈÈ: ;
(
ÈÈ; <
data
ÈÈ< @
)
ÈÈ@ A
;
ÈÈA B
}
ÎÎ 	
public
ÏÏ 
async
ÏÏ 
Task
ÏÏ 
<
ÏÏ 
IEnumerable
ÏÏ %
<
ÏÏ% &
DropDownDTO
ÏÏ& 1
>
ÏÏ1 2
>
ÏÏ2 3)
GetPositionDesignationAsync
ÏÏ4 O
(
ÏÏO P
CancellationToken
ÏÏP a
token
ÏÏb g
)
ÏÏg h
{
ÌÌ 	
var
ÓÓ 
data
ÓÓ 
=
ÓÓ 
await
ÓÓ "
_promoterDesignation
ÓÓ 1
.
ÓÓ1 2#
FindByExpressionAsync
ÓÓ2 G
(
ÓÓG H
x
ÓÓH I
=>
ÓÓJ L
x
ÓÓM N
.
ÓÓN O
IsActive
ÓÓO W
==
ÓÓX Z
true
ÓÓ[ _
&&
ÓÓ` b
x
ÓÓc d
.
ÓÓd e
	IsDeleted
ÓÓe n
==
ÓÓo q
false
ÓÓr w
,
ÓÓw x
token
ÓÓy ~
)
ÓÓ~ 
.ÓÓ Ä
ConfigureAwaitÓÓÄ é
(ÓÓé è
falseÓÓè î
)ÓÓî ï
;ÓÓï ñ
return
ÔÔ 
data
ÔÔ 
.
ÔÔ 
Select
ÔÔ 
(
ÔÔ 
x
ÔÔ  
=>
ÔÔ! #
new
ÔÔ$ '
DropDownDTO
ÔÔ( 3
{
ÔÔ4 5
Text
ÔÔ6 :
=
ÔÔ; <
x
ÔÔ= >
.
ÔÔ> ?

PdesigDets
ÔÔ? I
,
ÔÔI J
Value
ÔÔK P
=
ÔÔQ R
Convert
ÔÔS Z
.
ÔÔZ [
ToInt32
ÔÔ[ b
(
ÔÔb c
x
ÔÔc d
.
ÔÔd e
PdesigCd
ÔÔe m
)
ÔÔm n
}
ÔÔo p
)
ÔÔp q
.
ÔÔq r
ToList
ÔÔr x
(
ÔÔx y
)
ÔÔy z
;
ÔÔz {
}
 	
public
ÒÒ 
async
ÒÒ 
Task
ÒÒ 
<
ÒÒ 
IEnumerable
ÒÒ %
<
ÒÒ% &
DropDownDTO
ÒÒ& 1
>
ÒÒ1 2
>
ÒÒ2 3$
GetDomicileStatusAsync
ÒÒ4 J
(
ÒÒJ K
CancellationToken
ÒÒK \
token
ÒÒ] b
)
ÒÒb c
{
ÚÚ 	
var
ÛÛ 
data
ÛÛ 
=
ÛÛ 
await
ÛÛ 
_domicileStatus
ÛÛ ,
.
ÛÛ, -#
FindByExpressionAsync
ÛÛ- B
(
ÛÛB C
x
ÛÛC D
=>
ÛÛE G
x
ÛÛH I
.
ÛÛI J
IsActive
ÛÛJ R
==
ÛÛS U
true
ÛÛV Z
&&
ÛÛ[ ]
x
ÛÛ^ _
.
ÛÛ_ `
	IsDeleted
ÛÛ` i
==
ÛÛj l
false
ÛÛm r
,
ÛÛr s
token
ÛÛt y
)
ÛÛy z
.
ÛÛz {
ConfigureAwaitÛÛ{ â
(ÛÛâ ä
falseÛÛä è
)ÛÛè ê
;ÛÛê ë
return
ÙÙ 
data
ÙÙ 
.
ÙÙ 
Select
ÙÙ 
(
ÙÙ 
x
ÙÙ  
=>
ÙÙ! #
new
ÙÙ$ '
DropDownDTO
ÙÙ( 3
{
ÙÙ4 5
Text
ÙÙ6 :
=
ÙÙ; <
x
ÙÙ= >
.
ÙÙ> ?
DomDets
ÙÙ? F
,
ÙÙF G
Value
ÙÙH M
=
ÙÙN O
Convert
ÙÙP W
.
ÙÙW X
ToInt32
ÙÙX _
(
ÙÙ_ `
x
ÙÙ` a
.
ÙÙa b
DomCd
ÙÙb g
)
ÙÙg h
}
ÙÙi j
)
ÙÙj k
.
ÙÙk l
ToList
ÙÙl r
(
ÙÙr s
)
ÙÙs t
;
ÙÙt u
}
ıı 	
public
˚˚ 
async
˚˚ 
Task
˚˚ 
<
˚˚ 
IEnumerable
˚˚ %
<
˚˚% &
DropDownDTO
˚˚& 1
>
˚˚1 2
>
˚˚2 3#
GetModeofAcquireAsync
˚˚4 I
(
˚˚I J
CancellationToken
˚˚J [
token
˚˚\ a
)
˚˚a b
{
¸¸ 	
var
˝˝ 
data
˝˝ 
=
˝˝ 
await
˝˝  
_promModeofAcquire
˝˝ /
.
˝˝/ 0#
FindByExpressionAsync
˝˝0 E
(
˝˝E F
x
˝˝F G
=>
˝˝H J
x
˝˝K L
.
˝˝L M
IsActive
˝˝M U
==
˝˝V X
true
˝˝Y ]
&&
˝˝^ `
x
˝˝a b
.
˝˝b c
	IsDeleted
˝˝c l
==
˝˝m o
false
˝˝p u
,
˝˝u v
token
˝˝w |
)
˝˝| }
.
˝˝} ~
ConfigureAwait˝˝~ å
(˝˝å ç
false˝˝ç í
)˝˝í ì
;˝˝ì î
return
˛˛ 
data
˛˛ 
.
˛˛ 
Select
˛˛ 
(
˛˛ 
x
˛˛  
=>
˛˛! #
new
˛˛$ '
DropDownDTO
˛˛( 3
{
˛˛4 5
Text
˛˛6 :
=
˛˛; <
x
˛˛= >
.
˛˛> ?
BldDesc
˛˛? F
,
˛˛F G
Value
˛˛H M
=
˛˛N O
Convert
˛˛P W
.
˛˛W X
ToInt32
˛˛X _
(
˛˛_ `
x
˛˛` a
.
˛˛a b
BldCd
˛˛b g
)
˛˛g h
}
˛˛i j
)
˛˛j k
.
˛˛k l
ToList
˛˛l r
(
˛˛r s
)
˛˛s t
;
˛˛t u
}
ˇˇ 	
public
ÄÄ 
async
ÄÄ 
Task
ÄÄ 
<
ÄÄ 
IEnumerable
ÄÄ %
<
ÄÄ% &
DropDownDTO
ÄÄ& 1
>
ÄÄ1 2
>
ÄÄ2 3$
GetNameOFFacilityAsync
ÄÄ4 J
(
ÄÄJ K
CancellationToken
ÄÄK \
token
ÄÄ] b
)
ÄÄb c
{
ÅÅ 	
var
ÇÇ 
data
ÇÇ 
=
ÇÇ 
await
ÇÇ 
_nameofFacility
ÇÇ ,
.
ÇÇ, -#
FindByExpressionAsync
ÇÇ- B
(
ÇÇB C
x
ÇÇC D
=>
ÇÇE G
x
ÇÇH I
.
ÇÇI J
IsActive
ÇÇJ R
==
ÇÇS U
true
ÇÇV Z
&&
ÇÇ[ ]
x
ÇÇ^ _
.
ÇÇ_ `
	IsDeleted
ÇÇ` i
==
ÇÇj l
false
ÇÇm r
,
ÇÇr s
token
ÇÇt y
)
ÇÇy z
.
ÇÇz {
ConfigureAwaitÇÇ{ â
(ÇÇâ ä
falseÇÇä è
)ÇÇè ê
;ÇÇê ë
return
ÉÉ 
data
ÉÉ 
.
ÉÉ 
Select
ÉÉ 
(
ÉÉ 
x
ÉÉ  
=>
ÉÉ! #
new
ÉÉ$ '
DropDownDTO
ÉÉ( 3
{
ÉÉ4 5
Text
ÉÉ6 :
=
ÉÉ; <
x
ÉÉ= >
.
ÉÉ> ?
BfacilityDesc
ÉÉ? L
,
ÉÉL M
Value
ÉÉN S
=
ÉÉT U
Convert
ÉÉV ]
.
ÉÉ] ^
ToInt32
ÉÉ^ e
(
ÉÉe f
x
ÉÉf g
.
ÉÉg h
BfacilityCode
ÉÉh u
)
ÉÉu v
}
ÉÉw x
)
ÉÉx y
.
ÉÉy z
ToListÉÉz Ä
(ÉÉÄ Å
)ÉÉÅ Ç
;ÉÉÇ É
}
ÑÑ 	
public
ÜÜ 
async
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
IEnumerable
ÜÜ %
<
ÜÜ% &
DropDownDTO
ÜÜ& 1
>
ÜÜ1 2
>
ÜÜ2 3#
GetFinancialYearAsync
ÜÜ4 I
(
ÜÜI J
CancellationToken
ÜÜJ [
token
ÜÜ\ a
)
ÜÜa b
{
áá 	
var
àà 
data
àà 
=
àà 
await
àà %
_financialYearAssociate
àà 4
.
àà4 5#
FindByExpressionAsync
àà5 J
(
ààJ K
x
ààK L
=>
ààM O
x
ààP Q
.
ààQ R
IsActive
ààR Z
==
àà[ ]
true
àà^ b
&&
ààc e
x
ààf g
.
ààg h
	IsDeleted
ààh q
==
ààr t
false
ààu z
,
ààz {
tokenàà| Å
)ààÅ Ç
.ààÇ É
ConfigureAwaitààÉ ë
(ààë í
falseààí ó
)ààó ò
;ààò ô
return
ââ 
data
ââ 
.
ââ 
Select
ââ 
(
ââ 
x
ââ  
=>
ââ! #
new
ââ$ '
DropDownDTO
ââ( 3
{
ââ4 5
Text
ââ6 :
=
ââ; <
x
ââ= >
.
ââ> ?
FinyearDesc
ââ? J
,
ââJ K
Value
ââL Q
=
ââR S
Convert
ââT [
.
ââ[ \
ToInt32
ââ\ c
(
ââc d
x
ââd e
.
ââe f
FinyearCode
ââf q
)
ââq r
}
ââs t
)
âât u
.
ââu v
ToList
ââv |
(
ââ| }
)
ââ} ~
;
ââ~ 
}
ää 	
public
åå 
async
åå 
Task
åå 
<
åå 
IEnumerable
åå %
<
åå% &
DropDownDTO
åå& 1
>
åå1 2
>
åå2 3(
GetFinancialComponentAsync
åå4 N
(
ååN O
CancellationToken
ååO `
token
ååa f
)
ååf g
{
çç 	
var
éé 
data
éé 
=
éé 
await
éé !
_financialComponent
éé 0
.
éé0 1#
FindByExpressionAsync
éé1 F
(
ééF G
x
ééG H
=>
ééI K
x
ééL M
.
ééM N
IsActive
ééN V
==
ééW Y
true
ééZ ^
&&
éé_ a
x
ééb c
.
ééc d
	IsDeleted
ééd m
==
één p
false
ééq v
,
éév w
token
ééx }
)
éé} ~
.
éé~ 
ConfigureAwaitéé ç
(ééç é
falseééé ì
)ééì î
;ééî ï
return
èè 
data
èè 
.
èè 
Select
èè 
(
èè 
x
èè  
=>
èè! #
new
èè$ '
DropDownDTO
èè( 3
{
èè4 5
Text
èè6 :
=
èè; <
x
èè= >
.
èè> ?
FincompDets
èè? J
,
èèJ K
Value
èèL Q
=
èèR S
Convert
èèT [
.
èè[ \
ToInt32
èè\ c
(
èèc d
x
èèd e
.
èèe f
	FincompCd
èèf o
)
èèo p
}
èèq r
)
èèr s
.
èès t
ToList
èèt z
(
èèz {
)
èè{ |
;
èè| }
}
êê 	
public
íí 
async
íí 
Task
íí 
<
íí 
IEnumerable
íí %
<
íí% &
DropDownDTO
íí& 1
>
íí1 2
>
íí2 3)
GetPojectCostComponentAsync
íí4 O
(
ííO P
CancellationToken
ííP a
token
ííb g
)
ííg h
{
ìì 	
var
îî 
data
îî 
=
îî 
await
îî  
_projCostComponent
îî /
.
îî/ 0#
FindByExpressionAsync
îî0 E
(
îîE F
x
îîF G
=>
îîH J
x
îîK L
.
îîL M
IsActive
îîM U
==
îîV X
true
îîY ]
&&
îî^ `
x
îîa b
.
îîb c
	IsDeleted
îîc l
==
îîm o
false
îîp u
,
îîu v
token
îîw |
)
îî| }
.
îî} ~
ConfigureAwaitîî~ å
(îîå ç
falseîîç í
)îîí ì
;îîì î
return
ïï 
data
ïï 
.
ïï 
Select
ïï 
(
ïï 
x
ïï  
=>
ïï! #
new
ïï$ '
DropDownDTO
ïï( 3
{
ïï4 5
Text
ïï6 :
=
ïï; <
x
ïï= >
.
ïï> ?

PjcostDets
ïï? I
,
ïïI J
Value
ïïK P
=
ïïQ R
Convert
ïïS Z
.
ïïZ [
ToInt32
ïï[ b
(
ïïb c
x
ïïc d
.
ïïd e
PjcostCd
ïïe m
)
ïïm n
}
ïïo p
)
ïïp q
.
ïïq r
ToList
ïïr x
(
ïïx y
)
ïïy z
;
ïïz {
}
ññ 	
public
óó 
async
óó 
Task
óó 
<
óó 
IEnumerable
óó %
<
óó% &
DropDownDTO
óó& 1
>
óó1 2
>
óó2 3,
GetMeansofFinanceCategoryAsync
óó4 R
(
óóR S
CancellationToken
óóS d
token
óóe j
)
óój k
{
òò 	
var
ôô 
data
ôô 
=
ôô 
await
ôô %
_meansofFinanceCategory
ôô 4
.
ôô4 5#
FindByExpressionAsync
ôô5 J
(
ôôJ K
x
ôôK L
=>
ôôM O
x
ôôP Q
.
ôôQ R
IsActive
ôôR Z
==
ôô[ ]
true
ôô^ b
&&
ôôc e
x
ôôf g
.
ôôg h
	IsDeleted
ôôh q
==
ôôr t
false
ôôu z
,
ôôz {
tokenôô| Å
)ôôÅ Ç
.ôôÇ É
ConfigureAwaitôôÉ ë
(ôôë í
falseôôí ó
)ôôó ò
;ôôò ô
return
öö 
data
öö 
.
öö 
Select
öö 
(
öö 
x
öö  
=>
öö! #
new
öö$ '
DropDownDTO
öö( 3
{
öö4 5
Text
öö6 :
=
öö; <
x
öö= >
.
öö> ?
PjmfDets
öö? G
,
ööG H
Value
ööI N
=
ööO P
Convert
ööQ X
.
ööX Y
ToInt32
ööY `
(
öö` a
x
ööa b
.
ööb c
MfcatCd
ööc j
)
ööj k
}
ööl m
)
ööm n
.
öön o
ToList
ööo u
(
ööu v
)
ööv w
;
ööw x
}
õõ 	
public
ùù 
async
ùù 
Task
ùù 
<
ùù 
IEnumerable
ùù %
<
ùù% &
DropDownDTO
ùù& 1
>
ùù1 2
>
ùù2 3!
GetFinanceTypeAsync
ùù4 G
(
ùùG H
int
ùùH K

mfCategory
ùùL V
,
ùùV W
CancellationToken
ùùX i
token
ùùj o
)
ùùo p
{
ûû 	
var
üü 
data
üü 
=
üü 
await
üü 
_financialType
üü +
.
üü+ ,#
FindByExpressionAsync
üü, A
(
üüA B
x
üüB C
=>
üüD F
x
üüG H
.
üüH I
MfcatCd
üüI P
==
üüQ S

mfCategory
üüT ^
&&
üü_ a
x
üüb c
.
üüc d
IsActive
üüd l
==
üüm o
true
üüp t
&&
üüu w
x
üüx y
.
üüy z
	IsDeletedüüz É
==üüÑ Ü
falseüüá å
,üüå ç
tokenüüé ì
)üüì î
.üüî ï
ConfigureAwaitüüï £
(üü£ §
falseüü§ ©
)üü© ™
;üü™ ´
return
†† 
data
†† 
.
†† 
Select
†† 
(
†† 
x
††  
=>
††! #
new
††$ '
DropDownDTO
††( 3
{
††4 5
Text
††6 :
=
††; <
x
††= >
.
††> ?
PjmfDets
††? G
,
††G H
Value
††I N
=
††O P
Convert
††Q X
.
††X Y
ToInt32
††Y `
(
††` a
x
††a b
.
††b c
PjmfCd
††c i
)
††i j
}
††k l
)
††l m
.
††m n
ToList
††n t
(
††t u
)
††u v
;
††v w
}
°° 	
public
££ 
async
££ 
Task
££ 
<
££ 
IEnumerable
££ %
<
££% &
DropDownDTO
££& 1
>
££1 2
>
££2 3"
GetSecurityTypeAsync
££4 H
(
££H I
CancellationToken
££I Z
token
££[ `
)
££` a
{
§§ 	
var
•• 
data
•• 
=
•• 
await
•• 
_typesofSecurity
•• -
.
••- .#
FindByExpressionAsync
••. C
(
••C D
x
••D E
=>
••F H
x
••I J
.
••J K
IsActive
••K S
==
••T V
true
••W [
&&
••\ ^
x
••_ `
.
••` a
	IsDeleted
••a j
==
••k m
false
••n s
,
••s t
token
••u z
)
••z {
.
••{ |
ConfigureAwait••| ä
(••ä ã
false••ã ê
)••ê ë
;••ë í
return
¶¶ 
data
¶¶ 
.
¶¶ 
Select
¶¶ 
(
¶¶ 
x
¶¶  
=>
¶¶! #
new
¶¶$ '
DropDownDTO
¶¶( 3
{
¶¶4 5
Text
¶¶6 :
=
¶¶; <
x
¶¶= >
.
¶¶> ?
SecDets
¶¶? F
,
¶¶F G
Value
¶¶H M
=
¶¶N O
Convert
¶¶P W
.
¶¶W X
ToInt32
¶¶X _
(
¶¶_ `
x
¶¶` a
.
¶¶a b
SecCode
¶¶b i
)
¶¶i j
}
¶¶k l
)
¶¶l m
.
¶¶m n
ToList
¶¶n t
(
¶¶t u
)
¶¶u v
;
¶¶v w
}
ßß 	
public
©© 
async
©© 
Task
©© 
<
©© 
IEnumerable
©© %
<
©©% &
DropDownDTO
©©& 1
>
©©1 2
>
©©2 3%
GetSecurityDetailsAsync
©©4 K
(
©©K L
CancellationToken
©©L ]
token
©©^ c
)
©©c d
{
™™ 	
var
´´ 
data
´´ 
=
´´ 
await
´´ 
_securityDetails
´´ -
.
´´- .#
FindByExpressionAsync
´´. C
(
´´C D
x
´´D E
=>
´´F H
x
´´I J
.
´´J K
IsActive
´´K S
==
´´T V
true
´´W [
&&
´´\ ^
x
´´_ `
.
´´` a
	IsDeleted
´´a j
==
´´k m
false
´´n s
,
´´s t
token
´´u z
)
´´z {
.
´´{ |
ConfigureAwait´´| ä
(´´ä ã
false´´ã ê
)´´ê ë
;´´ë í
return
¨¨ 
data
¨¨ 
.
¨¨ 
Select
¨¨ 
(
¨¨ 
x
¨¨  
=>
¨¨! #
new
¨¨$ '
DropDownDTO
¨¨( 3
{
¨¨4 5
Text
¨¨6 :
=
¨¨; <
x
¨¨= >
.
¨¨> ?
SecDets
¨¨? F
,
¨¨F G
Value
¨¨H M
=
¨¨N O
Convert
¨¨P W
.
¨¨W X
ToInt32
¨¨X _
(
¨¨_ `
x
¨¨` a
.
¨¨a b
SecCd
¨¨b g
)
¨¨g h
}
¨¨i j
)
¨¨j k
.
¨¨k l
ToList
¨¨l r
(
¨¨r s
)
¨¨s t
;
¨¨t u
}
≠≠ 	
public
ØØ 
async
ØØ 
Task
ØØ 
<
ØØ 
IEnumerable
ØØ %
<
ØØ% &
DropDownDTO
ØØ& 1
>
ØØ1 2
>
ØØ2 3
GetRelationAsync
ØØ4 D
(
ØØD E
CancellationToken
ØØE V
token
ØØW \
)
ØØ\ ]
{
∞∞ 	
var
±± 
data
±± 
=
±± 
await
±± 
_relationDetails
±± -
.
±±- .#
FindByExpressionAsync
±±. C
(
±±C D
x
±±D E
=>
±±F H
x
±±I J
.
±±J K
IsActive
±±K S
==
±±T V
true
±±W [
&&
±±\ ^
x
±±_ `
.
±±` a
	IsDeleted
±±a j
==
±±k m
false
±±n s
,
±±s t
token
±±u z
)
±±z {
.
±±{ |
ConfigureAwait±±| ä
(±±ä ã
false±±ã ê
)±±ê ë
;±±ë í
return
≤≤ 
data
≤≤ 
.
≤≤ 
Select
≤≤ 
(
≤≤ 
x
≤≤  
=>
≤≤! #
new
≤≤$ '
DropDownDTO
≤≤( 3
{
≤≤4 5
Text
≤≤6 :
=
≤≤; <
x
≤≤= >
.
≤≤> ?
PromrelDets
≤≤? J
,
≤≤J K
Value
≤≤L Q
=
≤≤R S
Convert
≤≤T [
.
≤≤[ \
ToInt32
≤≤\ c
(
≤≤c d
x
≤≤d e
.
≤≤e f
	PromrelCd
≤≤f o
)
≤≤o p
}
≤≤q r
)
≤≤r s
.
≤≤s t
ToList
≤≤t z
(
≤≤z {
)
≤≤{ |
;
≤≤| }
}
≥≥ 	
public
µµ 
async
µµ 
Task
µµ 
<
µµ '
VillageTalukaHobliDistDTO
µµ 3
>
µµ3 4,
GetVillageTalukaHobliDistAsync
µµ5 S
(
µµS T
int
µµT W
VillageCode
µµX c
,
µµc d
CancellationToken
µµe v
token
µµw |
)
µµ| }
{
∂∂ 	
var
∑∑ 
Village
∑∑ 
=
∑∑ 
await
∑∑  
_villageRepository
∑∑  2
.
∑∑2 3-
FirstOrDefaultByExpressionAsync
∑∑3 R
(
∑∑R S
a
∑∑S T
=>
∑∑U W
a
∑∑X Y
.
∑∑Y Z
VilCd
∑∑Z _
==
∑∑` b
VillageCode
∑∑c n
&&
∑∑o q
a
∑∑r s
.
∑∑s t
IsActive
∑∑t |
==
∑∑} 
true∑∑Ä Ñ
&&∑∑Ö á
a∑∑à â
.∑∑â ä
	IsDeleted∑∑ä ì
==∑∑î ñ
false∑∑ó ú
,∑∑ú ù
token∑∑û £
)∑∑£ §
.∑∑§ •
ConfigureAwait∑∑• ≥
(∑∑≥ ¥
false∑∑¥ π
)∑∑π ∫
;∑∑∫ ª
var
∏∏ 
Hobli
∏∏ 
=
∏∏ 
await
∏∏ 
_hobliRepository
∏∏ .
.
∏∏. /-
FirstOrDefaultByExpressionAsync
∏∏/ N
(
∏∏N O
a
∏∏O P
=>
∏∏Q S
a
∏∏T U
.
∏∏U V
HobCd
∏∏V [
==
∏∏\ ^
Village
∏∏_ f
.
∏∏f g
HobCd
∏∏g l
&&
∏∏m o
a
∏∏p q
.
∏∏q r
IsActive
∏∏r z
==
∏∏{ }
true∏∏~ Ç
&&∏∏É Ö
a∏∏Ü á
.∏∏á à
	IsDeleted∏∏à ë
==∏∏í î
false∏∏ï ö
,∏∏ö õ
token∏∏ú °
)∏∏° ¢
.∏∏¢ £
ConfigureAwait∏∏£ ±
(∏∏± ≤
false∏∏≤ ∑
)∏∏∑ ∏
;∏∏∏ π
var
ππ 
Taluka
ππ 
=
ππ 
await
ππ 
_talukaRepository
ππ 0
.
ππ0 1-
FirstOrDefaultByExpressionAsync
ππ1 P
(
ππP Q
a
ππQ R
=>
ππS U
a
ππV W
.
ππW X
TlqCd
ππX ]
==
ππ^ `
Hobli
ππa f
.
ππf g
TlqCd
ππg l
&&
ππm o
a
ππp q
.
ππq r
IsActive
ππr z
==
ππ{ }
trueππ~ Ç
&&ππÉ Ö
aππÜ á
.ππá à
	IsDeletedππà ë
==ππí î
falseππï ö
,ππö õ
tokenππú °
)ππ° ¢
.ππ¢ £
ConfigureAwaitππ£ ±
(ππ± ≤
falseππ≤ ∑
)ππ∑ ∏
;ππ∏ π
var
∫∫ 
District
∫∫ 
=
∫∫ 
await
∫∫  !
_districtRepository
∫∫! 4
.
∫∫4 5-
FirstOrDefaultByExpressionAsync
∫∫5 T
(
∫∫T U
a
∫∫U V
=>
∫∫W Y
a
∫∫Z [
.
∫∫[ \
DistCd
∫∫\ b
==
∫∫c e
Taluka
∫∫f l
.
∫∫l m
DistCd
∫∫m s
&&
∫∫t v
a
∫∫w x
.
∫∫x y
IsActive∫∫y Å
==∫∫Ç Ñ
true∫∫Ö â
&&∫∫ä å
a∫∫ç é
.∫∫é è
	IsDeleted∫∫è ò
==∫∫ô õ
false∫∫ú °
,∫∫° ¢
token∫∫£ ®
)∫∫® ©
.∫∫© ™
ConfigureAwait∫∫™ ∏
(∫∫∏ π
false∫∫π æ
)∫∫æ ø
;∫∫ø ¿
var
ºº $
VillageTalukaHobliDist
ºº &
=
ºº' (
new
ºº) ,'
VillageTalukaHobliDistDTO
ºº- F
{
ΩΩ 
VillageCode
ææ 
=
ææ 
Village
ææ %
.
ææ% &
VilCd
ææ& +
,
ææ+ ,
VillageName
øø 
=
øø 
Village
øø %
.
øø% &
VilNam
øø& ,
,
øø, -
	HobliCode
¿¿ 
=
¿¿ 
Hobli
¿¿ !
.
¿¿! "
HobCd
¿¿" '
,
¿¿' (
	HobliName
¡¡ 
=
¡¡ 
Hobli
¡¡ !
.
¡¡! "
HobNam
¡¡" (
,
¡¡( )

TalukaCode
¬¬ 
=
¬¬ 
Taluka
¬¬ #
.
¬¬# $
TlqCd
¬¬$ )
,
¬¬) *

TalukaName
√√ 
=
√√ 
Taluka
√√ #
.
√√# $
TlqNam
√√$ *
,
√√* +
DistrictCode
ƒƒ 
=
ƒƒ 
District
ƒƒ '
.
ƒƒ' (
DistCd
ƒƒ( .
,
ƒƒ. /
DistrictName
≈≈ 
=
≈≈ 
District
≈≈ '
.
≈≈' (
DistNam
≈≈( /
}
∆∆ 
;
∆∆ 
return
«« $
VillageTalukaHobliDist
«« )
;
««) *
}
»» 	
public
   
async
   
Task
   
<
   
IEnumerable
   %
<
  % &
DropDownDTO
  & 1
>
  1 2
>
  2 3!
GetAddressTypeAsync
  4 G
(
  G H
CancellationToken
  H Y
token
  Z _
)
  _ `
{
ÀÀ 	
var
ÃÃ 
data
ÃÃ 
=
ÃÃ 
await
ÃÃ 
_addressType
ÃÃ )
.
ÃÃ) *#
FindByExpressionAsync
ÃÃ* ?
(
ÃÃ? @
x
ÃÃ@ A
=>
ÃÃB D
x
ÃÃE F
.
ÃÃF G
IsActive
ÃÃG O
==
ÃÃP R
true
ÃÃS W
&&
ÃÃX Z
x
ÃÃ[ \
.
ÃÃ\ ]
	IsDeleted
ÃÃ] f
==
ÃÃg i
false
ÃÃj o
,
ÃÃo p
token
ÃÃq v
)
ÃÃv w
.
ÃÃw x
ConfigureAwaitÃÃx Ü
(ÃÃÜ á
falseÃÃá å
)ÃÃå ç
;ÃÃç é
return
ÕÕ 
data
ÕÕ 
.
ÕÕ 
Select
ÕÕ 
(
ÕÕ 
x
ÕÕ  
=>
ÕÕ! #
new
ÕÕ$ '
DropDownDTO
ÕÕ( 3
{
ÕÕ4 5
Text
ÕÕ6 :
=
ÕÕ; <
x
ÕÕ= >
.
ÕÕ> ?
AddtypeDets
ÕÕ? J
,
ÕÕJ K
Value
ÕÕL Q
=
ÕÕR S
Convert
ÕÕT [
.
ÕÕ[ \
ToInt32
ÕÕ\ c
(
ÕÕc d
x
ÕÕd e
.
ÕÕe f
	AddtypeCd
ÕÕf o
)
ÕÕo p
}
ÕÕq r
)
ÕÕr s
.
ÕÕs t
ToList
ÕÕt z
(
ÕÕz {
)
ÕÕ{ |
;
ÕÕ| }
}
ŒŒ 	
public
““ 
async
““ 
Task
““ 
<
““ 
IEnumerable
““ %
<
““% &
DropDownDTO
““& 1
>
““1 2
>
““2 3!
GetAllPromotorClass
““4 G
(
““G H
CancellationToken
““H Y
token
““Z _
)
““_ `
{
”” 	
var
‘‘ 
list
‘‘ 
=
‘‘ 
new
‘‘ 
List
‘‘ 
<
‘‘  
DropDownDTO
‘‘  +
>
‘‘+ ,
{
’’ 
new
÷÷ 
DropDownDTO
÷÷  
{
◊◊ 
Text
ÿÿ 
=
ÿÿ 
$str
ÿÿ ,
,
ÿÿ, -
Value
ŸŸ 
=
ŸŸ 
$num
ŸŸ 
}
⁄⁄ 
,
⁄⁄ 
new
€€ 
DropDownDTO
€€ %
{
‹‹ 
Text
›› 
=
›› 
$str
›› ,
,
››, -
Value
ﬁﬁ 
=
ﬁﬁ 
$num
ﬁﬁ 
}
ﬂﬂ 
,
ﬂﬂ 
new
‡‡ 
DropDownDTO
‡‡ %
{
·· 
Text
‚‚ 
=
‚‚ 
$str
‚‚ /
,
‚‚/ 0
Value
„„ 
=
„„ 
$num
„„ 
}
‰‰ 
,
‰‰ 
new
ÂÂ 
DropDownDTO
ÂÂ '
{
ÊÊ 
Text
ÁÁ 
=
ÁÁ 
$str
ÁÁ $
,
ÁÁ$ %
Value
ËË 
=
ËË 
$num
ËË 
}
ÈÈ 
,
ÍÍ 
new
ÎÎ 
DropDownDTO
ÎÎ '
{
ÏÏ 
Text
ÌÌ 
=
ÌÌ 
$str
ÌÌ /
,
ÌÌ/ 0
Value
ÓÓ 
=
ÓÓ 
$num
ÓÓ 
}
ÔÔ 
,
 
new
ÒÒ 
DropDownDTO
ÒÒ '
{
ÚÚ 
Text
ÛÛ 
=
ÛÛ 
$str
ÛÛ "
,
ÛÛ" #
Value
ÙÙ 
=
ÙÙ 
$num
ÙÙ 
}
ıı 
,
ıı 
new
ˆˆ 
DropDownDTO
ˆˆ '
{
˜˜ 
Text
¯¯ 
=
¯¯ 
$str
¯¯ $
,
¯¯$ %
Value
˘˘ 
=
˘˘ 
$num
˘˘ 
}
˙˙ 
,
˙˙ 
new
˚˚ 
DropDownDTO
˚˚ '
{
¸¸ 
Text
˝˝ 
=
˝˝ 
$str
˝˝ '
,
˝˝' (
Value
˛˛ 
=
˛˛ 
$num
˛˛ 
}
ÄÄ 
,
ÄÄ 
new
ÅÅ 
DropDownDTO
ÅÅ (
{
ÇÇ 
Text
ÉÉ 
=
ÉÉ 
$str
ÉÉ '
,
ÉÉ' (
Value
ÑÑ 
=
ÑÑ 
$num
ÑÑ 
}
ÜÜ 
,
ÜÜ 
new
áá 
DropDownDTO
áá )
{
àà 
Text
ââ 
=
ââ 
$str
ââ )
,
ââ) *
Value
ää 
=
ää 
$num
ää 
}
åå 
,
åå 
new
çç 
DropDownDTO
çç )
{
éé 
Text
èè 
=
èè 
$str
èè !
,
èè! "
Value
êê 
=
êê 
$num
êê 
}
íí 
}
ìì 
;
ìì 
return
îî 
list
îî 
.
îî 
OrderBy
îî 
(
îî  
x
îî  !
=>
îî! #
x
îî# $
.
îî$ %
Text
îî% )
)
îî) *
;
îî* +
}
ïï 	
public
óó 
async
óó 
Task
óó 
<
óó 
IEnumerable
óó %
<
óó% &
DropDownDTO
óó& 1
>
óó1 2
>
óó2 3)
GetAllSecurityCategoryAsync
óó4 O
(
óóO P
CancellationToken
óóP a
token
óób g
)
óóg h
{
òò 	
var
ôô 
data
ôô 
=
ôô 
await
ôô )
_securityCategoryRepository
ôô 8
.
ôô8 9#
FindByExpressionAsync
ôô9 N
(
ôôN O
x
ôôO P
=>
ôôQ S
x
ôôT U
.
ôôU V
IsActive
ôôV ^
==
ôô_ a
true
ôôb f
,
ôôf g
token
ôôh m
)
ôôm n
.
ôôn o
ConfigureAwait
ôôo }
(
ôô} ~
falseôô~ É
)ôôÉ Ñ
;ôôÑ Ö
return
öö 
data
öö 
.
öö 
Select
öö 
(
öö 
x
öö  
=>
öö! #
new
öö$ '
DropDownDTO
öö( 3
{
öö4 5
Text
öö6 :
=
öö; <
x
öö= >
.
öö> ?
SecDets
öö? F
,
ööF G
Value
ööH M
=
ööN O
x
ööP Q
.
ööQ R
SecCd
ööR W
}
ööX Y
)
ööY Z
.
ööZ [
ToList
öö[ a
(
ööa b
)
ööb c
;
ööc d
}
õõ 	
public
ùù 
async
ùù 
Task
ùù 
<
ùù 
IEnumerable
ùù %
<
ùù% &
DropDownDTO
ùù& 1
>
ùù1 2
>
ùù2 3&
GetAllSecurityTypesAsync
ùù4 L
(
ùùL M
CancellationToken
ùùM ^
token
ùù_ d
)
ùùd e
{
ûû 	
var
üü 
data
üü 
=
üü 
await
üü %
_securityTypeRepository
üü 4
.
üü4 5#
FindByExpressionAsync
üü5 J
(
üüJ K
x
üüK L
=>
üüM O
x
üüP Q
.
üüQ R
IsActive
üüR Z
==
üü[ ]
true
üü^ b
,
üüb c
token
üüd i
)
üüi j
.
üüj k
ConfigureAwait
üük y
(
üüy z
false
üüz 
)üü Ä
;üüÄ Å
return
†† 
data
†† 
.
†† 
Select
†† 
(
†† 
x
††  
=>
††! #
new
††$ '
DropDownDTO
††( 3
{
††4 5
Text
††6 :
=
††; <
x
††= >
.
††> ?
SecDets
††? F
,
††F G
Value
††H M
=
††N O
x
††P Q
.
††Q R
SecCode
††R Y
}
††Z [
)
††[ \
.
††\ ]
ToList
††] c
(
††c d
)
††d e
;
††e f
}
°° 	
public
££ 
async
££ 
Task
££ 
<
££ 
IEnumerable
££ %
<
££% &
DropDownDTO
££& 1
>
££1 2
>
££2 3+
GetAllSubRegistrarOfficeAsync
££4 Q
(
££Q R
CancellationToken
££R c
token
££d i
)
££i j
{
§§ 	
var
•• 
data
•• 
=
•• 
await
•• +
_subRegistrarOfficeRepository
•• :
.
••: ;#
FindByExpressionAsync
••; P
(
••P Q
x
••Q R
=>
••S U
x
••V W
.
••W X
IsActive
••X `
==
••a c
true
••d h
&&
••i k
x
••l m
.
••m n
	IsDeleted
••n w
==
••x z
false••{ Ä
,••Ä Å
token••Ç á
)••á à
.••à â
ConfigureAwait••â ó
(••ó ò
false••ò ù
)••ù û
;••û ü
return
¶¶ 
data
¶¶ 
.
¶¶ 
Select
¶¶ 
(
¶¶ 
x
¶¶  
=>
¶¶! #
new
¶¶$ '
DropDownDTO
¶¶( 3
{
¶¶4 5
Text
¶¶6 :
=
¶¶; <
x
¶¶= >
.
¶¶> ?
SrOfficeName
¶¶? K
,
¶¶K L
Value
¶¶M R
=
¶¶S T
Convert
¶¶U \
.
¶¶\ ]
ToInt32
¶¶] d
(
¶¶d e
x
¶¶e f
.
¶¶f g

SrOfficeId
¶¶g q
)
¶¶q r
}
¶¶s t
)
¶¶t u
.
¶¶u v
ToList
¶¶v |
(
¶¶| }
)
¶¶} ~
;
¶¶~ 
}
ßß 	
public
©© 
async
©© 
Task
©© 
<
©© 
IEnumerable
©© %
<
©©% &
DropDownDTO
©©& 1
>
©©1 2
>
©©2 3 
GetAllBankIfscCode
©©4 F
(
©©F G
CancellationToken
©©G X
token
©©Y ^
)
©©^ _
{
™™ 	
var
´´ 
data
´´ 
=
´´ 
await
´´ %
_bankIfscCodeRepository
´´ 4
.
´´4 5#
FindByExpressionAsync
´´5 J
(
´´J K
x
´´K L
=>
´´M O
x
´´P Q
.
´´Q R
IsActive
´´R Z
==
´´[ ]
true
´´^ b
,
´´b c
token
´´d i
)
´´i j
.
´´j k
ConfigureAwait
´´k y
(
´´y z
false
´´z 
)´´ Ä
;´´Ä Å
return
¨¨ 
data
¨¨ 
.
¨¨ 
Select
¨¨ 
(
¨¨ 
x
¨¨  
=>
¨¨! #
new
¨¨$ '
DropDownDTO
¨¨( 3
{
¨¨4 5
Text
¨¨6 :
=
¨¨; <
x
¨¨= >
.
¨¨> ?
IFSCCode
¨¨? G
,
¨¨G H
Value
¨¨I N
=
¨¨N O
x
¨¨O P
.
¨¨P Q
	IFSCRowID
¨¨Q Z
}
¨¨[ \
)
¨¨\ ]
.
¨¨] ^
ToList
¨¨^ d
(
¨¨d e
)
¨¨e f
;
¨¨f g
}
ÆÆ 	
public
∞∞ 
async
∞∞ 
Task
∞∞ 
<
∞∞ 
IEnumerable
∞∞ %
<
∞∞% &
DropDownDTO
∞∞& 1
>
∞∞1 2
>
∞∞2 3
GetAllChargeType
∞∞4 D
(
∞∞D E
CancellationToken
∞∞E V
token
∞∞W \
)
∞∞\ ]
{
±± 	
var
≤≤ 
data
≤≤ 
=
≤≤ 
await
≤≤ #
_chargeTypeRepository
≤≤ 2
.
≤≤2 3#
FindByExpressionAsync
≤≤3 H
(
≤≤H I
x
≤≤I J
=>
≤≤K M
x
≤≤N O
.
≤≤O P
IsActive
≤≤P X
==
≤≤Y [
true
≤≤\ `
,
≤≤` a
token
≤≤b g
)
≤≤g h
.
≤≤h i
ConfigureAwait
≤≤i w
(
≤≤w x
false
≤≤x }
)
≤≤} ~
;
≤≤~ 
return
≥≥ 
data
≥≥ 
.
≥≥ 
Select
≥≥ 
(
≥≥ 
x
≥≥  
=>
≥≥! #
new
≥≥$ '
DropDownDTO
≥≥( 3
{
≥≥4 5
Text
≥≥6 :
=
≥≥; <
x
≥≥= >
.
≥≥> ?

ChargeType
≥≥? I
,
≥≥I J
Value
≥≥J O
=
≥≥O P
x
≥≥P Q
.
≥≥Q R
Id
≥≥R T
}
≥≥U V
)
≥≥V W
.
≥≥W X
ToList
≥≥X ^
(
≥≥^ _
)
≥≥_ `
;
≥≥` a
}
¥¥ 	
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
IEnumerable
∂∂ %
<
∂∂% &
DropDownDTO
∂∂& 1
>
∂∂1 2
>
∂∂2 3"
GetAllConditionTypes
∂∂4 H
(
∂∂H I
CancellationToken
∂∂I Z
token
∂∂[ `
)
∂∂` a
{
∑∑ 	
var
∏∏ 
data
∏∏ 
=
∏∏ 
await
∏∏ 
_conditionTypes
∏∏ ,
.
∏∏, -#
FindByExpressionAsync
∏∏- B
(
∏∏B C
x
∏∏C D
=>
∏∏E G
x
∏∏H I
.
∏∏I J
IsActive
∏∏J R
==
∏∏S U
true
∏∏V Z
,
∏∏Z [
token
∏∏\ a
)
∏∏a b
.
∏∏b c
ConfigureAwait
∏∏c q
(
∏∏q r
false
∏∏r w
)
∏∏w x
;
∏∏x y
return
ππ 
data
ππ 
.
ππ 
Select
ππ 
(
ππ 
x
ππ  
=>
ππ! #
new
ππ$ '
DropDownDTO
ππ( 3
{
ππ4 5
Text
ππ6 :
=
ππ; <
x
ππ= >
.
ππ> ?
CondTypeDets
ππ? K
,
ππK L
Value
ππM R
=
ππS T
x
ππU V
.
ππV W

CondTypeCd
ππW a
}
ππb c
)
ππc d
.
ππd e
ToList
ππe k
(
ππk l
)
ππl m
;
ππm n
}
∫∫ 	
public
ºº 
async
ºº 
Task
ºº 
<
ºº 
IEnumerable
ºº %
<
ºº% &
DropDownDTO
ºº& 1
>
ºº1 2
>
ºº2 3#
GetAllConditionStages
ºº4 I
(
ººI J
CancellationToken
ººJ [
token
ºº\ a
)
ººa b
{
ΩΩ 	
var
ææ 
data
ææ 
=
ææ 
await
ææ 
_conditionStages
ææ -
.
ææ- .#
FindByExpressionAsync
ææ. C
(
ææC D
x
ææD E
=>
ææF H
x
ææI J
.
ææJ K
IsActive
ææK S
==
ææT V
true
ææW [
,
ææ[ \
token
ææ] b
)
ææb c
.
ææc d
ConfigureAwait
ææd r
(
æær s
false
ææs x
)
ææx y
;
ææy z
return
øø 
data
øø 
.
øø 
Select
øø 
(
øø 
x
øø  
=>
øø! #
new
øø$ '
DropDownDTO
øø( 3
{
øø4 5
Text
øø6 :
=
øø; <
x
øø= >
.
øø> ?
CondStgDets
øø? J
,
øøJ K
Value
øøL Q
=
øøR S
Convert
øøT [
.
øø[ \
ToInt32
øø\ c
(
øøc d
x
øød e
.
øøe f
CondStageId
øøf q
)
øøq r
}
øøs t
)
øøt u
.
øøu v
ToList
øøv |
(
øø| }
)
øø} ~
;
øø~ 
}
¿¿ 	
public
¬¬ 
async
¬¬ 
Task
¬¬ 
<
¬¬ 
IEnumerable
¬¬ %
<
¬¬% &
DropDownDTO
¬¬& 1
>
¬¬1 2
>
¬¬2 3(
GetAllConditionStageMaster
¬¬4 N
(
¬¬N O
CancellationToken
¬¬O `
token
¬¬a f
)
¬¬f g
{
√√ 	
var
ƒƒ 
data
ƒƒ 
=
ƒƒ 
await
ƒƒ #
_conditionStageMaster
ƒƒ 2
.
ƒƒ2 3#
FindByExpressionAsync
ƒƒ3 H
(
ƒƒH I
x
ƒƒI J
=>
ƒƒJ L
x
ƒƒL M
.
ƒƒM N
	CondStgId
ƒƒN W
>
ƒƒX Y
$num
ƒƒZ [
,
ƒƒ[ \
token
ƒƒ\ a
)
ƒƒa b
.
ƒƒb c
ConfigureAwait
ƒƒc q
(
ƒƒq r
false
ƒƒr w
)
ƒƒw x
;
ƒƒx y
return
≈≈ 
data
≈≈ 
.
≈≈ 
Select
≈≈ 
(
≈≈ 
x
≈≈  
=>
≈≈! #
new
≈≈$ '
DropDownDTO
≈≈( 3
{
≈≈4 5
Text
≈≈6 :
=
≈≈; <
x
≈≈= >
.
≈≈> ?
CondStgDesc
≈≈? J
,
≈≈J K
Value
≈≈L Q
=
≈≈R S
x
≈≈T U
.
≈≈U V
	CondStgId
≈≈V _
}
≈≈` a
)
≈≈a b
.
≈≈b c
ToList
≈≈c i
(
≈≈i j
)
≈≈j k
;
≈≈k l
}
∆∆ 	
public
»» 
async
»» 
Task
»» 
<
»» 
IEnumerable
»» %
<
»»% &
DropDownDTO
»»& 1
>
»»1 2
>
»»2 3!
GetAllConditionDesc
»»4 G
(
»»G H
CancellationToken
»»H Y
token
»»Z _
)
»»_ `
{
…… 	
var
   
data
   
=
   
await
   #
_conditionDescription
   2
.
  2 3#
FindByExpressionAsync
  3 H
(
  H I
x
  I J
=>
  K M
x
  N O
.
  O P
IsActive
  P X
==
  Y [
true
  \ `
,
  ` a
token
  b g
)
  g h
.
  h i
ConfigureAwait
  i w
(
  w x
false
  x }
)
  } ~
;
  ~ 
return
ÀÀ 
data
ÀÀ 
.
ÀÀ 
Select
ÀÀ 
(
ÀÀ 
x
ÀÀ  
=>
ÀÀ! #
new
ÀÀ$ '
DropDownDTO
ÀÀ( 3
{
ÀÀ4 5
Text
ÀÀ6 :
=
ÀÀ; <
x
ÀÀ= >
.
ÀÀ> ?
CondDets
ÀÀ? G
,
ÀÀG H
Value
ÀÀI N
=
ÀÀO P
Convert
ÀÀQ X
.
ÀÀX Y
ToInt32
ÀÀY `
(
ÀÀ` a
x
ÀÀa b
.
ÀÀb c
CondCd
ÀÀc i
)
ÀÀi j
}
ÀÀk l
)
ÀÀl m
.
ÀÀm n
ToList
ÀÀn t
(
ÀÀt u
)
ÀÀu v
;
ÀÀv w
}
ÃÃ 	
public
ÕÕ 
async
ÕÕ 
Task
ÕÕ 
<
ÕÕ 
IEnumerable
ÕÕ %
<
ÕÕ% &
DropDownDTO
ÕÕ& 1
>
ÕÕ1 2
>
ÕÕ2 3
GetAllForm8and13
ÕÕ4 D
(
ÕÕD E
CancellationToken
ÕÕE V
token
ÕÕW \
)
ÕÕ\ ]
{
ŒŒ 	
var
œœ 
data
œœ 
=
œœ 
await
œœ 
_form8and13list
œœ ,
.
œœ, -#
FindByExpressionAsync
œœ- B
(
œœB C
x
œœC D
=>
œœE G
x
œœH I
.
œœI J
IsActive
œœJ R
==
œœS U
true
œœV Z
,
œœZ [
token
œœ\ a
)
œœa b
.
œœb c
ConfigureAwait
œœc q
(
œœq r
false
œœr w
)
œœw x
;
œœx y
return
–– 
data
–– 
.
–– 
Select
–– 
(
–– 
x
––  
=>
––! #
new
––$ '
DropDownDTO
––( 3
{
––4 5
Text
––6 :
=
––; <
x
––= >
.
––> ?
FormType
––? G
,
––G H
Value
––I N
=
––O P
x
––Q R
.
––R S

FormTypeCD
––S ]
}
––^ _
)
––_ `
.
––` a
ToList
––a g
(
––g h
)
––h i
;
––i j
}
—— 	
public
”” 
async
”” 
Task
”” 
<
”” 
IEnumerable
”” %
<
””% &
DropDownDTO
””& 1
>
””1 2
>
””2 3!
GetAllPromoterNames
””4 G
(
””G H
CancellationToken
””H Y
token
””Z _
)
””_ `
{
‘‘ 	
var
’’ 
data
’’ 
=
’’ 
await
’’ 
_promoterNames
’’ +
.
’’+ ,#
FindByExpressionAsync
’’, A
(
’’A B
x
’’B C
=>
’’D F
x
’’G H
.
’’H I
IsActive
’’I Q
==
’’R T
true
’’U Y
,
’’Y Z
token
’’[ `
)
’’` a
.
’’a b
ConfigureAwait
’’b p
(
’’p q
false
’’q v
)
’’v w
;
’’w x
return
÷÷ 
data
÷÷ 
.
÷÷ 
Select
÷÷ 
(
÷÷ 
x
÷÷  
=>
÷÷! #
new
÷÷$ '
DropDownDTO
÷÷( 3
{
÷÷4 5
Text
÷÷6 :
=
÷÷; <
x
÷÷= >
.
÷÷> ?
PromoterName
÷÷? K
,
÷÷K L
Value
÷÷M R
=
÷÷S T
(
÷÷U V
int
÷÷V Y
)
÷÷Y Z
x
÷÷Z [
.
÷÷[ \
PromoterCode
÷÷\ h
}
÷÷h i
)
÷÷i j
.
÷÷j k
ToList
÷÷k q
(
÷÷q r
)
÷÷r s
;
÷÷s t
}
◊◊ 	
public
ÿÿ 
async
ÿÿ 
Task
ÿÿ 
<
ÿÿ 
IEnumerable
ÿÿ %
<
ÿÿ% &
DropDownDTO
ÿÿ& 1
>
ÿÿ1 2
>
ÿÿ2 3 
GetAllPromoterPhNo
ÿÿ4 F
(
ÿÿF G
CancellationToken
ÿÿG X
token
ÿÿY ^
)
ÿÿ^ _
{
ŸŸ 	
var
⁄⁄ 
data
⁄⁄ 
=
⁄⁄ 
await
⁄⁄ 
_promoterNames
⁄⁄ +
.
⁄⁄+ ,#
FindByExpressionAsync
⁄⁄, A
(
⁄⁄A B
x
⁄⁄B C
=>
⁄⁄D F
x
⁄⁄G H
.
⁄⁄H I
IsActive
⁄⁄I Q
==
⁄⁄R T
true
⁄⁄U Y
,
⁄⁄Y Z
token
⁄⁄[ `
)
⁄⁄` a
.
⁄⁄a b
ConfigureAwait
⁄⁄b p
(
⁄⁄p q
false
⁄⁄q v
)
⁄⁄v w
;
⁄⁄w x
return
€€ 
data
€€ 
.
€€ 
Select
€€ 
(
€€ 
x
€€  
=>
€€! #
new
€€$ '
DropDownDTO
€€( 3
{
€€4 5
Text
€€6 :
=
€€; <
x
€€= >
.
€€> ?
PromoterMobno
€€? L
.
€€L M
ToString
€€M U
(
€€U V
)
€€V W
,
€€W X
Value
€€Y ^
=
€€_ `
(
€€a b
int
€€b e
)
€€e f
x
€€f g
.
€€g h
PromoterCode
€€h t
}
€€t u
)
€€u v
.
€€v w
ToList
€€w }
(
€€} ~
)
€€~ 
;€€ Ä
}
‹‹ 	
public
ﬁﬁ 
async
ﬁﬁ 
Task
ﬁﬁ 
<
ﬁﬁ 
IEnumerable
ﬁﬁ %
<
ﬁﬁ% &
DropDownDTO
ﬁﬁ& 1
>
ﬁﬁ1 2
>
ﬁﬁ2 3!
GetAllPromoterState
ﬁﬁ4 G
(
ﬁﬁG H
CancellationToken
ﬁﬁH Y
token
ﬁﬁZ _
)
ﬁﬁ_ `
{
ﬂﬂ 	
var
‡‡ 
data
‡‡ 
=
‡‡ 
await
‡‡ 
_promoterState
‡‡ +
.
‡‡+ ,#
FindByExpressionAsync
‡‡, A
(
‡‡A B
x
‡‡B C
=>
‡‡D F
x
‡‡G H
.
‡‡H I
IsActive
‡‡I Q
==
‡‡R T
true
‡‡U Y
,
‡‡Y Z
token
‡‡[ `
)
‡‡` a
.
‡‡a b
ConfigureAwait
‡‡b p
(
‡‡p q
false
‡‡q v
)
‡‡v w
;
‡‡w x
return
·· 
data
·· 
.
·· 
Select
·· 
(
·· 
x
··  
=>
··! #
new
··$ '
DropDownDTO
··( 3
{
··4 5
Text
··6 :
=
··; <
x
··= >
.
··> ?
PincodeStateDesc
··? O
,
··O P
Value
··Q V
=
··W X
x
··Y Z
.
··Z [
PincodeStateCd
··[ i
}
··j k
)
··k l
.
··l m
ToList
··m s
(
··s t
)
··t u
;
··u v
}
‚‚ 	
public
‰‰ 
async
‰‰ 
Task
‰‰ 
<
‰‰ 
IEnumerable
‰‰ %
<
‰‰% &
DropDownDTO
‰‰& 1
>
‰‰1 2
>
‰‰2 3$
GetAllPromoterDistrict
‰‰4 J
(
‰‰J K
CancellationToken
‰‰K \
token
‰‰] b
)
‰‰b c
{
ÂÂ 	
var
ÊÊ 
data
ÊÊ 
=
ÊÊ 
await
ÊÊ 
_promoterDistrict
ÊÊ .
.
ÊÊ. /#
FindByExpressionAsync
ÊÊ/ D
(
ÊÊD E
x
ÊÊE F
=>
ÊÊG I
x
ÊÊJ K
.
ÊÊK L
IsActive
ÊÊL T
==
ÊÊU W
true
ÊÊX \
,
ÊÊ\ ]
token
ÊÊ^ c
)
ÊÊc d
.
ÊÊd e
ConfigureAwait
ÊÊe s
(
ÊÊs t
false
ÊÊt y
)
ÊÊy z
;
ÊÊz {
return
ÁÁ 
data
ÁÁ 
.
ÁÁ 
Select
ÁÁ 
(
ÁÁ 
x
ÁÁ  
=>
ÁÁ! #
new
ÁÁ$ '
DropDownDTO
ÁÁ( 3
{
ÁÁ4 5
Text
ÁÁ6 :
=
ÁÁ; <
x
ÁÁ= >
.
ÁÁ> ?!
PincodeDistrictDesc
ÁÁ? R
,
ÁÁR S
Value
ÁÁT Y
=
ÁÁZ [
x
ÁÁ\ ]
.
ÁÁ] ^
PincodeDistrictCd
ÁÁ^ o
}
ÁÁp q
)
ÁÁq r
.
ÁÁr s
ToList
ÁÁs y
(
ÁÁy z
)
ÁÁz {
;
ÁÁ{ |
}
ËË 	
public
ÎÎ 
async
ÎÎ 
Task
ÎÎ 
<
ÎÎ 
IEnumerable
ÎÎ %
<
ÎÎ% &
DropDownDTO
ÎÎ& 1
>
ÎÎ1 2
>
ÎÎ2 3#
GetAllDistrictDetails
ÎÎ4 I
(
ÎÎI J
CancellationToken
ÎÎJ [
token
ÎÎ\ a
)
ÎÎa b
{
ÏÏ 	
var
ÌÌ 
data
ÌÌ 
=
ÌÌ 
await
ÌÌ !
_districtRepository
ÌÌ 0
.
ÌÌ0 1#
FindByExpressionAsync
ÌÌ1 F
(
ÌÌF G
x
ÌÌG H
=>
ÌÌI K
x
ÌÌL M
.
ÌÌM N
IsActive
ÌÌN V
==
ÌÌW Y
true
ÌÌZ ^
,
ÌÌ^ _
token
ÌÌ` e
)
ÌÌe f
.
ÌÌf g
ConfigureAwait
ÌÌg u
(
ÌÌu v
false
ÌÌv {
)
ÌÌ{ |
;
ÌÌ| }
return
ÓÓ 
data
ÓÓ 
.
ÓÓ 
Select
ÓÓ 
(
ÓÓ 
x
ÓÓ  
=>
ÓÓ! #
new
ÓÓ$ '
DropDownDTO
ÓÓ( 3
{
ÓÓ4 5
Text
ÓÓ6 :
=
ÓÓ; <
x
ÓÓ= >
.
ÓÓ> ?
DistNam
ÓÓ? F
,
ÓÓF G
Value
ÓÓH M
=
ÓÓN O
x
ÓÓP Q
.
ÓÓQ R
DistCd
ÓÓR X
}
ÓÓY Z
)
ÓÓZ [
.
ÓÓ[ \
ToList
ÓÓ\ b
(
ÓÓb c
)
ÓÓc d
;
ÓÓd e
}
ÔÔ 	
public
 
async
 
Task
 
<
 
IEnumerable
 %
<
% &
DropDownDTO
& 1
>
1 2
>
2 3 
GetAllTalukDetails
4 F
(
F G
CancellationToken
G X
token
Y ^
)
^ _
{
ÒÒ 	
var
ÚÚ 
data
ÚÚ 
=
ÚÚ 
await
ÚÚ 
_talukaRepository
ÚÚ .
.
ÚÚ. /#
FindByExpressionAsync
ÚÚ/ D
(
ÚÚD E
x
ÚÚE F
=>
ÚÚG I
x
ÚÚJ K
.
ÚÚK L
IsActive
ÚÚL T
==
ÚÚU W
true
ÚÚX \
,
ÚÚ\ ]
token
ÚÚ^ c
)
ÚÚc d
.
ÚÚd e
ConfigureAwait
ÚÚe s
(
ÚÚs t
false
ÚÚt y
)
ÚÚy z
;
ÚÚz {
return
ÛÛ 
data
ÛÛ 
.
ÛÛ 
Select
ÛÛ 
(
ÛÛ 
x
ÛÛ  
=>
ÛÛ! #
new
ÛÛ$ '
DropDownDTO
ÛÛ( 3
{
ÛÛ4 5
Text
ÛÛ6 :
=
ÛÛ; <
x
ÛÛ= >
.
ÛÛ> ?
TlqNam
ÛÛ? E
,
ÛÛE F
Value
ÛÛG L
=
ÛÛM N
x
ÛÛO P
.
ÛÛP Q
TlqCd
ÛÛQ V
}
ÛÛV W
)
ÛÛW X
.
ÛÛX Y
ToList
ÛÛY _
(
ÛÛ_ `
)
ÛÛ` a
;
ÛÛa b
}
ÙÙ 	
public
ıı 
async
ıı 
Task
ıı 
<
ıı 
IEnumerable
ıı %
<
ıı% &
DropDownDTO
ıı& 1
>
ıı1 2
>
ıı2 3 
GetAllHobliDetails
ıı4 F
(
ııF G
CancellationToken
ııG X
token
ııY ^
)
ıı^ _
{
ˆˆ 	
var
˜˜ 
data
˜˜ 
=
˜˜ 
await
˜˜ 
_hobliRepository
˜˜ -
.
˜˜- .#
FindByExpressionAsync
˜˜. C
(
˜˜C D
x
˜˜D E
=>
˜˜F H
x
˜˜I J
.
˜˜J K
IsActive
˜˜K S
==
˜˜T V
true
˜˜W [
,
˜˜[ \
token
˜˜] b
)
˜˜b c
.
˜˜c d
ConfigureAwait
˜˜d r
(
˜˜r s
false
˜˜s x
)
˜˜x y
;
˜˜y z
return
¯¯ 
data
¯¯ 
.
¯¯ 
Select
¯¯ 
(
¯¯ 
x
¯¯  
=>
¯¯! #
new
¯¯$ '
DropDownDTO
¯¯( 3
{
¯¯4 5
Text
¯¯6 :
=
¯¯; <
x
¯¯= >
.
¯¯> ?
HobNam
¯¯? E
,
¯¯E F
Value
¯¯G L
=
¯¯M N
x
¯¯O P
.
¯¯P Q
HobCd
¯¯Q V
}
¯¯W X
)
¯¯X Y
.
¯¯Y Z
ToList
¯¯Z `
(
¯¯` a
)
¯¯a b
;
¯¯b c
}
˘˘ 	
public
˚˚ 
async
˚˚ 
Task
˚˚ 
<
˚˚ 
IEnumerable
˚˚ %
<
˚˚% &
DropDownDTO
˚˚& 1
>
˚˚1 2
>
˚˚2 3"
GetAllVillageDetails
˚˚4 H
(
˚˚H I
CancellationToken
˚˚I Z
token
˚˚[ `
)
˚˚` a
{
¸¸ 	
var
˝˝ 
data
˝˝ 
=
˝˝ 
await
˝˝  
_villageRepository
˝˝ /
.
˝˝/ 0#
FindByExpressionAsync
˝˝0 E
(
˝˝E F
x
˝˝F G
=>
˝˝H J
x
˝˝K L
.
˝˝L M
IsActive
˝˝M U
==
˝˝V X
true
˝˝Y ]
,
˝˝] ^
token
˝˝_ d
)
˝˝d e
.
˝˝e f
ConfigureAwait
˝˝f t
(
˝˝t u
false
˝˝u z
)
˝˝z {
;
˝˝{ |
return
˛˛ 
data
˛˛ 
.
˛˛ 
Select
˛˛ 
(
˛˛ 
x
˛˛  
=>
˛˛! #
new
˛˛$ '
DropDownDTO
˛˛( 3
{
˛˛4 5
Text
˛˛6 :
=
˛˛; <
x
˛˛= >
.
˛˛> ?
VilNam
˛˛? E
,
˛˛E F
Value
˛˛G L
=
˛˛M N
x
˛˛O P
.
˛˛P Q
VilCd
˛˛Q V
}
˛˛W X
)
˛˛X Y
.
˛˛Y Z
ToList
˛˛Z `
(
˛˛` a
)
˛˛a b
;
˛˛b c
}
ˇˇ 	
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
IEnumerable
ÅÅ %
<
ÅÅ% &
DropDownDTO
ÅÅ& 1
>
ÅÅ1 2
>
ÅÅ2 3"
GetAllPincodeDetails
ÅÅ4 H
(
ÅÅH I
CancellationToken
ÅÅI Z
token
ÅÅ[ `
)
ÅÅ` a
{
ÇÇ 	
var
ÉÉ 
data
ÉÉ 
=
ÉÉ 
await
ÉÉ  
_pincodeRepository
ÉÉ /
.
ÉÉ/ 0#
FindByExpressionAsync
ÉÉ0 E
(
ÉÉE F
x
ÉÉF G
=>
ÉÉH J
x
ÉÉK L
.
ÉÉL M
IsActive
ÉÉM U
==
ÉÉV X
true
ÉÉY ]
,
ÉÉ] ^
token
ÉÉ_ d
)
ÉÉd e
.
ÉÉe f
ConfigureAwait
ÉÉf t
(
ÉÉt u
false
ÉÉu z
)
ÉÉz {
;
ÉÉ{ |
return
ÑÑ 
data
ÑÑ 
.
ÑÑ 
Select
ÑÑ 
(
ÑÑ 
x
ÑÑ  
=>
ÑÑ! #
new
ÑÑ$ '
DropDownDTO
ÑÑ( 3
{
ÑÑ4 5
Text
ÑÑ6 :
=
ÑÑ; <
x
ÑÑ= >
.
ÑÑ> ?
	PincodeCd
ÑÑ? H
.
ÑÑH I
ToString
ÑÑI Q
(
ÑÑQ R
)
ÑÑR S
,
ÑÑS T
Value
ÑÑU Z
=
ÑÑ[ \
x
ÑÑ] ^
.
ÑÑ^ _
PincodeRowId
ÑÑ_ k
}
ÑÑl m
)
ÑÑm n
.
ÑÑn o
ToList
ÑÑo u
(
ÑÑu v
)
ÑÑv w
;
ÑÑw x
}
ÖÖ 	
public
àà 
async
àà 
Task
àà 
<
àà 
IEnumerable
àà %
<
àà% &
DropDownDTO
àà& 1
>
àà1 2
>
àà2 3#
GetAllPromotorSubClas
àà4 I
(
ààI J
CancellationToken
ààJ [
token
àà\ a
)
ààa b
{
ââ 	
var
ää 
data
ää 
=
ää 
await
ää 
_promSubClas
ää )
.
ää) *#
FindByExpressionAsync
ää* ?
(
ää? @
x
ää@ A
=>
ääB D
x
ääE F
.
ääF G
IsActive
ääG O
==
ääP R
true
ääS W
,
ääW X
token
ääY ^
)
ää^ _
.
ää_ `
ConfigureAwait
ää` n
(
ään o
false
ääo t
)
äät u
;
ääu v
return
ãã 
data
ãã 
.
ãã 
Select
ãã 
(
ãã 
x
ãã  
=>
ãã! #
new
ãã$ '
DropDownDTO
ãã( 3
{
ãã4 5
Text
ãã6 :
=
ãã; <
x
ãã= >
.
ãã> ?
PsubclasDesc
ãã? K
,
ããK L
Value
ããM R
=
ããS T
x
ããU V
.
ããV W

PsubclasCd
ããW a
}
ããb c
)
ããc d
.
ããd e
ToList
ããe k
(
ããk l
)
ããl m
;
ããm n
}
åå 	
public
éé 
async
éé 
Task
éé 
<
éé 
IEnumerable
éé %
<
éé% &
DropDownDTO
éé& 1
>
éé1 2
>
éé2 3 
GetAllPromotorQual
éé4 F
(
ééF G
CancellationToken
ééG X
token
ééY ^
)
éé^ _
{
èè 	
var
êê 
data
êê 
=
êê 
await
êê 
	_promQual
êê &
.
êê& '#
FindByExpressionAsync
êê' <
(
êê< =
x
êê= >
=>
êê? A
x
êêB C
.
êêC D
IsActive
êêD L
==
êêM O
true
êêP T
,
êêT U
token
êêV [
)
êê[ \
.
êê\ ]
ConfigureAwait
êê] k
(
êêk l
false
êêl q
)
êêq r
;
êêr s
return
ëë 
data
ëë 
.
ëë 
Select
ëë 
(
ëë 
x
ëë  
=>
ëë! #
new
ëë$ '
DropDownDTO
ëë( 3
{
ëë4 5
Text
ëë6 :
=
ëë; <
x
ëë= >
.
ëë> ?
	PqualDesc
ëë? H
,
ëëH I
Value
ëëJ O
=
ëëP Q
x
ëëR S
.
ëëS T
PqualCd
ëëT [
}
ëë\ ]
)
ëë] ^
.
ëë^ _
ToList
ëë_ e
(
ëëe f
)
ëëf g
;
ëëg h
}
íí 	
public
îî 
async
îî 
Task
îî 
<
îî 
IEnumerable
îî %
<
îî% &
DropDownDTO
îî& 1
>
îî1 2
>
îî2 3
GetAllAccountType
îî4 E
(
îîE F
CancellationToken
îîF W
token
îîX ]
)
îî] ^
{
ïï 	
var
ññ 
data
ññ 
=
ññ 
await
ññ 
_acTypeRepository
ññ .
.
ññ. /#
FindByExpressionAsync
ññ/ D
(
ññD E
x
ññE F
=>
ññG I
x
ññJ K
.
ññK L
IsActive
ññL T
==
ññU W
true
ññX \
&&
ññ] _
x
ññ` a
.
ñña b
	IsDeleted
ññb k
==
ññl n
false
ñño t
,
ññt u
token
ññv {
)
ññ{ |
.
ññ| }
ConfigureAwaitññ} ã
(ññã å
falseññå ë
)ññë í
;ññí ì
return
óó 
data
óó 
.
óó 
Select
óó 
(
óó 
x
óó  
=>
óó! #
new
óó$ '
DropDownDTO
óó( 3
{
óó4 5
Text
óó6 :
=
óó; <
x
óó= >
.
óó> ?

AcTypeDets
óó? I
,
óóI J
Value
óóK P
=
óóQ R
x
óóS T
.
óóT U
AcTypeCd
óóU ]
}
óó^ _
)
óó_ `
.
óó` a
ToList
óóa g
(
óóg h
)
óóh i
;
óói j
}
òò 	
public
öö 
async
öö 
Task
öö 
<
öö 
IEnumerable
öö %
<
öö% &
DropDownDTO
öö& 1
>
öö1 2
>
öö2 3#
GetNameOfProductAsync
öö4 I
(
ööI J
CancellationToken
ööJ [
token
öö\ a
)
ööa b
{
õõ	 

var
úú 
data
úú 
=
úú 
await
úú  
_productRepository
úú /
.
úú/ 0#
FindByExpressionAsync
úú0 E
(
úúE F
x
úúF G
=>
úúH J
x
úúK L
.
úúL M
IsActive
úúM U
==
úúV X
true
úúY ]
&&
úú^ `
x
úúa b
.
úúb c
	IsDeleted
úúc l
==
úúm o
false
úúp u
,
úúu v
token
úúw |
)
úú| }
.
úú} ~
ConfigureAwaitúú~ å
(úúå ç
falseúúç í
)úúí ì
;úúì î
return
ùù 
data
ùù 
.
ùù 
Select
ùù 
(
ùù 
x
ùù  
=>
ùù! #
new
ùù$ '
DropDownDTO
ùù( 3
{
ùù4 5
Text
ùù6 :
=
ùù; <
x
ùù= >
.
ùù> ?
ProdDets
ùù? G
,
ùùG H
Value
ùùI N
=
ùùO P
x
ùùQ R
.
ùùR S
Id
ùùS U
}
ùùV W
)
ùùW X
.
ùùX Y
ToList
ùùY _
(
ùù_ `
)
ùù` a
;
ùùa b
}
ûû 	
public
†† 
async
†† 
Task
†† 
<
†† 
IEnumerable
†† %
<
††% &
DropDownDTO
††& 1
>
††1 2
>
††2 3
GetIndustryType
††4 C
(
††C D
CancellationToken
††D U
token
††V [
)
††[ \
{
°° 	
var
¢¢ 
data
¢¢ 
=
¢¢ 
await
¢¢ 
_indtryType
¢¢ (
.
¢¢( )#
FindByExpressionAsync
¢¢) >
(
¢¢> ?
x
¢¢? @
=>
¢¢A C
x
¢¢D E
.
¢¢E F
IsActive
¢¢F N
==
¢¢O Q
true
¢¢R V
&&
¢¢W Y
x
¢¢Z [
.
¢¢[ \
	IsDeleted
¢¢\ e
==
¢¢f h
false
¢¢i n
,
¢¢n o
token
¢¢p u
)
¢¢u v
.
¢¢v w
ConfigureAwait¢¢w Ö
(¢¢Ö Ü
false¢¢Ü ã
)¢¢ã å
;¢¢å ç
return
££ 
data
££ 
.
££ 
Select
££ 
(
££ 
x
££  
=>
££! #
new
££$ '
DropDownDTO
££( 3
{
££4 5
Text
££6 :
=
££; <
x
££= >
.
££> ?
IndDets
££? F
,
££F G
Value
££H M
=
££N O
Convert
££P W
.
££W X
ToInt32
££X _
(
££_ `
x
££` a
.
££a b
IndCd
££b g
)
££g h
}
££i j
)
££j k
.
££k l
ToList
££l r
(
££r s
)
££s t
;
££t u
}
§§ 	
public
¶¶ 
async
¶¶ 
Task
¶¶ 
<
¶¶ 
IEnumerable
¶¶ %
<
¶¶% &
DropDownDTO
¶¶& 1
>
¶¶1 2
>
¶¶2 3#
GetAssetCategoryAsync
¶¶4 I
(
¶¶I J
CancellationToken
¶¶J [
token
¶¶\ a
)
¶¶a b
{
ßß 	
var
®® 
data
®® 
=
®® 
await
®® 
_assetCategory
®® +
.
®®+ ,#
FindByExpressionAsync
®®, A
(
®®A B
x
®®B C
=>
®®D F
x
®®G H
.
®®H I
IsActive
®®I Q
==
®®R T
true
®®U Y
&&
®®Z \
x
®®] ^
.
®®^ _
	IsDeleted
®®_ h
==
®®i k
false
®®l q
,
®®q r
token
®®s x
)
®®x y
.
®®y z
ConfigureAwait®®z à
(®®à â
false®®â é
)®®é è
;®®è ê
return
©© 
data
©© 
.
©© 
Select
©© 
(
©© 
x
©©  
=>
©©! #
new
©©$ '
DropDownDTO
©©( 3
{
©©4 5
Text
©©6 :
=
©©; <
x
©©= >
.
©©> ?
AssetcatDets
©©? K
,
©©K L
Value
©©M R
=
©©S T
Convert
©©U \
.
©©\ ]
ToInt32
©©] d
(
©©d e
x
©©e f
.
©©f g

AssetcatCd
©©g q
)
©©q r
}
©©s t
)
©©t u
.
©©u v
ToList
©©v |
(
©©| }
)
©©} ~
;
©©~ 
}
™™ 	
public
≠≠ 
async
≠≠ 
Task
≠≠ 
<
≠≠ 
IEnumerable
≠≠ %
<
≠≠% &
DropDownDTO
≠≠& 1
>
≠≠1 2
>
≠≠2 3
GetAllStateZone
≠≠4 C
(
≠≠C D
CancellationToken
≠≠D U
token
≠≠V [
)
≠≠[ \
{
ÆÆ 	
var
ØØ 
data
ØØ 
=
ØØ 
await
ØØ 

_stateZone
ØØ '
.
ØØ' (#
FindByExpressionAsync
ØØ( =
(
ØØ= >
x
ØØ> ?
=>
ØØ@ B
x
ØØC D
.
ØØD E
IsActive
ØØE M
==
ØØN P
true
ØØQ U
,
ØØU V
token
ØØW \
)
ØØ\ ]
.
ØØ] ^
ConfigureAwait
ØØ^ l
(
ØØl m
false
ØØm r
)
ØØr s
;
ØØs t
return
∞∞ 
data
∞∞ 
.
∞∞ 
Select
∞∞ 
(
∞∞ 
x
∞∞  
=>
∞∞! #
new
∞∞$ '
DropDownDTO
∞∞( 3
{
∞∞4 5
Text
∞∞6 :
=
∞∞; <
x
∞∞= >
.
∞∞> ?
StateZoneDesc
∞∞? L
,
∞∞L M
Value
∞∞N S
=
∞∞T U
x
∞∞V W
.
∞∞W X
Id
∞∞X Z
}
∞∞[ \
)
∞∞\ ]
.
∞∞] ^
ToList
∞∞^ d
(
∞∞d e
)
∞∞e f
;
∞∞f g
}
±± 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
IEnumerable
≥≥ %
<
≥≥% &
DropDownDTO
≥≥& 1
>
≥≥1 2
>
≥≥2 3
GetAssetTypeAsync
≥≥4 E
(
≥≥E F
CancellationToken
≥≥F W
token
≥≥X ]
)
≥≥] ^
{
¥¥ 	
var
µµ 
data
µµ 
=
µµ 
await
µµ 

_assetType
µµ '
.
µµ' (#
FindByExpressionAsync
µµ( =
(
µµ= >
x
µµ> ?
=>
µµ@ B
x
µµC D
.
µµD E
IsActive
µµE M
==
µµN P
true
µµQ U
&&
µµV X
x
µµY Z
.
µµZ [
	IsDeleted
µµ[ d
==
µµe g
false
µµh m
,
µµm n
token
µµo t
)
µµt u
.
µµu v
ConfigureAwaitµµv Ñ
(µµÑ Ö
falseµµÖ ä
)µµä ã
;µµã å
return
∂∂ 
data
∂∂ 
.
∂∂ 
Select
∂∂ 
(
∂∂ 
x
∂∂  
=>
∂∂! #
new
∂∂$ '
DropDownDTO
∂∂( 3
{
∂∂4 5
Text
∂∂6 :
=
∂∂; <
x
∂∂= >
.
∂∂> ?
AssettypeDets
∂∂? L
,
∂∂L M
Value
∂∂N S
=
∂∂T U
Convert
∂∂V ]
.
∂∂] ^
ToInt32
∂∂^ e
(
∂∂e f
x
∂∂f g
.
∂∂g h
AssettypeCd
∂∂h s
)
∂∂s t
}
∂∂u v
)
∂∂v w
.
∂∂w x
ToList
∂∂x ~
(
∂∂~ 
)∂∂ Ä
;∂∂Ä Å
}
∑∑ 	
public
ππ 
async
ππ 
Task
ππ 
<
ππ 
IEnumerable
ππ %
<
ππ% &
DropDownDTO
ππ& 1
>
ππ1 2
>
ππ2 3"
GetAllAllocationCode
ππ4 H
(
ππH I
CancellationToken
ππI Z
token
ππ[ `
)
ππ` a
{
∫∫ 	
var
ªª 
data
ªª 
=
ªª 
await
ªª 
_allocationCode
ªª ,
.
ªª, -#
FindByExpressionAsync
ªª- B
(
ªªB C
x
ªªC D
=>
ªªE G
x
ªªH I
.
ªªI J
IsActive
ªªJ R
==
ªªS U
true
ªªV Z
&&
ªª[ ]
x
ªª^ _
.
ªª_ `
	IsDeleted
ªª` i
==
ªªj l
false
ªªm r
,
ªªr s
token
ªªt y
)
ªªy z
.
ªªz {
ConfigureAwaitªª{ â
(ªªâ ä
falseªªä è
)ªªè ê
;ªªê ë
return
ºº 
data
ºº 
.
ºº 
Select
ºº 
(
ºº 
x
ºº  
=>
ºº! #
new
ºº$ '
DropDownDTO
ºº( 3
{
ºº4 5
Text
ºº6 :
=
ºº; <
x
ºº= >
.
ºº> ?
AllcDets
ºº? G
,
ººG H
Value
ººI N
=
ººO P
x
ººQ R
.
ººR S
AllcId
ººS Y
}
ººZ [
)
ºº[ \
.
ºº\ ]
ToList
ºº] c
(
ººc d
)
ººd e
;
ººe f
}
ΩΩ 	
public
øø 
async
øø 
Task
øø 
<
øø 
IEnumerable
øø %
<
øø% &
DropDownDTO
øø& 1
>
øø1 2
>
øø2 3
GetAllLandType
øø4 B
(
øøB C
CancellationToken
øøC T
token
øøU Z
)
øøZ [
{
¿¿ 	
var
¡¡ 
data
¡¡ 
=
¡¡ 
await
¡¡ !
_landTypeRepository
¡¡ 0
.
¡¡0 1#
FindByExpressionAsync
¡¡1 F
(
¡¡F G
x
¡¡G H
=>
¡¡I K
x
¡¡L M
.
¡¡M N
IsActive
¡¡N V
==
¡¡W Y
true
¡¡Z ^
,
¡¡_ `
token
¡¡a f
)
¡¡f g
.
¡¡g h
ConfigureAwait
¡¡h v
(
¡¡v w
false
¡¡w |
)
¡¡| }
;
¡¡} ~
return
¬¬ 
data
¬¬ 
.
¬¬ 
Select
¬¬ 
(
¬¬ 
x
¬¬  
=>
¬¬! #
new
¬¬$ '
DropDownDTO
¬¬( 3
{
¬¬4 5
Text
¬¬6 :
=
¬¬; <
x
¬¬= >
.
¬¬> ?
LandTypeDesc
¬¬? K
.
¬¬K L
ToString
¬¬L T
(
¬¬T U
)
¬¬U V
,
¬¬V W
Value
¬¬X ]
=
¬¬^ _
x
¬¬` a
.
¬¬a b

LandTypeId
¬¬b l
}
¬¬m n
)
¬¬n o
.
¬¬o p
ToList
¬¬p v
(
¬¬v w
)
¬¬w x
;
¬¬x y
}
√√ 	
public
∆∆ 
async
∆∆ 
Task
∆∆ 
<
∆∆ 
IEnumerable
∆∆ %
<
∆∆% &
DropDownDTO
∆∆& 1
>
∆∆1 2
>
∆∆2 3&
GetAllOtherDebitsDetails
∆∆4 L
(
∆∆L M
CancellationToken
∆∆M ^
token
∆∆_ d
)
∆∆d e
{
«« 	
var
»» 
data
»» 
=
»» 
await
»» "
_othdebitsRepository
»» 1
.
»»1 2#
FindByExpressionAsync
»»2 G
(
»»G H
x
»»H I
=>
»»J L
x
»»M N
.
»»N O
IsActive
»»O W
==
»»X Z
true
»»[ _
&&
»»` b
x
»»c d
.
»»d e
	IsDeleted
»»e n
==
»»o q
false
»»r w
,
»»w x
token
»»y ~
)
»»~ 
.»» Ä
ConfigureAwait»»Ä é
(»»é è
false»»è î
)»»î ï
;»»ï ñ
return
…… 
data
…… 
.
…… 
Select
…… 
(
…… 
x
……  
=>
……! #
new
……$ '
DropDownDTO
……( 3
{
……4 5
Text
……6 :
=
……; <
x
……= >
.
……> ?
DsbOthdebitDesc
……? N
.
……N O
ToString
……O W
(
……W X
)
……X Y
,
……Y Z
Value
……[ `
=
……a b
x
……c d
.
……d e
DsbOthdebitId
……e r
}
……s t
)
……t u
.
……u v
ToList
……v |
(
……| }
)
……} ~
;
……~ 
}
   	
public
ÃÃ 
async
ÃÃ 
Task
ÃÃ 
<
ÃÃ 
IEnumerable
ÃÃ %
<
ÃÃ% &
DropDownDTO
ÃÃ& 1
>
ÃÃ1 2
>
ÃÃ2 3
GetAllUomMaster
ÃÃ4 C
(
ÃÃC D
CancellationToken
ÃÃD U
token
ÃÃV [
)
ÃÃ[ \
{
ÕÕ 	
var
ŒŒ 
data
ŒŒ 
=
ŒŒ 
await
ŒŒ "
_umoMasterRepository
ŒŒ 1
.
ŒŒ1 2#
FindByExpressionAsync
ŒŒ2 G
(
ŒŒG H
x
ŒŒH I
=>
ŒŒJ L
x
ŒŒM N
.
ŒŒN O
IsActive
ŒŒO W
==
ŒŒX Z
true
ŒŒ[ _
&&
ŒŒ` b
x
ŒŒc d
.
ŒŒd e
	IsDeleted
ŒŒe n
==
ŒŒo q
false
ŒŒr w
,
ŒŒw x
token
ŒŒy ~
)
ŒŒ~ 
.ŒŒ Ä
ConfigureAwaitŒŒÄ é
(ŒŒé è
falseŒŒè î
)ŒŒî ï
;ŒŒï ñ
return
œœ 
data
œœ 
.
œœ 
Select
œœ 
(
œœ 
x
œœ  
=>
œœ! #
new
œœ$ '
DropDownDTO
œœ( 3
{
œœ4 5
Text
œœ6 :
=
œœ; <
x
œœ= >
.
œœ> ?
UmoDesc
œœ? F
,
œœF G
Value
œœH M
=
œœN O
(
œœP Q
int
œœQ T
)
œœT U
x
œœU V
.
œœV W
UmoId
œœW \
}
œœ] ^
)
œœ^ _
.
œœ_ `
ToList
œœ` f
(
œœf g
)
œœg h
;
œœh i
}
–– 	
}
—— 
}““ ©
HD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\DSCService.cs
	namespace		 	
KAR		
 
.		 
KSFC		 
.		 
API		 
.		 
ServiceFacade		 $
.		$ %
Internal		% -
.		- .
Service		. 5
{

 
public 

class 

DscService 
: 
IDscService )
{ 
private 
readonly 
IEntityRepository *
<* +
TblEmpdscTab+ 7
>7 8
_dscRepository9 G
;G H
public 

DscService 
( 
IEntityRepository +
<+ ,
TblEmpdscTab, 8
>8 9
dscRepository: G
)G H
{ 	
this 
. 
_dscRepository 
=  !
dscRepository" /
;/ 0
} 	
public 
async 
Task 
< 
TblEmpdscTab &
>& '
AuthenticateDSC( 7
(7 8
string8 >
pubKey? E
,E F
stringG M
empIdN S
,S T
CancellationTokenT e
tokenf k
)k l
{ 	
var 
user 
= 
await 
_dscRepository *
.* ++
FirstOrDefaultByExpressionAsync+ J
(J K
xK L
=>M O
xP Q
.Q R
	DscPubkeyR [
==\ ^
pubKey_ e
&&f h
xi j
.j k
EmpIdk p
==q s
empIdt y
&&z |
x} ~
.~ 

DscExpdate	 â
>=
ä å
DateTime
ç ï
.
ï ñ
Now
ñ ô
,
ô ö
token
ö ü
)
ü †
.
† °
ConfigureAwait
° Ø
(
Ø ∞
false
∞ µ
)
µ ∂
;
∂ ∑
return 
user 
; 
} 	
} 
} œ£
âD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\AssociateSisterConcernDetails\SisterConcernDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H)
AssociateSisterConcernDetailsH e
{ 
public 

class '
SisterConcernDetailsService ,
:- .!
ISisterConcernDetails/ D
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqSisDet+ 7
>7 8#
_siterDetailsRepository9 P
;P Q
private 
readonly 
IEntityRepository *
<* +
TblEnqSfinDet+ 8
>8 9
_sisFy: @
;@ A
private 
readonly 
IEntityRepository *
<* +
TblEnqTemptab+ 8
>8 9
_enqRepository: H
;H I
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IEnquiryHomeService ,
_enquiryService- <
;< =
public '
SisterConcernDetailsService *
(* +
IMapper+ 2
mapper3 9
,9 :
UserInfo; C
userInfoD L
,L M
IEntityRepositoryN _
<_ `
TblEnqSisDet` l
>l m#
siterDetailsRepository	n Ñ
,
Ñ Ö
IEntityRepository
Ü ó
<
ó ò
TblEnqSfinDet
ò •
>
• ¶
sisFy
ß ¨
,
¨ ≠
IUnitOfWork 
work 
, 
IEnquiryHomeService 1
enquiryHomeService2 D
,D E
IEntityRepositoryF W
<W X
TblEnqTemptabX e
>e f
enqRepositoryg t
=u v
nullw {
){ |
{ 	
_mapper 
= 
mapper 
; 
	_userInfo   
=   
userInfo    
;    !#
_siterDetailsRepository!! #
=!!$ %"
siterDetailsRepository!!& <
;!!< =
_work"" 
="" 
work"" 
;"" 
_enqRepository## 
=## 
enqRepository## *
;##* +
_enquiryService$$ 
=$$ 
enquiryHomeService$$ 0
;$$0 1
_sisFy%% 
=%% 
sisFy%% 
;%% 
}&& 	
public'' 
async'' 
Task'' 
<'' 
IEnumerable'' %
<''% &#
SisterConcernDetailsDTO''& =
>''= >
>''> ?#
AddSisterConcernDetails''@ W
(''W X
List''X \
<''\ ]#
SisterConcernDetailsDTO''] t
>''t u
	SisterDTO''v 
,	'' Ä
CancellationToken
''Å í
token
''ì ò
)
''ò ô
{(( 	
var)) 
checkEnqTempId)) 
=))  
	SisterDTO))! *
.))* +
FirstOrDefault))+ 9
())9 :
x)): ;
=>))< >
x))? @
.))@ A
	EnqtempId))A J
==))K M
null))N R
||))S U
x))V W
.))W X
	EnqtempId))X a
==))b d
$num))e f
)))f g
;))g h
if** 
(** 
checkEnqTempId** 
!=** !
null**" &
)**& '
{++ 
var,, 
tempId,, 
=,, 
await,, "
_enquiryService,,# 2
.,,2 3
AddNewEnqiry,,3 ?
(,,? @
	_userInfo,,@ I
.,,I J
Pan,,J M
,,,M N
token,,O T
),,T U
.,,U V
ConfigureAwait,,V d
(,,d e
false,,e j
),,j k
;,,k l
	SisterDTO-- 
.-- 
ForEach-- !
(--! "
x--" #
=>--$ &
x--' (
.--( )
	EnqtempId--) 2
=--3 4
tempId--5 ;
)--; <
;--< =
}// 
var00 
detailsList00 
=00 
_mapper00 %
.00% &
Map00& )
<00) *
List00* .
<00. /
TblEnqSisDet00/ ;
>00; <
>00< =
(00= >
	SisterDTO00> G
)00G H
;00H I
detailsList11 
.11 
ForEach11 
(11  
x11  !
=>11" $
{22 
x33 
.33 
EnqSisId33 
=33 
$num33 
;33 
x44 
.44 
IsActive44 
=44 
true44 !
;44! "
x55 
.55 
	IsDeleted55 
=55 
false55 #
;55# $
x66 
.66 
	CreatedBy66 
=66 
	_userInfo66 '
.66' (
Pan66( +
;66+ ,
x77 
.77 
CreatedDate77 
=77 
DateTime77  (
.77( )
UtcNow77) /
;77/ 0
x88 
.88 
UniqueId88 
=88 
Guid88 !
.88! "
NewGuid88" )
(88) *
)88* +
.88+ ,
ToString88, 4
(884 5
)885 6
;886 7
}99 
)99 
;99 
var:: 
result:: 
=:: 
await:: #
_siterDetailsRepository:: 6
.::6 7
AddAsync::7 ?
(::? @
detailsList::@ K
,::K L
token::M R
)::R S
.::S T
ConfigureAwait::T b
(::b c
false::c h
)::h i
;::i j
await;; 
_work;; 
.;; 
CommitAsync;; #
(;;# $
token;;$ )
);;) *
.;;* +
ConfigureAwait;;+ 9
(;;9 :
false;;: ?
);;? @
;;;@ A
await<< 
_enquiryService<< !
.<<! "5
)UpdateEnquiryAssociateSisterConcernStatus<<" K
(<<K L
	SisterDTO<<L U
.<<U V
FirstOrDefault<<V d
(<<d e
)<<e f
.<<f g
	EnqtempId<<g p
.<<p q
Value<<q v
,<<v w
false<<x }
,<<} ~
token	<< Ñ
)
<<Ñ Ö
;
<<Ö Ü
return== 
_mapper== 
.== 
Map== 
<== 
List== #
<==# $#
SisterConcernDetailsDTO==$ ;
>==; <
>==< =
(=== >
result==> D
)==D E
;==E F
}>> 	
public@@ 
async@@ 
Task@@ 
<@@ 
bool@@ 
>@@ &
DeleteSisterConcernDetails@@  :
(@@: ;
int@@; >
EnqSisId@@? G
,@@G H
CancellationToken@@I Z
token@@[ `
)@@` a
{AA 	
varBB 
sisterBB 
=BB 
awaitBB #
_siterDetailsRepositoryBB 6
.BB6 7+
FirstOrDefaultByExpressionAsyncBB7 V
(BBV W
xBBW X
=>BBY [
xBB\ ]
.BB] ^
EnqSisIdBB^ f
==BBg i
EnqSisIdBBj r
&&BBs u
xBBv w
.BBw x
IsActive	BBx Ä
==
BBÅ É
true
BBÑ à
&&
BBâ ã
x
BBå ç
.
BBç é
	IsDeleted
BBé ó
==
BBò ö
false
BBõ †
,
BB† °
token
BB¢ ß
)
BBß ®
.
BB® ©
ConfigureAwait
BB© ∑
(
BB∑ ∏
false
BB∏ Ω
)
BBΩ æ
;
BBæ ø
ifCC 
(CC 
sisterCC 
==CC 
nullCC 
)CC 
{DD 
throwEE 
newEE 
ArgumentExceptionEE +
(EE+ ,
$strEE, <
)EE< =
;EE= >
}FF 
sisterHH 
.HH 
IsActiveHH 
=HH 
falseHH #
;HH# $
sisterII 
.II 
	IsDeletedII 
=II 
trueII #
;II# $
sisterJJ 
.JJ 

ModifiedByJJ 
=JJ 
	_userInfoJJ  )
.JJ) *
PanJJ* -
;JJ- .
sisterKK 
.KK 
CreatedDateKK 
=KK  
DateTimeKK! )
.KK) *
UtcNowKK* 0
;KK0 1
awaitMM #
_siterDetailsRepositoryMM )
.MM) *
UpdateAsyncMM* 5
(MM5 6
sisterMM6 <
,MM< =
tokenMM> C
)MMC D
.MMD E
ConfigureAwaitMME S
(MMS T
falseMMT Y
)MMY Z
;MMZ [
awaitNN 
_workNN 
.NN 
CommitAsyncNN #
(NN# $
tokenNN$ )
)NN) *
.NN* +
ConfigureAwaitNN+ 9
(NN9 :
falseNN: ?
)NN? @
;NN@ A
returnOO 
trueOO 
;OO 
}PP 	
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
boolQQ 
>QQ -
!DeleteSisterConcernDetailsByEnqIdQQ  A
(QQA B
intQQB E
	EnqtempIdQQF O
,QQO P
CancellationTokenQQQ b
tokenQQc h
)QQh i
{RR 	
varTT 
sisterConcernListTT !
=TT" #
awaitTT$ )#
_siterDetailsRepositoryTT* A
.TTA B!
FindByExpressionAsyncTTB W
(TTW X
xTTX Y
=>TTZ \
xTT] ^
.TT^ _
	EnqtempIdTT_ h
==TTi k
	EnqtempIdTTl u
&&TTv x
xTTy z
.TTz {
IsActive	TT{ É
==
TTÑ Ü
true
TTá ã
&&
TTå é
x
TTè ê
.
TTê ë
	IsDeleted
TTë ö
==
TTõ ù
false
TTû £
,
TT£ §
token
TT• ™
)
TT™ ´
.
TT´ ¨
ConfigureAwait
TT¨ ∫
(
TT∫ ª
false
TTª ¿
)
TT¿ ¡
;
TT¡ ¬
ifUU 
(UU 
sisterConcernListUU !
.UU! "
CountUU" '
>UU( )
$numUU* +
)UU+ ,
{VV 
sisterConcernListWW !
.WW! "
ForEachWW" )
(WW) *
xWW* +
=>WW, .
{XX 
xYY 
.YY 
IsActiveYY 
=YY  
falseYY! &
;YY& '
xZZ 
.ZZ 
	IsDeletedZZ 
=ZZ  !
trueZZ" &
;ZZ& '
x[[ 
.[[ 

ModifiedBy[[  
=[[! "
	_userInfo[[# ,
.[[, -
Pan[[- 0
;[[0 1
x\\ 
.\\ 
ModifiedDate\\ "
=\\# $
DateTime\\% -
.\\- .
UtcNow\\. 4
;\\4 5
}]] 
)]] 
;]] 
await^^ #
_siterDetailsRepository^^ -
.^^- .
UpdateAsync^^. 9
(^^9 :
sisterConcernList^^: K
,^^K L
token^^M R
)^^R S
.^^S T
ConfigureAwait^^T b
(^^b c
false^^c h
)^^h i
;^^i j
await__ 
_work__ 
.__ 
CommitAsync__ '
(__' (
token__( -
)__- .
.__. /
ConfigureAwait__/ =
(__= >
false__> C
)__C D
;__D E
var`` 
EnqSisId`` 
=`` 
sisterConcernList`` 0
.``0 1
Select``1 7
(``7 8
x``8 9
=>``: <
x``= >
.``> ?
EnqSisId``? G
)``G H
;``H I
varaa 
sisterUListaa 
=aa  !
awaitaa" '
_sisFyaa( .
.aa. /!
FindByExpressionAsyncaa/ D
(aaD E
xaaE F
=>aaG I
EnqSisIdaaJ R
.aaR S
ContainsaaS [
(aa[ \
xaa\ ]
.aa] ^
EnqSisIdaa^ f
)aaf g
&&aah j
xaak l
.aal m
IsActiveaam u
==aav x
trueaay }
&&	aa~ Ä
x
aaÅ Ç
.
aaÇ É
	IsDeleted
aaÉ å
==
aaç è
false
aaê ï
,
aaï ñ
token
aaó ú
)
aaú ù
.
aaù û
ConfigureAwait
aaû ¨
(
aa¨ ≠
false
aa≠ ≤
)
aa≤ ≥
;
aa≥ ¥
ifbb 
(bb 
sisterUListbb 
.bb  
Countbb  %
>bb& '
$numbb( )
)bb) *
{cc 
sisterUListdd 
.dd  
ForEachdd  '
(dd' (
xdd( )
=>dd* ,
{ee 
xff 
.ff 
IsActiveff "
=ff# $
falseff% *
;ff* +
xgg 
.gg 
	IsDeletedgg #
=gg$ %
truegg& *
;gg* +
xhh 
.hh 

ModifiedByhh $
=hh% &
	_userInfohh' 0
.hh0 1
Panhh1 4
;hh4 5
xii 
.ii 
ModifiedDateii &
=ii' (
DateTimeii) 1
.ii1 2
UtcNowii2 8
;ii8 9
}jj 
)jj 
;jj 
awaitkk 
_sisFykk  
.kk  !
UpdateAsynckk! ,
(kk, -
sisterUListkk- 8
,kk8 9
tokenkk: ?
)kk? @
.kk@ A
ConfigureAwaitkkA O
(kkO P
falsekkP U
)kkU V
;kkV W
awaitll 
_workll 
.ll  
CommitAsyncll  +
(ll+ ,
tokenll, 1
)ll1 2
.ll2 3
ConfigureAwaitll3 A
(llA B
falsellB G
)llG H
;llH I
}mm 
}oo 
returnqq 
trueqq 
;qq 
}rr 	
publictt 
asynctt 
Tasktt 
<tt 
Listtt 
<tt #
SisterConcernDetailsDTOtt 6
>tt6 7
>tt7 8'
GetByIdSisterConcernDetailstt9 T
(ttT U
intttU X
	enquiryIdttY b
,ttb c
CancellationTokenttd u
tokenttv {
)tt{ |
{uu 	
varvv 
listvv 
=vv 
awaitvv #
_siterDetailsRepositoryvv 4
.vv4 5!
FindByExpressionAsyncvv5 J
(vvJ K
xvvK L
=>vvM O
xvvP Q
.vvQ R
EnqSisIdvvR Z
==vv[ ]
	enquiryIdvv^ g
&&vvh j
xvvk l
.vvl m
IsActivevvm u
==vvv x
truevvy }
&&	vv~ Ä
x
vvÅ Ç
.
vvÇ É
	IsDeleted
vvÉ å
==
vvç è
false
vvê ï
,
vvï ñ
token
vvó ú
)
vvú ù
.
vvù û
ConfigureAwait
vvû ¨
(
vv¨ ≠
false
vv≠ ≤
)
vv≤ ≥
;
vv≥ ¥
ifww 
(ww 
!ww 
listww 
.ww 
Anyww 
(ww 
)ww 
)ww 
{xx 
throwyy 
newyy 
ArgumentExceptionyy +
(yy+ ,
$stryy, <
)yy< =
;yy= >
}zz 
return{{ 
_mapper{{ 
.{{ 
Map{{ 
<{{ 
List{{ #
<{{# $#
SisterConcernDetailsDTO{{$ ;
>{{; <
>{{< =
({{= >
list{{> B
){{B C
;{{C D
}|| 	
public~~ 
async~~ 
Task~~ 
<~~ 
IEnumerable~~ %
<~~% &#
SisterConcernDetailsDTO~~& =
>~~= >
>~~> ?&
UpdateSisterConcernDetails~~@ Z
(~~Z [
List~~[ _
<~~_ `#
SisterConcernDetailsDTO~~` w
>~~w x
SisterConcernDTO	~~y â
,
~~â ä
CancellationToken
~~ã ú
token
~~ù ¢
)
~~¢ £
{ 	
var
ÄÄ 
enquiry
ÄÄ 
=
ÄÄ 
await
ÄÄ 
_enqRepository
ÄÄ  .
.
ÄÄ. /-
FirstOrDefaultByExpressionAsync
ÄÄ/ N
(
ÄÄN O
x
ÄÄO P
=>
ÄÄQ S
x
ÄÄT U
.
ÄÄU V
	EnqtempId
ÄÄV _
==
ÄÄ` b
SisterConcernDTO
ÄÄc s
[
ÄÄs t
$num
ÄÄt u
]
ÄÄu v
.
ÄÄv w
	EnqtempIdÄÄw Ä
&&ÄÄÅ É
xÄÄÑ Ö
.ÄÄÖ Ü
IsActiveÄÄÜ é
==ÄÄè ë
trueÄÄí ñ
&&ÄÄó ô
xÄÄö õ
.ÄÄõ ú
	IsDeletedÄÄú •
==ÄÄ¶ ®
falseÄÄ© Æ
,ÄÄÆ Ø
tokenÄÄ∞ µ
)ÄÄµ ∂
.ÄÄ∂ ∑
ConfigureAwaitÄÄ∑ ≈
(ÄÄ≈ ∆
falseÄÄ∆ À
)ÄÄÀ Ã
;ÄÄÃ Õ
if
ÅÅ 
(
ÅÅ 
enquiry
ÅÅ 
==
ÅÅ 
null
ÅÅ 
)
ÅÅ  
{
ÇÇ 
throw
ÉÉ 
new
ÉÉ 
ArgumentException
ÉÉ +
(
ÉÉ+ ,
$str
ÉÉ, D
)
ÉÉD E
;
ÉÉE F
}
ÑÑ 
var
ÜÜ 
sisterUList
ÜÜ 
=
ÜÜ 
await
ÜÜ #%
_siterDetailsRepository
ÜÜ$ ;
.
ÜÜ; <-
FirstOrDefaultByExpressionAsync
ÜÜ< [
(
ÜÜ[ \
x
ÜÜ\ ]
=>
ÜÜ^ `
x
ÜÜa b
.
ÜÜb c
EnqSisId
ÜÜc k
==
ÜÜl n
SisterConcernDTO
ÜÜo 
[ÜÜ Ä
$numÜÜÄ Å
]ÜÜÅ Ç
.ÜÜÇ É
EnqSisIdÜÜÉ ã
&&ÜÜå é
xÜÜè ê
.ÜÜê ë
IsActiveÜÜë ô
==ÜÜö ú
trueÜÜù °
&&ÜÜ¢ §
xÜÜ• ¶
.ÜÜ¶ ß
	IsDeletedÜÜß ∞
==ÜÜ± ≥
falseÜÜ¥ π
,ÜÜπ ∫
tokenÜÜª ¿
)ÜÜ¿ ¡
.ÜÜ¡ ¬
ConfigureAwaitÜÜ¬ –
(ÜÜ– —
falseÜÜ— ÷
)ÜÜ÷ ◊
;ÜÜ◊ ÿ
var
áá 
itemtoUpdate
áá 
=
áá 
SisterConcernDTO
áá /
.
áá/ 0
FirstOrDefault
áá0 >
(
áá> ?
)
áá? @
;
áá@ A
sisterUList
àà 
.
àà 

EnqSisName
àà "
=
àà# $
itemtoUpdate
àà% 1
.
àà1 2

EnqSisName
àà2 <
;
àà< =
sisterUList
ââ 
.
ââ 

EnqSisIfsc
ââ "
=
ââ# $
itemtoUpdate
ââ% 1
.
ââ1 2

EnqSisIfsc
ââ2 <
;
ââ< =
sisterUList
ää 
.
ää 
BfacilityCode
ää %
=
ää& '
itemtoUpdate
ää( 4
.
ää4 5
BfacilityCode
ää5 B
;
ääB C
sisterUList
ãã 
.
ãã 
	EnqOutamt
ãã !
=
ãã" #
itemtoUpdate
ãã$ 0
.
ãã0 1
	EnqOutamt
ãã1 :
;
ãã: ;
sisterUList
åå 
.
åå 

EnqDeftamt
åå "
=
åå# $
itemtoUpdate
åå% 1
.
åå1 2

EnqDeftamt
åå2 <
;
åå< =
sisterUList
çç 
.
çç 
	EnqRelief
çç !
=
çç" #
itemtoUpdate
çç$ 0
.
çç0 1
	EnqRelief
çç1 :
;
çç: ;
sisterUList
éé 
.
éé 
EnqOts
éé 
=
éé  
itemtoUpdate
éé! -
.
éé- .
EnqOts
éé. 4
;
éé4 5
var
êê 
sisItem
êê 
=
êê 
await
êê %
_siterDetailsRepository
êê  7
.
êê7 8
UpdateAsync
êê8 C
(
êêC D
sisterUList
êêD O
,
êêO P
token
êêQ V
)
êêV W
.
êêW X
ConfigureAwait
êêX f
(
êêf g
false
êêg l
)
êêl m
;
êêm n
var
ëë 
tblList
ëë 
=
ëë 
new
ëë 
List
ëë "
<
ëë" #
TblEnqSisDet
ëë# /
>
ëë/ 0
(
ëë0 1
)
ëë1 2
;
ëë2 3
tblList
íí 
.
íí 
Add
íí 
(
íí 
sisItem
íí 
)
íí  
;
íí  !
await
ìì 
_work
ìì 
.
ìì 
CommitAsync
ìì #
(
ìì# $
token
ìì$ )
)
ìì) *
.
ìì* +
ConfigureAwait
ìì+ 9
(
ìì9 :
false
ìì: ?
)
ìì? @
;
ìì@ A
return
ïï 
_mapper
ïï 
.
ïï 
Map
ïï 
<
ïï 
List
ïï #
<
ïï# $%
SisterConcernDetailsDTO
ïï$ ;
>
ïï; <
>
ïï< =
(
ïï= >
tblList
ïï> E
)
ïïE F
;
ïïF G
}
ññ 	
}
óó 
}òò ®q
íD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\AssociateSisterConcernDetails\SisterConcernFinancialDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H)
AssociateSisterConcernDetailsH e
{ 
public 

class 0
$SisterConcernFinancialDetailsService 5
:6 7*
ISisterConcernFinancialDetails8 V
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqSfinDet+ 8
>8 9#
_siterDetailsRepository: Q
;Q R
private 
readonly 
IEntityRepository *
<* +
TblEnqSisDet+ 7
>7 8
_enqRepository9 G
;G H
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public 0
$SisterConcernFinancialDetailsService 3
(3 4
IMapper4 ;
mapper< B
,B C
UserInfoD L
userInfoM U
,U V
IEntityRepositoryW h
<h i
TblEnqSfinDeti v
>v w#
siterDetailsRepository	x é
,
é è
IUnitOfWork
ê õ
work
ú †
,
† °
IEntityRepository
¢ ≥
<
≥ ¥
TblEnqSisDet
¥ ¿
>
¿ ¡
enqRepository
¬ œ
=
– —
null
“ ÷
)
÷ ◊
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !#
_siterDetailsRepository #
=$ %"
siterDetailsRepository& <
;< =
_work 
= 
work 
; 
_enqRepository   
=   
enqRepository   *
;  * +
}!! 	
public"" 
async"" 
Task"" 
<"" 
IEnumerable"" %
<""% &,
 SisterConcernFinancialDetailsDTO""& F
>""F G
>""G H,
 AddSisterConcernFinancialDetails""I i
(""i j
List""j n
<""n o-
 SisterConcernFinancialDetailsDTO	""o è
>
""è ê
	SisterDTO
""ë ö
,
""ö õ
CancellationToken
""ú ≠
token
""Æ ≥
)
""≥ ¥
{## 	
var%% 
detailsList%% 
=%% 
_mapper%% %
.%%% &
Map%%& )
<%%) *
List%%* .
<%%. /
TblEnqSfinDet%%/ <
>%%< =
>%%= >
(%%> ?
	SisterDTO%%? H
)%%H I
;%%I J
detailsList'' 
.'' 
ForEach'' 
(''  
x''  !
=>''" $
{(( 
x)) 
.)) 
EnqSisfinId)) 
=)) 
$num))  !
;))! "
x** 
.** 
IsActive** 
=** 
true** !
;**! "
x++ 
.++ 
	IsDeleted++ 
=++ 
false++ #
;++# $
x,, 
.,, 
	CreatedBy,, 
=,, 
	_userInfo,, '
.,,' (
Pan,,( +
;,,+ ,
x-- 
.-- 
CreatedDate-- 
=-- 
DateTime--  (
.--( )
UtcNow--) /
;--/ 0
x.. 
... 
UniqueId.. 
=.. 
Guid.. !
...! "
NewGuid.." )
(..) *
)..* +
...+ ,
ToString.., 4
(..4 5
)..5 6
;..6 7
}// 
)// 
;// 
var11 
result11 
=11 
await11 #
_siterDetailsRepository11 6
.116 7
AddAsync117 ?
(11? @
detailsList11@ K
,11K L
token11M R
)11R S
.11S T
ConfigureAwait11T b
(11b c
false11c h
)11h i
;11i j
await22 
_work22 
.22 
CommitAsync22 #
(22# $
token22$ )
)22) *
.22* +
ConfigureAwait22+ 9
(229 :
false22: ?
)22? @
;22@ A
return33 
_mapper33 
.33 
Map33 
<33 
List33 #
<33# $,
 SisterConcernFinancialDetailsDTO33$ D
>33D E
>33E F
(33F G
result33G M
)33M N
;33N O
}44 	
public66 
async66 
Task66 
<66 
bool66 
>66 /
#DeleteSisterConcernFinancialDetails66  C
(66C D
int66D G
	enquiryId66H Q
,66Q R
CancellationToken66S d
token66e j
)66j k
{77 	
var88 
sister88 
=88 
await88 #
_siterDetailsRepository88 6
.886 7+
FirstOrDefaultByExpressionAsync887 V
(88V W
x88W X
=>88Y [
x88\ ]
.88] ^
EnqSisId88^ f
==88g i
	enquiryId88j s
&&88t v
x88w x
.88x y
IsActive	88y Å
==
88Ç Ñ
true
88Ö â
&&
88ä å
x
88ç é
.
88é è
	IsDeleted
88è ò
==
88ô õ
false
88ú °
,
88° ¢
token
88£ ®
)
88® ©
.
88© ™
ConfigureAwait
88™ ∏
(
88∏ π
false
88π æ
)
88æ ø
;
88ø ¿
if99 
(99 
sister99 
==99 
null99 
)99 
{:: 
throw;; 
new;; 
ArgumentException;; +
(;;+ ,
$str;;, <
);;< =
;;;= >
}<< 
sister>> 
.>> 
IsActive>> 
=>> 
false>> #
;>># $
sister?? 
.?? 
	IsDeleted?? 
=?? 
true?? #
;??# $
sister@@ 
.@@ 

ModifiedBy@@ 
=@@ 
	_userInfo@@  )
.@@) *
Pan@@* -
;@@- .
sisterAA 
.AA 
CreatedDateAA 
=AA  
DateTimeAA! )
.AA) *
UtcNowAA* 0
;AA0 1
awaitCC #
_siterDetailsRepositoryCC )
.CC) *
UpdateAsyncCC* 5
(CC5 6
sisterCC6 <
,CC< =
tokenCC> C
)CCC D
.CCD E
ConfigureAwaitCCE S
(CCS T
falseCCT Y
)CCY Z
;CCZ [
awaitDD 
_workDD 
.DD 
CommitAsyncDD #
(DD# $
tokenDD$ )
)DD) *
.DD* +
ConfigureAwaitDD+ 9
(DD9 :
falseDD: ?
)DD? @
;DD@ A
returnEE 
trueEE 
;EE 
}FF 	
publicHH 
asyncHH 
TaskHH 
<HH 
ListHH 
<HH ,
 SisterConcernFinancialDetailsDTOHH ?
>HH? @
>HH@ A0
$GetByIdSisterConcernFinancialDetailsHHB f
(HHf g
intHHg j
	enquiryIdHHk t
,HHt u
CancellationToken	HHv á
token
HHà ç
)
HHç é
{II 	
varJJ 
listJJ 
=JJ 
awaitJJ #
_siterDetailsRepositoryJJ 4
.JJ4 5)
FindByMatchingPropertiesAsyncJJ5 R
(KK 
tokenKK 
,KK 
xKK 
=>KK 
xKK 
.KK 
EnqSisIdKK '
==KK( *
	enquiryIdKK+ 4
&&KK5 7
xKK8 9
.KK9 :
IsActiveKK: B
==KKC E
trueKKF J
&&KKK M
xKKN O
.KKO P
	IsDeletedKKP Y
==KKZ \
falseKK] b
,KKb c
sisFLL 
=>LL 
sisFLL 
.LL 
EnqSisLL #
,LL# $
finMM 
=>MM 
finMM 
.MM !
FinyearCodeNavigationMM 0
,MM0 1
ficompoNN 
=>NN 
ficompoNN "
.NN" #
FincompCdNavigationNN# 6
)OO 
.OO 
ConfigureAwaitOO  
(OO  !
falseOO! &
)OO& '
;OO' (
returnQQ 
_mapperQQ 
.QQ 
MapQQ 
<QQ 
ListQQ #
<QQ# $,
 SisterConcernFinancialDetailsDTOQQ$ D
>QQD E
>QQE F
(QQF G
listQQG K
)QQK L
;QQL M
}RR 	
publicTT 
TaskTT 
<TT ,
 SisterConcernFinancialDetailsDTOTT 4
>TT4 50
$GetBySisterIdConcernFinancialDetailsTT6 Z
(TTZ [
intTT[ ^
sisterIdTT_ g
,TTg h
CancellationTokenTTi z
token	TT{ Ä
)
TTÄ Å
{UU 	
throwVV 
newVV #
NotImplementedExceptionVV -
(VV- .
)VV. /
;VV/ 0
}WW 	
publicYY 
asyncYY 
TaskYY 
<YY 
IEnumerableYY %
<YY% &,
 SisterConcernFinancialDetailsDTOYY& F
>YYF G
>YYG H/
#UpdateSisterConcernFinancialDetailsYYI l
(YYl m
ListYYm q
<YYq r-
 SisterConcernFinancialDetailsDTO	YYr í
>
YYí ì
SisterConcernDTO
YYî §
,
YY§ •
CancellationToken
YY¶ ∑
token
YY∏ Ω
)
YYΩ æ
{ZZ 	
var[[ 

enquirySis[[ 
=[[ 
await[[ "
_enqRepository[[# 1
.[[1 2!
FindByExpressionAsync[[2 G
([[G H
x[[H I
=>[[J L
x[[M N
.[[N O
	EnqtempId[[O X
==[[Y [
SisterConcernDTO[[\ l
[[[l m
$num[[m n
][[n o
.[[o p
	EnqtempId[[p y
,[[y z
token	[[{ Ä
)
[[Ä Å
.
[[Å Ç
ConfigureAwait
[[Ç ê
(
[[ê ë
false
[[ë ñ
)
[[ñ ó
;
[[ó ò
var\\ 
EnqSisId\\ 
=\\ 

enquirySis\\ %
.\\% &
Select\\& ,
(\\, -
x\\- .
=>\\/ 1
x\\2 3
.\\3 4
EnqSisId\\4 <
)\\< =
;\\= >
var]] 
sisterUList]] 
=]] 
await]] ##
_siterDetailsRepository]]$ ;
.]]; <!
FindByExpressionAsync]]< Q
(]]Q R
x]]R S
=>]]T V
EnqSisId]]W _
.]]_ `
Contains]]` h
(]]h i
x]]i j
.]]j k
EnqSisId]]k s
)]]s t
&&]]u w
x]]x y
.]]y z
IsActive	]]z Ç
==
]]É Ö
true
]]Ü ä
&&
]]ã ç
x
]]é è
.
]]è ê
	IsDeleted
]]ê ô
==
]]ö ú
false
]]ù ¢
,
]]¢ £
token
]]§ ©
)
]]© ™
.
]]™ ´
ConfigureAwait
]]´ π
(
]]π ∫
false
]]∫ ø
)
]]ø ¿
;
]]¿ ¡
sisterUList^^ 
.^^ 
ForEach^^ 
(^^  
x^^  !
=>^^" $
{__ 
x`` 
.`` 
IsActive`` 
=`` 
false`` "
;``" #
xaa 
.aa 
	IsDeletedaa 
=aa 
trueaa "
;aa" #
xbb 
.bb 

ModifiedBybb 
=bb 
	_userInfobb (
.bb( )
Panbb) ,
;bb, -
xcc 
.cc 
ModifiedDatecc 
=cc  
DateTimecc! )
.cc) *
UtcNowcc* 0
;cc0 1
}dd 
)dd 
;dd 
awaitee #
_siterDetailsRepositoryee )
.ee) *
UpdateAsyncee* 5
(ee5 6
sisterUListee6 A
,eeA B
tokeneeC H
)eeH I
.eeI J
ConfigureAwaiteeJ X
(eeX Y
falseeeY ^
)ee^ _
;ee_ `
vargg 

sisterListgg 
=gg 
_mappergg $
.gg$ %
Mapgg% (
<gg( )
Listgg) -
<gg- .
TblEnqSfinDetgg. ;
>gg; <
>gg< =
(gg= >
SisterConcernDTOgg> N
)ggN O
;ggO P

sisterListii 
.ii 
ForEachii 
(ii 
xii  
=>ii! #
{jj 
xkk 
.kk 
EnqSisfinIdkk 
=kk 
$numkk  !
;kk! "
xll 
.ll 
IsActivell 
=ll 
truell !
;ll! "
xmm 
.mm 
	IsDeletedmm 
=mm 
falsemm #
;mm# $
xnn 
.nn 
	CreatedBynn 
=nn 
	_userInfonn '
.nn' (
Pannn( +
;nn+ ,
xoo 
.oo 
CreatedDateoo 
=oo 
DateTimeoo  (
.oo( )
UtcNowoo) /
;oo/ 0
xpp 
.pp 
UniqueIdpp 
=pp 
Guidpp !
.pp! "
NewGuidpp" )
(pp) *
)pp* +
.pp+ ,
ToStringpp, 4
(pp4 5
)pp5 6
;pp6 7
}qq 
)qq 
;qq 
varss 
datass 
=ss 
awaitss #
_siterDetailsRepositoryss 4
.ss4 5
AddAsyncss5 =
(ss= >

sisterListss> H
,ssH I
tokenssJ O
)ssO P
.ssP Q
ConfigureAwaitssQ _
(ss_ `
falsess` e
)sse f
;ssf g
awaittt 
_worktt 
.tt 
CommitAsynctt #
(tt# $
tokentt$ )
)tt) *
.tt* +
ConfigureAwaittt+ 9
(tt9 :
falsett: ?
)tt? @
;tt@ A
returnuu 
_mapperuu 
.uu 
Mapuu 
<uu 
Listuu #
<uu# $,
 SisterConcernFinancialDetailsDTOuu$ D
>uuD E
>uuE F
(uuF G
datauuG K
)uuK L
;uuL M
}vv 	
}ww 
}xx ›¥
bD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\EnquiryHomeService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
{ 
public 

class 
EnquiryHomeService #
:$ %
IEnquiryHomeService& 9
{   
private!! 
readonly!! 
IEntityRepository!! *
<!!* +
TblEnqGuarDet!!+ 8
>!!8 9 
_guarantorRepository!!: N
;!!N O
private"" 
readonly"" 
IEntityRepository"" *
<""* +
TblEnqPromDet""+ 8
>""8 9
_promoterRepository"": M
;""M N
private## 
readonly## 
IEntityRepository## *
<##* +
TblEnqTemptab##+ 8
>##8 9
_enqRepository##: H
;##H I
private$$ 
readonly$$ 
IEntityRepository$$ *
<$$* +
TblEnqPjmfDet$$+ 8
>$$8 9$
_enqMeansOfFinRepository$$: R
;$$R S
private%% 
readonly%% 
IEntityRepository%% *
<%%* +
TblEnqPjfinDet%%+ 9
>%%9 : 
_financialRepository%%; O
;%%O P
private&& 
readonly&& 
IEntityRepository&& *
<&&* +
TblEnqPjcostDet&&+ :
>&&: ;"
_projectCostRepository&&< R
;&&R S
private'' 
readonly'' 
IEntityRepository'' *
<''* +
TblEnqDocument''+ 9
>''9 :
_documentRepository''; N
;''N O
private(( 
readonly(( 
IEntityRepository(( *
<((* +
TblEnqTemptab((+ 8
>((8 9#
_basicDetailsRepository((: Q
;((Q R
private)) 
readonly)) 
IEntityRepository)) *
<))* +
TblEnqSecDet))+ 7
>))7 8
_securityRepository))9 L
;))L M
private** 
readonly** 
IEntityRepository** *
<*** + 
TblBankfacilityCdtab**+ ?
>**? @!
_tblBankfacilityCdtab**A V
;**V W
private++ 
readonly++ *
ISisterConcernFinancialDetails++ 7
_enqSisFinService++8 I
;++I J
private,, 
readonly,, 
IEntityRepository,, *
<,,* +
TblDomiCdtab,,+ 7
>,,7 8
_tblDomiCdtab,,9 F
;,,F G
private-- 
readonly-- 
IBasicDetails-- &
_basicDetails--' 4
;--4 5
private.. 
readonly.. 
ICommonService.. '
_commonDetails..( 6
;..6 7
private// 
readonly// 
IUnitOfWork// $
_work//% *
;//* +
private00 
readonly00 
IEntityRepository00 *
<00* +
	EnqAckDet00+ 4
>004 5 
_enqackdetRepository006 J
;00J K
private11 
readonly11 
UserInfo11 !
	_userInfo11" +
;11+ ,
private22 
readonly22 
IMapper22  
_mapper22! (
;22( )
private33 
readonly33 
ISmsService33 $
_smsService33% 0
;330 1
private44 
readonly44 
IEmailService44 &
_emailService44' 4
;444 5
public55 
EnquiryHomeService55 !
(55! "
IEntityRepository55" 3
<553 4
TblEnqTemptab554 A
>55A B
enqRepository55C P
,55P Q
UserInfo66 
userInfo66 
,66 
IMapper66 &
mapper66' -
=66. /
null660 4
,664 5
IBasicDetails77 
basicDetails77 &
=77' (
null77) -
,77- .
IEntityRepository88 
<88 
TblEnqPromDet88 +
>88+ ,
promoterRepository88- ?
=88@ A
null88B F
,88F G
IEntityRepository99 
<99 
TblEnqGuarDet99 +
>99+ ,
guarantorRepository99- @
=99A B
null99C G
,99G H*
ISisterConcernFinancialDetails:: *
enqSisFinService::+ ;
=::< =
null::> B
,::B C
IEntityRepository;; 
<;; 
TblEnqPjmfDet;; +
>;;+ ,#
enqMeansOfFinRepository;;- D
=;;E F
null;;G K
,;;K L
IEntityRepository<< 
<<< 
TblEnqPjfinDet<< ,
><<, -
financialRepository<<. A
=<<B C
null<<D H
,<<H I
IEntityRepository== 
<== 
TblEnqPjcostDet== -
>==- .!
projectCostRepository==/ D
===E F
null==G K
,==K L
IEntityRepository>> 
<>> 
TblEnqDocument>> ,
>>>, -
documentRepository>>. @
=>>A B
null>>C G
,>>G H
IUnitOfWork?? 
work?? 
=?? 
null?? #
,??# $
ICommonService@@ 
commonDetails@@ (
=@@) *
null@@+ /
,@@/ 0
IEntityRepositoryAA 
<AA 
TblEnqTemptabAA +
>AA+ ,"
basicDetailsRepositoryAA- C
=AAD E
nullAAF J
,AAJ K
IEntityRepositoryBB 
<BB 
TblEnqSecDetBB *
>BB* +
securityRepositoryBB, >
=BB? @
nullBBA E
,BBE F
IEntityRepositoryCC 
<CC  
TblBankfacilityCdtabCC 2
>CC2 3 
TblBankfacilityCdtabCC4 H
=CCI J
nullCCK O
,CCO P
IEntityRepositoryEE 
<EE 
TblDomiCdtabEE *
>EE* +
tblDomiCdtabEE, 8
=EE9 :
nullEE; ?
,EE? @
ISmsServiceEEA L

smsServiceEEM W
=EEX Y
nullEEZ ^
,EE^ _
IEmailServiceEE` m
emailServiceEEn z
=EE{ |
null	EE} Å
,
EEÅ Ç
IEntityRepository
EEÉ î
<
EEî ï
	EnqAckDet
EEï û
>
EEû ü!
enqackdetRepository
EE† ≥
=
EE¥ µ
null
EE∂ ∫
)
EE∫ ª
{FF 	 
_enqackdetRepositoryGG  
=GG! "
enqackdetRepositoryGG# 6
;GG6 7
_enqRepositoryHH 
=HH 
enqRepositoryHH *
;HH* +
	_userInfoII 
=II 
userInfoII  
;II  !
_mapperJJ 
=JJ 
mapperJJ 
;JJ 
_basicDetailsKK 
=KK 
basicDetailsKK (
;KK( )
_promoterRepositoryLL 
=LL  !
promoterRepositoryLL" 4
;LL4 5 
_guarantorRepositoryMM  
=MM! "
guarantorRepositoryMM# 6
;MM6 7
_enqSisFinServiceNN 
=NN 
enqSisFinServiceNN  0
;NN0 1$
_enqMeansOfFinRepositoryOO $
=OO% &#
enqMeansOfFinRepositoryOO' >
;OO> ? 
_financialRepositoryPP  
=PP! "
financialRepositoryPP# 6
;PP6 7"
_projectCostRepositoryQQ "
=QQ# $!
projectCostRepositoryQQ% :
;QQ: ;
_documentRepositoryRR 
=RR  !
documentRepositoryRR" 4
;RR4 5
_workSS 
=SS 
workSS 
;SS 
_commonDetailsTT 
=TT 
commonDetailsTT *
;TT* +#
_basicDetailsRepositoryUU #
=UU$ %"
basicDetailsRepositoryUU& <
;UU< =
_securityRepositoryVV 
=VV  !
securityRepositoryVV" 4
;VV4 5!
_tblBankfacilityCdtabWW !
=WW" # 
TblBankfacilityCdtabWW$ 8
;WW8 9
_smsServiceXX 
=XX 

smsServiceXX $
;XX$ %
_emailServiceYY 
=YY 
emailServiceYY (
;YY( )
}ZZ 	
public\\ 
async\\ 
Task\\ 
<\\ 
bool\\ 
>\\ 
DeleteEnquiryAsync\\  2
(\\2 3
int\\3 6
	enquiryId\\7 @
,\\@ A
CancellationToken\\B S
token\\T Y
)\\Y Z
{]] 	
var^^ 
enquiry^^ 
=^^ 
await^^ 
_enqRepository^^  .
.__% &7
+FindByFirstOrDefalutMatchingPropertiesAsync__& Q
(__Q R
token__R W
,__W X
x__Y Z
=>__[ ]
x__^ _
.___ `
	EnqtempId__` i
==__j l
	enquiryId__m v
&&``( *
x``+ ,
.``, -
IsActive``- 5
==``6 8
true``9 =
&&``> @
x``A B
.``B C
	IsDeleted``C L
==``M O
false``P U
)``U V
.aa% &
ConfigureAwaitaa& 4
(aa4 5
falseaa5 :
)aa: ;
;aa; <
ifbb 
(bb 
enquirybb 
==bb 
nullbb 
)bb  
{cc 
throwdd 
newdd 
ArgumentExceptiondd +
(dd+ ,
$strdd, ;
)dd; <
;dd< =
}ee 
enquirygg 
.gg 
	IsDeletedgg 
=gg 
truegg  $
;gg$ %
enquiryhh 
.hh 
IsActivehh 
=hh 
falsehh $
;hh$ %
enquiryii 
.ii 

ModifiedByii 
=ii  
	_userInfoii! *
.ii* +
UserIdii+ 1
;ii1 2
enquiryjj 
.jj 
ModifiedDatejj  
=jj! "
DateTimejj# +
.jj+ ,
UtcNowjj, 2
;jj2 3
awaitll 
_enqRepositoryll  
.ll  !
UpdateAsyncll! ,
(ll, -
enquiryll- 4
,ll4 5
tokenll6 ;
)ll; <
.ll< =
ConfigureAwaitll= K
(llK L
falsellL Q
)llQ R
;llR S
awaitmm 
_workmm 
.mm 
CommitAsyncmm #
(mm# $
tokenmm$ )
)mm) *
.mm* +
ConfigureAwaitmm+ 9
(mm9 :
falsemm: ?
)mm? @
;mm@ A
returnnn 
truenn 
;nn 
}oo 	
publicpp 
asyncpp 
Taskpp 
<pp 
boolpp 
>pp 
UpdateEnquiryStatuspp  3
(pp3 4
intpp4 7
	enquiryIdpp8 A
,ppA B
intppC F
	EnqStatusppG P
,ppP Q
CancellationTokenppR c
tokenppd i
)ppi j
{qq 	
varrr 
enquiryrr 
=rr 
awaitrr 
_enqRepositoryrr  .
.ss% &7
+FindByFirstOrDefalutMatchingPropertiesAsyncss& Q
(ssQ R
tokenssR W
,ssW X
xssY Z
=>ss[ ]
xss^ _
.ss_ `
	EnqtempIdss` i
==ssj l
	enquiryIdssm v
&&tt( *
xtt+ ,
.tt, -
IsActivett- 5
==tt6 8
truett9 =
&&tt> @
xttA B
.ttB C
	IsDeletedttC L
==ttM O
falsettP U
)ttU V
.uu% &
ConfigureAwaituu& 4
(uu4 5
falseuu5 :
)uu: ;
;uu; <
ifvv 
(vv 
enquiryvv 
==vv 
nullvv 
)vv  
{ww 
throwxx 
newxx 
ArgumentExceptionxx +
(xx+ ,
$strxx, ;
)xx; <
;xx< =
}yy 
enquiry|| 
.|| 

ModifiedBy|| 
=||  
	_userInfo||! *
.||* +
UserId||+ 1
;||1 2
enquiry}} 
.}} 
ModifiedDate}}  
=}}! "
DateTime}}# +
.}}+ ,
UtcNow}}, 2
;}}2 3
enquiry~~ 
.~~ 
	EnqStatus~~ 
=~~ 
	EnqStatus~~  )
;~~) *
await 
_enqRepository  
.  !
UpdateAsync! ,
(, -
enquiry- 4
,4 5
token6 ;
); <
.< =
ConfigureAwait= K
(K L
falseL Q
)Q R
;R S
await
ÄÄ 
_work
ÄÄ 
.
ÄÄ 
CommitAsync
ÄÄ #
(
ÄÄ# $
token
ÄÄ$ )
)
ÄÄ) *
.
ÄÄ* +
ConfigureAwait
ÄÄ+ 9
(
ÄÄ9 :
false
ÄÄ: ?
)
ÄÄ? @
;
ÄÄ@ A
if
ÉÉ 
(
ÉÉ 
	EnqStatus
ÉÉ 
==
ÉÉ 
(
ÉÉ 
int
ÉÉ !
)
ÉÉ! "
KAR
ÉÉ" %
.
ÉÉ% &
KSFC
ÉÉ& *
.
ÉÉ* +

Components
ÉÉ+ 5
.
ÉÉ5 6
Common
ÉÉ6 <
.
ÉÉ< =
Dto
ÉÉ= @
.
ÉÉ@ A
Enums
ÉÉA F
.
ÉÉF G
	EnqStatus
ÉÉG P
.
ÉÉP Q
Acknowledge
ÉÉQ \
)
ÉÉ\ ]
{
ÑÑ 
await
ÖÖ "
UpdateEnqAckDetTable
ÖÖ )
(
ÖÖ) *
enquiry
ÖÖ* 1
,
ÖÖ1 2
token
ÖÖ3 8
)
ÖÖ8 9
;
ÖÖ9 :
}
áá 
return
àà 
true
àà 
;
àà 
}
ââ 	
private
ää 
async
ää 
Task
ää "
UpdateEnqAckDetTable
ää /
(
ää/ 0
TblEnqTemptab
ää0 =
enquiry
ää> E
,
ääE F
CancellationToken
ääG X
token
ääY ^
)
ää^ _
{
ãã 	
var
åå 
ack_det
åå 
=
åå 
await
åå "
_enqackdetRepository
åå  4
.
åå4 59
+FindByFirstOrDefalutMatchingPropertiesAsync
åå5 `
(
åå` a
token
ååa f
,
ååf g
x
ååh i
=>
ååj l
x
ååm n
.
åån o
EnqRefNo
ååo w
==
ååx z
enquiryåå{ Ç
.ååÇ É
EnqRefNoååÉ ã
)ååã å
;ååå ç
if
çç 
(
çç 
ack_det
çç 
!=
çç 
null
çç 
)
çç  
{
éé 
ack_det
èè 
.
èè 
EmpId
èè 
=
èè 
	_userInfo
èè  )
.
èè) *
UserId
èè* 0
;
èè0 1
ack_det
êê 
.
êê 
EnqRefNo
êê  
=
êê! "
enquiry
êê# *
.
êê* +
EnqRefNo
êê+ 3
;
êê3 4
ack_det
ëë 
.
ëë 

EnqAckDate
ëë "
=
ëë# $
DateTime
ëë% -
.
ëë- .
Now
ëë. 1
;
ëë1 2
await
íí "
_enqackdetRepository
íí *
.
íí* +
UpdateAsync
íí+ 6
(
íí6 7
ack_det
íí7 >
,
íí> ?
token
íí@ E
)
ííE F
.
ííF G
ConfigureAwait
ííG U
(
ííU V
false
ííV [
)
íí[ \
;
íí\ ]
}
ìì 
else
îî 
{
ïï 
var
ññ 
item
ññ 
=
ññ 
new
ññ 
	EnqAckDet
ññ (
{
óó 
EmpId
òò 
=
òò 
	_userInfo
òò %
.
òò% &
UserId
òò& ,
,
òò, -
EnqRefNo
ôô 
=
ôô 
enquiry
ôô &
.
ôô& '
EnqRefNo
ôô' /
,
ôô/ 0

EnqAckDate
öö 
=
öö  
DateTime
öö! )
.
öö) *
Now
öö* -
}
õõ 
;
õõ 
await
úú "
_enqackdetRepository
úú *
.
úú* +
AddAsync
úú+ 3
(
úú3 4
item
úú4 8
,
úú8 9
token
úú: ?
)
úú? @
.
úú@ A
ConfigureAwait
úúA O
(
úúO P
false
úúP U
)
úúU V
;
úúV W
}
ûû 
await
üü 
_work
üü 
.
üü 
CommitAsync
üü #
(
üü# $
token
üü$ )
)
üü) *
.
üü* +
ConfigureAwait
üü+ 9
(
üü9 :
false
üü: ?
)
üü? @
;
üü@ A
}
†† 	
public
°° 
async
°° 
Task
°° 
<
°° 
IEnumerable
°° %
<
°°% &
EnquirySummary
°°& 4
>
°°4 5
>
°°5 6 
GetAllEnquiryAsync
°°7 I
(
°°I J
CancellationToken
°°J [
token
°°\ a
)
°°a b
{
¢¢ 	
var
££ 
data
££ 
=
££ 
await
££ %
_basicDetailsRepository
££ 4
.
££4 5+
FindByMatchingPropertiesAsync
££5 R
(
££R S
token
££S X
,
££X Y
x
££Z [
=>
££\ ^
x
££_ `
.
££` a
IsActive
££a i
==
££j l
true
££m q
&&
§§0 2
x
§§3 4
.
§§4 5
	IsDeleted
§§5 >
==
§§? A
false
§§B G
&&
§§H J
x
§§K L
.
§§L M
PromPan
§§M T
==
§§U W
	_userInfo
§§X a
.
§§a b
Pan
§§b e
)
§§e f
.
§§f g
ConfigureAwait
§§g u
(
§§u v
false
§§v {
)
§§{ |
;
§§| }
var
•• 

filterData
•• 
=
•• 
data
•• !
.
••! "
Select
••" (
(
••( )
x
••) *
=>
••+ -
new
••. 1
EnquirySummary
••2 @
{
¶¶ 
	EnquiryId
ßß 
=
ßß 
x
ßß 
.
ßß 
	EnqtempId
ßß '
,
ßß' (
PromotorPan
®® 
=
®® 
x
®® 
.
®®  
PromPan
®®  '
,
®®' (
	EnqStatus
©© 
=
©© 
x
©© 
.
©© 
	EnqStatus
©© '
,
©©' (
EnqInitiateDate
™™ 
=
™™  !
x
™™" #
.
™™# $
EnqInitDate
™™$ /
,
™™/ 0
EnqSubmitDate
´´ 
=
´´ 
x
´´  !
.
´´! "
EnqSubmitDate
´´" /
}
¨¨ 
)
¨¨ 
;
¨¨ 
return
≠≠ 

filterData
≠≠ 
.
≠≠ 
OrderByDescending
≠≠ /
(
≠≠/ 0
x
≠≠0 1
=>
≠≠2 4
x
≠≠5 6
.
≠≠6 7
	EnquiryId
≠≠7 @
)
≠≠@ A
.
≠≠A B
ToList
≠≠B H
(
≠≠H I
)
≠≠I J
;
≠≠J K
}
∞∞ 	
public
±± 
async
±± 
Task
±± 
<
±± 
IEnumerable
±± %
<
±±% &
EnquirySummary
±±& 4
>
±±4 5
>
±±5 6*
GetAllEnquiriesForAdminAsync
±±7 S
(
±±S T
CancellationToken
±±T e
token
±±f k
)
±±k l
{
≤≤ 	
var
≥≥ 
data
≥≥ 
=
≥≥ 
await
≥≥ %
_basicDetailsRepository
≥≥ 4
.
≥≥4 5+
FindByMatchingPropertiesAsync
≥≥5 R
(
≥≥R S
token
≥≥S X
,
≥≥X Y
x
≥≥Z [
=>
≥≥\ ^
x
≥≥_ `
.
≥≥` a
IsActive
≥≥a i
==
≥≥j l
true
≥≥m q
&&
≥≥r t
x
≥≥u v
.
≥≥v w
	EnqStatus≥≥w Ä
!=≥≥Å É
(≥≥Ñ Ö
int≥≥Ö à
)≥≥à â
	EnqStatus≥≥â í
.≥≥í ì
Draft≥≥ì ò
&&
¥¥0 2
x
¥¥3 4
.
¥¥4 5
	IsDeleted
¥¥5 >
==
¥¥? A
false
¥¥B G
)
¥¥G H
.
¥¥H I
ConfigureAwait
¥¥I W
(
¥¥W X
false
¥¥X ]
)
¥¥] ^
;
¥¥^ _
var
µµ 

filterData
µµ 
=
µµ 
data
µµ !
.
µµ! "
Select
µµ" (
(
µµ( )
x
µµ) *
=>
µµ+ -
new
µµ. 1
EnquirySummary
µµ2 @
{
∂∂ 
	EnquiryId
∑∑ 
=
∑∑ 
x
∑∑ 
.
∑∑ 
	EnqtempId
∑∑ '
,
∑∑' (
PromotorPan
∏∏ 
=
∏∏ 
x
∏∏ 
.
∏∏  
PromPan
∏∏  '
,
∏∏' (
	EnqStatus
ππ 
=
ππ 
x
ππ 
.
ππ 
	EnqStatus
ππ '
,
ππ' (
EnqInitiateDate
∫∫ 
=
∫∫  !
x
∫∫" #
.
∫∫# $
EnqInitDate
∫∫$ /
,
∫∫/ 0
EnqSubmitDate
ªª 
=
ªª 
x
ªª  !
.
ªª! "
EnqSubmitDate
ªª" /
}
ºº 
)
ºº 
;
ºº 
return
ΩΩ 

filterData
ΩΩ 
.
ΩΩ 
OrderByDescending
ΩΩ /
(
ΩΩ/ 0
x
ΩΩ0 1
=>
ΩΩ2 4
x
ΩΩ5 6
.
ΩΩ6 7
	EnquiryId
ΩΩ7 @
)
ΩΩ@ A
.
ΩΩA B
ToList
ΩΩB H
(
ΩΩH I
)
ΩΩI J
;
ΩΩJ K
}
øø 	
public
«« 
async
«« 
Task
«« 
<
«« 

EnquiryDTO
«« $
>
««$ %!
GetEnquiryByIdAsync
««& 9
(
««9 :
int
««: =
Id
««> @
,
««@ A
CancellationToken
««B S
token
««T Y
)
««Y Z
{
»» 	
var
…… 
data
…… 
=
…… 
await
…… 
_enqRepository
…… +
.
……+ ,9
+FindByFirstOrDefalutMatchingPropertiesAsync
……, W
(
……W X
token
……X ]
,
……] ^
x
……_ `
=>
……a c
x
……d e
.
……e f
IsActive
……f n
==
……o q
true
……r v
&&
……w y
x
……z {
.
……{ |
	IsDeleted……| Ö
==……Ü à
false……â é
&&……è ë
x……í ì
.……ì î
	EnqtempId……î ù
==……û †
Id……° £
,……£ §
incBank
    '
=>
  ( *
incBank
  + 2
.
  2 3
TblEnqBankDets
  3 A
.
  A B
Where
  B G
(
  G H
x
  H I
=>
  J L
x
  M N
.
  N O
IsActive
  O W
==
  X Z
true
  [ _
&&
  ` b
x
  c d
.
  d e
	IsDeleted
  e n
==
  o q
false
  r w
)
  w x
,
  x y

incAddress
ÀÀ  *
=>
ÀÀ+ -

incAddress
ÀÀ. 8
.
ÀÀ8 9
TblEnqAddressDets
ÀÀ9 J
.
ÀÀJ K
Where
ÀÀK P
(
ÀÀP Q
x
ÀÀQ R
=>
ÀÀS U
x
ÀÀV W
.
ÀÀW X
IsActive
ÀÀX `
==
ÀÀa c
true
ÀÀd h
&&
ÀÀi k
x
ÀÀl m
.
ÀÀm n
	IsDeleted
ÀÀn w
==
ÀÀx z
falseÀÀ{ Ä
)ÀÀÄ Å
,ÀÀÅ Ç
incReg
ÃÃ  &
=>
ÃÃ' )
incReg
ÃÃ* 0
.
ÃÃ0 1
TblEnqRegnoDets
ÃÃ1 @
.
ÃÃ@ A
Where
ÃÃA F
(
ÃÃF G
x
ÃÃG H
=>
ÃÃI K
x
ÃÃL M
.
ÃÃM N
IsActive
ÃÃN V
==
ÃÃW Y
true
ÃÃZ ^
&&
ÃÃ_ a
x
ÃÃb c
.
ÃÃc d
	IsDeleted
ÃÃd m
==
ÃÃn p
false
ÃÃq v
)
ÃÃv w
,
ÃÃw x
incProm
ÕÕ  '
=>
ÕÕ( *
incProm
ÕÕ+ 2
.
ÕÕ2 3
TblEnqPromDets
ÕÕ3 A
.
ÕÕA B
Where
ÕÕB G
(
ÕÕG H
x
ÕÕH I
=>
ÕÕJ L
x
ÕÕM N
.
ÕÕN O
IsActive
ÕÕO W
==
ÕÕX Z
true
ÕÕ[ _
&&
ÕÕ` b
x
ÕÕc d
.
ÕÕd e
	IsDeleted
ÕÕe n
==
ÕÕo q
false
ÕÕr w
)
ÕÕw x
,
ÕÕx y
incPBank
ŒŒ  (
=>
ŒŒ) +
incPBank
ŒŒ, 4
.
ŒŒ4 5
TblEnqPbankDets
ŒŒ5 D
.
ŒŒD E
Where
ŒŒE J
(
ŒŒJ K
x
ŒŒK L
=>
ŒŒM O
x
ŒŒP Q
.
ŒŒQ R
IsActive
ŒŒR Z
==
ŒŒ[ ]
true
ŒŒ^ b
&&
ŒŒc e
x
ŒŒf g
.
ŒŒg h
	IsDeleted
ŒŒh q
==
ŒŒr t
false
ŒŒu z
)
ŒŒz {
,
ŒŒ{ |
	incPAsset
œœ  )
=>
œœ* ,
	incPAsset
œœ- 6
.
œœ6 7
TblEnqPassetDets
œœ7 G
.
œœG H
Where
œœH M
(
œœM N
x
œœN O
=>
œœP R
x
œœS T
.
œœT U
IsActive
œœU ]
==
œœ^ `
true
œœa e
&&
œœf h
x
œœi j
.
œœj k
	IsDeleted
œœk t
==
œœu w
false
œœx }
)
œœ} ~
,
œœ~ 
incPliability
––  -
=>
––. 0
incPliability
––1 >
.
––> ?
TblEnqPliabDets
––? N
.
––N O
Where
––O T
(
––T U
x
––U V
=>
––W Y
x
––Z [
.
––[ \
IsActive
––\ d
==
––e g
true
––h l
&&
––m o
x
––p q
.
––q r
	IsDeleted
––r {
==
––| ~
false–– Ñ
)––Ñ Ö
,––Ö Ü
incPnw
——  &
=>
——' )
incPnw
——* 0
.
——0 1
TblEnqPnwDets
——1 >
.
——> ?
Where
——? D
(
——D E
x
——E F
=>
——G I
x
——J K
.
——K L
IsActive
——L T
==
——U W
true
——X \
&&
——] _
x
——` a
.
——a b
	IsDeleted
——b k
==
——l n
false
——o t
)
——t u
,
——u v
incGuar
““  '
=>
““( *
incGuar
““+ 2
.
““2 3
TblEnqGuarDets
““3 A
.
““A B
Where
““B G
(
““G H
x
““H I
=>
““J L
x
““M N
.
““N O
IsActive
““O W
==
““X Z
true
““[ _
&&
““` b
x
““c d
.
““d e
	IsDeleted
““e n
==
““o q
false
““r w
)
““w x
,
““x y
incGBank
””  (
=>
””) +
incGBank
””, 4
.
””4 5
TblEnqGbankDets
””5 D
.
””D E
Where
””E J
(
””J K
x
””K L
=>
””M O
x
””P Q
.
””Q R
IsActive
””R Z
==
””[ ]
true
””^ b
&&
””c e
x
””f g
.
””g h
	IsDeleted
””h q
==
””r t
false
””u z
)
””z {
,
””{ |
	incGuaLia
‘‘  )
=>
‘‘* ,
	incGuaLia
‘‘- 6
.
‘‘6 7
TblEnqGliabDets
‘‘7 F
.
‘‘F G
Where
‘‘G L
(
‘‘L M
x
‘‘M N
=>
‘‘O Q
x
‘‘R S
.
‘‘S T
IsActive
‘‘T \
==
‘‘] _
true
‘‘` d
&&
‘‘e g
x
‘‘h i
.
‘‘i j
	IsDeleted
‘‘j s
==
‘‘t v
false
‘‘w |
)
‘‘| }
,
‘‘} ~
incGuaNw
’’  (
=>
’’) +
incGuaNw
’’, 4
.
’’4 5
TblEnqGnwDets
’’5 B
.
’’B C
Where
’’C H
(
’’H I
x
’’I J
=>
’’K M
x
’’N O
.
’’O P
IsActive
’’P X
==
’’Y [
true
’’\ `
&&
’’a c
x
’’d e
.
’’e f
	IsDeleted
’’f o
==
’’p r
false
’’s x
)
’’x y
,
’’y z
incGuaAsset
÷÷  +
=>
÷÷, .
incGuaAsset
÷÷/ :
.
÷÷: ;
TblEnqGassetDets
÷÷; K
.
÷÷K L
Where
÷÷L Q
(
÷÷Q R
x
÷÷R S
=>
÷÷T V
x
÷÷W X
.
÷÷X Y
IsActive
÷÷Y a
==
÷÷b d
true
÷÷e i
&&
÷÷j l
x
÷÷m n
.
÷÷n o
	IsDeleted
÷÷o x
==
÷÷y {
false÷÷| Å
)÷÷Å Ç
,÷÷Ç É
incSis
◊◊  &
=>
◊◊' )
incSis
◊◊* 0
.
◊◊0 1
TblEnqSisDets
◊◊1 >
.
◊◊> ?
Where
◊◊? D
(
◊◊D E
x
◊◊E F
=>
◊◊G I
x
◊◊J K
.
◊◊K L
IsActive
◊◊L T
==
◊◊U W
true
◊◊X \
&&
◊◊] _
x
◊◊` a
.
◊◊a b
	IsDeleted
◊◊b k
==
◊◊l n
false
◊◊o t
)
◊◊t u
,
◊◊u v
incProjWCDets
ÿÿ  -
=>
ÿÿ. 0
incProjWCDets
ÿÿ1 >
.
ÿÿ> ?
TblEnqWcDets
ÿÿ? K
.
ÿÿK L
Where
ÿÿL Q
(
ÿÿQ R
x
ÿÿR S
=>
ÿÿT V
x
ÿÿW X
.
ÿÿX Y
IsActive
ÿÿY a
==
ÿÿb d
true
ÿÿe i
&&
ÿÿj l
x
ÿÿm n
.
ÿÿn o
	IsDeleted
ÿÿo x
==
ÿÿy {
falseÿÿ| Å
)ÿÿÅ Ç
,ÿÿÇ É

incSecDets
ŸŸ  *
=>
ŸŸ+ -

incSecDets
ŸŸ. 8
.
ŸŸ8 9
TblEnqSecDets
ŸŸ9 F
.
ŸŸF G
Where
ŸŸG L
(
ŸŸL M
x
ŸŸM N
=>
ŸŸO Q
x
ŸŸR S
.
ŸŸS T
IsActive
ŸŸT \
==
ŸŸ] _
true
ŸŸ` d
&&
ŸŸe g
x
ŸŸh i
.
ŸŸi j
	IsDeleted
ŸŸj s
==
ŸŸt v
false
ŸŸw |
)
ŸŸ| }
)
€€ 
.
€€ 
ConfigureAwait
€€  
(
€€  !
false
€€! &
)
€€& '
;
€€' (
if
›› 
(
›› 
data
›› 
==
›› 
null
›› 
)
›› 
{
ﬁﬁ 
throw
ﬂﬂ 
new
ﬂﬂ 
ArgumentException
ﬂﬂ +
(
ﬂﬂ+ ,
$str
ﬂﬂ, <
)
ﬂﬂ< =
;
ﬂﬂ= >
}
‡‡ 
var
‚‚ 
basicDetails
‚‚ 
=
‚‚ 
await
‚‚ $
_basicDetails
‚‚% 2
.
‚‚2 3
GetBasicDetails
‚‚3 B
(
‚‚B C
Id
‚‚C E
,
‚‚E F
token
‚‚G L
)
‚‚L M
.
‚‚M N
ConfigureAwait
‚‚N \
(
‚‚\ ]
false
‚‚] b
)
‚‚b c
;
‚‚c d
if
„„ 
(
„„ 
basicDetails
„„ 
!=
„„ 
null
„„  $
)
„„$ %
{
‰‰ 
var
ÂÂ 
dataLocation
ÂÂ  
=
ÂÂ! "
await
ÂÂ# (
_commonDetails
ÂÂ) 7
.
ÂÂ7 8,
GetVillageTalukaHobliDistAsync
ÂÂ8 V
(
ÂÂV W
basicDetails
ÂÂW c
.
ÂÂc d
VilCd
ÂÂd i
,
ÂÂi j
token
ÂÂk p
)
ÂÂp q
.
ÂÂq r
ConfigureAwaitÂÂr Ä
(ÂÂÄ Å
falseÂÂÅ Ü
)ÂÂÜ á
;ÂÂá à
basicDetails
ÊÊ 
.
ÊÊ 
VillageName
ÊÊ (
=
ÊÊ) *
dataLocation
ÊÊ+ 7
.
ÊÊ7 8
VillageName
ÊÊ8 C
;
ÊÊC D
basicDetails
ÁÁ 
.
ÁÁ 
HobliCd
ÁÁ $
=
ÁÁ% &
dataLocation
ÁÁ' 3
.
ÁÁ3 4
	HobliCode
ÁÁ4 =
;
ÁÁ= >
basicDetails
ËË 
.
ËË 

DistrictCd
ËË '
=
ËË( )
dataLocation
ËË* 6
.
ËË6 7
DistrictCode
ËË7 C
;
ËËC D
basicDetails
ÈÈ 
.
ÈÈ 
TalukaCd
ÈÈ %
=
ÈÈ& '
dataLocation
ÈÈ( 4
.
ÈÈ4 5

TalukaCode
ÈÈ5 ?
;
ÈÈ? @
basicDetails
ÍÍ 
.
ÍÍ 
Hobli
ÍÍ "
=
ÍÍ# $
dataLocation
ÍÍ% 1
.
ÍÍ1 2
	HobliName
ÍÍ2 ;
;
ÍÍ; <
basicDetails
ÎÎ 
.
ÎÎ 
Taluk
ÎÎ "
=
ÎÎ# $
dataLocation
ÎÎ% 1
.
ÎÎ1 2

TalukaName
ÎÎ2 <
;
ÎÎ< =
basicDetails
ÏÏ 
.
ÏÏ 
District
ÏÏ %
=
ÏÏ& '
dataLocation
ÏÏ( 4
.
ÏÏ4 5
DistrictName
ÏÏ5 A
;
ÏÏA B
}
ÌÌ 
var
ÓÓ 
listSisFinDet
ÓÓ 
=
ÓÓ 
new
ÓÓ  #
List
ÓÓ$ (
<
ÓÓ( ).
 SisterConcernFinancialDetailsDTO
ÓÓ) I
>
ÓÓI J
(
ÓÓJ K
)
ÓÓK L
;
ÓÓL M
foreach
ÔÔ 
(
ÔÔ 
var
ÔÔ 
item
ÔÔ 
in
ÔÔ  
data
ÔÔ! %
.
ÔÔ% &
TblEnqSisDets
ÔÔ& 3
)
ÔÔ3 4
{
 
item
ÒÒ 
.
ÒÒ %
BfacilityCodeNavigation
ÒÒ ,
=
ÒÒ- .
await
ÒÒ/ 4#
_tblBankfacilityCdtab
ÒÒ5 J
.
ÒÒJ K-
FirstOrDefaultByExpressionAsync
ÒÒK j
(
ÒÒj k
x
ÒÒk l
=>
ÒÒm o
x
ÒÒp q
.
ÒÒq r
BfacilityCode
ÒÒr 
==ÒÒÄ Ç
itemÒÒÉ á
.ÒÒá à
BfacilityCodeÒÒà ï
,ÒÒï ñ
tokenÒÒó ú
)ÒÒú ù
;ÒÒù û
var
ÚÚ 
	sisFinDet
ÚÚ 
=
ÚÚ 
await
ÚÚ  %
_enqSisFinService
ÚÚ& 7
.
ÚÚ7 82
$GetByIdSisterConcernFinancialDetails
ÚÚ8 \
(
ÚÚ\ ]
item
ÚÚ] a
.
ÚÚa b
EnqSisId
ÚÚb j
,
ÚÚj k
token
ÚÚl q
)
ÚÚq r
.
ÚÚr s
ConfigureAwaitÚÚs Å
(ÚÚÅ Ç
falseÚÚÇ á
)ÚÚá à
;ÚÚà â
listSisFinDet
ÛÛ 
.
ÛÛ 
AddRange
ÛÛ &
(
ÛÛ& '
	sisFinDet
ÛÛ' 0
)
ÛÛ0 1
;
ÛÛ1 2
}
ÙÙ 
var
ıı 

meansOfFin
ıı 
=
ıı 
await
ıı "&
_enqMeansOfFinRepository
ıı# ;
.
ıı; <+
FindByMatchingPropertiesAsync
ıı< Y
(
ııY Z
token
ııZ _
,
ıı_ `
x
ııa b
=>
ııc e
x
ııf g
.
ııg h
	EnqtempId
ııh q
==
ıır t
Id
ııu w
&&
ııx z
x
ıı{ |
.
ıı| }
IsActiveıı} Ö
==ııÜ à
trueııâ ç
&&ııé ê
xııë í
.ııí ì
	IsDeletedııì ú
==ııù ü
falseıı† •
,ıı• ¶
inc
ˆˆ  #
=>
ˆˆ$ &
inc
ˆˆ' *
.
ˆˆ* +
PjmfCdNavigation
ˆˆ+ ;
,
ˆˆ; <
incCat
˜˜  &
=>
˜˜' )
incCat
˜˜* 0
.
˜˜0 1
MfcatCdNavigation
˜˜1 B
)
˜˜B C
.
˜˜C D
ConfigureAwait
˜˜D R
(
˜˜R S
false
˜˜S X
)
˜˜X Y
;
˜˜Y Z
var
˘˘ 
projFinanceDet
˘˘ 
=
˘˘  
await
˘˘! &"
_financialRepository
˘˘' ;
.
˘˘; <+
FindByMatchingPropertiesAsync
˘˘< Y
(
˘˘Y Z
token
˘˘Z _
,
˘˘_ `
x
˘˘a b
=>
˘˘c e
x
˘˘f g
.
˘˘g h
	EnqtempId
˘˘h q
==
˘˘r t
Id
˘˘u w
&&
˘˘x z
x
˘˘{ |
.
˘˘| }
IsActive˘˘} Ö
==˘˘Ü à
true˘˘â ç
&&˘˘é ê
x˘˘ë í
.˘˘í ì
	IsDeleted˘˘ì ú
==˘˘ù ü
false˘˘† •
,˘˘• ¶
inc
˙˙  #
=>
˙˙$ &
inc
˙˙' *
.
˙˙* +!
FincompCdNavigation
˙˙+ >
,
˙˙> ?
incCode
˚˚  '
=>
˚˚( *
incCode
˚˚+ 2
.
˚˚2 3#
FinyearCodeNavigation
˚˚3 H
)
˚˚H I
.
˚˚I J
ConfigureAwait
˚˚J X
(
˚˚X Y
false
˚˚Y ^
)
˚˚^ _
;
˚˚_ `
var
˝˝ 
projCostDet
˝˝ 
=
˝˝ 
await
˝˝ #$
_projectCostRepository
˝˝$ :
.
˝˝: ;+
FindByMatchingPropertiesAsync
˝˝; X
(
˝˝X Y
token
˝˝Y ^
,
˝˝^ _
x
˝˝` a
=>
˝˝b d
x
˝˝e f
.
˝˝f g
	EnqtempId
˝˝g p
==
˝˝q s
Id
˝˝t v
&&
˝˝w y
x
˝˝z {
.
˝˝{ |
IsActive˝˝| Ñ
==˝˝Ö á
true˝˝à å
&&˝˝ç è
x˝˝ê ë
.˝˝ë í
	IsDeleted˝˝í õ
==˝˝ú û
false˝˝ü §
,˝˝§ •
inc
˛˛ 
=>
˛˛  "
inc
˛˛# &
.
˛˛& ' 
PjcostCdNavigation
˛˛' 9
)
˛˛9 :
.
˛˛: ;
ConfigureAwait
˛˛; I
(
˛˛I J
false
˛˛J O
)
˛˛O P
;
˛˛P Q
var
ÄÄ 
documentlist
ÄÄ 
=
ÄÄ 
await
ÄÄ $!
_documentRepository
ÄÄ% 8
.
ÄÄ8 9#
FindByExpressionAsync
ÄÄ9 N
(
ÄÄN O
x
ÄÄO P
=>
ÄÄQ S
x
ÄÄT U
.
ÄÄU V
	EnquiryId
ÄÄV _
==
ÄÄ` b
Id
ÄÄc e
&&
ÄÄf h
x
ÄÄi j
.
ÄÄj k
IsActive
ÄÄk s
==
ÄÄt v
true
ÄÄw {
&&
ÄÄ| ~
xÄÄ Ä
.ÄÄÄ Å
	IsDeletedÄÄÅ ä
==ÄÄã ç
falseÄÄé ì
,ÄÄì î
tokenÄÄï ö
)ÄÄö õ
.ÄÄõ ú
ConfigureAwaitÄÄú ™
(ÄÄ™ ´
falseÄÄ´ ∞
)ÄÄ∞ ±
;ÄÄ± ≤
var
ÇÇ 
securityList
ÇÇ 
=
ÇÇ 
await
ÇÇ $!
_securityRepository
ÇÇ% 8
.
ÇÇ8 9+
FindByMatchingPropertiesAsync
ÇÇ9 V
(
ÇÇV W
token
ÇÇW \
,
ÇÇ\ ]
x
ÇÇ^ _
=>
ÇÇ` b
x
ÇÇc d
.
ÇÇd e
	EnqtempId
ÇÇe n
==
ÇÇo q
Id
ÇÇr t
&&
ÇÇu w
x
ÇÇx y
.
ÇÇy z
IsActiveÇÇz Ç
==ÇÇÉ Ö
trueÇÇÜ ä
&&ÇÇã ç
xÇÇé è
.ÇÇè ê
	IsDeletedÇÇê ô
==ÇÇö ú
falseÇÇù ¢
,ÇÇ¢ £
inc
ÉÉ  #
=>
ÉÉ$ &
inc
ÉÉ' *
.
ÉÉ* +
SecCdNavigation
ÉÉ+ :
,
ÉÉ: ;
inc1
ÉÉ< @
=>
ÉÉA C
inc1
ÉÉD H
.
ÉÉH I
SecCodeNavigation
ÉÉI Z
)
ÉÉZ [
.
ÉÉ[ \
ConfigureAwait
ÉÉ\ j
(
ÉÉj k
false
ÉÉk p
)
ÉÉp q
;
ÉÉq r
var
ÜÜ 
	newResult
ÜÜ 
=
ÜÜ 
new
ÜÜ 

EnquiryDTO
ÜÜ  *
(
ÜÜ* +
)
ÜÜ+ ,
;
ÜÜ, -
	newResult
àà 
.
àà 
BasicDetails
àà "
=
àà# $
basicDetails
àà% 1
;
àà1 2
	newResult
ââ 
.
ââ 
AddressDetails
ââ $
=
ââ% &
data
ââ' +
?
ââ+ ,
.
ââ, -
TblEnqAddressDets
ââ- >
!=
ââ? A
null
ââB F
?
ââG H
_mapper
ââI P
.
ââP Q
Map
ââQ T
<
ââT U
List
ââU Y
<
ââY Z
AddressDetailsDTO
ââZ k
>
ââk l
>
ââl m
(
ââm n
data
âân r
.
ââr s 
TblEnqAddressDetsââs Ñ
)ââÑ Ö
:ââÜ á
nullââà å
;ââå ç
	newResult
ää 
.
ää 
BankDetails
ää !
=
ää" #
data
ää$ (
?
ää( )
.
ää) *
TblEnqBankDets
ää* 8
!=
ää9 ;
null
ää< @
?
ääA B
_mapper
ääC J
.
ääJ K
Map
ääK N
<
ääN O
BankDetailsDTO
ääO ]
>
ää] ^
(
ää^ _
data
ää_ c
.
ääc d
TblEnqBankDets
ääd r
.
äär s
FirstOrDefaultääs Å
(ääÅ Ç
)ääÇ É
)ääÉ Ñ
:ääÖ Ü
nullääá ã
;ääã å
	newResult
ãã 
.
ãã !
RegistrationDetails
ãã )
=
ãã* +
data
ãã, 0
?
ãã0 1
.
ãã1 2
TblEnqRegnoDets
ãã2 A
!=
ããB D
null
ããE I
?
ããJ K
_mapper
ããL S
.
ããS T
Map
ããT W
<
ããW X
List
ããX \
<
ãã\ ]&
RegistrationNoDetailsDTO
ãã] u
>
ããu v
>
ããv w
(
ããw x
data
ããx |
.
ãã| }
TblEnqRegnoDetsãã} å
)ããå ç
:ããé è
nullããê î
;ããî ï
	newResult
åå 
.
åå 
PromoterDetails
åå %
=
åå& '
await
åå( -
GetPromoterList
åå. =
(
åå= >
Id
åå> @
,
åå@ A
data
ååB F
,
ååF G
token
ååH M
)
ååM N
.
ååN O
ConfigureAwait
ååO ]
(
åå] ^
false
åå^ c
)
ååc d
;
ååd e
	newResult
çç 
.
çç #
PromoterAssetsDetails
çç +
=
çç, -
data
çç. 2
?
çç2 3
.
çç3 4
TblEnqPassetDets
çç4 D
!=
ççE G
null
ççH L
?
ççM N
_mapper
ççO V
.
ççV W
Map
ççW Z
<
ççZ [
List
çç[ _
<
çç_ `'
PromoterAssetsNetWorthDTO
çç` y
>
ççy z
>
ççz {
(
çç{ |
dataçç| Ä
.ççÄ Å 
TblEnqPassetDetsççÅ ë
)ççë í
:ççì î
nullççï ô
;ççô ö
	newResult
éé 
.
éé 
PromoterLiability
éé '
=
éé( )
data
éé* .
?
éé. /
.
éé/ 0
TblEnqPliabDets
éé0 ?
!=
éé@ B
null
ééC G
?
ééH I
_mapper
ééJ Q
.
ééQ R
Map
ééR U
<
ééU V
List
ééV Z
<
ééZ [)
PromoterLiabilityDetailsDTO
éé[ v
>
éév w
>
ééw x
(
ééx y
data
ééy }
.
éé} ~
TblEnqPliabDetséé~ ç
)ééç é
:ééè ê
nullééë ï
;ééï ñ
	newResult
èè 
.
èè 
PromoterNetWorth
èè &
=
èè' (
data
èè) -
?
èè- .
.
èè. /
TblEnqPnwDets
èè/ <
!=
èè= ?
null
èè@ D
?
èèE F
_mapper
èèG N
.
èèN O
Map
èèO R
<
èèR S
List
èèS W
<
èèW X(
PromoterNetWorthDetailsDTO
èèX r
>
èèr s
>
èès t
(
èèt u
data
èèu y
.
èèy z
TblEnqPnwDetsèèz á
)èèá à
:èèâ ä
nullèèã è
;èèè ê
	newResult
êê 
.
êê 
GuarantorDetails
êê &
=
êê' (
await
êê) .
GetGuarantorList
êê/ ?
(
êê? @
Id
êê@ B
,
êêB C
data
êêD H
,
êêH I
token
êêJ O
)
êêO P
.
êêP Q
ConfigureAwait
êêQ _
(
êê_ `
false
êê` e
)
êêe f
;
êêf g
	newResult
ëë 
.
ëë $
GuarantorAssetsDetails
ëë ,
=
ëë- .
data
ëë/ 3
?
ëë3 4
.
ëë4 5
TblEnqGassetDets
ëë5 E
!=
ëëF H
null
ëëI M
?
ëëN O
_mapper
ëëP W
.
ëëW X
Map
ëëX [
<
ëë[ \
List
ëë\ `
<
ëë` a(
GuarantorAssetsNetWorthDTO
ëëa {
>
ëë{ |
>
ëë| }
(
ëë} ~
dataëë~ Ç
.ëëÇ É 
TblEnqGassetDetsëëÉ ì
)ëëì î
:ëëï ñ
nullëëó õ
;ëëõ ú
	newResult
íí 
.
íí  
GuarantorLiability
íí (
=
íí) *
data
íí+ /
?
íí/ 0
.
íí0 1
TblEnqGliabDets
íí1 @
!=
ííA C
null
ííD H
?
ííI J
_mapper
ííK R
.
ííR S
Map
ííS V
<
ííV W
List
ííW [
<
íí[ \*
GuarantorLiabilityDetailsDTO
íí\ x
>
ííx y
>
ííy z
(
ííz {
data
íí{ 
.íí Ä
TblEnqGliabDetsííÄ è
)ííè ê
:ííë í
nullííì ó
;ííó ò
	newResult
ìì 
.
ìì 
GuarantorNetWorth
ìì '
=
ìì( )
data
ìì* .
?
ìì. /
.
ìì/ 0
TblEnqGnwDets
ìì0 =
!=
ìì> @
null
ììA E
?
ììF G
_mapper
ììH O
.
ììO P
Map
ììP S
<
ììS T
List
ììT X
<
ììX Y)
GuarantorNetWorthDetailsDTO
ììY t
>
ììt u
>
ììu v
(
ììv w
data
ììw {
.
ìì{ |
TblEnqGnwDetsìì| â
)ììâ ä
:ììã å
nullììç ë
;ììë í
	newResult
îî 
.
îî "
SisterConcernDetails
îî *
=
îî+ ,
data
îî- 1
?
îî1 2
.
îî2 3
TblEnqSisDets
îî3 @
!=
îîA C
null
îîD H
?
îîI J
_mapper
îîK R
.
îîR S
Map
îîS V
<
îîV W
List
îîW [
<
îî[ \%
SisterConcernDetailsDTO
îî\ s
>
îîs t
>
îît u
(
îîu v
data
îîv z
.
îîz {
TblEnqSisDetsîî{ à
)îîà â
:îîä ã
nullîîå ê
;îîê ë
	newResult
ïï 
.
ïï +
SisterConcernFinancialDetails
ïï 3
=
ïï4 5
listSisFinDet
ïï6 C
;
ïïC D
	newResult
ññ 
.
ññ #
WorkingCapitalDetails
ññ +
=
ññ, -
data
ññ. 2
?
ññ2 3
.
ññ3 4
TblEnqWcDets
ññ4 @
!=
ññA C
null
ññD H
?
ññI J
_mapper
ññK R
.
ññR S
Map
ññS V
<
ññV W.
 ProjectWorkingCapitalDeatailsDTO
ññW w
>
ññw x
(
ññx y
data
ññy }
.
ññ} ~
TblEnqWcDetsññ~ ä
.ññä ã
FirstOrDefaultññã ô
(ññô ö
)ññö õ
)ññõ ú
:ññù û
nullññü £
;ññ£ §
	newResult
óó 
.
óó *
ProjectMeansOfFinanceDetails
óó 2
=
óó3 4 
BindMeansOfFinance
óó5 G
(
óóG H

meansOfFin
óóH R
)
óóR S
;
óóS T
	newResult
òò 
.
òò )
ProjectFinancialYearDetails
òò 1
=
òò2 3
projFinanceDet
òò4 B
!=
òòC E
null
òòF J
?
òòK L
_mapper
òòM T
.
òòT U
Map
òòU X
<
òòX Y
List
òòY ]
<
òò] ^,
ProjectFinancialYearDetailsDTO
òò^ |
>
òò| }
>
òò} ~
(
òò~ 
projFinanceDetòò ç
)òòç é
:òòè ê
nullòòë ï
;òòï ñ
	newResult
ôô 
.
ôô  
ProjectCostDetails
ôô (
=
ôô) *
projCostDet
ôô+ 6
!=
ôô7 9
null
ôô: >
?
ôô? @
_mapper
ôôA H
.
ôôH I
Map
ôôI L
<
ôôL M
List
ôôM Q
<
ôôQ R#
ProjectCostDetailsDTO
ôôR g
>
ôôg h
>
ôôh i
(
ôôi j
projCostDet
ôôj u
)
ôôu v
:
ôôw x
null
ôôy }
;
ôô} ~
	newResult
öö 
.
öö 
SecurityDetails
öö %
=
öö& '
data
öö( ,
?
öö, -
.
öö- .
TblEnqSecDets
öö. ;
!=
öö< >
null
öö? C
?
ööD E
_mapper
ööF M
.
ööM N
Map
ööN Q
<
ööQ R
List
ööR V
<
ööV W 
SecurityDetailsDTO
ööW i
>
ööi j
>
ööj k
(
öök l
securityList
ööl x
)
ööx y
:
ööz {
nullöö| Ä
;ööÄ Å
	newResult
õõ 
.
õõ 
DocumentList
õõ "
=
õõ# $
documentlist
õõ% 1
!=
õõ2 4
null
õõ5 9
?
õõ: ;
_mapper
õõ< C
.
õõC D
Map
õõD G
<
õõG H
IEnumerable
õõH S
<
õõS T
EnqDocumentDTO
õõT b
>
õõb c
>
õõc d
(
õõd e
documentlist
õõe q
)
õõq r
:
õõs t
null
õõu y
;
õõy z
	newResult
úú 
.
úú 
Status
úú 
=
úú 
data
úú #
.
úú# $
	EnqStatus
úú$ -
;
úú- .
	newResult
ùù 
.
ùù 
SummaryNote
ùù !
=
ùù" #
data
ùù$ (
.
ùù( )
EnqNote
ùù) 0
;
ùù0 1
	newResult
ûû 
.
ûû 
EnquiryRefNo
ûû "
=
ûû# $
data
ûû% )
.
ûû) *
EnqRefNo
ûû* 2
;
ûû2 3
	newResult
üü 
.
üü 
EnquiryRefNo
üü "
=
üü# $
data
üü% )
.
üü) *
EnqRefNo
üü* 2
;
üü2 3
	newResult
†† 
.
†† '
HasAssociateSisterConcern
†† /
=
††0 1
data
††2 6
.
††6 7'
HasAssociateSisterConcern
††7 P
;
††P Q
return
°° 
	newResult
°° 
;
°° 
}
¢¢ 	
private
•• 
List
•• 
<
•• &
ProjectMeansOfFinanceDTO
•• -
>
••- . 
BindMeansOfFinance
••/ A
(
••A B
IEnumerable
••B M
<
••M N
TblEnqPjmfDet
••N [
>
••[ \
data
••] a
)
••a b
{
¶¶ 	
var
ßß 
list
ßß 
=
ßß 
new
ßß 
List
ßß 
<
ßß  &
ProjectMeansOfFinanceDTO
ßß  8
>
ßß8 9
(
ßß9 :
)
ßß: ;
;
ßß; <
foreach
®® 
(
®® 
var
®® 
item
®® 
in
®®  
data
®®! %
.
®®% &
ToList
®®& ,
(
®®, -
)
®®- .
)
®®. /
{
©© 
var
™™ 
financeData
™™ 
=
™™  !
_mapper
™™" )
.
™™) *
Map
™™* -
<
™™- .&
ProjectMeansOfFinanceDTO
™™. F
>
™™F G
(
™™G H
item
™™H L
)
™™L M
;
™™M N
financeData
´´ 
.
´´ 
MfcatCdNavigation
´´ -
=
´´. /
_mapper
´´0 7
.
´´7 8
Map
´´8 ;
<
´´; <#
PjmfcatCdtabMasterDTO
´´< Q
>
´´Q R
(
´´R S
item
´´S W
.
´´W X
MfcatCdNavigation
´´X i
)
´´i j
;
´´j k
financeData
¨¨ 
.
¨¨ 
PjmfCdNavigation
¨¨ ,
=
¨¨- .
_mapper
¨¨/ 6
.
¨¨6 7
Map
¨¨7 :
<
¨¨: ; 
PjmfCdtabMasterDTO
¨¨; M
>
¨¨M N
(
¨¨N O
item
¨¨O S
.
¨¨S T
PjmfCdNavigation
¨¨T d
)
¨¨d e
;
¨¨e f
list
≠≠ 
.
≠≠ 
Add
≠≠ 
(
≠≠ 
financeData
≠≠ $
)
≠≠$ %
;
≠≠% &
}
ÆÆ 
return
ØØ 
list
ØØ 
;
ØØ 
}
∞∞ 	
private
≤≤ 
async
≤≤ 
Task
≤≤ 
<
≤≤ 
List
≤≤ 
<
≤≤   
PromoterDetailsDTO
≤≤  2
>
≤≤2 3
>
≤≤3 4
GetPromoterList
≤≤5 D
(
≤≤D E
int
≤≤E H
id
≤≤I K
,
≤≤K L
TblEnqTemptab
≤≤M Z
enq
≤≤[ ^
,
≤≤^ _
CancellationToken
≤≤` q
token
≤≤r w
)
≤≤w x
{
≥≥ 	
var
¥¥  
enqPromoterDetails
¥¥ "
=
¥¥# $
await
¥¥% *!
_promoterRepository
¥¥+ >
.
¥¥> ?+
FindByMatchingPropertiesAsync
¥¥? \
(
¥¥\ ]
token
¥¥] b
,
¥¥b c
x
µµ 
=>
µµ 
x
µµ 
.
µµ 
	EnqtempId
µµ  
==
µµ! #
id
µµ$ &
&&
µµ' )
x
µµ* +
.
µµ+ ,
IsActive
µµ, 4
==
µµ5 7
true
µµ8 <
&&
µµ= ?
x
µµ@ A
.
µµA B
	IsDeleted
µµB K
==
µµL N
false
µµO T
,
µµT U
include
∂∂ 
=>
∂∂ 
include
∂∂ "
.
∂∂" #$
PromoterCodeNavigation
∂∂# 9
,
∂∂9 :
des
∑∑ 
=>
∑∑ 
des
∑∑ 
.
∑∑  
PdesigCdNavigation
∑∑ -
,
∑∑- .
dom
∏∏ 
=>
∏∏ 
dom
∏∏ 
.
∏∏ 
DomCdNavigation
∏∏ *
)
∏∏* +
.
∏∏+ ,
ConfigureAwait
∏∏, :
(
∏∏: ;
false
∏∏; @
)
∏∏@ A
;
∏∏A B
if
ππ 
(
ππ  
enqPromoterDetails
ππ "
.
ππ" #
Any
ππ# &
(
ππ& '
)
ππ' (
)
ππ( )
{
∫∫ 
var
ªª 
promDetailsList
ªª #
=
ªª$ %
new
ªª& )
List
ªª* .
<
ªª. / 
PromoterDetailsDTO
ªª/ A
>
ªªA B
(
ªªB C
)
ªªC D
;
ªªD E
foreach
ºº 
(
ºº 
var
ºº 
item
ºº !
in
ºº" $ 
enqPromoterDetails
ºº% 7
)
ºº7 8
{
ΩΩ 
var
ææ 
promoterBank
ææ $
=
ææ% &
enq
ææ' *
.
ææ* +
TblEnqPbankDets
ææ+ :
.
ææ: ;
FirstOrDefault
ææ; I
(
ææI J
x
ææJ K
=>
ææL N
x
ææO P
.
ææP Q
PromoterCode
ææQ ]
==
ææ^ `
item
ææa e
.
ææe f
PromoterCode
ææf r
&&
ææs u
x
ææv w
.
ææw x
IsActiveææx Ä
==ææÅ É
trueææÑ à
&&ææâ ã
xææå ç
.ææç é
	IsDeletedææé ó
==ææò ö
falseææõ †
)ææ† °
;ææ° ¢
var
¿¿ 
promDetails
¿¿ #
=
¿¿$ %
new
¿¿& ) 
PromoterDetailsDTO
¿¿* <
{
¡¡ !
PromoterBankDetails
¬¬ +
=
¬¬, -
promoterBank
¬¬. :
!=
¬¬; =
null
¬¬> B
?
¬¬C D
_mapper
¬¬E L
.
¬¬L M
Map
¬¬M P
<
¬¬P Q$
PromoterBankDetailsDTO
¬¬Q g
>
¬¬g h
(
¬¬h i
promoterBank
¬¬i u
)
¬¬u v
:
¬¬w x
null
¬¬y }
,
¬¬} ~
PromoterMaster
√√ &
=
√√' (
item
√√) -
.
√√- .$
PromoterCodeNavigation
√√. D
!=
√√E G
null
√√H L
?
√√M N
_mapper
√√O V
.
√√V W
Map
√√W Z
<
√√Z [
PromoterMasterDTO
√√[ l
>
√√l m
(
√√m n
item
√√n r
.
√√r s%
PromoterCodeNavigation√√s â
)√√â ä
:√√ã å
null√√ç ë
,√√ë í
DomCd
ƒƒ 
=
ƒƒ 
item
ƒƒ  $
.
ƒƒ$ %
DomCd
ƒƒ% *
,
ƒƒ* +
EnqCibil
≈≈  
=
≈≈! "
item
≈≈# '
.
≈≈' (
EnqCibil
≈≈( 0
,
≈≈0 1

EnqPromExp
∆∆ "
=
∆∆# $
item
∆∆% )
.
∆∆) *

EnqPromExp
∆∆* 4
,
∆∆4 5
EnqPromExpdet
«« %
=
««& '
item
««( ,
.
««, -
EnqPromExpdet
««- :
,
««: ;
	EnqPromId
»» !
=
»»" #
item
»»$ (
.
»»( )
	EnqPromId
»») 2
,
»»2 3
EnqPromShare
…… $
=
……% &
item
……' +
.
……+ ,
EnqPromShare
……, 8
,
……8 9
	EnqtempId
   !
=
  " #
item
  $ (
.
  ( )
	EnqtempId
  ) 2
,
  2 3
PdesigCd
ÀÀ  
=
ÀÀ! "
item
ÀÀ# '
.
ÀÀ' (
PdesigCd
ÀÀ( 0
,
ÀÀ0 1
PromoterCode
ÃÃ $
=
ÃÃ% &
item
ÃÃ' +
.
ÃÃ+ ,
PromoterCode
ÃÃ, 8
,
ÃÃ8 9
UniqueId
ÕÕ  
=
ÕÕ! "
item
ÕÕ# '
.
ÕÕ' (
UniqueId
ÕÕ( 0
,
ÕÕ0 1 
PdesigCdNavigation
ŒŒ *
=
ŒŒ+ ,
item
ŒŒ- 1
.
ŒŒ1 2 
PdesigCdNavigation
ŒŒ2 D
!=
ŒŒE G
null
ŒŒH L
?
ŒŒM N
_mapper
ŒŒO V
.
ŒŒV W
Map
ŒŒW Z
<
ŒŒZ [&
PromDesignationMasterDTO
ŒŒ[ s
>
ŒŒs t
(
ŒŒt u
item
ŒŒu y
.
ŒŒy z!
PdesigCdNavigationŒŒz å
)ŒŒå ç
:ŒŒé è
nullŒŒê î
,ŒŒî ï
PromoDomText
œœ $
=
œœ% &
item
œœ' +
.
œœ+ ,
DomCdNavigation
œœ, ;
.
œœ; <
DomDets
œœ< C
,
œœC D
DomCdNavigation
–– '
=
––( )
item
––* .
.
––. /
DomCdNavigation
––/ >
!=
––? A
null
––B F
?
––G H
_mapper
––I P
.
––P Q
Map
––Q T
<
––T U
DomicileMasterDTO
––U f
>
––f g
(
––g h
item
––h l
.
––l m
DomCdNavigation
––m |
)
––| }
:
––~ 
null––Ä Ñ
,––Ñ Ö
}
—— 
;
—— 
promDetailsList
““ #
.
““# $
Add
““$ '
(
““' (
promDetails
““( 3
)
““3 4
;
““4 5
}
”” 
return
‘‘ 
promDetailsList
‘‘ &
;
‘‘& '
}
’’ 
return
÷÷ 
null
÷÷ 
;
÷÷ 
}
◊◊ 	
private
ŸŸ 
async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 
List
ŸŸ 
<
ŸŸ  !
GuarantorDetailsDTO
ŸŸ  3
>
ŸŸ3 4
>
ŸŸ4 5
GetGuarantorList
ŸŸ6 F
(
ŸŸF G
int
ŸŸG J
id
ŸŸK M
,
ŸŸM N
TblEnqTemptab
ŸŸO \
enq
ŸŸ] `
,
ŸŸ` a
CancellationToken
ŸŸb s
token
ŸŸt y
)
ŸŸy z
{
⁄⁄ 	
var
€€ !
enqGuarantorDetails
€€ #
=
€€$ %
await
€€& +"
_guarantorRepository
€€, @
.
€€@ A+
FindByMatchingPropertiesAsync
€€A ^
(
€€^ _
token
‹‹ 
,
‹‹ 
x
‹‹ 
=>
‹‹ 
x
‹‹ 
.
‹‹ 
	EnqtempId
‹‹ '
==
‹‹( *
id
‹‹+ -
&&
‹‹. 0
x
‹‹1 2
.
‹‹2 3
IsActive
‹‹3 ;
==
‹‹< >
true
‹‹? C
&&
‹‹D F
x
‹‹G H
.
‹‹H I
	IsDeleted
‹‹I R
==
‹‹S U
false
‹‹V [
,
‹‹[ \
include
›› 
=>
›› 
include
›› "
.
››" #$
PromoterCodeNavigation
››# 9
)
››9 :
.
››: ;
ConfigureAwait
››; I
(
››I J
false
››J O
)
››O P
;
››P Q
if
ﬂﬂ 
(
ﬂﬂ !
enqGuarantorDetails
ﬂﬂ #
.
ﬂﬂ# $
Any
ﬂﬂ$ '
(
ﬂﬂ' (
)
ﬂﬂ( )
)
ﬂﬂ) *
{
‡‡ 
var
·· 
guaDetailsList
·· "
=
··# $
new
··% (
List
··) -
<
··- .!
GuarantorDetailsDTO
··. A
>
··A B
(
··B C
)
··C D
;
··D E
foreach
‚‚ 
(
‚‚ 
var
‚‚ 
item
‚‚ !
in
‚‚" $!
enqGuarantorDetails
‚‚% 8
)
‚‚8 9
{
„„ 
var
ÂÂ 
guarantorBank
ÂÂ %
=
ÂÂ& '
enq
ÂÂ( +
.
ÂÂ+ ,
TblEnqGbankDets
ÂÂ, ;
.
ÂÂ; <
FirstOrDefault
ÂÂ< J
(
ÂÂJ K
x
ÂÂK L
=>
ÂÂM O
x
ÂÂP Q
.
ÂÂQ R
PromoterCode
ÂÂR ^
==
ÂÂ_ a
item
ÂÂb f
.
ÂÂf g
PromoterCode
ÂÂg s
&&
ÂÂt v
x
ÂÂw x
.
ÂÂx y
IsActiveÂÂy Å
==ÂÂÇ Ñ
trueÂÂÖ â
&&ÂÂä å
xÂÂç é
.ÂÂé è
	IsDeletedÂÂè ò
==ÂÂô õ
falseÂÂú °
)ÂÂ° ¢
;ÂÂ¢ £
var
ÁÁ 

guaDetails
ÁÁ "
=
ÁÁ# $
new
ÁÁ% (!
GuarantorDetailsDTO
ÁÁ) <
{
ËË "
GuarantorBankDetails
ÈÈ ,
=
ÈÈ- .
guarantorBank
ÈÈ/ <
!=
ÈÈ= ?
null
ÈÈ@ D
?
ÈÈE F
_mapper
ÈÈG N
.
ÈÈN O
Map
ÈÈO R
<
ÈÈR S%
GuarantorBankDetailsDTO
ÈÈS j
>
ÈÈj k
(
ÈÈk l
guarantorBank
ÈÈl y
)
ÈÈy z
:
ÈÈ{ |
nullÈÈ} Å
,ÈÈÅ Ç
PromoterMaster
ÍÍ &
=
ÍÍ' (
item
ÍÍ) -
?
ÍÍ- .
.
ÍÍ. /$
PromoterCodeNavigation
ÍÍ/ E
!=
ÍÍF H
null
ÍÍI M
?
ÍÍN O
_mapper
ÍÍP W
.
ÍÍW X
Map
ÍÍX [
<
ÍÍ[ \
PromoterMasterDTO
ÍÍ\ m
>
ÍÍm n
(
ÍÍn o
item
ÍÍo s
.
ÍÍs t%
PromoterCodeNavigationÍÍt ä
)ÍÍä ã
:ÍÍå ç
nullÍÍé í
,ÍÍí ì
DomCd
ÎÎ 
=
ÎÎ 
item
ÎÎ  $
.
ÎÎ$ %
DomCd
ÎÎ% *
,
ÎÎ* +
	EnqGuarId
ÏÏ !
=
ÏÏ" #
item
ÏÏ$ (
.
ÏÏ( )
	EnqGuarId
ÏÏ) 2
,
ÏÏ2 3
	EnqtempId
ÌÌ !
=
ÌÌ" #
item
ÌÌ$ (
.
ÌÌ( )
	EnqtempId
ÌÌ) 2
,
ÌÌ2 3
GuarName
ÓÓ  
=
ÓÓ! "
item
ÓÓ# '
.
ÓÓ' ($
PromoterCodeNavigation
ÓÓ( >
.
ÓÓ> ?
PromoterName
ÓÓ? K
,
ÓÓK L
Pan
ÔÔ 
=
ÔÔ 
item
ÔÔ "
.
ÔÔ" #$
PromoterCodeNavigation
ÔÔ# 9
.
ÔÔ9 :
PromoterPan
ÔÔ: E
,
ÔÔE F
EnqGuarcibil
 $
=
% &
item
' +
.
+ ,
EnqGuarcibil
, 8
,
8 9
PromoterCode
ÒÒ $
=
ÒÒ% &
item
ÒÒ' +
.
ÒÒ+ ,
PromoterCode
ÒÒ, 8
,
ÒÒ8 9
UniqueId
ÚÚ  
=
ÚÚ! "
item
ÚÚ# '
.
ÚÚ' (
UniqueId
ÚÚ( 0
,
ÚÚ0 1
}
ÛÛ 
;
ÛÛ 
guaDetailsList
ÙÙ "
.
ÙÙ" #
Add
ÙÙ# &
(
ÙÙ& '

guaDetails
ÙÙ' 1
)
ÙÙ1 2
;
ÙÙ2 3
}
ˆˆ 
return
¯¯ 
guaDetailsList
¯¯ %
;
¯¯% &
}
˘˘ 
return
˙˙ 
null
˙˙ 
;
˙˙ 
}
˚˚ 	
public
˝˝ 
async
˝˝ 
Task
˝˝ 
<
˝˝ 
int
˝˝ 
>
˝˝ 
SubmitEnquiry
˝˝ ,
(
˝˝, -
string
˝˝- 3
summary
˝˝4 ;
,
˝˝; <
int
˝˝= @
	enquiryId
˝˝A J
,
˝˝J K
CancellationToken
˝˝L ]
token
˝˝^ c
)
˝˝c d
{
˛˛ 	
var
ÄÄ 
enq
ÄÄ 
=
ÄÄ 
await
ÄÄ 
_enqRepository
ÄÄ *
.
ÄÄ* +-
FirstOrDefaultByExpressionAsync
ÄÄ+ J
(
ÄÄJ K
x
ÄÄK L
=>
ÄÄM O
x
ÄÄP Q
.
ÄÄQ R
	EnqtempId
ÄÄR [
==
ÄÄ\ ^
	enquiryId
ÄÄ_ h
&&
ÄÄi k
x
ÄÄl m
.
ÄÄm n
IsActive
ÄÄn v
==
ÄÄw y
true
ÄÄz ~
&&ÄÄ Å
xÄÄÇ É
.ÄÄÉ Ñ
	IsDeletedÄÄÑ ç
==ÄÄé ê
falseÄÄë ñ
,ÄÄñ ó
tokenÄÄò ù
)ÄÄù û
.ÄÄû ü
ConfigureAwaitÄÄü ≠
(ÄÄ≠ Æ
falseÄÄÆ ≥
)ÄÄ≥ ¥
;ÄÄ¥ µ
if
ÅÅ 
(
ÅÅ 
enq
ÅÅ 
!=
ÅÅ 
null
ÅÅ 
)
ÅÅ 
{
ÇÇ 
Random
ÉÉ 
rnd
ÉÉ 
=
ÉÉ 
new
ÉÉ  
Random
ÉÉ! '
(
ÉÉ' (
)
ÉÉ( )
;
ÉÉ) *
int
ÑÑ 
num
ÑÑ 
=
ÑÑ 
rnd
ÑÑ 
.
ÑÑ 
Next
ÑÑ "
(
ÑÑ" #
)
ÑÑ# $
;
ÑÑ$ %
enq
ÖÖ 
.
ÖÖ 
	EnqStatus
ÖÖ 
=
ÖÖ 
(
ÖÖ  !
int
ÖÖ! $
)
ÖÖ$ %
	EnqStatus
ÖÖ% .
.
ÖÖ. /
	Submitted
ÖÖ/ 8
;
ÖÖ8 9
enq
ÜÜ 
.
ÜÜ 
EnqSubmitDate
ÜÜ !
=
ÜÜ" #
DateTime
ÜÜ$ ,
.
ÜÜ, -
Now
ÜÜ- 0
;
ÜÜ0 1
enq
áá 
.
áá 
EnqNote
áá 
=
áá 
summary
áá %
;
áá% &
enq
àà 
.
àà 
EnqRefNo
àà 
=
àà 
num
àà "
;
àà" #
await
ââ 
_enqRepository
ââ $
.
ââ$ %
UpdateAsync
ââ% 0
(
ââ0 1
enq
ââ1 4
,
ââ4 5
token
ââ6 ;
)
ââ; <
.
ââ< =
ConfigureAwait
ââ= K
(
ââK L
false
ââL Q
)
ââQ R
;
ââR S
await
ää 
_work
ää 
.
ää 
CommitAsync
ää '
(
ää' (
token
ää( -
)
ää- .
.
ää. /
ConfigureAwait
ää/ =
(
ää= >
false
ää> C
)
ääC D
;
ääD E
await
åå 
_smsService
åå !
.
åå! "
SendSms
åå" )
(
åå) *
new
åå* -

Components
åå. 8
.
åå8 9
Common
åå9 ?
.
åå? @
Dto
åå@ C
.
ååC D
SMS
ååD G
.
ååG H
SmsDataModel
ååH T
{
çç 
Message
éé 
=
éé 
EmailTemplate
éé +
.
éé+ ,"
GetEnquirySubmission
éé, @
(
éé@ A
num
ééA D
)
ééD E
,
ééE F
MobileNumber
èè  
=
èè! "
	_userInfo
èè# ,
?
èè, -
.
èè- .
PhoneNumber
èè. 9
}
êê 
)
êê 
;
êê 
var
íí 
basicDetails
íí  
=
íí! "
await
íí# (
_basicDetails
íí) 6
.
íí6 7
GetBasicDetails
íí7 F
(
ííF G
	enquiryId
ííG P
,
ííP Q
token
ííR W
)
ííW X
.
ííX Y
ConfigureAwait
ííY g
(
ííg h
false
ííh m
)
íím n
;
íín o
var
îî 
emailReq
îî 
=
îî 
new
îî "!
EmailServiceRequest
îî# 6
{
ïï 
Body
ññ 
=
ññ 
EmailTemplate
ññ (
.
ññ( )"
GetEnquirySubmission
ññ) =
(
ññ= >
num
ññ> A
)
ññA B
,
ññB C
Subject
óó 
=
óó 
$"
óó  
$str
óó  7
"
óó7 8
,
óó8 9
ToEmail
òò 
=
òò 
basicDetails
òò *
?
òò* +
.
òò+ ,
EnqEmail
òò, 4
}
ôô 
;
ôô 
await
õõ 
_emailService
õõ #
.
õõ# $
SendEmailAsync
õõ$ 2
(
õõ2 3
emailReq
õõ3 ;
)
õõ; <
;
õõ< =
return
ùù 
(
ùù 
int
ùù 
)
ùù 
enq
ùù 
.
ùù  
EnqRefNo
ùù  (
;
ùù( )
}
ûû 
return
üü 
$num
üü 
;
üü 
}
†† 	
public
¢¢ 
async
¢¢ 
Task
¢¢ 
<
¢¢ 
int
¢¢ 
>
¢¢ 
AddNewEnqiry
¢¢ +
(
¢¢+ ,
string
¢¢, 2
pan
¢¢3 6
,
¢¢6 7
CancellationToken
¢¢8 I
token
¢¢J O
)
¢¢O P
{
££ 	
TblEnqTemptab
§§ 
enq
§§ 
=
§§ 
new
§§  #
TblEnqTemptab
§§$ 1
{
•• 
UniqueId
¶¶ 
=
¶¶ 
Guid
¶¶ 
.
¶¶  
NewGuid
¶¶  '
(
¶¶' (
)
¶¶( )
.
¶¶) *
ToString
¶¶* 2
(
¶¶2 3
)
¶¶3 4
,
¶¶4 5
	EnqStatus
ßß 
=
ßß 
(
ßß 
int
ßß  
)
ßß  !
	EnqStatus
ßß! *
.
ßß* +
Draft
ßß+ 0
,
ßß0 1
	CreatedBy
®® 
=
®® 
	_userInfo
®® %
.
®®% &
Pan
®®& )
,
®®) *
CreatedDate
©© 
=
©© 
DateTime
©© &
.
©©& '
UtcNow
©©' -
,
©©- .
EnqInitDate
™™ 
=
™™ 
DateTime
™™ &
.
™™& '
UtcNow
™™' -
,
™™- .
IsActive
´´ 
=
´´ 
true
´´ 
,
´´  
	IsDeleted
¨¨ 
=
¨¨ 
false
¨¨ !
,
¨¨! "
PromPan
≠≠ 
=
≠≠ 
pan
≠≠ 
,
≠≠ '
HasAssociateSisterConcern
ÆÆ )
=
ÆÆ* +
false
ÆÆ, 1
}
∞∞ 
;
∞∞ 
var
±± 
tempEnq
±± 
=
±± 
await
±± 
_enqRepository
±±  .
.
±±. /
AddAsync
±±/ 7
(
±±7 8
enq
±±8 ;
,
±±; <
token
±±= B
)
±±B C
.
±±C D
ConfigureAwait
±±D R
(
±±R S
false
±±S X
)
±±X Y
;
±±Y Z
await
≤≤ 
_work
≤≤ 
.
≤≤ 
CommitAsync
≤≤ #
(
≤≤# $
token
≤≤$ )
)
≤≤) *
.
≤≤* +
ConfigureAwait
≤≤+ 9
(
≤≤9 :
false
≤≤: ?
)
≤≤? @
;
≤≤@ A
return
≥≥ 
tempEnq
≥≥ 
.
≥≥ 
	EnqtempId
≥≥ $
;
≥≥$ %
}
¥¥ 	
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
int
∂∂ 
>
∂∂ 7
)UpdateEnquiryAssociateSisterConcernStatus
∂∂ H
(
∂∂H I
int
∂∂I L
	enquiryId
∂∂M V
,
∂∂V W
bool
∂∂X \
Status
∂∂] c
,
∂∂c d
CancellationToken
∂∂e v
token
∂∂w |
)
∂∂| }
{
∑∑ 	
if
ππ 
(
ππ 
	enquiryId
ππ 
==
ππ 
$num
ππ 
)
ππ 
{
∫∫ 
	enquiryId
ªª 
=
ªª 
await
ªª !
AddNewEnqiry
ªª" .
(
ªª. /
	_userInfo
ªª/ 8
.
ªª8 9
Pan
ªª9 <
,
ªª< =
token
ªª> C
)
ªªC D
.
ªªD E
ConfigureAwait
ªªE S
(
ªªS T
false
ªªT Y
)
ªªY Z
;
ªªZ [
}
ΩΩ 
var
ææ 
enquiry
ææ 
=
ææ 
await
ææ 
_enqRepository
ææ  .
.
øø% &7
)FirstOrDefaultNoTrackingByExpressionAsync
øø& O
(
øøO P
x
øøP Q
=>
øøR T
x
øøU V
.
øøV W
	EnqtempId
øøW `
==
øøa c
	enquiryId
øød m
&&
¿¿( *
x
¿¿+ ,
.
¿¿, -
IsActive
¿¿- 5
==
¿¿6 8
true
¿¿9 =
&&
¿¿> @
x
¿¿A B
.
¿¿B C
	IsDeleted
¿¿C L
==
¿¿M O
false
¿¿P U
,
¿¿U V
token
¿¿W \
)
¿¿\ ]
.
¡¡% &
ConfigureAwait
¡¡& 4
(
¡¡4 5
false
¡¡5 :
)
¡¡: ;
;
¡¡; <
if
¬¬ 
(
¬¬ 
enquiry
¬¬ 
==
¬¬ 
null
¬¬ 
)
¬¬  
{
√√ 
throw
ƒƒ 
new
ƒƒ 
ArgumentException
ƒƒ +
(
ƒƒ+ ,
$str
ƒƒ, ;
)
ƒƒ; <
;
ƒƒ< =
}
≈≈ 
enquiry
»» 
.
»» 

ModifiedBy
»» 
=
»»  
	_userInfo
»»! *
.
»»* +
Pan
»»+ .
;
»». /
enquiry
…… 
.
…… 
ModifiedDate
……  
=
……! "
DateTime
……# +
.
……+ ,
UtcNow
……, 2
;
……2 3
enquiry
   
.
   '
HasAssociateSisterConcern
   -
=
  . /
Status
  0 6
;
  6 7
await
ÀÀ 
_enqRepository
ÀÀ  
.
ÀÀ  !
UpdateAsync
ÀÀ! ,
(
ÀÀ, -
enquiry
ÀÀ- 4
,
ÀÀ4 5
token
ÀÀ6 ;
)
ÀÀ; <
.
ÀÀ< =
ConfigureAwait
ÀÀ= K
(
ÀÀK L
false
ÀÀL Q
)
ÀÀQ R
;
ÀÀR S
await
ÃÃ 
_work
ÃÃ 
.
ÃÃ 
CommitAsync
ÃÃ #
(
ÃÃ# $
token
ÃÃ$ )
)
ÃÃ) *
.
ÃÃ* +
ConfigureAwait
ÃÃ+ 9
(
ÃÃ9 :
false
ÃÃ: ?
)
ÃÃ? @
;
ÃÃ@ A
return
ŒŒ 
	enquiryId
ŒŒ 
;
ŒŒ 
}
œœ 	
}
–– 
}—— ¬Æ
tD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\ProjectDetails\MeansofFinanceService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H
ProjectDetailsH V
{ 
public 

class !
MeansofFinanceService &
:' (
IMeansofFinance) 8
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqPjmfDet+ 8
>8 9
_meansofFinance: I
;I J
private 
readonly 
IEntityRepository *
<* +
TblEnqMftotalDet+ ;
>; <
_mfTotal= E
;E F
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IEntityRepository *
<* +
TblEnqTemptab+ 8
>8 9
_enqRepository: H
;H I
public !
MeansofFinanceService $
($ %
IMapper% ,
mapper- 3
,3 4
UserInfo5 =
userInfo> F
,F G
IEntityRepositoryH Y
<Y Z
TblEnqPjmfDetZ g
>g h
meansofFinancei w
,w x
IEntityRepository	y ä
<
ä ã
TblEnqTemptab
ã ò
>
ò ô
enqRepository
ö ß
=
® ©
null
™ Æ
,
Æ Ø
IUnitOfWork
∞ ª
work
º ¿
=
¡ ¬
null
√ «
,
« »
IEntityRepository
… ⁄
<
⁄ €
TblEnqMftotalDet
€ Î
>
Î Ï
mfTotal
Ì Ù
=
ı ˆ
null
˜ ˚
)
˚ ¸
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !
_meansofFinance 
= 
meansofFinance ,
;, -
_enqRepository   
=   
enqRepository   *
;  * +
_work!! 
=!! 
work!! 
;!! 
_mfTotal"" 
="" 
mfTotal"" 
;"" 
}## 	
public%% 
async%% 
Task%% 
<%% $
ProjectMeansOfFinanceDTO%% 2
>%%2 3 
GetAllMeansOfFinance%%4 H
(%%H I$
ProjectMeansOfFinanceDTO%%I a!
ProjectMeansOfFinance%%b w
,%%w x
CancellationToken	%%y ä
token
%%ã ê
)
%%ê ë
{&& 	
var'' 
list'' 
='' 
await'' 
_meansofFinance'' ,
.'', -!
FindByExpressionAsync''- B
(''B C
null''C G
,''G H
token''I N
)''N O
.''O P
ConfigureAwait''P ^
(''^ _
false''_ d
)''d e
;''e f
if(( 
((( 
!(( 
list(( 
.(( 
Any(( 
((( 
)(( 
)(( 
{)) 
throw** 
new** 
ArgumentException** +
(**+ ,
$str**, <
)**< =
;**= >
}++ 
return,, 
_mapper,, 
.,, 
Map,, 
<,, $
ProjectMeansOfFinanceDTO,, 7
>,,7 8
(,,8 9
list,,9 =
),,= >
;,,> ?
}-- 	
public// 
async// 
Task// 
<// 
IEnumerable// %
<//% &$
ProjectMeansOfFinanceDTO//& >
>//> ?
>//? @
AddMeansOfFinance//A R
(//R S
List//S W
<//W X$
ProjectMeansOfFinanceDTO//X p
>//p q"
ProjectMeansOfFinance	//r á
,
//á à
CancellationToken
//â ö
token
//õ †
)
//† °
{00 	
var11 
dataList11 
=11 
await11  
_meansofFinance11! 0
.110 1!
FindByExpressionAsync111 F
(11F G
x11G H
=>11I K
x11L M
.11M N
	EnqtempId11N W
==11X Z!
ProjectMeansOfFinance11[ p
[11p q
$num11q r
]11r s
.11s t
	EnqtempId11t }
&&	11~ Ä
x
11Å Ç
.
11Ç É
IsActive
11É ã
==
11å é
true
11è ì
&&
11î ñ
x
11ó ò
.
11ò ô
	IsDeleted
11ô ¢
==
11£ •
false
11¶ ´
,
11´ ¨
token
11≠ ≤
)
11≤ ≥
.
11≥ ¥
ConfigureAwait
11¥ ¬
(
11¬ √
false
11√ »
)
11» …
;
11…  
dataList33 
.33 
ForEach33 
(33 
x33 
=>33 !
{44 
x55 
.55 
	IsDeleted55 
=55 
true55 "
;55" #
x66 
.66 
IsActive66 
=66 
false66 "
;66" #
x77 
.77 

ModifiedBy77 
=77 
	_userInfo77 (
.77( )
UserId77) /
;77/ 0
x88 
.88 
ModifiedDate88 
=88  
DateTime88! )
.88) *
UtcNow88* 0
;880 1
}99 
)99 
;99 
await:: 
_meansofFinance:: !
.::! "
UpdateAsync::" -
(::- .
dataList::. 6
,::6 7
token::8 =
)::= >
.::> ?
ConfigureAwait::? M
(::M N
false::N S
)::S T
;::T U
var<< 
detailsList<< 
=<< 
_mapper<< %
.<<% &
Map<<& )
<<<) *
List<<* .
<<<. /
TblEnqPjmfDet<</ <
><<< =
><<= >
(<<> ?!
ProjectMeansOfFinance<<? T
)<<T U
;<<U V
var>> 
totalEquity>> 
=>> !
ProjectMeansOfFinance>> 3
.>>3 4
Where>>4 9
(>>9 :
x>>: ;
=>>>< >
x>>? @
.>>@ A
MfcatCdNavigation>>A R
.>>R S
PjmfDets>>S [
.>>[ \
ToLower>>\ c
(>>c d
)>>d e
==>>f h
$str>>i q
)>>q r
.>>r s
Sum>>s v
(>>v w
s>>w x
=>>>y {
s>>| }
.>>} ~
EnqPjmfValue	>>~ ä
)
>>ä ã
;
>>ã å
var?? 
	totalDedt?? 
=?? !
ProjectMeansOfFinance?? 1
.??1 2
Where??2 7
(??7 8
x??8 9
=>??: <
x??= >
.??> ?
MfcatCdNavigation??? P
.??P Q
PjmfDets??Q Y
.??Y Z
ToLower??Z a
(??a b
)??b c
==??d f
$str??g m
)??m n
.??n o
Sum??o r
(??r s
s??s t
=>??u w
s??x y
.??y z
EnqPjmfValue	??z Ü
)
??Ü á
;
??á à
var@@ 
mfTotal@@ 
=@@ 
await@@ 
_mfTotal@@  (
.@@( )+
FirstOrDefaultByExpressionAsync@@) H
(@@H I
x@@I J
=>@@K M
x@@N O
.@@O P
	EnqtempId@@P Y
==@@Z \!
ProjectMeansOfFinance@@] r
.@@r s
First@@s x
(@@x y
)@@y z
.@@z {
	EnqtempId	@@{ Ñ
,
@@Ñ Ö
token
@@Ü ã
)
@@ã å
.
@@å ç
ConfigureAwait
@@ç õ
(
@@õ ú
false
@@ú °
)
@@° ¢
;
@@¢ £
ifAA 
(AA 
mfTotalAA 
!=AA 
nullAA 
)AA  
{BB 
mfTotalCC 
.CC 
EnqDebtCC 
=CC  !
	totalDedtCC" +
;CC+ ,
mfTotalDD 
.DD 
	EnqEquityDD !
=DD" #
totalEquityDD$ /
;DD/ 0
mfTotalEE 
.EE 

ModifiedByEE "
=EE# $
	_userInfoEE% .
.EE. /
UserIdEE/ 5
;EE5 6
mfTotalFF 
.FF 
ModifiedDateFF $
=FF% &
DateTimeFF' /
.FF/ 0
UtcNowFF0 6
;FF6 7
awaitGG 
_mfTotalGG 
.GG 
UpdateAsyncGG *
(GG* +
mfTotalGG+ 2
,GG2 3
tokenGG4 9
)GG9 :
.GG: ;
ConfigureAwaitGG; I
(GGI J
falseGGJ O
)GGO P
;GGP Q
}HH 
elseII 
{JJ 
varKK 

newMfTotalKK 
=KK  
newKK! $
TblEnqMftotalDetKK% 5
{LL 
	CreatedByMM 
=MM 
	_userInfoMM  )
.MM) *
UserIdMM* 0
,MM0 1
CreatedDateNN 
=NN  !
DateTimeNN" *
.NN* +
UtcNowNN+ 1
,NN1 2
EnqDebtOO 
=OO 
	totalDedtOO '
,OO' (
	EnqEquityPP 
=PP 
totalEquityPP  +
,PP+ ,
	EnqtempIdQQ 
=QQ !
ProjectMeansOfFinanceQQ  5
.QQ5 6
FirstQQ6 ;
(QQ; <
)QQ< =
.QQ= >
	EnqtempIdQQ> G
,QQG H
IsActiveRR 
=RR 
trueRR #
,RR# $
	IsDeletedSS 
=SS 
falseSS  %
,SS% &
UniqueIdTT 
=TT 
GuidTT #
.TT# $
NewGuidTT$ +
(TT+ ,
)TT, -
.TT- .
ToStringTT. 6
(TT6 7
)TT7 8
}UU 
;UU 
awaitVV 
_mfTotalVV 
.VV 
AddAsyncVV '
(VV' (

newMfTotalVV( 2
,VV2 3
tokenVV4 9
)VV9 :
.VV: ;
ConfigureAwaitVV; I
(VVI J
falseVVJ O
)VVO P
;VVP Q
}WW 
detailsListZZ 
.ZZ 
ForEachZZ 
(ZZ  
xZZ  !
=>ZZ" $
{[[ 
x\\ 
.\\ 
	EnqPjmfId\\ 
=\\ 
$num\\ 
;\\  
x]] 
.]] 
IsActive]] 
=]] 
true]] !
;]]! "
x^^ 
.^^ 
	IsDeleted^^ 
=^^ 
false^^ #
;^^# $
x__ 
.__ 
	CreatedBy__ 
=__ 
	_userInfo__ '
.__' (
UserId__( .
;__. /
x`` 
.`` 
CreatedDate`` 
=`` 
DateTime``  (
.``( )
UtcNow``) /
;``/ 0
xaa 
.aa 
UniqueIdaa 
=aa 
Guidaa !
.aa! "
NewGuidaa" )
(aa) *
)aa* +
.aa+ ,
ToStringaa, 4
(aa4 5
)aa5 6
;aa6 7
xbb 
.bb 
MfcatCdNavigationbb #
=bb$ %
nullbb& *
;bb* +
xcc 
.cc 
PjmfCdNavigationcc "
=cc# $
nullcc% )
;cc) *
}dd 
)dd 
;dd 
varff 
resultff 
=ff 
awaitff 
_meansofFinanceff .
.ff. /
AddAsyncff/ 7
(ff7 8
detailsListff8 C
,ffC D
tokenffE J
)ffJ K
.ffK L
ConfigureAwaitffL Z
(ffZ [
falseff[ `
)ff` a
;ffa b
awaitgg 
_workgg 
.gg 
CommitAsyncgg #
(gg# $
tokengg$ )
)gg) *
.gg* +
ConfigureAwaitgg+ 9
(gg9 :
falsegg: ?
)gg? @
;gg@ A
returnhh 
_mapperhh 
.hh 
Maphh 
<hh 
Listhh #
<hh# $$
ProjectMeansOfFinanceDTOhh$ <
>hh< =
>hh= >
(hh> ?
resulthh? E
)hhE F
;hhF G
}ii 	
publickk 
asynckk 
Taskkk 
<kk 
boolkk 
>kk  
DeleteMeansOfFinancekk  4
(kk4 5
intkk5 8
Idkk9 ;
,kk; <
CancellationTokenkk= N
tokenkkO T
)kkT U
{ll 	
varmm )
ProjectMeansOfFinance_detailsmm -
=mm. /
awaitmm0 5
_meansofFinancemm6 E
.mmE F+
FirstOrDefaultByExpressionAsyncmmF e
(mme f
xmmf g
=>mmh j
xmmk l
.mml m
PjmfCdmmm s
==mmt v
Idmmw y
&&mmz |
xmm} ~
.mm~ 
IsActive	mm á
==
mmà ä
true
mmã è
&&
mmê í
x
mmì î
.
mmî ï
	IsDeleted
mmï û
==
mmü °
false
mm¢ ß
,
mmß ®
token
mm© Æ
)
mmÆ Ø
.
mmØ ∞
ConfigureAwait
mm∞ æ
(
mmæ ø
false
mmø ƒ
)
mmƒ ≈
;
mm≈ ∆
ifnn 
(nn )
ProjectMeansOfFinance_detailsnn -
==nn. 0
nullnn1 5
)nn5 6
{oo 
throwpp 
newpp 
ArgumentExceptionpp +
(pp+ ,
$strpp, <
)pp< =
;pp= >
}qq )
ProjectMeansOfFinance_detailsss )
.ss) *
IsActivess* 2
=ss3 4
falsess5 :
;ss: ;)
ProjectMeansOfFinance_detailstt )
.tt) *
	IsDeletedtt* 3
=tt4 5
truett6 :
;tt: ;)
ProjectMeansOfFinance_detailsuu )
.uu) *

ModifiedByuu* 4
=uu5 6
	_userInfouu7 @
.uu@ A
UserIduuA G
;uuG H)
ProjectMeansOfFinance_detailsvv )
.vv) *
CreatedDatevv* 5
=vv6 7
DateTimevv8 @
.vv@ A
UtcNowvvA G
;vvG H
awaitxx 
_meansofFinancexx !
.xx! "
UpdateAsyncxx" -
(xx- .)
ProjectMeansOfFinance_detailsxx. K
,xxK L
tokenxxM R
)xxR S
.xxS T
ConfigureAwaitxxT b
(xxb c
falsexxc h
)xxh i
;xxi j
awaityy 
_workyy 
.yy 
CommitAsyncyy #
(yy# $
tokenyy$ )
)yy) *
.yy* +
ConfigureAwaityy+ 9
(yy9 :
falseyy: ?
)yy? @
;yy@ A
returnzz 
truezz 
;zz 
}{{ 	
public}} 
async}} 
Task}} 
<}} $
ProjectMeansOfFinanceDTO}} 2
>}}2 3!
GetByIdMeansOfFinance}}4 I
(}}I J
int}}J M
Id}}N P
,}}P Q
CancellationToken}}R c
token}}d i
)}}i j
{~~ 	
var 
list 
= 
await 
_meansofFinance ,
., -!
FindByExpressionAsync- B
(B C
xC D
=>E G
xH I
.I J
PjmfCdJ P
==Q S
IdT V
&&W Y
xZ [
.[ \
IsActive\ d
==e g
trueh l
&&m o
xp q
.q r
	IsDeletedr {
==| ~
false	 Ñ
,
Ñ Ö
token
Ü ã
)
ã å
.
å ç
ConfigureAwait
ç õ
(
õ ú
false
ú °
)
° ¢
;
¢ £
if
ÄÄ 
(
ÄÄ 
!
ÄÄ 
list
ÄÄ 
.
ÄÄ 
Any
ÄÄ 
(
ÄÄ 
)
ÄÄ 
)
ÄÄ 
{
ÅÅ 
throw
ÇÇ 
new
ÇÇ 
ArgumentException
ÇÇ +
(
ÇÇ+ ,
$str
ÇÇ, <
)
ÇÇ< =
;
ÇÇ= >
}
ÉÉ 
return
ÑÑ 
_mapper
ÑÑ 
.
ÑÑ 
Map
ÑÑ 
<
ÑÑ &
ProjectMeansOfFinanceDTO
ÑÑ 7
>
ÑÑ7 8
(
ÑÑ8 9
list
ÑÑ9 =
)
ÑÑ= >
;
ÑÑ> ?
}
ÖÖ 	
public
áá 
async
áá 
Task
áá 
<
áá 
IEnumerable
áá %
<
áá% &&
ProjectMeansOfFinanceDTO
áá& >
>
áá> ?
>
áá? @"
UpdateMeansOfFinance
ááA U
(
ááU V
List
ááV Z
<
ááZ [&
ProjectMeansOfFinanceDTO
áá[ s
>
áás t$
ProjectMeansOfFinanceááu ä
,ááä ã!
CancellationTokenááå ù
tokenááû £
)áá£ §
{
àà 	
var
ää 
enquiry
ää 
=
ää 
await
ää 
_enqRepository
ää  .
.
ää. /-
FirstOrDefaultByExpressionAsync
ää/ N
(
ääN O
x
ääO P
=>
ääQ S
x
ääT U
.
ääU V
	EnqtempId
ääV _
==
ää` b#
ProjectMeansOfFinance
ääc x
[
ääx y
$num
ääy z
]
ääz {
.
ää{ |
	EnqtempIdää| Ö
&&ääÜ à
xääâ ä
.äää ã
IsActiveääã ì
==ääî ñ
trueääó õ
&&ääú û
xääü †
.ää† °
	IsDeletedää° ™
==ää´ ≠
falseääÆ ≥
,ää≥ ¥
tokenääµ ∫
)ää∫ ª
.ääª º
ConfigureAwaitääº  
(ää  À
falseääÀ –
)ää– —
;ää— “
if
ãã 
(
ãã 
enquiry
ãã 
==
ãã 
null
ãã 
)
ãã  
{
åå 
throw
çç 
new
çç 
ArgumentException
çç +
(
çç+ ,
$str
çç, D
)
ççD E
;
ççE F
}
éé 
var
êê 
financeUList
êê 
=
êê 
await
êê $
_meansofFinance
êê% 4
.
êê4 5#
FindByExpressionAsync
êê5 J
(
êêJ K
x
êêK L
=>
êêM O
x
êêP Q
.
êêQ R
	EnqtempId
êêR [
==
êê\ ^#
ProjectMeansOfFinance
êê_ t
[
êêt u
$num
êêu v
]
êêv w
.
êêw x
	EnqtempIdêêx Å
&&êêÇ Ñ
xêêÖ Ü
.êêÜ á
IsActiveêêá è
==êêê í
trueêêì ó
&&êêò ö
xêêõ ú
.êêú ù
	IsDeletedêêù ¶
==êêß ©
falseêê™ Ø
,êêØ ∞
tokenêê± ∂
)êê∂ ∑
.êê∑ ∏
ConfigureAwaitêê∏ ∆
(êê∆ «
falseêê« Ã
)êêÃ Õ
;êêÕ Œ
financeUList
ëë 
.
ëë 
ForEach
ëë  
(
ëë  !
x
ëë! "
=>
ëë# %
{
íí 
x
ìì 
.
ìì 
IsActive
ìì 
=
ìì 
false
ìì "
;
ìì" #
x
îî 
.
îî 
	IsDeleted
îî 
=
îî 
true
îî "
;
îî" #
x
ïï 
.
ïï 

ModifiedBy
ïï 
=
ïï 
	_userInfo
ïï (
.
ïï( )
UserId
ïï) /
;
ïï/ 0
x
ññ 
.
ññ 
ModifiedDate
ññ 
=
ññ  
DateTime
ññ! )
.
ññ) *
UtcNow
ññ* 0
;
ññ0 1
}
óó 
)
óó 
;
óó 
await
òò 
_meansofFinance
òò !
.
òò! "
UpdateAsync
òò" -
(
òò- .
financeUList
òò. :
,
òò: ;
token
òò< A
)
òòA B
.
òòB C
ConfigureAwait
òòC Q
(
òòQ R
false
òòR W
)
òòW X
;
òòX Y
var
öö 
financeList
öö 
=
öö 
_mapper
öö %
.
öö% &
Map
öö& )
<
öö) *
List
öö* .
<
öö. /
TblEnqPjmfDet
öö/ <
>
öö< =
>
öö= >
(
öö> ?#
ProjectMeansOfFinance
öö? T
)
ööT U
;
ööU V
financeList
úú 
.
úú 
ForEach
úú 
(
úú  
x
úú  !
=>
úú" $
{
ùù 
x
ûû 
.
ûû 
	EnqPjmfId
ûû 
=
ûû 
$num
ûû 
;
ûû  
x
üü 
.
üü 
IsActive
üü 
=
üü 
true
üü !
;
üü! "
x
†† 
.
†† 
	IsDeleted
†† 
=
†† 
false
†† #
;
††# $
x
°° 
.
°° 
	CreatedBy
°° 
=
°° 
	_userInfo
°° '
.
°°' (
UserId
°°( .
;
°°. /
x
¢¢ 
.
¢¢ 
CreatedDate
¢¢ 
=
¢¢ 
DateTime
¢¢  (
.
¢¢( )
UtcNow
¢¢) /
;
¢¢/ 0
x
££ 
.
££ 
UniqueId
££ 
=
££ 
Guid
££ !
.
££! "
NewGuid
££" )
(
££) *
)
££* +
.
££+ ,
ToString
££, 4
(
££4 5
)
££5 6
;
££6 7
}
§§ 
)
§§ 
;
§§ 
var
¶¶ 
data
¶¶ 
=
¶¶ 
await
¶¶ 
_meansofFinance
¶¶ ,
.
¶¶, -
AddAsync
¶¶- 5
(
¶¶5 6
financeList
¶¶6 A
,
¶¶A B
token
¶¶C H
)
¶¶H I
.
¶¶I J
ConfigureAwait
¶¶J X
(
¶¶X Y
false
¶¶Y ^
)
¶¶^ _
;
¶¶_ `
await
ßß 
_work
ßß 
.
ßß 
CommitAsync
ßß #
(
ßß# $
token
ßß$ )
)
ßß) *
.
ßß* +
ConfigureAwait
ßß+ 9
(
ßß9 :
false
ßß: ?
)
ßß? @
;
ßß@ A
return
®® 
_mapper
®® 
.
®® 
Map
®® 
<
®® 
List
®® #
<
®®# $&
ProjectMeansOfFinanceDTO
®®$ <
>
®®< =
>
®®= >
(
®®> ?
data
®®? C
)
®®C D
;
®®D E
}
©© 	
}
™™ 
}´´ ˝k
qD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\ProjectDetails\ProjectCostService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H
ProjectDetailsH V
{ 
public 

class 
ProjectCostService #
:$ %
IProjectCostDetails& 9
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqPjcostDet+ :
>: ;
_projectCostDetails< O
;O P
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public   
ProjectCostService   !
(  ! "
IMapper  " )
mapper  * 0
,  0 1
UserInfo  2 :
userInfo  ; C
,  C D
IEntityRepository  E V
<  V W
TblEnqPjcostDet  W f
>  f g
ProjectCostDetails  h z
,  z {
IUnitOfWork	  | á
work
  à å
)
  å ç
{!! 	
_mapper"" 
="" 
mapper"" 
;"" 
	_userInfo## 
=## 
userInfo##  
;##  !
_projectCostDetails$$ 
=$$  !
ProjectCostDetails$$" 4
;$$4 5
_work%% 
=%% 
work%% 
;%% 
}&& 	
public(( 
async(( 
Task(( 
<(( !
ProjectCostDetailsDTO(( /
>((/ 0
GetAllProjectCosts((1 C
(((C D
CancellationToken((D U
token((V [
)(([ \
{)) 	
var** 
list** 
=** 
await** 
_projectCostDetails** 0
.**0 17
+FindByFirstOrDefalutMatchingPropertiesAsync**1 \
(**\ ]
token**] b
,**b c
x**d e
=>**f h
x**i j
.**j k
EnqPjcostId**k v
==**w y
x**z {
.**{ |
EnqPjcostId	**| á
)
**á à
.
**à â
ConfigureAwait
**â ó
(
**ó ò
false
**ò ù
)
**ù û
;
**û ü
if++ 
(++ 
list++ 
==++ 
null++ 
)++ 
{,, 
throw-- 
new-- 
ArgumentException-- +
(--+ ,
$str--, <
)--< =
;--= >
}.. 
return// 
_mapper// 
.// 
Map// 
<// !
ProjectCostDetailsDTO// 4
>//4 5
(//5 6
list//6 :
)//: ;
;//; <
}00 	
public22 
async22 
Task22 
<22 
List22 
<22 !
ProjectCostDetailsDTO22 4
>224 5
>225 6!
AddProjectCostDetails227 L
(22L M
List22M Q
<22Q R!
ProjectCostDetailsDTO22R g
>22g h
projectCost22i t
,22t u
CancellationToken	22v á
token
22à ç
)
22ç é
{33 	
var55 
existingData55 
=55 
await55 $
_projectCostDetails55% 8
.558 9!
FindByExpressionAsync559 N
(55N O
x55O P
=>55Q S
x55T U
.55U V
	EnqtempId55V _
==55` b
projectCost55c n
.55n o
FirstOrDefault55o }
(55} ~
)55~ 
.	55 Ä
	EnqtempId
55Ä â
&&
55ä å
x
55ç é
.
55é è
IsActive
55è ó
==
55ò ö
true
55õ ü
&&
55† ¢
x
55£ §
.
55§ •
	IsDeleted
55• Æ
==
55Ø ±
false
55≤ ∑
,
55∑ ∏
token
55π æ
)
55æ ø
.
55ø ¿
ConfigureAwait
55¿ Œ
(
55Œ œ
false
55œ ‘
)
55‘ ’
;
55’ ÷
existingData66 
.66 
ForEach66  
(66  !
x66! "
=>66# %
{77 
x88 
.88 
IsActive88 
=88 
false88 "
;88" #
x99 
.99 
	IsDeleted99 
=99 
true99 "
;99" #
x:: 
.:: 

ModifiedBy:: 
=:: 
	_userInfo:: (
.::( )
UserId::) /
;::/ 0
x;; 
.;; 
ModifiedDate;; 
=;;  
DateTime;;! )
.;;) *
UtcNow;;* 0
;;;0 1
}<< 
)<< 
;<< 
await== 
_projectCostDetails== %
.==% &
UpdateAsync==& 1
(==1 2
existingData==2 >
,==> ?
token==@ E
)==E F
.==F G
ConfigureAwait==G U
(==U V
false==V [
)==[ \
;==\ ]
var?? 
details?? 
=?? 
_mapper?? !
.??! "
Map??" %
<??% &
List??& *
<??* +
TblEnqPjcostDet??+ :
>??: ;
>??; <
(??< =
projectCost??= H
)??H I
;??I J
detailsAA 
.AA 
ForEachAA 
(AA 
xAA 
=>AA  
{BB 
xCC 
.CC 
EnqPjcostIdCC 
=CC 
$numCC  !
;CC! "
xDD 
.DD 
IsActiveDD 
=DD 
trueDD !
;DD! "
xEE 
.EE 
	IsDeletedEE 
=EE 
falseEE #
;EE# $
xFF 
.FF 
	CreatedByFF 
=FF 
	_userInfoFF '
.FF' (
UserIdFF( .
;FF. /
xGG 
.GG 
CreatedDateGG 
=GG 
DateTimeGG  (
.GG( )
UtcNowGG) /
;GG/ 0
xHH 
.HH 
UniqueIdHH 
=HH 
GuidHH !
.HH! "
NewGuidHH" )
(HH) *
)HH* +
.HH+ ,
ToStringHH, 4
(HH4 5
)HH5 6
;HH6 7
}II 
)II 
;II 
varJJ 
resultJJ 
=JJ 
awaitJJ 
_projectCostDetailsJJ 2
.JJ2 3
AddAsyncJJ3 ;
(JJ; <
detailsJJ< C
,JJC D
tokenJJE J
)JJJ K
.JJK L
ConfigureAwaitJJL Z
(JJZ [
falseJJ[ `
)JJ` a
;JJa b
awaitKK 
_workKK 
.KK 
CommitAsyncKK #
(KK# $
tokenKK$ )
)KK) *
.KK* +
ConfigureAwaitKK+ 9
(KK9 :
falseKK: ?
)KK? @
;KK@ A
returnLL 
_mapperLL 
.LL 
MapLL 
<LL 
ListLL #
<LL# $!
ProjectCostDetailsDTOLL$ 9
>LL9 :
>LL: ;
(LL; <
resultLL< B
)LLB C
;LLC D
}MM 	
publicOO 
asyncOO 
TaskOO 
<OO 
boolOO 
>OO $
DeleteProjectCostDetailsOO  8
(OO8 9
intOO9 <
IdOO= ?
,OO? @
CancellationTokenOOA R
tokenOOS X
)OOX Y
{PP 	
varQQ 
projectCost_detailsQQ #
=QQ$ %
awaitQQ& +
_projectCostDetailsQQ, ?
.QQ? @+
FirstOrDefaultByExpressionAsyncQQ@ _
(QQ_ `
xQQ` a
=>QQb d
xQQe f
.QQf g
PjcostCdQQg o
==QQp r
IdQQs u
&&QQv x
xQQy z
.QQz {
IsActive	QQ{ É
==
QQÑ Ü
true
QQá ã
&&
QQå é
x
QQè ê
.
QQê ë
	IsDeleted
QQë ö
==
QQõ ù
false
QQû £
,
QQ£ §
token
QQ• ™
)
QQ™ ´
.
QQ´ ¨
ConfigureAwait
QQ¨ ∫
(
QQ∫ ª
false
QQª ¿
)
QQ¿ ¡
;
QQ¡ ¬
ifRR 
(RR 
projectCost_detailsRR #
==RR$ &
nullRR' +
)RR+ ,
{SS 
throwTT 
newTT 
ArgumentExceptionTT +
(TT+ ,
$strTT, <
)TT< =
;TT= >
}UU 
projectCost_detailsWW 
.WW  
IsActiveWW  (
=WW) *
falseWW+ 0
;WW0 1
projectCost_detailsXX 
.XX  
	IsDeletedXX  )
=XX* +
trueXX, 0
;XX0 1
projectCost_detailsYY 
.YY  

ModifiedByYY  *
=YY+ ,
	_userInfoYY- 6
.YY6 7
UserIdYY7 =
;YY= >
projectCost_detailsZZ 
.ZZ  
CreatedDateZZ  +
=ZZ, -
DateTimeZZ. 6
.ZZ6 7
UtcNowZZ7 =
;ZZ= >
await\\ 
_projectCostDetails\\ %
.\\% &
UpdateAsync\\& 1
(\\1 2
projectCost_details\\2 E
,\\E F
token\\G L
)\\L M
.\\M N
ConfigureAwait\\N \
(\\\ ]
false\\] b
)\\b c
;\\c d
await]] 
_work]] 
.]] 
CommitAsync]] #
(]]# $
token]]$ )
)]]) *
.]]* +
ConfigureAwait]]+ 9
(]]9 :
false]]: ?
)]]? @
;]]@ A
return^^ 
true^^ 
;^^ 
}__ 	
publichh 
asynchh 
Taskhh 
<hh !
ProjectCostDetailsDTOhh /
>hh/ 0%
GetByIdProjectCostDetailshh1 J
(hhJ K
inthhK N
IdhhO Q
,hhQ R
CancellationTokenhhS d
tokenhhe j
)hhj k
{ii 	
varjj 
listjj 
=jj 
awaitjj 
_projectCostDetailsjj 0
.jj0 1!
FindByExpressionAsyncjj1 F
(jjF G
xjjG H
=>jjI K
xjjL M
.jjM N
PjcostCdjjN V
==jjW Y
IdjjZ \
&&jj] _
xjj` a
.jja b
IsActivejjb j
==jjk m
truejjn r
&&jjs u
xjjv w
.jjw x
	IsDeleted	jjx Å
==
jjÇ Ñ
false
jjÖ ä
,
jjä ã
token
jjå ë
)
jjë í
.
jjí ì
ConfigureAwait
jjì °
(
jj° ¢
false
jj¢ ß
)
jjß ®
;
jj® ©
ifkk 
(kk 
!kk 
listkk 
.kk 
Anykk 
(kk 
)kk 
)kk 
{ll 
throwmm 
newmm 
ArgumentExceptionmm +
(mm+ ,
$strmm, <
)mm< =
;mm= >
}nn 
returnoo 
_mapperoo 
.oo 
Mapoo 
<oo !
ProjectCostDetailsDTOoo 4
>oo4 5
(oo5 6
listoo6 :
)oo: ;
;oo; <
}pp 	
publicxx 
asyncxx 
Taskxx 
<xx 
boolxx 
>xx $
UpdateProjectCostDetailsxx  8
(xx8 9!
ProjectCostDetailsDTOxx9 N
projectCostxxO Z
,xxZ [
CancellationTokenxx\ m
tokenxxn s
)xxs t
{yy 	
TblEnqPjcostDet{{ #
projectCost_details_raw{{ 3
={{4 5
await{{6 ;
_projectCostDetails{{< O
.{{O P+
FirstOrDefaultByExpressionAsync{{P o
({{o p
x{{p q
=>{{r t
x{{u v
.{{v w
PjcostCd{{w 
==
{{Ä Ç
projectCost
{{É é
.
{{é è
PjcostCd
{{è ó
&&
{{ò ö
x
{{õ ú
.
{{ú ù
IsActive
{{ù •
==
{{¶ ®
true
{{© ≠
&&
{{Æ ∞
x
{{± ≤
.
{{≤ ≥
	IsDeleted
{{≥ º
==
{{Ω ø
false
{{¿ ≈
,
{{≈ ∆
token
{{« Ã
)
{{Ã Õ
.
{{Õ Œ
ConfigureAwait
{{Œ ‹
(
{{‹ ›
false
{{› ‚
)
{{‚ „
;
{{„ ‰
var}} 
projectCost_details}} #
=}}$ %
_mapper}}& -
.}}- .
Map}}. 1
<}}1 2!
ProjectCostDetailsDTO}}2 G
>}}G H
(}}H I#
projectCost_details_raw}}I `
)}}` a
;}}a b
if~~ 
(~~ 
projectCost_details~~ #
==~~$ &
null~~' +
)~~+ ,
{ 
throw
ÄÄ 
new
ÄÄ 
ArgumentException
ÄÄ +
(
ÄÄ+ ,
$str
ÄÄ, <
)
ÄÄ< =
;
ÄÄ= >
}
ÅÅ 
var
ââ 
_projectCost
ââ 
=
ââ 
_mapper
ââ &
.
ââ& '
Map
ââ' *
<
ââ* +
TblEnqPjcostDet
ââ+ :
>
ââ: ;
(
ââ; <!
projectCost_details
ââ< O
)
ââO P
;
ââP Q
await
ãã !
_projectCostDetails
ãã %
.
ãã% &
UpdateAsync
ãã& 1
(
ãã1 2
_projectCost
ãã2 >
,
ãã> ?
token
ãã@ E
)
ããE F
.
ããF G
ConfigureAwait
ããG U
(
ããU V
false
ããV [
)
ãã[ \
;
ãã\ ]
await
åå 
_work
åå 
.
åå 
CommitAsync
åå #
(
åå# $
token
åå$ )
)
åå) *
.
åå* +
ConfigureAwait
åå+ 9
(
åå9 :
false
åå: ?
)
åå? @
;
åå@ A
return
çç 
true
çç 
;
çç 
}
éé 	
}
ëë 
}íí Â~
}D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\ProjectDetails\ProjectFinancialDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H
ProjectDetailsH V
{ 
public 

class *
ProjectFinancialDetailsService /
:0 1$
IProjectFinancialDetails2 J
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqPjfinDet+ 9
>9 :
_financeService; J
;J K
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IEntityRepository *
<* +
TblEnqTemptab+ 8
>8 9
_enqRepository: H
;H I
public *
ProjectFinancialDetailsService -
(- .
IMapper. 5
mapper6 <
,< =
UserInfo> F
userInfoG O
,O P
IEntityRepositoryQ b
<b c
TblEnqPjfinDetc q
>q r
financeService	s Å
,
Å Ç
IUnitOfWork
É é
work
è ì
,
ì î
IEntityRepository
ï ¶
<
¶ ß
TblEnqTemptab
ß ¥
>
¥ µ
enqRepository
∂ √
=
ƒ ≈
null
∆  
)
  À
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !
_financeService 
= 
financeService ,
;, -
_work 
= 
work 
; 
_enqRepository   
=   
enqRepository   *
;  * +
}!! 	
public"" 
async"" 
Task"" 
<"" 
IEnumerable"" %
<""% &*
ProjectFinancialYearDetailsDTO""& D
>""D E
>""E F&
AddProjectFinancialDetails""G a
(""a b
List""b f
<""f g+
ProjectFinancialYearDetailsDTO	""g Ö
>
""Ö Ü
projectDetail
""á î
,
""î ï
CancellationToken
""ñ ß
token
""® ≠
)
""≠ Æ
{## 	
var$$ 
dataList$$ 
=$$ 
await$$  
_financeService$$! 0
.$$0 1!
FindByExpressionAsync$$1 F
($$F G
x$$G H
=>$$I K
x$$L M
.$$M N
	EnqtempId$$N W
==$$X Z
projectDetail$$[ h
[$$h i
$num$$i j
]$$j k
.$$k l
	EnqtempId$$l u
&&$$v x
x$$y z
.$$z {
IsActive	$${ É
==
$$Ñ Ü
true
$$á ã
&&
$$å é
x
$$è ê
.
$$ê ë
	IsDeleted
$$ë ö
==
$$õ ù
false
$$û £
,
$$£ §
token
$$• ™
)
$$™ ´
.
$$´ ¨
ConfigureAwait
$$¨ ∫
(
$$∫ ª
false
$$ª ¿
)
$$¿ ¡
;
$$¡ ¬
dataList%% 
.%% 
ForEach%% 
(%% 
x%% 
=>%% !
{&& 
x'' 
.'' 
	IsDeleted'' 
='' 
true'' "
;''" #
x(( 
.(( 
IsActive(( 
=(( 
false(( "
;((" #
x)) 
.)) 

ModifiedBy)) 
=)) 
	_userInfo)) (
.))( )
UserId))) /
;))/ 0
x** 
.** 
ModifiedDate** 
=**  
DateTime**! )
.**) *
UtcNow*** 0
;**0 1
}++ 
)++ 
;++ 
await,, 
_financeService,, !
.,,! "
UpdateAsync,," -
(,,- .
dataList,,. 6
,,,6 7
token,,8 =
),,= >
.,,> ?
ConfigureAwait,,? M
(,,M N
false,,N S
),,S T
;,,T U
var.. 
detailsList.. 
=.. 
_mapper.. %
...% &
Map..& )
<..) *
List..* .
<... /
TblEnqPjfinDet../ =
>..= >
>..> ?
(..? @
projectDetail..@ M
)..M N
;..N O
detailsList00 
.00 
ForEach00 
(00  
x00  !
=>00" $
{11 
x22 
.22 

EnqPjfinId22 
=22 
$num22  
;22  !
x33 
.33 
IsActive33 
=33 
true33 !
;33! "
x44 
.44 
	IsDeleted44 
=44 
false44 #
;44# $
x55 
.55 
	CreatedBy55 
=55 
	_userInfo55 '
.55' (
UserId55( .
;55. /
x66 
.66 
CreatedDate66 
=66 
DateTime66  (
.66( )
UtcNow66) /
;66/ 0
x77 
.77 
UniqueId77 
=77 
Guid77 !
.77! "
NewGuid77" )
(77) *
)77* +
.77+ ,
ToString77, 4
(774 5
)775 6
;776 7
}88 
)88 
;88 
var:: 
result:: 
=:: 
await:: 
_financeService:: .
.::. /
AddAsync::/ 7
(::7 8
detailsList::8 C
,::C D
token::E J
)::J K
.::K L
ConfigureAwait::L Z
(::Z [
false::[ `
)::` a
;::a b
await;; 
_work;; 
.;; 
CommitAsync;; #
(;;# $
token;;$ )
);;) *
.;;* +
ConfigureAwait;;+ 9
(;;9 :
false;;: ?
);;? @
;;;@ A
return<< 
_mapper<< 
.<< 
Map<< 
<<< 
List<< #
<<<# $*
ProjectFinancialYearDetailsDTO<<$ B
><<B C
><<C D
(<<D E
result<<E K
)<<K L
;<<L M
}== 	
public?? 
async?? 
Task?? 
<?? 
bool?? 
>?? )
DeleteProjectFinancialDetails??  =
(??= >
int??> A
Id??B D
,??D E
CancellationToken??F W
token??X ]
)??] ^
{@@ 	
varAA 
financeDetailsAA 
=AA  !
awaitAA" '
_financeServiceAA( 7
.AA7 8+
FirstOrDefaultByExpressionAsyncAA8 W
(AAW X
xAAX Y
=>AAZ \
xAA] ^
.AA^ _

EnqPjfinIdAA_ i
==AAj l
IdAAm o
&&AAp r
xAAs t
.AAt u
IsActiveAAu }
==	AA~ Ä
true
AAÅ Ö
&&
AAÜ à
x
AAâ ä
.
AAä ã
	IsDeleted
AAã î
==
AAï ó
false
AAò ù
,
AAù û
token
AAü §
)
AA§ •
.
AA• ¶
ConfigureAwait
AA¶ ¥
(
AA¥ µ
false
AAµ ∫
)
AA∫ ª
;
AAª º
ifBB 
(BB 
financeDetailsBB 
==BB !
nullBB" &
)BB& '
{CC 
throwDD 
newDD 
ArgumentExceptionDD +
(DD+ ,
$strDD, <
)DD< =
;DD= >
}EE 
financeDetailsGG 
.GG 
IsActiveGG #
=GG$ %
falseGG& +
;GG+ ,
financeDetailsHH 
.HH 
	IsDeletedHH $
=HH% &
trueHH' +
;HH+ ,
financeDetailsII 
.II 

ModifiedByII %
=II& '
	_userInfoII( 1
.II1 2
UserIdII2 8
;II8 9
financeDetailsJJ 
.JJ 
CreatedDateJJ &
=JJ' (
DateTimeJJ) 1
.JJ1 2
UtcNowJJ2 8
;JJ8 9
awaitLL 
_financeServiceLL !
.LL! "
UpdateAsyncLL" -
(LL- .
financeDetailsLL. <
,LL< =
tokenLL> C
)LLC D
.LLD E
ConfigureAwaitLLE S
(LLS T
falseLLT Y
)LLY Z
;LLZ [
awaitMM 
_workMM 
.MM 
CommitAsyncMM #
(MM# $
tokenMM$ )
)MM) *
.MM* +
ConfigureAwaitMM+ 9
(MM9 :
falseMM: ?
)MM? @
;MM@ A
returnNN 
trueNN 
;NN 
}OO 	
publicQQ 
TaskQQ 
<QQ *
ProjectFinancialYearDetailsDTOQQ 2
>QQ2 3"
GetAllProjectFinancialQQ4 J
(QQJ K*
ProjectFinancialYearDetailsDTOQQK i
projectCostQQj u
,QQu v
CancellationToken	QQw à
token
QQâ é
)
QQé è
{RR 	
throwSS 
newSS #
NotImplementedExceptionSS -
(SS- .
)SS. /
;SS/ 0
}TT 	
publicVV 
asyncVV 
TaskVV 
<VV *
ProjectFinancialYearDetailsDTOVV 8
>VV8 9*
GetByIdProjectFinancialDetailsVV: X
(VVX Y
intVVY \
IdVV] _
,VV_ `
CancellationTokenVVa r
tokenVVs x
)VVx y
{WW 	
varXX 
listXX 
=XX 
awaitXX 
_financeServiceXX ,
.XX, -!
FindByExpressionAsyncXX- B
(XXB C
xXXC D
=>XXE G
xXXH I
.XXI J

EnqPjfinIdXXJ T
==XXU W
IdXXX Z
&&XX[ ]
xXX^ _
.XX_ `
IsActiveXX` h
==XXi k
trueXXl p
&&XXq s
xXXt u
.XXu v
	IsDeletedXXv 
==
XXÄ Ç
false
XXÉ à
,
XXà â
token
XXä è
)
XXè ê
.
XXê ë
ConfigureAwait
XXë ü
(
XXü †
false
XX† •
)
XX• ¶
;
XX¶ ß
ifYY 
(YY 
!YY 
listYY 
.YY 
AnyYY 
(YY 
)YY 
)YY 
{ZZ 
throw[[ 
new[[ 
ArgumentException[[ +
([[+ ,
$str[[, <
)[[< =
;[[= >
}\\ 
return]] 
_mapper]] 
.]] 
Map]] 
<]] *
ProjectFinancialYearDetailsDTO]] =
>]]= >
(]]> ?
list]]? C
)]]C D
;]]D E
}^^ 	
public`` 
async`` 
Task`` 
<`` 
IEnumerable`` %
<``% &*
ProjectFinancialYearDetailsDTO``& D
>``D E
>``E F)
UpdateProjectFinancialDetails``G d
(``d e
List``e i
<``i j+
ProjectFinancialYearDetailsDTO	``j à
>
``à â
projectFinancial
``ä ö
,
``ö õ
CancellationToken
``ú ≠
token
``Æ ≥
)
``≥ ¥
{aa 	
varbb 
enquirybb 
=bb 
awaitbb 
_enqRepositorybb  .
.bb. /+
FirstOrDefaultByExpressionAsyncbb/ N
(bbN O
xbbO P
=>bbQ S
xbbT U
.bbU V
	EnqtempIdbbV _
==bb` b
projectFinancialbbc s
[bbs t
$numbbt u
]bbu v
.bbv w
	EnqtempId	bbw Ä
&&
bbÅ É
x
bbÑ Ö
.
bbÖ Ü
IsActive
bbÜ é
==
bbè ë
true
bbí ñ
&&
bbó ô
x
bbö õ
.
bbõ ú
	IsDeleted
bbú •
==
bb¶ ®
false
bb© Æ
,
bbÆ Ø
token
bb∞ µ
)
bbµ ∂
.
bb∂ ∑
ConfigureAwait
bb∑ ≈
(
bb≈ ∆
false
bb∆ À
)
bbÀ Ã
;
bbÃ Õ
ifcc 
(cc 
enquirycc 
==cc 
nullcc 
)cc  
{dd 
throwee 
newee 
ArgumentExceptionee +
(ee+ ,
$stree, D
)eeD E
;eeE F
}ff 
varhh 
registrationUListhh !
=hh" #
awaithh$ )
_financeServicehh* 9
.hh9 :!
FindByExpressionAsynchh: O
(hhO P
xhhP Q
=>hhR T
xhhU V
.hhV W
	EnqtempIdhhW `
==hha c
projectFinancialhhd t
[hht u
$numhhu v
]hhv w
.hhw x
	EnqtempId	hhx Å
&&
hhÇ Ñ
x
hhÖ Ü
.
hhÜ á
IsActive
hhá è
==
hhê í
true
hhì ó
&&
hhò ö
x
hhõ ú
.
hhú ù
	IsDeleted
hhù ¶
==
hhß ©
false
hh™ Ø
,
hhØ ∞
token
hh± ∂
)
hh∂ ∑
.
hh∑ ∏
ConfigureAwait
hh∏ ∆
(
hh∆ «
false
hh« Ã
)
hhÃ Õ
;
hhÕ Œ
registrationUListii 
.ii 
ForEachii %
(ii% &
xii& '
=>ii( *
{jj 
xkk 
.kk 
IsActivekk 
=kk 
falsekk "
;kk" #
xll 
.ll 
	IsDeletedll 
=ll 
truell "
;ll" #
xmm 
.mm 

ModifiedBymm 
=mm 
	_userInfomm (
.mm( )
UserIdmm) /
;mm/ 0
xnn 
.nn 
ModifiedDatenn 
=nn  
DateTimenn! )
.nn) *
UtcNownn* 0
;nn0 1
}oo 
)oo 
;oo 
awaitpp 
_financeServicepp !
.pp! "
UpdateAsyncpp" -
(pp- .
registrationUListpp. ?
,pp? @
tokenppA F
)ppF G
.ppG H
ConfigureAwaitppH V
(ppV W
falseppW \
)pp\ ]
;pp] ^
varrr 
registrationListrr  
=rr! "
_mapperrr# *
.rr* +
Maprr+ .
<rr. /
Listrr/ 3
<rr3 4
TblEnqPjfinDetrr4 B
>rrB C
>rrC D
(rrD E
projectFinancialrrE U
)rrU V
;rrV W
registrationListtt 
.tt 
ForEachtt $
(tt$ %
xtt% &
=>tt' )
{uu 
xvv 
.vv 
IsActivevv 
=vv 
truevv !
;vv! "
xww 
.ww 
	IsDeletedww 
=ww 
falseww #
;ww# $
xxx 
.xx 
	CreatedByxx 
=xx 
	_userInfoxx '
.xx' (
UserIdxx( .
;xx. /
xyy 
.yy 
CreatedDateyy 
=yy 
DateTimeyy  (
.yy( )
UtcNowyy) /
;yy/ 0
xzz 
.zz 
UniqueIdzz 
=zz 
Guidzz !
.zz! "
NewGuidzz" )
(zz) *
)zz* +
.zz+ ,
ToStringzz, 4
(zz4 5
)zz5 6
;zz6 7
}{{ 
){{ 
;{{ 
var}} 
data}} 
=}} 
await}} 
_financeService}} ,
.}}, -
AddAsync}}- 5
(}}5 6
registrationList}}6 F
,}}F G
token}}H M
)}}M N
.}}N O
ConfigureAwait}}O ]
(}}] ^
false}}^ c
)}}c d
;}}d e
await~~ 
_work~~ 
.~~ 
CommitAsync~~ #
(~~# $
token~~$ )
)~~) *
.~~* +
ConfigureAwait~~+ 9
(~~9 :
false~~: ?
)~~? @
;~~@ A
return 
_mapper 
. 
Map 
< 
List #
<# $*
ProjectFinancialYearDetailsDTO$ B
>B C
>C D
(D E
dataE I
)I J
;J K
}
ÄÄ 	
}
ÅÅ 
}ÇÇ ’a
{D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\ProjectDetails\WorkingCapitalDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H
ProjectDetailsH V
{ 
public 

class (
WorkingCapitalDetailsService -
:. /"
IWorkingCapitalDetails0 F
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqWcDet+ 6
>6 7%
_workingCapitalRepository8 Q
;Q R
private 
readonly 
IEnquiryHomeService ,
_enquiryService- <
;< =
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public (
WorkingCapitalDetailsService +
(+ ,
IMapper, 3
mapper4 :
,: ;
UserInfo< D
userInfoE M
,M N
IEntityRepositoryO `
<` a
TblEnqWcDeta l
>l m%
workingCapitalRepository	n Ü
,
Ü á
IUnitOfWork
à ì
work
î ò
,
ò ô!
IEnquiryHomeService
ö ≠
enquiryService
Æ º
=
Ω æ
null
ø √
)
√ ƒ
{ 	
_mapper 
= 
mapper 
; 
	_userInfo   
=   
userInfo    
;    !%
_workingCapitalRepository!! %
=!!& '$
workingCapitalRepository!!( @
;!!@ A
_work"" 
="" 
work"" 
;"" 
_enquiryService## 
=## 
enquiryService## ,
;##, -
}$$ 	
public%% 
async%% 
Task%% 
<%% ,
 ProjectWorkingCapitalDeatailsDTO%% :
>%%: ;$
AddWorkingCapitalDetails%%< T
(%%T U,
 ProjectWorkingCapitalDeatailsDTO%%U u
WorkingCapitalDTO	%%v á
,
%%á à
CancellationToken
%%â ö
token
%%õ †
)
%%† °
{&& 	
if)) 
()) 
WorkingCapitalDTO)) !
.))! "
	EnqtempId))" +
==)), .
$num))/ 0
||))1 3
WorkingCapitalDTO))4 E
.))E F
	EnqtempId))F O
==))P R
null))S W
)))W X
{** 
WorkingCapitalDTO++ !
.++! "
	EnqtempId++" +
=++, -
await++. 3
_enquiryService++4 C
.++C D
AddNewEnqiry++D P
(++P Q
	_userInfo++Q Z
.++Z [
Pan++[ ^
,++^ _
token++` e
)++e f
.++f g
ConfigureAwait++g u
(++u v
false++v {
)++{ |
;++| }
},, 
else-- 
{-- 
await.. '
DeleteWorkingCapitalDetails.. 1
(..1 2
(..2 3
int..3 6
)..6 7
WorkingCapitalDTO..7 H
...H I
	EnqtempId..I R
,..R S
token..T Y
)..Y Z
...Z [
ConfigureAwait..[ i
(..i j
false..j o
)..o p
;..p q
}// 
var00 
details00 
=00 
_mapper00 !
.00! "
Map00" %
<00% &
TblEnqWcDet00& 1
>001 2
(002 3
WorkingCapitalDTO003 D
)00D E
;00E F
details22 
.22 
EnqWcId22 
=22 
$num22 
;22  
details33 
.33 
IsActive33 
=33 
true33 #
;33# $
details44 
.44 
	IsDeleted44 
=44 
false44  %
;44% &
details55 
.55 
	CreatedBy55 
=55 
	_userInfo55  )
.55) *
Pan55* -
;55- .
details66 
.66 
CreatedDate66 
=66  !
DateTime66" *
.66* +
UtcNow66+ 1
;661 2
details77 
.77 
UniqueId77 
=77 
Guid77 #
.77# $
NewGuid77$ +
(77+ ,
)77, -
.77- .
ToString77. 6
(776 7
)777 8
;778 9
var99 
result99 
=99 
await99 %
_workingCapitalRepository99 8
.998 9
AddAsync999 A
(99A B
details99B I
,99I J
token99K P
)99P Q
.99Q R
ConfigureAwait99R `
(99` a
false99a f
)99f g
;99g h
await:: 
_work:: 
.:: 
CommitAsync:: #
(::# $
token::$ )
)::) *
.::* +
ConfigureAwait::+ 9
(::9 :
false::: ?
)::? @
;::@ A
return;; 
_mapper;; 
.;; 
Map;; 
<;; ,
 ProjectWorkingCapitalDeatailsDTO;; ?
>;;? @
(;;@ A
result;;A G
);;G H
;;;H I
}<< 	
public>> 
async>> 
Task>> 
<>> 
bool>> 
>>> '
DeleteWorkingCapitalDetails>>  ;
(>>; <
int>>< ?
	enquiryId>>@ I
,>>I J
CancellationToken>>K \
token>>] b
)>>b c
{?? 	
var@@ 
workingCapital@@ 
=@@  
await@@! &%
_workingCapitalRepository@@' @
.@@@ A+
FirstOrDefaultByExpressionAsync@@A `
(@@` a
x@@a b
=>@@c e
x@@f g
.@@g h
	EnqtempId@@h q
==@@r t
	enquiryId@@u ~
&&	@@ Å
x
@@Ç É
.
@@É Ñ
IsActive
@@Ñ å
==
@@ç è
true
@@ê î
&&
@@ï ó
x
@@ò ô
.
@@ô ö
	IsDeleted
@@ö £
==
@@§ ¶
false
@@ß ¨
,
@@¨ ≠
token
@@Æ ≥
)
@@≥ ¥
.
@@¥ µ
ConfigureAwait
@@µ √
(
@@√ ƒ
false
@@ƒ …
)
@@…  
;
@@  À
ifAA 
(AA 
workingCapitalAA 
==AA !
nullAA" &
)AA& '
{BB 
returnCC 
falseCC 
;CC 
}DD 
workingCapitalFF 
.FF 
IsActiveFF #
=FF$ %
falseFF& +
;FF+ ,
workingCapitalGG 
.GG 
	IsDeletedGG $
=GG% &
trueGG' +
;GG+ ,
workingCapitalHH 
.HH 

ModifiedByHH %
=HH& '
	_userInfoHH( 1
.HH1 2
PanHH2 5
;HH5 6
workingCapitalII 
.II 
CreatedDateII &
=II' (
DateTimeII) 1
.II1 2
UtcNowII2 8
;II8 9
awaitKK %
_workingCapitalRepositoryKK +
.KK+ ,
UpdateAsyncKK, 7
(KK7 8
workingCapitalKK8 F
,KKF G
tokenKKH M
)KKM N
.KKN O
ConfigureAwaitKKO ]
(KK] ^
falseKK^ c
)KKc d
;KKd e
awaitLL 
_workLL 
.LL 
CommitAsyncLL #
(LL# $
tokenLL$ )
)LL) *
.LL* +
ConfigureAwaitLL+ 9
(LL9 :
falseLL: ?
)LL? @
;LL@ A
returnMM 
trueMM 
;MM 
}NN 	
publicPP 
asyncPP 
TaskPP 
<PP ,
 ProjectWorkingCapitalDeatailsDTOPP :
>PP: ;(
GetByIdWorkingCapitalDetailsPP< X
(PPX Y
intPPY \
	enquiryIdPP] f
,PPf g
CancellationTokenPPh y
tokenPPz 
)	PP Ä
{QQ 	
varRR 
listRR 
=RR 
awaitRR %
_workingCapitalRepositoryRR 6
.RR6 7!
FindByExpressionAsyncRR7 L
(RRL M
xRRM N
=>RRO Q
xRRR S
.RRS T
EnqWcIdRRT [
==RR\ ^
	enquiryIdRR_ h
&&RRi k
xRRl m
.RRm n
IsActiveRRn v
==RRw y
trueRRz ~
&&	RR Å
x
RRÇ É
.
RRÉ Ñ
	IsDeleted
RRÑ ç
==
RRé ê
false
RRë ñ
,
RRñ ó
token
RRò ù
)
RRù û
.
RRû ü
ConfigureAwait
RRü ≠
(
RR≠ Æ
false
RRÆ ≥
)
RR≥ ¥
;
RR¥ µ
ifSS 
(SS 
!SS 
listSS 
.SS 
AnySS 
(SS 
)SS 
)SS 
{TT 
throwUU 
newUU 
ArgumentExceptionUU +
(UU+ ,
$strUU, <
)UU< =
;UU= >
}VV 
returnWW 
_mapperWW 
.WW 
MapWW 
<WW ,
 ProjectWorkingCapitalDeatailsDTOWW ?
>WW? @
(WW@ A
listWWA E
)WWE F
;WWF G
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
<ZZ ,
 ProjectWorkingCapitalDeatailsDTOZZ :
>ZZ: ;'
UpdateWorkingCapitalDetailsZZ< W
(ZZW X,
 ProjectWorkingCapitalDeatailsDTOZZX x
WorkingCapitalDTO	ZZy ä
,
ZZä ã
CancellationToken
ZZå ù
token
ZZû £
)
ZZ£ §
{[[ 	
var\\ 
workingDetails\\ 
=\\  
await\\! &%
_workingCapitalRepository\\' @
.]]% &7
+FindByFirstOrDefalutMatchingPropertiesAsync]]& Q
(]]Q R
token]]R W
,]]W X
x]]Y Z
=>]][ ]
x]]^ _
.]]_ `
	EnqtempId]]` i
==]]j l
WorkingCapitalDTO]]m ~
.]]~ 
	EnqtempId	]] à
&&^^( *
x^^+ ,
.^^, -
EnqWcId^^- 4
==^^5 7
WorkingCapitalDTO^^8 I
.^^I J
EnqWcId^^J Q
&&__( *
x__+ ,
.__, -
IsActive__- 5
==__6 8
true__9 =
&&__> @
x__A B
.__B C
	IsDeleted__C L
==__M O
false__P U
)__U V
.``% &
ConfigureAwait``& 4
(``4 5
false``5 :
)``: ;
;``; <
ifbb 
(bb 
workingDetailsbb 
==bb !
nullbb" &
)bb& '
{cc 
throwdd 
newdd 
ArgumentExceptiondd +
(dd+ ,
$strdd, ;
)dd; <
;dd< =
}ee 
varff 
	wCDetailsff 
=ff 
_mapperff #
.ff# $
Mapff$ '
<ff' (
TblEnqWcDetff( 3
>ff3 4
(ff4 5
WorkingCapitalDTOff5 F
)ffF G
;ffG H
	wCDetailshh 
.hh 

ModifiedByhh  
=hh! "
	_userInfohh# ,
.hh, -
UserIdhh- 3
;hh3 4
	wCDetailsii 
.ii 
ModifiedDateii "
=ii# $
DateTimeii% -
.ii- .
UtcNowii. 4
;ii4 5
	wCDetailskk 
.kk 
IsActivekk 
=kk  
falsekk! &
;kk& '
	wCDetailsll 
.ll 
	IsDeletedll 
=ll  !
falsell" '
;ll' (
varoo 
resultoo 
=oo 
awaitoo %
_workingCapitalRepositoryoo 8
.oo8 9
UpdateAsyncoo9 D
(ooD E
	wCDetailsooE N
,ooN O
tokenooP U
)ooU V
.ooV W
ConfigureAwaitooW e
(ooe f
falseoof k
)ook l
;ool m
awaitpp 
_workpp 
.pp 
CommitAsyncpp #
(pp# $
tokenpp$ )
)pp) *
.pp* +
ConfigureAwaitpp+ 9
(pp9 :
falsepp: ?
)pp? @
;pp@ A
returnqq 
_mapperqq 
.qq 
Mapqq 
<qq ,
 ProjectWorkingCapitalDeatailsDTOqq ?
>qq? @
(qq@ A
resultqqA G
)qqG H
;qqH I
}rr 	
}ss 
}tt Ÿd
éD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\PromoterGuarantorDetails\GuarantorAssetsNetWorthDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H$
PromoterGuarantorDetailsH `
{ 
public 

class 1
%GuarantorAssetsNetWorthDetailsService 6
:7 8+
IGuarantorAssetsNetWorthDetails9 X
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqGassetDet+ :
>: ;#
_guarAssetsNWRepository< S
;S T
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public 1
%GuarantorAssetsNetWorthDetailsService 4
(4 5
IMapper5 <
mapper= C
,C D
UserInfoE M
userInfoN V
,V W
IEntityRepositoryX i
<i j
TblEnqGassetDetj y
>y z#
guarAssetsNWRepository	{ ë
,
ë í
IUnitOfWork
ì û
work
ü £
)
£ §
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !#
_guarAssetsNWRepository #
=$ %"
guarAssetsNWRepository& <
;< =
_work 
= 
work 
; 
} 	
public!! 
async!! 
Task!! 
<!! 
IEnumerable!! %
<!!% &&
GuarantorAssetsNetWorthDTO!!& @
>!!@ A
>!!A B-
!AddGuarantorAssetsNetWorthDetails!!C d
(!!d e
List!!e i
<!!i j'
GuarantorAssetsNetWorthDTO	!!j Ñ
>
!!Ñ Ö!
GuarantorAssetNWDTO
!!Ü ô
,
!!ô ö
CancellationToken
!!õ ¨
token
!!≠ ≤
)
!!≤ ≥
{"" 	
var## 
detailsList## 
=## 
_mapper## %
.##% &
Map##& )
<##) *
List##* .
<##. /
TblEnqGassetDet##/ >
>##> ?
>##? @
(##@ A
GuarantorAssetNWDTO##A T
)##T U
;##U V
detailsList%% 
.%% 
ForEach%% 
(%%  
x%%  !
=>%%" $
{&& 
x'' 
.'' 
IsActive'' 
='' 
true'' !
;''! "
x(( 
.(( 
	IsDeleted(( 
=(( 
false(( #
;((# $
x)) 
.)) 
	CreatedBy)) 
=)) 
	_userInfo)) '
.))' (
UserId))( .
;)). /
x** 
.** 
CreatedDate** 
=** 
DateTime**  (
.**( )
UtcNow**) /
;**/ 0
x++ 
.++ 
UniqueId++ 
=++ 
Guid++ !
.++! "
NewGuid++" )
(++) *
)++* +
.+++ ,
ToString++, 4
(++4 5
)++5 6
;++6 7
},, 
),, 
;,, 
var.. 
result.. 
=.. 
await.. #
_guarAssetsNWRepository.. 6
...6 7
AddAsync..7 ?
(..? @
detailsList..@ K
,..K L
token..M R
)..R S
...S T
ConfigureAwait..T b
(..b c
false..c h
)..h i
;..i j
await// 
_work// 
.// 
CommitAsync// #
(//# $
token//$ )
)//) *
.//* +
ConfigureAwait//+ 9
(//9 :
false//: ?
)//? @
;//@ A
return00 
_mapper00 
.00 
Map00 
<00 
List00 #
<00# $&
GuarantorAssetsNetWorthDTO00$ >
>00> ?
>00? @
(00@ A
result00A G
)00G H
;00H I
}11 	
public33 
async33 
Task33 
<33 
bool33 
>33 0
$DeleteGuarantorAssetsNetWorthDetails33  D
(33D E
int33E H
	enquiryId33I R
,33R S
CancellationToken33T e
token33f k
)33k l
{44 	
var55 
guarAssetsNetWorth55 "
=55# $
await55% *#
_guarAssetsNWRepository55+ B
.55B C+
FirstOrDefaultByExpressionAsync55C b
(55b c
x55c d
=>55e g
x55h i
.55i j
	EnqtempId55j s
==55t v
	enquiryId	55w Ä
&&
55Å É
x
55Ñ Ö
.
55Ö Ü
IsActive
55Ü é
==
55è ë
true
55í ñ
&&
55ó ô
x
55ö õ
.
55õ ú
	IsDeleted
55ú •
==
55¶ ®
false
55© Æ
,
55Æ Ø
token
55∞ µ
)
55µ ∂
.
55∂ ∑
ConfigureAwait
55∑ ≈
(
55≈ ∆
false
55∆ À
)
55À Ã
;
55Ã Õ
if66 
(66 
guarAssetsNetWorth66 "
==66# %
null66& *
)66* +
{77 
throw88 
new88 
ArgumentException88 +
(88+ ,
$str88, <
)88< =
;88= >
}99 
guarAssetsNetWorth;; 
.;; 
IsActive;; '
=;;( )
false;;* /
;;;/ 0
guarAssetsNetWorth<< 
.<< 
	IsDeleted<< (
=<<) *
true<<+ /
;<</ 0
guarAssetsNetWorth== 
.== 

ModifiedBy== )
===* +
	_userInfo==, 5
.==5 6
UserId==6 <
;==< =
guarAssetsNetWorth>> 
.>> 
CreatedDate>> *
=>>+ ,
DateTime>>- 5
.>>5 6
UtcNow>>6 <
;>>< =
await@@ #
_guarAssetsNWRepository@@ )
.@@) *
UpdateAsync@@* 5
(@@5 6
guarAssetsNetWorth@@6 H
,@@H I
token@@J O
)@@O P
.@@P Q
ConfigureAwait@@Q _
(@@_ `
false@@` e
)@@e f
;@@f g
awaitAA 
_workAA 
.AA 
CommitAsyncAA #
(AA# $
tokenAA$ )
)AA) *
.AA* +
ConfigureAwaitAA+ 9
(AA9 :
falseAA: ?
)AA? @
;AA@ A
returnBB 
trueBB 
;BB 
}CC 	
publicEE 
asyncEE 
TaskEE 
<EE 
ListEE 
<EE &
GuarantorAssetsNetWorthDTOEE 9
>EE9 :
>EE: ;1
%GetByIdGuarantorAssetsNetWorthDetailsEE< a
(EEa b
intEEb e
	enquiryIdEEf o
,EEo p
CancellationToken	EEq Ç
token
EEÉ à
)
EEà â
{FF 	
varGG 
listGG 
=GG 
awaitGG #
_guarAssetsNWRepositoryGG 4
.GG4 5!
FindByExpressionAsyncGG5 J
(GGJ K
xGGK L
=>GGM O
xGGP Q
.GGQ R
EnqGuarassetIdGGR `
==GGa c
	enquiryIdGGd m
&&GGn p
xGGq r
.GGr s
IsActiveGGs {
==GG| ~
true	GG É
&&
GGÑ Ü
x
GGá à
.
GGà â
	IsDeleted
GGâ í
==
GGì ï
false
GGñ õ
,
GGõ ú
token
GGù ¢
)
GG¢ £
.
GG£ §
ConfigureAwait
GG§ ≤
(
GG≤ ≥
false
GG≥ ∏
)
GG∏ π
;
GGπ ∫
ifHH 
(HH 
!HH 
listHH 
.HH 
AnyHH 
(HH 
)HH 
)HH 
{II 
throwJJ 
newJJ 
ArgumentExceptionJJ +
(JJ+ ,
$strJJ, <
)JJ< =
;JJ= >
}KK 
returnLL 
_mapperLL 
.LL 
MapLL 
<LL 
ListLL #
<LL# $&
GuarantorAssetsNetWorthDTOLL$ >
>LL> ?
>LL? @
(LL@ A
listLLA E
)LLE F
;LLF G
}MM 	
publicOO 
asyncOO 
TaskOO 
<OO 
IEnumerableOO %
<OO% &&
GuarantorAssetsNetWorthDTOOO& @
>OO@ A
>OOA B0
$UpdateGuarantorAssetsNetWorthDetailsOOC g
(OOg h
ListOOh l
<OOl m'
GuarantorAssetsNetWorthDTO	OOm á
>
OOá à!
GuarantorAssetNWDTO
OOâ ú
,
OOú ù
CancellationToken
OOû Ø
token
OO∞ µ
)
OOµ ∂
{PP 	
varRR 
guarantorAssetListRR "
=RR" #
awaitRR$ )#
_guarAssetsNWRepositoryRR* A
.RRA B!
FindByExpressionAsyncRRB W
(RRW X
xRRX Y
=>RRY [
xRR[ \
.RR\ ]
	EnqtempIdRR] f
==RRf h
GuarantorAssetNWDTORRi |
[RR| }
$numRR} ~
]RR~ 
.	RR Ä
	EnqtempId
RRÄ â
&&
RRä å
x
RRç é
.
RRé è
IsActive
RRè ó
==
RRò ö
true
RRõ ü
&&
RR† ¢
x
RR£ §
.
RR§ •
	IsDeleted
RR• Æ
==
RRØ ±
false
RR≤ ∑
,
RR∑ ∏
token
RRπ æ
)
RRæ ø
.
RRø ¿
ConfigureAwait
RR¿ Œ
(
RRŒ œ
false
RRœ ‘
)
RR‘ ’
;
RR’ ÷
guarantorAssetListSS 
.SS 
ForEachSS &
(SS& '
xSS' (
=>SS) +
{TT 
xUU 
.UU 
IsActiveUU 
=UU 
falseUU "
;UU" #
xVV 
.VV 
	IsDeletedVV 
=VV 
trueVV "
;VV" #
xWW 
.WW 

ModifiedByWW 
=WW 
	_userInfoWW (
.WW( )
UserIdWW) /
;WW/ 0
xXX 
.XX 
ModifiedDateXX 
=XX  
DateTimeXX! )
.XX) *
UtcNowXX* 0
;XX0 1
}YY 
)YY 
;YY 
awaitZZ #
_guarAssetsNWRepositoryZZ )
.ZZ) *
UpdateAsyncZZ* 5
(ZZ5 6
guarantorAssetListZZ6 H
,ZZH I
tokenZZI N
)ZZN O
.ZZO P
ConfigureAwaitZZP ^
(ZZ^ _
falseZZ_ d
)ZZd e
;ZZe f
var[[ 
detailsList[[ 
=[[ 
_mapper[[ %
.[[% &
Map[[& )
<[[) *
List[[* .
<[[. /
TblEnqGassetDet[[/ >
>[[> ?
>[[? @
([[@ A
GuarantorAssetNWDTO[[A T
)[[T U
;[[U V
detailsList\\ 
.\\ 
ForEach\\ 
(\\  
x\\  !
=>\\" $
{]] 
x^^ 
.^^ 
EnqGuarassetId^^  
=^^! "
$num^^# $
;^^$ %
x__ 
.__ 
IsActive__ 
=__ 
true__ !
;__! "
x`` 
.`` 
	IsDeleted`` 
=`` 
false`` #
;``# $
xaa 
.aa 
	CreatedByaa 
=aa 
	_userInfoaa '
.aa' (
UserIdaa( .
;aa. /
xbb 
.bb 
CreatedDatebb 
=bb 
DateTimebb  (
.bb( )
UtcNowbb) /
;bb/ 0
xcc 
.cc 
UniqueIdcc 
=cc 
Guidcc !
.cc! "
NewGuidcc" )
(cc) *
)cc* +
.cc+ ,
ToStringcc, 4
(cc4 5
)cc5 6
;cc6 7
}dd 
)dd 
;dd 
varff 
resultff 
=ff 
awaitff #
_guarAssetsNWRepositoryff 6
.ff6 7
AddAsyncff7 ?
(ff? @
detailsListff@ K
,ffK L
tokenffM R
)ffR S
.ffS T
ConfigureAwaitffT b
(ffb c
falseffc h
)ffh i
;ffi j
awaitgg 
_workgg 
.gg 
CommitAsyncgg #
(gg# $
tokengg$ )
)gg) *
.gg* +
ConfigureAwaitgg+ 9
(gg9 :
falsegg: ?
)gg? @
;gg@ A
returnhh 
_mapperhh 
.hh 
Maphh 
<hh 
Listhh #
<hh# $&
GuarantorAssetsNetWorthDTOhh$ >
>hh> ?
>hh? @
(hh@ A
resulthhA G
)hhG H
;hhH I
}ii 	
}jj 
}kk ÷°
ÄD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\PromoterGuarantorDetails\GuarantorDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H$
PromoterGuarantorDetailsH `
{ 
public 

class #
GuarantorDetailsService (
:) *
IGuarantorDetails+ <
{ 
private 
readonly 
IEntityRepository *
<* +
TblPromCdtab+ 7
>7 8%
_promoterMasterRepository9 R
;R S
private 
readonly 
IEntityRepository *
<* +
TblEnqGuarDet+ 8
>8 9 
_guarantorRepository: N
;N O
private 
readonly 
IEntityRepository *
<* +
TblEnqGbankDet+ 9
>9 :$
_guarantorBankRepository; S
;S T
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IEnquiryHomeService ,
_enquiryService- <
;< =
public #
GuarantorDetailsService &
(& '
IMapper' .
mapper/ 5
,5 6
UserInfo7 ?
userInfo@ H
,H I
IEntityRepositoryJ [
<[ \
TblEnqGuarDet\ i
>i j
guarantorRepositoryk ~
,~ 
IEntityRepository 
< 
TblPromCdtab *
>* +$
promoterMasterRepository, D
,D E
IEntityRepositoryF W
<W X
TblEnqGbankDetX f
>f g#
guarantorBankRepositoryh 
,	 Ä
IUnitOfWork
Å å
work
ç ë
,
ë í!
IEnquiryHomeService
ì ¶
enquiryService
ß µ
)
µ ∂
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  ! 
_guarantorRepository    
=  ! "
guarantorRepository  # 6
;  6 7%
_promoterMasterRepository!! %
=!!& '$
promoterMasterRepository!!( @
;!!@ A$
_guarantorBankRepository"" $
=""% &#
guarantorBankRepository""' >
;""> ?
_work## 
=## 
work## 
;## 
_enquiryService$$ 
=$$ 
enquiryService$$ ,
;$$, -
}%% 	
public&& 
async&& 
Task&& 
<&& 
IEnumerable&& %
<&&% &
GuarantorDetailsDTO&&& 9
>&&9 :
>&&: ;
AddGuarantorDetails&&< O
(&&O P
List&&P T
<&&T U
GuarantorDetailsDTO&&U h
>&&h i
GuarantorDTO&&j v
,&&v w
CancellationToken	&&x â
token
&&ä è
)
&&è ê
{'' 	
var(( 
promoterList(( 
=(( 
new(( "
List((# '
<((' (
GuarantorDetailsDTO((( ;
>((; <
(((< =
)((= >
;((> ?
var)) 
checkEnqTempId)) 
=))  
GuarantorDTO))! -
.))- .
FirstOrDefault)). <
())< =
x))= >
=>))? A
x))B C
.))C D
	EnqtempId))D M
==))N P
null))Q U
||))V X
x))Y Z
.))Z [
	EnqtempId))[ d
==))e g
$num))h i
)))i j
;))j k
if** 
(** 
checkEnqTempId** 
!=** !
null**" &
)**& '
{++ 
var,, 
tempId,, 
=,, 
await,, "
_enquiryService,,# 2
.,,2 3
AddNewEnqiry,,3 ?
(,,? @
	_userInfo,,@ I
.,,I J
Pan,,J M
,,,M N
token,,O T
),,T U
.,,U V
ConfigureAwait,,V d
(,,d e
false,,e j
),,j k
;,,k l
GuarantorDTO-- 
.-- 
ForEach-- $
(--$ %
x--% &
=>--' )
x--* +
.--+ ,
	EnqtempId--, 5
=--6 7
tempId--8 >
)--> ?
;--? @
}.. 
foreach// 
(// 
var// 
item// 
in//  
GuarantorDTO//! -
)//- .
{00 
var11 
GuarantorMasterData11 '
=11( )
new11* -
TblPromCdtab11. :
{22 
	CreatedBy33 
=33 
	_userInfo33  )
.33) *
Pan33* -
,33- .
CreatedDate44 
=44  !
DateTime44" *
.44* +
UtcNow44+ 1
,441 2
IsActive55 
=55 
true55 #
,55# $
	IsDeleted66 
=66 
false66  %
,66% &
PromoterDob77 
=77  !
item77" &
.77& '
PromoterMaster77' 5
.775 6
PromoterDob776 A
,77A B
PromoterEmailid88 #
=88$ %
item88& *
.88* +
PromoterMaster88+ 9
.889 :
PromoterEmailid88: I
,88I J
PromoterGender99 "
=99# $
item99% )
.99) *
PromoterMaster99* 8
.998 9
PromoterGender999 G
,99G H
PromoterMobno:: !
=::" #
item::$ (
.::( )
PromoterMaster::) 7
.::7 8
PromoterMobno::8 E
,::E F
PromoterName;;  
=;;! "
item;;# '
.;;' (
PromoterMaster;;( 6
.;;6 7
PromoterName;;7 C
,;;C D
PromoterPan<< 
=<<  !
item<<" &
.<<& '
PromoterMaster<<' 5
.<<5 6
PromoterPan<<6 A
,<<A B
PromoterPassport== $
===% &
item==' +
.==+ ,
PromoterMaster==, :
.==: ;
PromoterPassport==; K
??==L N
$str==O [
,==[ \
PromoterPhoto>> !
=>>" #
item>>$ (
.>>( )
PromoterMaster>>) 7
.>>7 8
PromoterPhoto>>8 E
,>>E F
UniqueId?? 
=?? 
Guid?? #
.??# $
NewGuid??$ +
(??+ ,
)??, -
.??- .
ToString??. 6
(??6 7
)??7 8
}@@ 
;@@ 
varBB 
promoterMasterBB "
=BB# $
awaitBB% *%
_promoterMasterRepositoryBB+ D
.BBD E
AddAsyncBBE M
(BBM N
GuarantorMasterDataBBN a
,BBa b
tokenBBc h
)BBh i
.BBi j
ConfigureAwaitBBj x
(BBx y
falseBBy ~
)BB~ 
;	BB Ä
awaitCC 
_workCC 
.CC 
CommitAsyncCC '
(CC' (
tokenCC( -
)CC- .
.CC. /
ConfigureAwaitCC/ =
(CC= >
falseCC> C
)CCC D
;CCD E
ifEE 
(EE 
promoterMasterEE "
!=EE# %
nullEE& *
)EE* +
{FF 
varGG 
enqPromoterGG #
=GG$ %
newGG& )
TblEnqGuarDetGG* 7
{HH 
EnqGuarcibilII $
=II% &
itemII' +
.II+ ,
EnqGuarcibilII, 8
,II8 9
PromoterCodeJJ $
=JJ% &
promoterMasterJJ' 5
.JJ5 6
PromoterCodeJJ6 B
,JJB C
	CreatedByKK !
=KK" #
	_userInfoKK$ -
.KK- .
PanKK. 1
,KK1 2
CreatedDateLL #
=LL$ %
DateTimeLL& .
.LL. /
UtcNowLL/ 5
,LL5 6
IsActiveMM  
=MM! "
trueMM# '
,MM' (
	IsDeletedNN !
=NN" #
falseNN$ )
,NN) *
DomCdOO 
=OO 
itemOO  $
.OO$ %
DomCdOO% *
,OO* +
	EnqtempIdPP !
=PP" #
itemPP$ (
.PP( )
	EnqtempIdPP) 2
,PP2 3
UniqueIdQQ  
=QQ! "
GuidQQ# '
.QQ' (
NewGuidQQ( /
(QQ/ 0
)QQ0 1
.QQ1 2
ToStringQQ2 :
(QQ: ;
)QQ; <
}RR 
;RR 
varTT 
promoterTT  
=TT! "
awaitTT# ( 
_guarantorRepositoryTT) =
.TT= >
AddAsyncTT> F
(TTF G
enqPromoterTTG R
,TTR S
tokenTTT Y
)TTY Z
.TTZ [
ConfigureAwaitTT[ i
(TTi j
falseTTj o
)TTo p
;TTp q
varVV 
gBankDetailsVV $
=VV% &
newVV' *
TblEnqGbankDetVV+ 9
{WW 
	CreatedByXX !
=XX" #
	_userInfoXX$ -
.XX- .
PanXX. 1
,XX1 2
CreatedDateYY #
=YY$ %
DateTimeYY& .
.YY. /
UtcNowYY/ 5
,YY5 6
IsActiveZZ  
=ZZ! "
trueZZ# '
,ZZ' (
	IsDeleted[[ !
=[[" #
false[[$ )
,[[) *
	EnqtempId\\ !
=\\" #
item\\$ (
.\\( )
	EnqtempId\\) 2
,\\2 3
GuarBankaccno]] %
=]]& '
item]]( ,
.]], - 
GuarantorBankDetails]]- A
.]]A B
GuarBankaccno]]B O
,]]O P
GuarAcctype^^ #
=^^$ %
item^^& *
.^^* + 
GuarantorBankDetails^^+ ?
.^^? @
GuarAcctype^^@ K
,^^K L
GuarAccName__ #
=__$ %
item__& *
.__* + 
GuarantorBankDetails__+ ?
.__? @
GuarAccName__@ K
,__K L

GuarBankbr`` "
=``# $
item``% )
.``) * 
GuarantorBankDetails``* >
.``> ?

GuarBankbr``? I
,``I J
GuarBanknameaa $
=aa% &
itemaa' +
.aa+ , 
GuarantorBankDetailsaa, @
.aa@ A
GuarBanknameaaA M
,aaM N
GuarIfscbb  
=bb! "
itembb# '
.bb' ( 
GuarantorBankDetailsbb( <
.bb< =
GuarIfscbb= E
,bbE F
PromoterCodecc $
=cc% &
promoterMastercc' 5
.cc5 6
PromoterCodecc6 B
,ccB C
UniqueIddd  
=dd! "
Guiddd# '
.dd' (
NewGuiddd( /
(dd/ 0
)dd0 1
.dd1 2
ToStringdd2 :
(dd: ;
)dd; <
}ee 
;ee 
vargg 
guarantorBankgg %
=gg& '
awaitgg( -$
_guarantorBankRepositorygg. F
.ggF G
AddAsyncggG O
(ggO P
gBankDetailsggP \
,gg\ ]
tokengg^ c
)ggc d
.ggd e
ConfigureAwaitgge s
(ggs t
falseggt y
)ggy z
;ggz {
awaithh 
_workhh 
.hh  
CommitAsynchh  +
(hh+ ,
tokenhh, 1
)hh1 2
.hh2 3
ConfigureAwaithh3 A
(hhA B
falsehhB G
)hhG H
;hhH I
varii 
promoterBankDtoii '
=ii( )
_mapperii* 1
.ii1 2
Mapii2 5
<ii5 6#
GuarantorBankDetailsDTOii6 M
>iiM N
(iiN O
guarantorBankiiO \
)ii\ ]
;ii] ^
varjj 
promoterDtojj #
=jj$ %
_mapperjj& -
.jj- .
Mapjj. 1
<jj1 2
GuarantorDetailsDTOjj2 E
>jjE F
(jjF G
promoterjjG O
)jjO P
;jjP Q
varkk 
promMasterDtokk %
=kk& '
_mapperkk( /
.kk/ 0
Mapkk0 3
<kk3 4
PromoterMasterDTOkk4 E
>kkE F
(kkF G
promoterMasterkkG U
)kkU V
;kkV W
varmm 
promoterDetailsObjmm *
=mm+ ,
newmm- 0
GuarantorDetailsDTOmm1 D
{nn  
GuarantorBankDetailsoo ,
=oo- .
promoterBankDtooo/ >
,oo> ?
PromoterMasterpp &
=pp' (
promMasterDtopp) 6
,pp6 7
DomCdqq 
=qq 
promoterDtoqq  +
.qq+ ,
DomCdqq, 1
,qq1 2
	EnqtempIdrr !
=rr" #
promoterDtorr$ /
.rr/ 0
	EnqtempIdrr0 9
,rr9 :
PromoterCodess $
=ss% &
promoterDtoss' 2
.ss2 3
PromoterCodess3 ?
,ss? @
EnqGuarcibiltt $
=tt% &
promoterDtott' 2
.tt2 3
EnqGuarcibiltt3 ?
,tt? @
	EnqGuarIduu !
=uu" #
promoterDtouu$ /
.uu/ 0
	EnqGuarIduu0 9
,uu9 :
UniqueIdvv  
=vv! "
promoterDtovv# .
.vv. /
UniqueIdvv/ 7
}ww 
;ww 
promoterListxx  
.xx  !
Addxx! $
(xx$ %
promoterDetailsObjxx% 7
)xx7 8
;xx8 9
}yy 
}zz 
return|| 
promoterList|| 
;||  
}}} 	
public 
async 
Task 
< 
bool 
> "
DeleteGuarantorDetails  6
(6 7
int7 :
	EnqGuarId; D
,D E
CancellationTokenF W
tokenX ]
)] ^
{
ÄÄ 	
var
ÅÅ 
	guarantor
ÅÅ 
=
ÅÅ 
await
ÅÅ !"
_guarantorRepository
ÅÅ" 6
.
ÅÅ6 7-
FirstOrDefaultByExpressionAsync
ÅÅ7 V
(
ÅÅV W
x
ÅÅW X
=>
ÅÅY [
x
ÅÅ\ ]
.
ÅÅ] ^
	EnqGuarId
ÅÅ^ g
==
ÅÅh j
	EnqGuarId
ÅÅk t
&&
ÅÅu w
x
ÅÅx y
.
ÅÅy z
IsActiveÅÅz Ç
==ÅÅÉ Ö
trueÅÅÜ ä
&&ÅÅã ç
xÅÅé è
.ÅÅè ê
	IsDeletedÅÅê ô
==ÅÅö ú
falseÅÅù ¢
,ÅÅ¢ £
tokenÅÅ§ ©
)ÅÅ© ™
.ÅÅ™ ´
ConfigureAwaitÅÅ´ π
(ÅÅπ ∫
falseÅÅ∫ ø
)ÅÅø ¿
;ÅÅ¿ ¡
if
ÇÇ 
(
ÇÇ 
	guarantor
ÇÇ 
==
ÇÇ 
null
ÇÇ !
)
ÇÇ! "
{
ÉÉ 
throw
ÑÑ 
new
ÑÑ 
ArgumentException
ÑÑ +
(
ÑÑ+ ,
$str
ÑÑ, <
)
ÑÑ< =
;
ÑÑ= >
}
ÖÖ 
	guarantor
áá 
.
áá 
IsActive
áá 
=
áá  
false
áá! &
;
áá& '
	guarantor
àà 
.
àà 
	IsDeleted
àà 
=
àà  !
true
àà" &
;
àà& '
	guarantor
ââ 
.
ââ 

ModifiedBy
ââ  
=
ââ! "
	_userInfo
ââ# ,
.
ââ, -
UserId
ââ- 3
;
ââ3 4
	guarantor
ää 
.
ää 
CreatedDate
ää !
=
ää" #
DateTime
ää$ ,
.
ää, -
UtcNow
ää- 3
;
ää3 4
await
åå "
_guarantorRepository
åå &
.
åå& '
UpdateAsync
åå' 2
(
åå2 3
	guarantor
åå3 <
,
åå< =
token
åå> C
)
ååC D
.
ååD E
ConfigureAwait
ååE S
(
ååS T
false
ååT Y
)
ååY Z
;
ååZ [
return
çç 
true
çç 
;
çç 
}
éé 	
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
List
ëë 
<
ëë !
GuarantorDetailsDTO
ëë 2
>
ëë2 3
>
ëë3 4%
GetByIdGuarantorDetails
ëë5 L
(
ëëL M
int
ëëM P
	enquiryId
ëëQ Z
,
ëëZ [
CancellationToken
ëë\ m
token
ëën s
)
ëës t
{
íí 	
var
ìì 
list
ìì 
=
ìì 
await
ìì "
_guarantorRepository
ìì 1
.
ìì1 2#
FindByExpressionAsync
ìì2 G
(
ììG H
x
ììH I
=>
ììJ L
x
ììM N
.
ììN O
	EnqGuarId
ììO X
==
ììY [
	enquiryId
ìì\ e
&&
ììf h
x
ììi j
.
ììj k
IsActive
ììk s
==
ììt v
true
ììw {
&&
ìì| ~
xìì Ä
.ììÄ Å
	IsDeletedììÅ ä
==ììã ç
falseììé ì
,ììì î
tokenììï ö
)ììö õ
.ììõ ú
ConfigureAwaitììú ™
(ìì™ ´
falseìì´ ∞
)ìì∞ ±
;ìì± ≤
if
îî 
(
îî 
!
îî 
list
îî 
.
îî 
Any
îî 
(
îî 
)
îî 
)
îî 
{
ïï 
throw
ññ 
new
ññ 
ArgumentException
ññ +
(
ññ+ ,
$str
ññ, <
)
ññ< =
;
ññ= >
}
óó 
return
òò 
_mapper
òò 
.
òò 
Map
òò 
<
òò 
List
òò #
<
òò# $!
GuarantorDetailsDTO
òò$ 7
>
òò7 8
>
òò8 9
(
òò9 :
list
òò: >
)
òò> ?
;
òò? @
}
ôô 	
public
õõ 
async
õõ 
Task
õõ 
<
õõ 
IEnumerable
õõ %
<
õõ% &!
GuarantorDetailsDTO
õõ& 9
>
õõ9 :
>
õõ: ;$
UpdateGuarantorDetails
õõ< R
(
õõR S
List
õõS W
<
õõW X!
GuarantorDetailsDTO
õõX k
>
õõk l
GuarantorDTO
õõm y
,
õõy z 
CancellationTokenõõ{ å
tokenõõç í
)õõí ì
{
úú 	
long
ùù 
promoterCode
ùù 
=
ùù 
$num
ùù  !
;
ùù! "
var
ûû 
guarantorList
ûû 
=
ûû 
new
ûû  #
List
ûû$ (
<
ûû( )!
GuarantorDetailsDTO
ûû) <
>
ûû< =
(
ûû= >
)
ûû> ?
;
ûû? @
PromoterMasterDTO
üü 
PromoterMasterDTO
üü /
=
üü0 1
new
üü2 5
PromoterMasterDTO
üü6 G
(
üüG H
)
üüH I
;
üüI J
var
†† 
list_promoter
†† 
=
†† 
await
††  %"
_guarantorRepository
††& :
.
††: ;#
FindByExpressionAsync
††; P
(
††P Q
x
††Q R
=>
††S U
x
††V W
.
††W X
	EnqtempId
††X a
==
††b d
GuarantorDTO
††e q
[
††q r
$num
††r s
]
††s t
.
††t u
	EnqtempId
††u ~
&&†† Å
x††Ç É
.††É Ñ
IsActive††Ñ å
==††ç è
true††ê î
&&††ï ó
x††ò ô
.††ô ö
	IsDeleted††ö £
==††§ ¶
false††ß ¨
,††¨ ≠
token††Æ ≥
)††≥ ¥
.††¥ µ
ConfigureAwait††µ √
(††√ ƒ
false††ƒ …
)††…  
;††  À
list_promoter
°° 
.
°° 
ForEach
°° !
(
°°! "
x
°°" #
=>
°°$ &
{
¢¢ 
x
££ 
.
££ 
IsActive
££ 
=
££ 
false
££ "
;
££" #
x
§§ 
.
§§ 
	IsDeleted
§§ 
=
§§ 
true
§§ "
;
§§" #
x
•• 
.
•• 

ModifiedBy
•• 
=
•• 
	_userInfo
•• (
.
••( )
Pan
••) ,
;
••, -
x
¶¶ 
.
¶¶ 
ModifiedDate
¶¶ 
=
¶¶  
DateTime
¶¶! )
.
¶¶) *
UtcNow
¶¶* 0
;
¶¶0 1
}
ßß 
)
ßß 
;
ßß 
await
®® "
_guarantorRepository
®® &
.
®®& '
UpdateAsync
®®' 2
(
®®2 3
list_promoter
®®3 @
.
®®@ A
ToList
®®A G
(
®®G H
)
®®H I
,
®®I J
token
®®K P
)
®®P Q
.
®®Q R
ConfigureAwait
®®R `
(
®®` a
false
®®a f
)
®®f g
;
®®g h
var
™™ 
list_promoterBank
™™ !
=
™™" #
await
™™$ )&
_guarantorBankRepository
™™* B
.
™™B C#
FindByExpressionAsync
™™C X
(
™™X Y
x
™™Y Z
=>
™™[ ]
x
™™^ _
.
™™_ `
	EnqtempId
™™` i
==
™™j l
GuarantorDTO
™™m y
[
™™y z
$num
™™z {
]
™™{ |
.
™™| }
	EnqtempId™™} Ü
&&™™á â
x™™ä ã
.™™ã å
IsActive™™å î
==™™ï ó
true™™ò ú
&&™™ù ü
x™™† °
.™™° ¢
	IsDeleted™™¢ ´
==™™¨ Æ
false™™Ø ¥
,™™¥ µ
token™™∂ ª
)™™ª º
.™™º Ω
ConfigureAwait™™Ω À
(™™À Ã
false™™Ã —
)™™— “
;™™“ ”
list_promoterBank
´´ 
.
´´ 
ForEach
´´ %
(
´´% &
x
´´& '
=>
´´( *
{
¨¨ 
x
≠≠ 
.
≠≠ 
IsActive
≠≠ 
=
≠≠ 
false
≠≠ "
;
≠≠" #
x
ÆÆ 
.
ÆÆ 
	IsDeleted
ÆÆ 
=
ÆÆ 
true
ÆÆ "
;
ÆÆ" #
x
ØØ 
.
ØØ 

ModifiedBy
ØØ 
=
ØØ 
	_userInfo
ØØ (
.
ØØ( )
Pan
ØØ) ,
;
ØØ, -
x
∞∞ 
.
∞∞ 
ModifiedDate
∞∞ 
=
∞∞  
DateTime
∞∞! )
.
∞∞) *
UtcNow
∞∞* 0
;
∞∞0 1
}
±± 
)
±± 
;
±± 
await
≤≤ &
_guarantorBankRepository
≤≤ *
.
≤≤* +
UpdateAsync
≤≤+ 6
(
≤≤6 7
list_promoterBank
≤≤7 H
.
≤≤H I
ToList
≤≤I O
(
≤≤O P
)
≤≤P Q
,
≤≤Q R
token
≤≤S X
)
≤≤X Y
.
≤≤Y Z
ConfigureAwait
≤≤Z h
(
≤≤h i
false
≤≤i n
)
≤≤n o
;
≤≤o p
await
¥¥ 
_work
¥¥ 
.
¥¥ 
CommitAsync
¥¥ #
(
¥¥# $
token
¥¥$ )
)
¥¥) *
.
¥¥* +
ConfigureAwait
¥¥+ 9
(
¥¥9 :
false
¥¥: ?
)
¥¥? @
;
¥¥@ A
foreach
∑∑ 
(
∑∑ 
var
∑∑ 
item
∑∑ 
in
∑∑  
GuarantorDTO
∑∑! -
)
∑∑- .
{
∏∏ 
var
ππ 
promasterData
ππ !
=
ππ" #
await
ππ$ )'
_promoterMasterRepository
ππ* C
.
ππC D7
)FirstOrDefaultNoTrackingByExpressionAsync
ππD m
(
ππm n
x
ππn o
=>
ππp r
x
ππs t
.
ππt u
PromoterCodeππu Å
==ππÇ Ñ
itemππÖ â
.ππâ ä
PromoterCodeππä ñ
&&ππó ô
xππö õ
.ππõ ú
IsActiveππú §
==ππ• ß
trueππ® ¨
&&ππ≠ Ø
xππ∞ ±
.ππ± ≤
	IsDeletedππ≤ ª
==ππº æ
falseππø ƒ
,ππƒ ≈
tokenππ∆ À
)ππÀ Ã
.ππÃ Õ
ConfigureAwaitππÕ €
(ππ€ ‹
falseππ‹ ·
)ππ· ‚
;ππ‚ „
if
∫∫ 
(
∫∫ 
promasterData
∫∫ !
==
∫∫" $
null
∫∫% )
)
∫∫) *
{
ªª 
var
ºº  
promoterMasterData
ºº *
=
ºº+ ,
new
ºº- 0
TblPromCdtab
ºº1 =
{
ΩΩ 

ModifiedBy
ææ "
=
ææ# $
	_userInfo
ææ% .
.
ææ. /
Pan
ææ/ 2
,
ææ2 3
ModifiedDate
øø $
=
øø% &
DateTime
øø' /
.
øø/ 0
UtcNow
øø0 6
,
øø6 7
IsActive
¿¿  
=
¿¿! "
true
¿¿# '
,
¿¿' (
	IsDeleted
¡¡ !
=
¡¡" #
false
¡¡$ )
,
¡¡) *
PromoterDob
¬¬ #
=
¬¬$ %
item
¬¬& *
.
¬¬* +
PromoterMaster
¬¬+ 9
.
¬¬9 :
PromoterDob
¬¬: E
,
¬¬E F
PromoterEmailid
√√ '
=
√√( )
item
√√* .
.
√√. /
PromoterMaster
√√/ =
.
√√= >
PromoterEmailid
√√> M
,
√√M N
PromoterGender
ƒƒ &
=
ƒƒ' (
item
ƒƒ) -
.
ƒƒ- .
PromoterMaster
ƒƒ. <
.
ƒƒ< =
PromoterGender
ƒƒ= K
,
ƒƒK L
PromoterMobno
≈≈ %
=
≈≈& '
item
≈≈( ,
.
≈≈, -
PromoterMaster
≈≈- ;
.
≈≈; <
PromoterMobno
≈≈< I
,
≈≈I J
PromoterName
∆∆ $
=
∆∆% &
item
∆∆' +
.
∆∆+ ,
PromoterMaster
∆∆, :
.
∆∆: ;
PromoterName
∆∆; G
,
∆∆G H
PromoterPan
«« #
=
««$ %
item
««& *
.
««* +
PromoterMaster
««+ 9
.
««9 :
PromoterPan
««: E
,
««E F
PromoterPassport
»» (
=
»») *
item
»»+ /
.
»»/ 0
PromoterMaster
»»0 >
.
»»> ?
PromoterPassport
»»? O
??
»»P R
$str
»»S Y
,
»»Y Z
PromoterPhoto
…… %
=
……& '
item
……( ,
.
……, -
PromoterMaster
……- ;
.
……; <
PromoterPhoto
……< I
,
……I J
UniqueId
    
=
  ! "
Guid
  # '
.
  ' (
NewGuid
  ( /
(
  / 0
)
  0 1
.
  1 2
ToString
  2 :
(
  : ;
)
  ; <
}
ÀÀ 
;
ÀÀ 
var
ÕÕ 
promoterMaster
ÕÕ &
=
ÕÕ' (
await
ÕÕ) .'
_promoterMasterRepository
ÕÕ/ H
.
ÕÕH I
AddAsync
ÕÕI Q
(
ÕÕQ R 
promoterMasterData
ÕÕR d
,
ÕÕd e
token
ÕÕf k
)
ÕÕk l
.
ÕÕl m
ConfigureAwait
ÕÕm {
(
ÕÕ{ |
falseÕÕ| Å
)ÕÕÅ Ç
;ÕÕÇ É
await
ŒŒ 
_work
ŒŒ 
.
ŒŒ  
CommitAsync
ŒŒ  +
(
ŒŒ+ ,
token
ŒŒ, 1
)
ŒŒ1 2
.
ŒŒ2 3
ConfigureAwait
ŒŒ3 A
(
ŒŒA B
false
ŒŒB G
)
ŒŒG H
;
ŒŒH I
promoterCode
œœ  
=
œœ! "
promoterMaster
œœ# 1
.
œœ1 2
PromoterCode
œœ2 >
;
œœ> ?
PromoterMasterDTO
–– %
=
––& '
_mapper
––( /
.
––/ 0
Map
––0 3
<
––3 4
PromoterMasterDTO
––4 E
>
––E F
(
––F G 
promoterMasterData
––G Y
)
––Y Z
;
––Z [
}
—— 
else
““ 
{
”” 
promoterCode
‘‘  
=
‘‘! "
promasterData
‘‘# 0
.
‘‘0 1
PromoterCode
‘‘1 =
;
‘‘= >
promasterData
’’ !
.
’’! "

ModifiedBy
’’" ,
=
’’- .
	_userInfo
’’/ 8
.
’’8 9
Pan
’’9 <
;
’’< =
promasterData
÷÷ !
.
÷÷! "
ModifiedDate
÷÷" .
=
÷÷/ 0
DateTime
÷÷1 9
.
÷÷9 :
UtcNow
÷÷: @
;
÷÷@ A
promasterData
◊◊ !
.
◊◊! "
IsActive
◊◊" *
=
◊◊+ ,
true
◊◊- 1
;
◊◊1 2
promasterData
ÿÿ !
.
ÿÿ! "
	IsDeleted
ÿÿ" +
=
ÿÿ, -
false
ÿÿ. 3
;
ÿÿ3 4
promasterData
ŸŸ !
.
ŸŸ! "
PromoterDob
ŸŸ" -
=
ŸŸ. /
item
ŸŸ0 4
.
ŸŸ4 5
PromoterMaster
ŸŸ5 C
.
ŸŸC D
PromoterDob
ŸŸD O
;
ŸŸO P
promasterData
⁄⁄ !
.
⁄⁄! "
PromoterEmailid
⁄⁄" 1
=
⁄⁄2 3
item
⁄⁄4 8
.
⁄⁄8 9
PromoterMaster
⁄⁄9 G
.
⁄⁄G H
PromoterEmailid
⁄⁄H W
;
⁄⁄W X
promasterData
€€ !
.
€€! "
PromoterGender
€€" 0
=
€€1 2
item
€€3 7
.
€€7 8
PromoterMaster
€€8 F
.
€€F G
PromoterGender
€€G U
;
€€U V
promasterData
‹‹ !
.
‹‹! "
PromoterMobno
‹‹" /
=
‹‹0 1
item
‹‹2 6
.
‹‹6 7
PromoterMaster
‹‹7 E
.
‹‹E F
PromoterMobno
‹‹F S
;
‹‹S T
promasterData
›› !
.
››! "
PromoterName
››" .
=
››/ 0
item
››1 5
.
››5 6
PromoterMaster
››6 D
.
››D E
PromoterName
››E Q
;
››Q R
promasterData
ﬁﬁ !
.
ﬁﬁ! "
PromoterPan
ﬁﬁ" -
=
ﬁﬁ. /
item
ﬁﬁ0 4
.
ﬁﬁ4 5
PromoterMaster
ﬁﬁ5 C
.
ﬁﬁC D
PromoterPan
ﬁﬁD O
;
ﬁﬁO P
promasterData
ﬂﬂ !
.
ﬂﬂ! "
PromoterPassport
ﬂﬂ" 2
=
ﬂﬂ3 4
item
ﬂﬂ5 9
.
ﬂﬂ9 :
PromoterMaster
ﬂﬂ: H
.
ﬂﬂH I
PromoterPassport
ﬂﬂI Y
??
ﬂﬂZ \
$str
ﬂﬂ] c
;
ﬂﬂc d
promasterData
‡‡ !
.
‡‡! "
PromoterPhoto
‡‡" /
=
‡‡0 1
item
‡‡2 6
.
‡‡6 7
PromoterMaster
‡‡7 E
.
‡‡E F
PromoterPhoto
‡‡F S
;
‡‡S T
await
·· '
_promoterMasterRepository
·· 3
.
··3 4
UpdateAsync
··4 ?
(
··? @
promasterData
··@ M
,
··M N
token
··O T
)
··T U
.
··U V
ConfigureAwait
··V d
(
··d e
false
··e j
)
··j k
;
··k l
PromoterMasterDTO
‚‚ %
=
‚‚& '
_mapper
‚‚( /
.
‚‚/ 0
Map
‚‚0 3
<
‚‚3 4
PromoterMasterDTO
‚‚4 E
>
‚‚E F
(
‚‚F G
promasterData
‚‚G T
)
‚‚T U
;
‚‚U V
await
„„ 
_work
„„ 
.
„„  
CommitAsync
„„  +
(
„„+ ,
token
„„, 1
)
„„1 2
.
„„2 3
ConfigureAwait
„„3 A
(
„„A B
false
„„B G
)
„„G H
;
„„H I
}
‰‰ 
var
ÁÁ 
enqPromoter
ÁÁ 
=
ÁÁ  !
new
ÁÁ" %
TblEnqGuarDet
ÁÁ& 3
{
ËË 
EnqGuarcibil
ÈÈ  
=
ÈÈ! "
item
ÈÈ# '
.
ÈÈ' (
EnqGuarcibil
ÈÈ( 4
,
ÈÈ4 5
PromoterCode
ÍÍ  
=
ÍÍ! "
promoterCode
ÍÍ# /
,
ÍÍ/ 0
	CreatedBy
ÎÎ 
=
ÎÎ 
	_userInfo
ÎÎ  )
.
ÎÎ) *
Pan
ÎÎ* -
,
ÎÎ- .
CreatedDate
ÏÏ 
=
ÏÏ  !
DateTime
ÏÏ" *
.
ÏÏ* +
UtcNow
ÏÏ+ 1
,
ÏÏ1 2
IsActive
ÌÌ 
=
ÌÌ 
true
ÌÌ #
,
ÌÌ# $
	IsDeleted
ÓÓ 
=
ÓÓ 
false
ÓÓ  %
,
ÓÓ% &
DomCd
ÔÔ 
=
ÔÔ 
item
ÔÔ  
.
ÔÔ  !
DomCd
ÔÔ! &
,
ÔÔ& '
	EnqtempId
 
=
 
item
  $
.
$ %
	EnqtempId
% .
,
. /
UniqueId
ÒÒ 
=
ÒÒ 
Guid
ÒÒ #
.
ÒÒ# $
NewGuid
ÒÒ$ +
(
ÒÒ+ ,
)
ÒÒ, -
.
ÒÒ- .
ToString
ÒÒ. 6
(
ÒÒ6 7
)
ÒÒ7 8
}
ÚÚ 
;
ÚÚ 
var
ÙÙ 
promoter
ÙÙ 
=
ÙÙ 
await
ÙÙ $"
_guarantorRepository
ÙÙ% 9
.
ÙÙ9 :
AddAsync
ÙÙ: B
(
ÙÙB C
enqPromoter
ÙÙC N
,
ÙÙN O
token
ÙÙP U
)
ÙÙU V
.
ÙÙV W
ConfigureAwait
ÙÙW e
(
ÙÙe f
false
ÙÙf k
)
ÙÙk l
;
ÙÙl m
var
ˆˆ 
gBankDetails
ˆˆ  
=
ˆˆ! "
new
ˆˆ# &
TblEnqGbankDet
ˆˆ' 5
{
˜˜ 
	CreatedBy
¯¯ 
=
¯¯ 
	_userInfo
¯¯  )
.
¯¯) *
Pan
¯¯* -
,
¯¯- .
CreatedDate
˘˘ 
=
˘˘  !
DateTime
˘˘" *
.
˘˘* +
UtcNow
˘˘+ 1
,
˘˘1 2
IsActive
˙˙ 
=
˙˙ 
true
˙˙ #
,
˙˙# $
	IsDeleted
˚˚ 
=
˚˚ 
false
˚˚  %
,
˚˚% &
	EnqtempId
¸¸ 
=
¸¸ 
item
¸¸  $
.
¸¸$ %
	EnqtempId
¸¸% .
,
¸¸. /
GuarBankaccno
˝˝ !
=
˝˝" #
item
˝˝$ (
.
˝˝( )"
GuarantorBankDetails
˝˝) =
.
˝˝= >
GuarBankaccno
˝˝> K
,
˝˝K L
GuarAcctype
˛˛ 
=
˛˛  !
item
˛˛" &
.
˛˛& '"
GuarantorBankDetails
˛˛' ;
.
˛˛; <
GuarAcctype
˛˛< G
,
˛˛G H
GuarAccName
ˇˇ 
=
ˇˇ  !
item
ˇˇ" &
.
ˇˇ& '"
GuarantorBankDetails
ˇˇ' ;
.
ˇˇ; <
GuarAccName
ˇˇ< G
,
ˇˇG H

GuarBankbr
ÄÄ 
=
ÄÄ  
item
ÄÄ! %
.
ÄÄ% &"
GuarantorBankDetails
ÄÄ& :
.
ÄÄ: ;

GuarBankbr
ÄÄ; E
,
ÄÄE F
GuarBankname
ÅÅ  
=
ÅÅ! "
item
ÅÅ# '
.
ÅÅ' ("
GuarantorBankDetails
ÅÅ( <
.
ÅÅ< =
GuarBankname
ÅÅ= I
,
ÅÅI J
GuarIfsc
ÇÇ 
=
ÇÇ 
item
ÇÇ #
.
ÇÇ# $"
GuarantorBankDetails
ÇÇ$ 8
.
ÇÇ8 9
GuarIfsc
ÇÇ9 A
,
ÇÇA B
PromoterCode
ÉÉ  
=
ÉÉ! "
promoterCode
ÉÉ# /
,
ÉÉ/ 0
UniqueId
ÑÑ 
=
ÑÑ 
Guid
ÑÑ #
.
ÑÑ# $
NewGuid
ÑÑ$ +
(
ÑÑ+ ,
)
ÑÑ, -
.
ÑÑ- .
ToString
ÑÑ. 6
(
ÑÑ6 7
)
ÑÑ7 8
}
ÖÖ 
;
ÖÖ 
var
áá 
guarantorBank
áá !
=
áá" #
await
áá$ )&
_guarantorBankRepository
áá* B
.
ááB C
AddAsync
ááC K
(
ááK L
gBankDetails
ááL X
,
ááX Y
token
ááZ _
)
áá_ `
.
áá` a
ConfigureAwait
ááa o
(
ááo p
false
ááp u
)
ááu v
;
ááv w
await
àà 
_work
àà 
.
àà 
CommitAsync
àà '
(
àà' (
token
àà( -
)
àà- .
.
àà. /
ConfigureAwait
àà/ =
(
àà= >
false
àà> C
)
ààC D
;
ààD E
var
ää 
promoterBankDto
ää #
=
ää$ %
_mapper
ää& -
.
ää- .
Map
ää. 1
<
ää1 2%
GuarantorBankDetailsDTO
ää2 I
>
ääI J
(
ääJ K
guarantorBank
ääK X
)
ääX Y
;
ääY Z
var
ãã 
promoterDto
ãã 
=
ãã  !
_mapper
ãã" )
.
ãã) *
Map
ãã* -
<
ãã- .!
GuarantorDetailsDTO
ãã. A
>
ããA B
(
ããB C
promoter
ããC K
)
ããK L
;
ããL M
var
éé !
guarantorDetailsObj
éé '
=
éé( )
new
éé* -!
GuarantorDetailsDTO
éé. A
{
èè "
GuarantorBankDetails
êê (
=
êê) *
promoterBankDto
êê+ :
,
êê: ;
PromoterMaster
ëë "
=
ëë# $
PromoterMasterDTO
ëë% 6
,
ëë6 7
DomCd
íí 
=
íí 
promoterDto
íí '
.
íí' (
DomCd
íí( -
,
íí- .
	EnqtempId
ìì 
=
ìì 
promoterDto
ìì  +
.
ìì+ ,
	EnqtempId
ìì, 5
,
ìì5 6
PromoterCode
îî  
=
îî! "
promoterDto
îî# .
.
îî. /
PromoterCode
îî/ ;
,
îî; <
EnqGuarcibil
ïï  
=
ïï! "
promoterDto
ïï# .
.
ïï. /
EnqGuarcibil
ïï/ ;
,
ïï; <
	EnqGuarId
ññ 
=
ññ 
promoterDto
ññ  +
.
ññ+ ,
	EnqGuarId
ññ, 5
,
ññ5 6
UniqueId
óó 
=
óó 
promoterDto
óó *
.
óó* +
UniqueId
óó+ 3
}
òò 
;
òò 
guarantorList
ôô 
.
ôô 
Add
ôô !
(
ôô! "!
guarantorDetailsObj
ôô" 5
)
ôô5 6
;
ôô6 7
}
öö 
return
úú 
guarantorList
úú  
;
úú  !
}
ùù 	
}
ûû 
}üü ïc
âD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\PromoterGuarantorDetails\GuarantorLiabilityDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H$
PromoterGuarantorDetailsH `
{ 
public 

class ,
 GuarantorLiabilityDetailsService 1
:2 3&
IGuarantorLiabilityDetails4 N
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqGliabDet+ 9
>9 :$
_guarLiabilityRepository; S
;S T
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public ,
 GuarantorLiabilityDetailsService /
(/ 0
IMapper0 7
mapper8 >
,> ?
UserInfo@ H
userInfoI Q
,Q R
IEntityRepositoryS d
<d e
TblEnqGliabDete s
>s t$
guarLiabilityRepository	u å
,
å ç
IUnitOfWork
é ô
work
ö û
)
û ü
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !$
_guarLiabilityRepository $
=% &#
guarLiabilityRepository' >
;> ?
_work 
= 
work 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &(
GuarantorLiabilityDetailsDTO& B
>B C
>C D(
AddGuarantorLiabilityDetailsE a
(a b
Listb f
<f g)
GuarantorLiabilityDetailsDTO	g É
>
É Ñ
LiabilityDTO
Ö ë
,
ë í
CancellationToken
ì §
token
• ™
)
™ ´
{   	
var!! 
detailsList!! 
=!! 
_mapper!! %
.!!% &
Map!!& )
<!!) *
List!!* .
<!!. /
TblEnqGliabDet!!/ =
>!!= >
>!!> ?
(!!? @
LiabilityDTO!!@ L
)!!L M
;!!M N
detailsList## 
.## 
ForEach## 
(##  
x##  !
=>##" $
{$$ 
x%% 
.%% 
IsActive%% 
=%% 
true%% !
;%%! "
x&& 
.&& 
	IsDeleted&& 
=&& 
false&& #
;&&# $
x'' 
.'' 
	CreatedBy'' 
='' 
	_userInfo'' '
.''' (
UserId''( .
;''. /
x(( 
.(( 
CreatedDate(( 
=(( 
DateTime((  (
.((( )
UtcNow(() /
;((/ 0
x)) 
.)) 
UniqueId)) 
=)) 
Guid)) !
.))! "
NewGuid))" )
())) *
)))* +
.))+ ,
ToString)), 4
())4 5
)))5 6
;))6 7
}** 
)** 
;** 
var,, 
result,, 
=,, 
await,, $
_guarLiabilityRepository,, 7
.,,7 8
AddAsync,,8 @
(,,@ A
detailsList,,A L
,,,L M
token,,N S
),,S T
.,,T U
ConfigureAwait,,U c
(,,c d
false,,d i
),,i j
;,,j k
await-- 
_work-- 
.-- 
CommitAsync-- #
(--# $
token--$ )
)--) *
.--* +
ConfigureAwait--+ 9
(--9 :
false--: ?
)--? @
;--@ A
return.. 
_mapper.. 
... 
Map.. 
<.. 
List.. #
<..# $(
GuarantorLiabilityDetailsDTO..$ @
>..@ A
>..A B
(..B C
result..C I
)..I J
;..J K
}// 	
public11 
async11 
Task11 
<11 
bool11 
>11 +
DeleteGuarantorLiabilityDetails11  ?
(11? @
int11@ C
	enquiryId11D M
,11M N
CancellationToken11O `
token11a f
)11f g
{22 	
var33 
guarantorLiability33 "
=33# $
await33% *$
_guarLiabilityRepository33+ C
.33C D+
FirstOrDefaultByExpressionAsync33D c
(33c d
x33d e
=>33f h
x33i j
.33j k
EnqGuarliabId33k x
==33y {
	enquiryId	33| Ö
&&
33Ü à
x
33â ä
.
33ä ã
IsActive
33ã ì
==
33î ñ
true
33ó õ
&&
33ú û
x
33ü †
.
33† °
	IsDeleted
33° ™
==
33´ ≠
false
33Æ ≥
,
33≥ ¥
token
33µ ∫
)
33∫ ª
.
33ª º
ConfigureAwait
33º  
(
33  À
false
33À –
)
33– —
;
33— “
if44 
(44 
guarantorLiability44 "
==44# %
null44& *
)44* +
{55 
throw66 
new66 
ArgumentException66 +
(66+ ,
$str66, <
)66< =
;66= >
}77 
guarantorLiability99 
.99 
IsActive99 '
=99( )
false99* /
;99/ 0
guarantorLiability:: 
.:: 
	IsDeleted:: (
=::) *
true::+ /
;::/ 0
guarantorLiability;; 
.;; 

ModifiedBy;; )
=;;* +
	_userInfo;;, 5
.;;5 6
UserId;;6 <
;;;< =
guarantorLiability<< 
.<< 
CreatedDate<< *
=<<+ ,
DateTime<<- 5
.<<5 6
UtcNow<<6 <
;<<< =
await>> $
_guarLiabilityRepository>> *
.>>* +
UpdateAsync>>+ 6
(>>6 7
guarantorLiability>>7 I
,>>I J
token>>K P
)>>P Q
.>>Q R
ConfigureAwait>>R `
(>>` a
false>>a f
)>>f g
;>>g h
await?? 
_work?? 
.?? 
CommitAsync?? #
(??# $
token??$ )
)??) *
.??* +
ConfigureAwait??+ 9
(??9 :
false??: ?
)??? @
;??@ A
return@@ 
true@@ 
;@@ 
}AA 	
publicCC 
asyncCC 
TaskCC 
<CC 
ListCC 
<CC (
GuarantorLiabilityDetailsDTOCC ;
>CC; <
>CC< =,
 GetByIdGuarantorLiabilityDetailsCC> ^
(CC^ _
intCC_ b
	enquiryIdCCc l
,CCl m
CancellationTokenCCn 
token
CCÄ Ö
)
CCÖ Ü
{DD 	
varEE 
listEE 
=EE 
awaitEE $
_guarLiabilityRepositoryEE 5
.EE5 6!
FindByExpressionAsyncEE6 K
(EEK L
xEEL M
=>EEN P
xEEQ R
.EER S
EnqGuarliabIdEES `
==EEa c
	enquiryIdEEd m
&&EEn p
xEEq r
.EEr s
IsActiveEEs {
==EE| ~
true	EE É
&&
EEÑ Ü
x
EEá à
.
EEà â
	IsDeleted
EEâ í
==
EEì ï
false
EEñ õ
,
EEõ ú
token
EEù ¢
)
EE¢ £
.
EE£ §
ConfigureAwait
EE§ ≤
(
EE≤ ≥
false
EE≥ ∏
)
EE∏ π
;
EEπ ∫
ifFF 
(FF 
!FF 
listFF 
.FF 
AnyFF 
(FF 
)FF 
)FF 
{GG 
throwHH 
newHH 
ArgumentExceptionHH +
(HH+ ,
$strHH, <
)HH< =
;HH= >
}II 
returnJJ 
_mapperJJ 
.JJ 
MapJJ 
<JJ 
ListJJ #
<JJ# $(
GuarantorLiabilityDetailsDTOJJ$ @
>JJ@ A
>JJA B
(JJB C
listJJC G
)JJG H
;JJH I
}KK 	
publicMM 
asyncMM 
TaskMM 
<MM 
IEnumerableMM %
<MM% &(
GuarantorLiabilityDetailsDTOMM& B
>MMB C
>MMC D+
UpdateGuarantorLiabilityDetailsMME d
(MMd e
ListMMe i
<MMi j)
GuarantorLiabilityDetailsDTO	MMj Ü
>
MMÜ á
GuarantorDTO
MMà î
,
MMî ï
CancellationToken
MMñ ß
token
MM® ≠
)
MM≠ Æ
{NN 	
varOO 
dataListOO 
=OO 
awaitOO $
_guarLiabilityRepositoryOO  8
.OO8 9!
FindByExpressionAsyncOO9 N
(OON O
xOOO P
=>OOP R
xOOR S
.OOS T
	EnqtempIdOOT ]
==OO] _
GuarantorDTOOO` l
[OOl m
$numOOm n
]OOn o
.OOo p
	EnqtempIdOOp y
&&OOz |
xOO} ~
.OO~ 
IsActive	OO á
==
OOà ä
true
OOã è
&&
OOê í
x
OOì î
.
OOî ï
	IsDeleted
OOï û
==
OOü °
false
OO¢ ß
,
OOß ®
token
OO© Æ
)
OOÆ Ø
.
OOØ ∞
ConfigureAwait
OO∞ æ
(
OOæ ø
false
OOø ƒ
)
OOƒ ≈
;
OO≈ ∆
dataListPP 
.PP 
ForEachPP 
(PP 
xPP 
=>PP !
{QQ 
xRR 
.RR 
	IsDeletedRR 
=RR 
trueRR "
;RR" #
xSS 
.SS 
IsActiveSS 
=SS 
falseSS "
;SS" #
xTT 
.TT 

ModifiedByTT 
=TT 
	_userInfoTT (
.TT( )
UserIdTT) /
;TT/ 0
xUU 
.UU 
ModifiedDateUU 
=UU  
DateTimeUU! )
.UU) *
UtcNowUU* 0
;UU0 1
}VV 
)VV 
;VV 
awaitWW $
_guarLiabilityRepositoryWW *
.WW* +
UpdateAsyncWW+ 6
(WW6 7
dataListWW7 ?
,WW? @
tokenWWA F
)WWF G
.WWG H
ConfigureAwaitWWH V
(WWV W
falseWWW \
)WW\ ]
;WW] ^
varYY 
detailsListYY 
=YY 
_mapperYY %
.YY% &
MapYY& )
<YY) *
ListYY* .
<YY. /
TblEnqGliabDetYY/ =
>YY= >
>YY> ?
(YY? @
GuarantorDTOYY@ L
)YYL M
;YYM N
detailsList[[ 
.[[ 
ForEach[[ 
([[  
x[[  !
=>[[" $
{\\ 
x]] 
.]] 
IsActive]] 
=]] 
true]] !
;]]! "
x^^ 
.^^ 
	IsDeleted^^ 
=^^ 
false^^ #
;^^# $
x__ 
.__ 
	CreatedBy__ 
=__ 
	_userInfo__ '
.__' (
UserId__( .
;__. /
x`` 
.`` 
CreatedDate`` 
=`` 
DateTime``  (
.``( )
UtcNow``) /
;``/ 0
xaa 
.aa 
UniqueIdaa 
=aa 
Guidaa !
.aa! "
NewGuidaa" )
(aa) *
)aa* +
.aa+ ,
ToStringaa, 4
(aa4 5
)aa5 6
;aa6 7
}bb 
)bb 
;bb 
vardd 
resultdd 
=dd 
awaitdd $
_guarLiabilityRepositorydd 7
.dd7 8
AddAsyncdd8 @
(dd@ A
detailsListddA L
,ddL M
tokenddN S
)ddS T
.ddT U
ConfigureAwaitddU c
(ddc d
falseddd i
)ddi j
;ddj k
awaitee 
_workee 
.ee 
CommitAsyncee #
(ee# $
tokenee$ )
)ee) *
.ee* +
ConfigureAwaitee+ 9
(ee9 :
falseee: ?
)ee? @
;ee@ A
returnff 
_mapperff 
.ff 
Mapff 
<ff 
Listff #
<ff# $(
GuarantorLiabilityDetailsDTOff$ @
>ff@ A
>ffA B
(ffB C
resultffC I
)ffI J
;ffJ K
}gg 	
}hh 
}ii »s
äD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\PromoterGuarantorDetails\GuarantorLiabilityNetWorthService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H$
PromoterGuarantorDetailsH `
{ 
public 

class -
!GuarantorLiabilityNetWorthService 2
:3 4'
IGuarantorLiabilityNetWorth5 P
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqGnwDet+ 7
>7 8#
_guarNetWorthRepository9 P
;P Q
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public -
!GuarantorLiabilityNetWorthService 0
(0 1
IMapper1 8
mapper9 ?
,? @
UserInfoA I
userInfoJ R
,R S
IEntityRepositoryT e
<e f
TblEnqGnwDetf r
>r s#
guarNetWorthRepository	t ä
,
ä ã
IUnitOfWork
å ó
work
ò ú
)
ú ù
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !#
_guarNetWorthRepository #
=$ %"
guarNetWorthRepository& <
;< =
_work 
= 
work 
; 
} 	
public   
async   
Task   
<   
IEnumerable   %
<  % &'
GuarantorNetWorthDetailsDTO  & A
>  A B
>  B C'
AddGuarantorNetWorthDetails  D _
(  _ `
List  ` d
<  d e(
GuarantorNetWorthDetailsDTO	  e Ä
>
  Ä Å
NetWorthDTO
  Ç ç
,
  ç é
CancellationToken
  è †
token
  ° ¶
)
  ¶ ß
{!! 	
var"" 
dataList"" 
="" 
await""  #
_guarNetWorthRepository""! 8
.""8 9!
FindByExpressionAsync""9 N
(""N O
x""O P
=>""Q S
x""T U
.""U V
	EnqtempId""V _
==""` b
NetWorthDTO""c n
[""n o
$num""o p
]""p q
.""q r
	EnqtempId""r {
&&""| ~
x	"" Ä
.
""Ä Å
IsActive
""Å â
==
""ä å
true
""ç ë
&&
""í î
x
""ï ñ
.
""ñ ó
	IsDeleted
""ó †
==
""° £
false
""§ ©
,
""© ™
token
""´ ∞
)
""∞ ±
.
""± ≤
ConfigureAwait
""≤ ¿
(
""¿ ¡
false
""¡ ∆
)
""∆ «
;
""« »
if## 
(## 
dataList## 
!=## 
null## 
&&## 
dataList##  (
.##( )
Count##) .
>##. /
$num##/ 0
)##0 1
{$$ 
dataList%% 
.%% 
ForEach%%  
(%%  !
x%%! "
=>%%# %
{&& 
x'' 
.'' 
IsActive'' 
=''  
false''! &
;''& '
x(( 
.(( 
	IsDeleted(( 
=((  !
true((" &
;((& '
x)) 
.)) 

ModifiedBy))  
=))! "
	_userInfo))# ,
.)), -
Pan))- 0
;))0 1
x** 
.** 
ModifiedDate** "
=**# $
DateTime**% -
.**- .
UtcNow**. 4
;**4 5
}++ 
)++ 
;++ 
await,, #
_guarNetWorthRepository,, -
.,,- .
UpdateAsync,,. 9
(,,9 :
dataList,,: B
,,,B C
token,,D I
),,I J
.,,J K
ConfigureAwait,,K Y
(,,Y Z
false,,Z _
),,_ `
;,,` a
}-- 
var// 
detailsList// 
=// 
_mapper// %
.//% &
Map//& )
<//) *
List//* .
<//. /
TblEnqGnwDet/// ;
>//; <
>//< =
(//= >
NetWorthDTO//> I
)//I J
;//J K
detailsList11 
.11 
ForEach11 
(11  
x11  !
=>11" $
{22 
x33 
.33 
IsActive33 
=33 
true33 !
;33! "
x44 
.44 
	IsDeleted44 
=44 
false44 #
;44# $
x55 
.55 
	CreatedBy55 
=55 
	_userInfo55 '
.55' (
Pan55( +
;55+ ,
x66 
.66 
CreatedDate66 
=66 
DateTime66  (
.66( )
UtcNow66) /
;66/ 0
x77 
.77 
UniqueId77 
=77 
Guid77 !
.77! "
NewGuid77" )
(77) *
)77* +
.77+ ,
ToString77, 4
(774 5
)775 6
;776 7
}88 
)88 
;88 
var:: 
result:: 
=:: 
await:: #
_guarNetWorthRepository:: 6
.::6 7
AddAsync::7 ?
(::? @
detailsList::@ K
,::K L
token::M R
)::R S
.::S T
ConfigureAwait::T b
(::b c
false::c h
)::h i
;::i j
await<< 
_work<< 
.<< 
CommitAsync<< #
(<<# $
token<<$ )
)<<) *
.<<* +
ConfigureAwait<<+ 9
(<<9 :
false<<: ?
)<<? @
;<<@ A
return== 
_mapper== 
.== 
Map== 
<== 
List== #
<==# $'
GuarantorNetWorthDetailsDTO==$ ?
>==? @
>==@ A
(==A B
result==B H
)==H I
;==I J
}>> 	
public@@ 
async@@ 
Task@@ 
<@@ 
bool@@ 
>@@ *
DeleteGuarantorNetWorthDetails@@  >
(@@> ?
int@@? B
	enquiryId@@C L
,@@L M
CancellationToken@@N _
token@@` e
)@@e f
{AA 	
varBB 
guarNetWorthBB 
=BB 
awaitBB $#
_guarNetWorthRepositoryBB% <
.BB< =+
FirstOrDefaultByExpressionAsyncBB= \
(BB\ ]
xBB] ^
=>BB_ a
xBBb c
.BBc d
	EnqtempIdBBd m
==BBn p
	enquiryIdBBq z
&&BB{ }
xBB~ 
.	BB Ä
IsActive
BBÄ à
==
BBâ ã
true
BBå ê
&&
BBë ì
x
BBî ï
.
BBï ñ
	IsDeleted
BBñ ü
==
BB† ¢
false
BB£ ®
,
BB® ©
token
BB™ Ø
)
BBØ ∞
.
BB∞ ±
ConfigureAwait
BB± ø
(
BBø ¿
false
BB¿ ≈
)
BB≈ ∆
;
BB∆ «
ifCC 
(CC 
guarNetWorthCC 
==CC 
nullCC  $
)CC$ %
{DD 
throwEE 
newEE 
ArgumentExceptionEE +
(EE+ ,
$strEE, <
)EE< =
;EE= >
}FF 
guarNetWorthHH 
.HH 
IsActiveHH !
=HH" #
falseHH$ )
;HH) *
guarNetWorthII 
.II 
	IsDeletedII "
=II# $
trueII% )
;II) *
guarNetWorthJJ 
.JJ 

ModifiedByJJ #
=JJ$ %
	_userInfoJJ& /
.JJ/ 0
PanJJ0 3
;JJ3 4
guarNetWorthKK 
.KK 
CreatedDateKK $
=KK% &
DateTimeKK' /
.KK/ 0
UtcNowKK0 6
;KK6 7
awaitMM #
_guarNetWorthRepositoryMM )
.MM) *
UpdateAsyncMM* 5
(MM5 6
guarNetWorthMM6 B
,MMB C
tokenMMD I
)MMI J
.MMJ K
ConfigureAwaitMMK Y
(MMY Z
falseMMZ _
)MM_ `
;MM` a
awaitNN 
_workNN 
.NN 
CommitAsyncNN #
(NN# $
tokenNN$ )
)NN) *
.NN* +
ConfigureAwaitNN+ 9
(NN9 :
falseNN: ?
)NN? @
;NN@ A
returnOO 
trueOO 
;OO 
}PP 	
publicRR 
asyncRR 
TaskRR 
<RR 
ListRR 
<RR '
GuarantorNetWorthDetailsDTORR :
>RR: ;
>RR; <+
GetByIdGuarantorNetWorthDetailsRR= \
(RR\ ]
intRR] `
	enquiryIdRRa j
,RRj k
CancellationTokenRRl }
token	RR~ É
)
RRÉ Ñ
{SS 	
varTT 
listTT 
=TT 
awaitTT #
_guarNetWorthRepositoryTT 4
.TT4 5!
FindByExpressionAsyncTT5 J
(TTJ K
xTTK L
=>TTM O
xTTP Q
.TTQ R
EnqGuarnwIdTTR ]
==TT^ `
	enquiryIdTTa j
&&TTk m
xTTn o
.TTo p
IsActiveTTp x
==TTy {
true	TT| Ä
&&
TTÅ É
x
TTÑ Ö
.
TTÖ Ü
	IsDeleted
TTÜ è
==
TTê í
false
TTì ò
,
TTò ô
token
TTö ü
)
TTü †
.
TT† °
ConfigureAwait
TT° Ø
(
TTØ ∞
false
TT∞ µ
)
TTµ ∂
;
TT∂ ∑
ifUU 
(UU 
!UU 
listUU 
.UU 
AnyUU 
(UU 
)UU 
)UU 
{VV 
throwWW 
newWW 
ArgumentExceptionWW +
(WW+ ,
$strWW, <
)WW< =
;WW= >
}XX 
returnYY 
_mapperYY 
.YY 
MapYY 
<YY 
ListYY #
<YY# $'
GuarantorNetWorthDetailsDTOYY$ ?
>YY? @
>YY@ A
(YYA B
listYYB F
)YYF G
;YYG H
}ZZ 	
public\\ 
async\\ 
Task\\ 
<\\ 
IEnumerable\\ %
<\\% &'
GuarantorNetWorthDetailsDTO\\& A
>\\A B
>\\B C*
UpdateGuarantorNetWorthDetails\\D b
(\\b c
List\\c g
<\\g h(
GuarantorNetWorthDetailsDTO	\\h É
>
\\É Ñ
NetWorthDTO
\\Ö ê
,
\\ê ë
CancellationToken
\\í £
token
\\§ ©
)
\\© ™
{]] 	
var__ 
dataList__ 
=__ 
await__ #
_guarNetWorthRepository__  7
.__7 8!
FindByExpressionAsync__8 M
(__M N
x__N O
=>__O Q
x__Q R
.__R S
	EnqtempId__S \
==__] _
NetWorthDTO__` k
[__k l
$num__l m
]__m n
.__n o
	EnqtempId__o x
&&__y {
x__| }
.__} ~
IsActive	__~ Ü
==
__á â
true
__ä é
&&
__è ë
x
__í ì
.
__ì î
	IsDeleted
__î ù
==
__û †
false
__° ¶
,
__¶ ß
token
__® ≠
)
__≠ Æ
.
__Æ Ø
ConfigureAwait
__Ø Ω
(
__Ω æ
false
__æ √
)
__√ ƒ
;
__ƒ ≈
ifaa 
(aa 
dataListaa 
!=aa 
nullaa  
&&aa! #
dataListaa$ ,
.aa, -
Countaa- 2
>aa3 4
$numaa5 6
)aa6 7
{bb 
dataListcc 
.cc 
ForEachcc  
(cc  !
xcc! "
=>cc# %
{dd 
xee 
.ee 
IsActiveee 
=ee  
falseee! &
;ee& '
xff 
.ff 
	IsDeletedff 
=ff  !
trueff" &
;ff& '
xgg 
.gg 

ModifiedBygg  
=gg! "
	_userInfogg# ,
.gg, -
Pangg- 0
;gg0 1
xhh 
.hh 
ModifiedDatehh "
=hh# $
DateTimehh% -
.hh- .
UtcNowhh. 4
;hh4 5
}ii 
)ii 
;ii 
awaitjj #
_guarNetWorthRepositoryjj -
.jj- .
UpdateAsyncjj. 9
(jj9 :
dataListjj: B
,jjB C
tokenjjD I
)jjI J
.jjJ K
ConfigureAwaitjjK Y
(jjY Z
falsejjZ _
)jj_ `
;jj` a
}kk 
varmm 
detailsListmm 
=mm 
_mappermm %
.mm% &
Mapmm& )
<mm) *
Listmm* .
<mm. /
TblEnqGnwDetmm/ ;
>mm; <
>mm< =
(mm= >
NetWorthDTOmm> I
)mmI J
;mmJ K
detailsListnn 
.nn 
ForEachnn 
(nn  
xnn  !
=>nn" $
{oo 
xpp 
.pp 
IsActivepp 
=pp 
truepp !
;pp! "
xqq 
.qq 
	IsDeletedqq 
=qq 
falseqq #
;qq# $
xrr 
.rr 
	CreatedByrr 
=rr 
	_userInforr '
.rr' (
Panrr( +
;rr+ ,
xss 
.ss 
CreatedDatess 
=ss 
DateTimess  (
.ss( )
UtcNowss) /
;ss/ 0
xtt 
.tt 
UniqueIdtt 
=tt 
Guidtt !
.tt! "
NewGuidtt" )
(tt) *
)tt* +
.tt+ ,
ToStringtt, 4
(tt4 5
)tt5 6
;tt6 7
}uu 
)uu 
;uu 
varww 
resultww 
=ww 
awaitww #
_guarNetWorthRepositoryww 6
.ww6 7
AddAsyncww7 ?
(ww? @
detailsListww@ K
,wwK L
tokenwwM R
)wwR S
.wwS T
ConfigureAwaitwwT b
(wwb c
falsewwc h
)wwh i
;wwi j
awaityy 
_workyy 
.yy 
CommitAsyncyy #
(yy# $
tokenyy$ )
)yy) *
.yy* +
ConfigureAwaityy+ 9
(yy9 :
falseyy: ?
)yy? @
;yy@ A
returnzz 
_mapperzz 
.zz 
Mapzz 
<zz 
Listzz #
<zz# $'
GuarantorNetWorthDetailsDTOzz$ ?
>zz? @
>zz@ A
(zzA B
resultzzB H
)zzH I
;zzI J
}{{ 	
}|| 
}}} Ωb
çD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\PromoterGuarantorDetails\PromoterAssetsNetWorthDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H$
PromoterGuarantorDetailsH `
{ 
public 

class 0
$PromoterAssetsNetWorthDetailsService 5
:6 7*
IPromoterAssetsNetWorthDetails8 V
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqPassetDet+ :
>: ;
_assetsNWRepository< O
;O P
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public 0
$PromoterAssetsNetWorthDetailsService 3
(3 4
IMapper4 ;
mapper< B
,B C
UserInfoD L
userInfoM U
,U V
IEntityRepositoryW h
<h i
TblEnqPassetDeti x
>x y
assetsNWRepository	z å
,
å ç
IUnitOfWork
é ô
work
ö û
)
û ü
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !
_assetsNWRepository 
=  !
assetsNWRepository" 4
;4 5
_work 
= 
work 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &%
PromoterAssetsNetWorthDTO& ?
>? @
>@ A,
 AddPromoterAssetsNetWorthDetailsB b
(b c
Listc g
<g h&
PromoterAssetsNetWorthDTO	h Å
>
Å Ç
AssetsNetWorthDTO
É î
,
î ï
CancellationToken
ñ ß
token
® ≠
)
≠ Æ
{   	
var!! 
netWorthList!! 
=!! 
_mapper!! &
.!!& '
Map!!' *
<!!* +
List!!+ /
<!!/ 0
TblEnqPassetDet!!0 ?
>!!? @
>!!@ A
(!!A B
AssetsNetWorthDTO!!B S
)!!S T
;!!T U
netWorthList"" 
."" 
ForEach""  
(""  !
x""! "
=>""# %
{## 
x$$ 
.$$ 
IsActive$$ 
=$$ 
true$$ !
;$$! "
x%% 
.%% 
	IsDeleted%% 
=%% 
false%% #
;%%# $
x&& 
.&& 
	CreatedBy&& 
=&& 
	_userInfo&& '
.&&' (
UserId&&( .
;&&. /
x'' 
.'' 
CreatedDate'' 
='' 
DateTime''  (
.''( )
UtcNow'') /
;''/ 0
x(( 
.(( 
UniqueId(( 
=(( 
Guid(( !
.((! "
NewGuid((" )
((() *
)((* +
.((+ ,
ToString((, 4
(((4 5
)((5 6
;((6 7
})) 
))) 
;)) 
var++ 
result++ 
=++ 
await++ 
_assetsNWRepository++ 2
.++2 3
AddAsync++3 ;
(++; <
netWorthList++< H
,++H I
token++J O
)++O P
.++P Q
ConfigureAwait++Q _
(++_ `
false++` e
)++e f
;++f g
await,, 
_work,, 
.,, 
CommitAsync,, #
(,,# $
token,,$ )
),,) *
.,,* +
ConfigureAwait,,+ 9
(,,9 :
false,,: ?
),,? @
;,,@ A
return-- 
_mapper-- 
.-- 
Map-- 
<-- 
List-- #
<--# $%
PromoterAssetsNetWorthDTO--$ =
>--= >
>--> ?
(--? @
result--@ F
)--F G
;--G H
}.. 	
public00 
async00 
Task00 
<00 
bool00 
>00 /
#DeletePromoterAssetsNetWorthDetails00  C
(00C D
int00D G
	enquiryId00H Q
,00Q R
CancellationToken00S d
token00e j
)00j k
{11 	
var22 
promoter22 
=22 
await22  
_assetsNWRepository22! 4
.224 5+
FirstOrDefaultByExpressionAsync225 T
(22T U
x22U V
=>22W Y
x22Z [
.22[ \
EnqPromassetId22\ j
==22k m
	enquiryId22n w
&&22x z
x22{ |
.22| }
IsActive	22} Ö
==
22Ü à
true
22â ç
&&
22é ê
x
22ë í
.
22í ì
	IsDeleted
22ì ú
==
22ù ü
false
22† •
,
22• ¶
token
22ß ¨
)
22¨ ≠
.
22≠ Æ
ConfigureAwait
22Æ º
(
22º Ω
false
22Ω ¬
)
22¬ √
;
22√ ƒ
if33 
(33 
promoter33 
==33 
null33  
)33  !
{44 
throw55 
new55 
ArgumentException55 +
(55+ ,
$str55, <
)55< =
;55= >
}66 
promoter88 
.88 
IsActive88 
=88 
false88  %
;88% &
promoter99 
.99 
	IsDeleted99 
=99  
true99! %
;99% &
promoter:: 
.:: 

ModifiedBy:: 
=::  !
	_userInfo::" +
.::+ ,
UserId::, 2
;::2 3
promoter;; 
.;; 
CreatedDate;;  
=;;! "
DateTime;;# +
.;;+ ,
UtcNow;;, 2
;;;2 3
await== 
_assetsNWRepository== %
.==% &
UpdateAsync==& 1
(==1 2
promoter==2 :
,==: ;
token==< A
)==A B
.==B C
ConfigureAwait==C Q
(==Q R
false==R W
)==W X
;==X Y
await>> 
_work>> 
.>> 
CommitAsync>> #
(>># $
token>>$ )
)>>) *
.>>* +
ConfigureAwait>>+ 9
(>>9 :
false>>: ?
)>>? @
;>>@ A
return?? 
true?? 
;?? 
}@@ 	
publicBB 
asyncBB 
TaskBB 
<BB 
ListBB 
<BB %
PromoterAssetsNetWorthDTOBB 8
>BB8 9
>BB9 :0
$GetByIdPromoterAssetsNetWorthDetailsBB; _
(BB_ `
intBB` c
	enquiryIdBBd m
,BBm n
CancellationToken	BBo Ä
token
BBÅ Ü
)
BBÜ á
{CC 	
varDD 
listDD 
=DD 
awaitDD 
_assetsNWRepositoryDD 0
.DD0 1!
FindByExpressionAsyncDD1 F
(DDF G
xDDG H
=>DDI K
xDDL M
.DDM N
EnqPromassetIdDDN \
==DD] _
	enquiryIdDD` i
&&DDj l
xDDm n
.DDn o
IsActiveDDo w
==DDx z
trueDD{ 
&&
DDÄ Ç
x
DDÉ Ñ
.
DDÑ Ö
	IsDeleted
DDÖ é
==
DDè ë
false
DDí ó
,
DDó ò
token
DDô û
)
DDû ü
.
DDü †
ConfigureAwait
DD† Æ
(
DDÆ Ø
false
DDØ ¥
)
DD¥ µ
;
DDµ ∂
ifEE 
(EE 
!EE 
listEE 
.EE 
AnyEE 
(EE 
)EE 
)EE 
{FF 
throwGG 
newGG 
ArgumentExceptionGG +
(GG+ ,
$strGG, <
)GG< =
;GG= >
}HH 
returnII 
_mapperII 
.II 
MapII 
<II 
ListII #
<II# $%
PromoterAssetsNetWorthDTOII$ =
>II= >
>II> ?
(II? @
listII@ D
)IID E
;IIE F
}JJ 	
publicLL 
asyncLL 
TaskLL 
<LL 
IEnumerableLL %
<LL% &%
PromoterAssetsNetWorthDTOLL& ?
>LL? @
>LL@ A/
#UpdatePromoterAssetsNetWorthDetailsLLB e
(LLe f
ListLLf j
<LLj k&
PromoterAssetsNetWorthDTO	LLk Ñ
>
LLÑ Ö
AssetsNetWorthDTO
LLÜ ó
,
LLó ò
CancellationToken
LLô ™
token
LL´ ∞
)
LL∞ ±
{MM 	
varNN 
dataListNN 
=NN 
awaitNN  
_assetsNWRepositoryNN! 4
.NN4 5!
FindByExpressionAsyncNN5 J
(NNJ K
xNNK L
=>NNM O
xNNP Q
.NNQ R
	EnqtempIdNNR [
==NN\ ^
AssetsNetWorthDTONN_ p
[NNp q
$numNNq r
]NNr s
.NNs t
	EnqtempIdNNt }
&&	NN~ Ä
x
NNÅ Ç
.
NNÇ É
IsActive
NNÉ ã
==
NNå é
true
NNè ì
&&
NNî ñ
x
NNó ò
.
NNò ô
	IsDeleted
NNô ¢
==
NN£ •
false
NN¶ ´
,
NN´ ¨
token
NN≠ ≤
)
NN≤ ≥
.
NN≥ ¥
ConfigureAwait
NN¥ ¬
(
NN¬ √
false
NN√ »
)
NN» …
;
NN…  
dataListPP 
.PP 
ForEachPP 
(PP 
xPP 
=>PP !
{QQ 
xRR 
.RR 
IsActiveRR 
=RR 
falseRR "
;RR" #
xSS 
.SS 
	IsDeletedSS 
=SS 
trueSS "
;SS" #
xTT 
.TT 

ModifiedByTT 
=TT 
	_userInfoTT (
.TT( )
PanTT) ,
;TT, -
xUU 
.UU 
ModifiedDateUU 
=UU  
DateTimeUU! )
.UU) *
UtcNowUU* 0
;UU0 1
}VV 
)VV 
;VV 
awaitWW 
_assetsNWRepositoryWW %
.WW% &
UpdateAsyncWW& 1
(WW1 2
dataListWW2 :
,WW: ;
tokenWW< A
)WWA B
.WWB C
ConfigureAwaitWWC Q
(WWQ R
falseWWR W
)WWW X
;WWX Y
varYY 
netWorthListYY 
=YY 
_mapperYY &
.YY& '
MapYY' *
<YY* +
ListYY+ /
<YY/ 0
TblEnqPassetDetYY0 ?
>YY? @
>YY@ A
(YYA B
AssetsNetWorthDTOYYB S
)YYS T
;YYT U
netWorthListZZ 
.ZZ 
ForEachZZ  
(ZZ  !
xZZ! "
=>ZZ# %
{[[ 
x\\ 
.\\ 
IsActive\\ 
=\\ 
true\\ !
;\\! "
x]] 
.]] 
	IsDeleted]] 
=]] 
false]] #
;]]# $
x^^ 
.^^ 
	CreatedBy^^ 
=^^ 
	_userInfo^^ '
.^^' (
Pan^^( +
;^^+ ,
x__ 
.__ 
CreatedDate__ 
=__ 
DateTime__  (
.__( )
UtcNow__) /
;__/ 0
x`` 
.`` 
UniqueId`` 
=`` 
Guid`` !
.``! "
NewGuid``" )
(``) *
)``* +
.``+ ,
ToString``, 4
(``4 5
)``5 6
;``6 7
}aa 
)aa 
;aa 
varcc 
resultcc 
=cc 
awaitcc 
_assetsNWRepositorycc 2
.cc2 3
AddAsynccc3 ;
(cc; <
netWorthListcc< H
,ccH I
tokenccJ O
)ccO P
.ccP Q
ConfigureAwaitccQ _
(cc_ `
falsecc` e
)cce f
;ccf g
awaitdd 
_workdd 
.dd 
CommitAsyncdd #
(dd# $
tokendd$ )
)dd) *
.dd* +
ConfigureAwaitdd+ 9
(dd9 :
falsedd: ?
)dd? @
;dd@ A
returnee 
_mapperee 
.ee 
Mapee 
<ee 
Listee #
<ee# $%
PromoterAssetsNetWorthDTOee$ =
>ee= >
>ee> ?
(ee? @
resultee@ F
)eeF G
;eeG H
}gg 	
}hh 
}ii â≥
D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\PromoterGuarantorDetails\PromoterDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H$
PromoterGuarantorDetailsH `
{ 
public 

class "
PromoterDetailsService '
:( )
IPromoterDetails* :
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqPromDet+ 8
>8 9
_promoterRepository: M
;M N
private 
readonly 
IEntityRepository *
<* +
TblPromCdtab+ 7
>7 8%
_promoterMasterRepository9 R
;R S
private 
readonly 
IEntityRepository *
<* +
TblEnqPbankDet+ 9
>9 :#
_promoterBankRepository; R
;R S
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IEnquiryHomeService ,
_enquiryService- <
;< =
public "
PromoterDetailsService %
(% &
IMapper& -
mapper. 4
,4 5
UserInfo6 >
userInfo? G
,G H
IEntityRepositoryI Z
<Z [
TblEnqPromDet[ h
>h i
promoterRepositoryj |
,| }
IEntityRepository 
< 
TblEnqPbankDet ,
>, -"
promoterBankRepository. D
,D E
IEntityRepositoryF W
<W X
TblPromCdtabX d
>d e$
promoterMasterRepositoryf ~
,~ !
IEnquiryHomeService
Ä ì
enquiryService
î ¢
,
¢ £
IUnitOfWork 
work 
) 
{ 	
_mapper 
= 
mapper 
; 
	_userInfo   
=   
userInfo    
;    !
_promoterRepository!! 
=!!  !
promoterRepository!!" 4
;!!4 5#
_promoterBankRepository"" #
=""$ %"
promoterBankRepository""& <
;""< =%
_promoterMasterRepository## %
=##& '$
promoterMasterRepository##( @
;##@ A
_work$$ 
=$$ 
work$$ 
;$$ 
_enquiryService%% 
=%% 
enquiryService%% ,
;%%, -
}&& 	
public'' 
async'' 
Task'' 
<'' 
IEnumerable'' %
<''% &
PromoterDetailsDTO''& 8
>''8 9
>''9 :
AddPromoterDetails''; M
(''M N
List''N R
<''R S
PromoterDetailsDTO''S e
>''e f
PromoterDTO''g r
,''r s
CancellationToken	''t Ö
token
''Ü ã
)
''ã å
{(( 	
var)) 
promoterList)) 
=)) 
new)) "
List))# '
<))' (
PromoterDetailsDTO))( :
>)): ;
()); <
)))< =
;))= >
var++ 
checkEnqTempId++ 
=++  
PromoterDTO++! ,
.++, -
FirstOrDefault++- ;
(++; <
x++< =
=>++> @
x++A B
.++B C
	EnqtempId++C L
==++M O
null++P T
||++U W
x++X Y
.++Y Z
	EnqtempId++Z c
==++d f
$num++g h
)++h i
;++i j
if,, 
(,, 
checkEnqTempId,, 
!=,, !
null,," &
),,& '
{-- 
var.. 
tempId.. 
=.. 
await.. "
_enquiryService..# 2
...2 3
AddNewEnqiry..3 ?
(..? @
	_userInfo..@ I
...I J
Pan..J M
,..M N
token..O T
)..T U
...U V
ConfigureAwait..V d
(..d e
false..e j
)..j k
;..k l
PromoterDTO// 
.// 
ForEach// #
(//# $
x//$ %
=>//& (
x//) *
.//* +
	EnqtempId//+ 4
=//5 6
tempId//7 =
)//= >
;//> ?
}00 
foreach11 
(11 
var11 
item11 
in11  
PromoterDTO11! ,
)11, -
{22 
var33 
promoterMasterData33 &
=33' (
new33) ,
TblPromCdtab33- 9
{44 
	CreatedBy55 
=55 
	_userInfo55  )
.55) *
Pan55* -
,55- .
CreatedDate66 
=66  !
DateTime66" *
.66* +
UtcNow66+ 1
,661 2
IsActive77 
=77 
true77 #
,77# $
	IsDeleted88 
=88 
false88  %
,88% &
PromoterDob99 
=99  !
item99" &
.99& '
PromoterMaster99' 5
.995 6
PromoterDob996 A
,99A B
PromoterEmailid:: #
=::$ %
item::& *
.::* +
PromoterMaster::+ 9
.::9 :
PromoterEmailid::: I
,::I J
PromoterGender;; "
=;;# $
item;;% )
.;;) *
PromoterMaster;;* 8
.;;8 9
PromoterGender;;9 G
,;;G H
PromoterMobno<< !
=<<" #
item<<$ (
.<<( )
PromoterMaster<<) 7
.<<7 8
PromoterMobno<<8 E
,<<E F
PromoterName==  
===! "
item==# '
.==' (
PromoterMaster==( 6
.==6 7
PromoterName==7 C
,==C D
PromoterPan>> 
=>>  !
item>>" &
.>>& '
PromoterMaster>>' 5
.>>5 6
PromoterPan>>6 A
,>>A B
PromoterPassport?? $
=??% &
item??' +
.??+ ,
PromoterMaster??, :
.??: ;
PromoterPassport??; K
,??K L
PromoterPhoto@@ !
=@@" #
item@@$ (
.@@( )
PromoterMaster@@) 7
.@@7 8
PromoterPhoto@@8 E
,@@E F
UniqueIdAA 
=AA 
GuidAA #
.AA# $
NewGuidAA$ +
(AA+ ,
)AA, -
.AA- .
ToStringAA. 6
(AA6 7
)AA7 8
}BB 
;BB 
varDD 
promoterMasterDD "
=DD# $
awaitDD% *%
_promoterMasterRepositoryDD+ D
.DDD E
AddAsyncDDE M
(DDM N
promoterMasterDataDDN `
,DD` a
tokenDDb g
)DDg h
.DDh i
ConfigureAwaitDDi w
(DDw x
falseDDx }
)DD} ~
;DD~ 
awaitEE 
_workEE 
.EE 
CommitAsyncEE '
(EE' (
tokenEE( -
)EE- .
.EE. /
ConfigureAwaitEE/ =
(EE= >
falseEE> C
)EEC D
;EED E
ifFF 
(FF 
promoterMasterFF "
!=FF# %
nullFF& *
)FF* +
{GG 
varHH 
enqPromoterHH #
=HH$ %
newHH& )
TblEnqPromDetHH* 7
{II 
PromoterCodeJJ $
=JJ% &
promoterMasterJJ' 5
.JJ5 6
PromoterCodeJJ6 B
,JJB C
	CreatedByKK !
=KK" #
	_userInfoKK$ -
.KK- .
PanKK. 1
,KK1 2
CreatedDateLL #
=LL$ %
DateTimeLL& .
.LL. /
UtcNowLL/ 5
,LL5 6
IsActiveMM  
=MM! "
trueMM# '
,MM' (
	IsDeletedNN !
=NN" #
falseNN$ )
,NN) *
DomCdOO 
=OO 
itemOO  $
.OO$ %
DomCdOO% *
,OO* +
PdesigCdPP  
=PP! "
itemPP# '
.PP' (
PdesigCdPP( 0
,PP0 1
EnqCibilQQ  
=QQ! "
itemQQ# '
.QQ' (
EnqCibilQQ( 0
,QQ0 1

EnqPromExpRR "
=RR# $
itemRR% )
.RR) *

EnqPromExpRR* 4
,RR4 5
EnqPromExpdetSS %
=SS& '
itemSS( ,
.SS, -
EnqPromExpdetSS- :
,SS: ;
EnqPromShareTT $
=TT% &
itemTT' +
.TT+ ,
EnqPromShareTT, 8
,TT8 9
	EnqtempIdUU !
=UU" #
itemUU$ (
.UU( )
	EnqtempIdUU) 2
,UU2 3
UniqueIdVV  
=VV! "
GuidVV# '
.VV' (
NewGuidVV( /
(VV/ 0
)VV0 1
.VV1 2
ToStringVV2 :
(VV: ;
)VV; <
}WW 
;WW 
varYY 
promoterYY  
=YY! "
awaitYY# (
_promoterRepositoryYY) <
.YY< =
AddAsyncYY= E
(YYE F
enqPromoterYYF Q
,YYQ R
tokenYYS X
)YYX Y
.YYY Z
ConfigureAwaitYYZ h
(YYh i
falseYYi n
)YYn o
;YYo p
var[[ 
promoterBankDetails[[ +
=[[, -
new[[. 1
TblEnqPbankDet[[2 @
{\\ 
	CreatedBy]] !
=]]" #
	_userInfo]]$ -
.]]- .
Pan]]. 1
,]]1 2
CreatedDate^^ #
=^^$ %
DateTime^^& .
.^^. /
UtcNow^^/ 5
,^^5 6
IsActive__  
=__! "
true__# '
,__' (
	IsDeleted`` !
=``" #
false``$ )
,``) *
	EnqtempIdaa !
=aa" #
itemaa$ (
.aa( )
	EnqtempIdaa) 2
,aa2 3
PromAccNamebb #
=bb$ %
itembb& *
.bb* +
PromoterBankDetailsbb+ >
.bb> ?
PromAccNamebb? J
,bbJ K
PromAcctypecc #
=cc$ %
itemcc& *
.cc* +
PromoterBankDetailscc+ >
.cc> ?
PromAcctypecc? J
,ccJ K
PromBankaccnodd %
=dd& '
itemdd( ,
.dd, -
PromoterBankDetailsdd- @
.dd@ A
PromBankaccnoddA N
,ddN O

PromBankbree "
=ee# $
itemee% )
.ee) *
PromoterBankDetailsee* =
.ee= >

PromBankbree> H
,eeH I
PromBanknameff $
=ff% &
itemff' +
.ff+ ,
PromoterBankDetailsff, ?
.ff? @
PromBanknameff@ L
,ffL M
PromIfscgg  
=gg! "
itemgg# '
.gg' (
PromoterBankDetailsgg( ;
.gg; <
PromIfscgg< D
,ggD E
PromoterCodehh $
=hh% &
promoterMasterhh' 5
.hh5 6
PromoterCodehh6 B
,hhB C
UniqueIdii  
=ii! "
Guidii# '
.ii' (
NewGuidii( /
(ii/ 0
)ii0 1
.ii1 2
ToStringii2 :
(ii: ;
)ii; <
}jj 
;jj 
varll 
promBankll  
=ll! "
awaitll# (#
_promoterBankRepositoryll) @
.ll@ A
AddAsyncllA I
(llI J
promoterBankDetailsllJ ]
,ll] ^
tokenll_ d
)lld e
.lle f
ConfigureAwaitllf t
(llt u
falsellu z
)llz {
;ll{ |
awaitmm 
_workmm 
.mm  
CommitAsyncmm  +
(mm+ ,
tokenmm, 1
)mm1 2
.mm2 3
ConfigureAwaitmm3 A
(mmA B
falsemmB G
)mmG H
;mmH I
varoo 
promoterBankDtooo '
=oo( )
_mapperoo* 1
.oo1 2
Mapoo2 5
<oo5 6"
PromoterBankDetailsDTOoo6 L
>ooL M
(ooM N
promBankooN V
)ooV W
;ooW X
varpp 
promoterDtopp #
=pp$ %
_mapperpp& -
.pp- .
Mappp. 1
<pp1 2
PromoterDetailsDTOpp2 D
>ppD E
(ppE F
promoterppF N
)ppN O
;ppO P
varqq 
promMasterDtoqq %
=qq& '
_mapperqq( /
.qq/ 0
Mapqq0 3
<qq3 4
PromoterMasterDTOqq4 E
>qqE F
(qqF G
promoterMasterqqG U
)qqU V
;qqV W
varss 
promoterDetailsObjss *
=ss+ ,
newss- 0
PromoterDetailsDTOss1 C
{tt 
PromoterBankDetailsuu +
=uu, -
promoterBankDtouu. =
,uu= >
PromoterMastervv &
=vv' (
promMasterDtovv) 6
,vv6 7
DomCdww 
=ww 
promoterDtoww  +
.ww+ ,
DomCdww, 1
,ww1 2
EnqCibilxx  
=xx! "
promoterDtoxx# .
.xx. /
EnqCibilxx/ 7
,xx7 8

EnqPromExpyy "
=yy# $
promoterDtoyy% 0
.yy0 1

EnqPromExpyy1 ;
,yy; <
EnqPromExpdetzz %
=zz& '
promoterDtozz( 3
.zz3 4
EnqPromExpdetzz4 A
,zzA B
	EnqPromId{{ !
={{" #
promoterDto{{$ /
.{{/ 0
	EnqPromId{{0 9
,{{9 :
EnqPromShare|| $
=||% &
promoterDto||' 2
.||2 3
EnqPromShare||3 ?
,||? @
	EnqtempId}} !
=}}" #
promoterDto}}$ /
.}}/ 0
	EnqtempId}}0 9
,}}9 :
PdesigCd~~  
=~~! "
promoterDto~~# .
.~~. /
PdesigCd~~/ 7
,~~7 8
PromoterCode $
=% &
promoterDto' 2
.2 3
PromoterCode3 ?
,? @
UniqueId
ÄÄ  
=
ÄÄ! "
promoterDto
ÄÄ# .
.
ÄÄ. /
UniqueId
ÄÄ/ 7
}
ÅÅ 
;
ÅÅ 
promoterList
ÇÇ  
.
ÇÇ  !
Add
ÇÇ! $
(
ÇÇ$ % 
promoterDetailsObj
ÇÇ% 7
)
ÇÇ7 8
;
ÇÇ8 9
}
ÉÉ 
}
ÑÑ 
return
ÜÜ 
promoterList
ÜÜ 
;
ÜÜ  
}
áá 	
public
ââ 
async
ââ 
Task
ââ 
<
ââ 
bool
ââ 
>
ââ #
DeletePromoterDetails
ââ  5
(
ââ5 6
int
ââ6 9
	EnqPromId
ââ: C
,
ââC D
CancellationToken
ââE V
token
ââW \
)
ââ\ ]
{
ää 	
var
ãã 
promoter
ãã 
=
ãã 
await
ãã  !
_promoterRepository
ãã! 4
.
ãã4 5-
FirstOrDefaultByExpressionAsync
ãã5 T
(
ããT U
x
ããU V
=>
ããW Y
x
ããZ [
.
ãã[ \
	EnqPromId
ãã\ e
==
ããf h
	EnqPromId
ããi r
&&
ããs u
x
ããv w
.
ããw x
IsActiveããx Ä
==ããÅ É
trueããÑ à
&&ããâ ã
xããå ç
.ããç é
	IsDeletedããé ó
==ããò ö
falseããõ †
,ãã† °
tokenãã¢ ß
)ããß ®
.ãã® ©
ConfigureAwaitãã© ∑
(ãã∑ ∏
falseãã∏ Ω
)ããΩ æ
;ããæ ø
if
åå 
(
åå 
promoter
åå 
==
åå 
null
åå  
)
åå  !
{
çç 
throw
éé 
new
éé 
ArgumentException
éé +
(
éé+ ,
$str
éé, <
)
éé< =
;
éé= >
}
èè 
promoter
ëë 
.
ëë 
IsActive
ëë 
=
ëë 
false
ëë  %
;
ëë% &
promoter
íí 
.
íí 
	IsDeleted
íí 
=
íí  
true
íí! %
;
íí% &
promoter
ìì 
.
ìì 

ModifiedBy
ìì 
=
ìì  !
	_userInfo
ìì" +
.
ìì+ ,
UserId
ìì, 2
;
ìì2 3
promoter
îî 
.
îî 
CreatedDate
îî  
=
îî! "
DateTime
îî# +
.
îî+ ,
UtcNow
îî, 2
;
îî2 3
await
ññ !
_promoterRepository
ññ %
.
ññ% &
UpdateAsync
ññ& 1
(
ññ1 2
promoter
ññ2 :
,
ññ: ;
token
ññ< A
)
ññA B
.
ññB C
ConfigureAwait
ññC Q
(
ññQ R
false
ññR W
)
ññW X
;
ññX Y
await
óó 
_work
óó 
.
óó 
CommitAsync
óó #
(
óó# $
token
óó$ )
)
óó) *
.
óó* +
ConfigureAwait
óó+ 9
(
óó9 :
false
óó: ?
)
óó? @
;
óó@ A
return
òò 
true
òò 
;
òò 
}
ôô 	
public
õõ 
async
õõ 
Task
õõ 
<
õõ 
IEnumerable
õõ %
<
õõ% & 
PromoterDetailsDTO
õõ& 8
>
õõ8 9
>
õõ9 :$
GetByIdPromoterDetails
õõ; Q
(
õõQ R
int
õõR U
	enquiryId
õõV _
,
õõ_ `
CancellationToken
õõa r
token
õõs x
)
õõx y
{
úú 	
var
ùù 
list
ùù 
=
ùù 
await
ùù !
_promoterRepository
ùù 0
.
ùù0 1#
FindByExpressionAsync
ùù1 F
(
ùùF G
x
ùùG H
=>
ùùI K
x
ùùL M
.
ùùM N
	EnqtempId
ùùN W
==
ùùX Z
	enquiryId
ùù[ d
&&
ùùe g
x
ùùh i
.
ùùi j
IsActive
ùùj r
==
ùùs u
true
ùùv z
&&
ùù{ }
x
ùù~ 
.ùù Ä
	IsDeletedùùÄ â
==ùùä å
falseùùç í
,ùùí ì
tokenùùî ô
)ùùô ö
.ùùö õ
ConfigureAwaitùùõ ©
(ùù© ™
falseùù™ Ø
)ùùØ ∞
;ùù∞ ±
if
ûû 
(
ûû 
!
ûû 
list
ûû 
.
ûû 
Any
ûû 
(
ûû 
)
ûû 
)
ûû 
{
üü 
throw
†† 
new
†† 
ArgumentException
†† +
(
††+ ,
$str
††, <
)
††< =
;
††= >
}
°° 
return
¢¢ 
_mapper
¢¢ 
.
¢¢ 
Map
¢¢ 
<
¢¢ 
List
¢¢ #
<
¢¢# $ 
PromoterDetailsDTO
¢¢$ 6
>
¢¢6 7
>
¢¢7 8
(
¢¢8 9
list
¢¢9 =
)
¢¢= >
;
¢¢> ?
}
££ 	
public
•• 
async
•• 
Task
•• 
<
•• 
IEnumerable
•• %
<
••% & 
PromoterDetailsDTO
••& 8
>
••8 9
>
••9 :#
UpdatePromoterDetails
••; P
(
••P Q
List
••Q U
<
••U V 
PromoterDetailsDTO
••V h
>
••h i
PromoterDTO
••j u
,
••u v 
CancellationToken••w à
token••â é
)••é è
{
¶¶ 	
long
ßß 
promoterCode
ßß 
=
ßß 
$num
ßß  !
;
ßß! "
var
®® 
promoterList
®® 
=
®® 
new
®® "
List
®®# '
<
®®' ( 
PromoterDetailsDTO
®®( :
>
®®: ;
(
®®; <
)
®®< =
;
®®= >
PromoterMasterDTO
©© 
PromoterMasterDTO
©© /
=
©©0 1
new
©©2 5
PromoterMasterDTO
©©6 G
(
©©G H
)
©©H I
;
©©I J
var
™™ 
list_promoter
™™ 
=
™™ 
await
™™  %!
_promoterRepository
™™& 9
.
™™9 :#
FindByExpressionAsync
™™: O
(
™™O P
x
™™P Q
=>
™™R T
x
™™U V
.
™™V W
	EnqtempId
™™W `
==
™™a c
PromoterDTO
™™d o
[
™™o p
$num
™™p q
]
™™q r
.
™™r s
	EnqtempId
™™s |
&&
™™} 
x™™Ä Å
.™™Å Ç
IsActive™™Ç ä
==™™ã ç
true™™é í
&&™™ì ï
x™™ñ ó
.™™ó ò
	IsDeleted™™ò °
==™™¢ §
false™™• ™
,™™™ ´
token™™¨ ±
)™™± ≤
.™™≤ ≥
ConfigureAwait™™≥ ¡
(™™¡ ¬
false™™¬ «
)™™« »
;™™» …
list_promoter
´´ 
.
´´ 
ForEach
´´ !
(
´´! "
x
´´" #
=>
´´$ &
{
¨¨ 
x
≠≠ 
.
≠≠ 
IsActive
≠≠ 
=
≠≠ 
false
≠≠ "
;
≠≠" #
x
ÆÆ 
.
ÆÆ 
	IsDeleted
ÆÆ 
=
ÆÆ 
true
ÆÆ "
;
ÆÆ" #
x
ØØ 
.
ØØ 

ModifiedBy
ØØ 
=
ØØ 
	_userInfo
ØØ (
.
ØØ( )
Pan
ØØ) ,
;
ØØ, -
x
∞∞ 
.
∞∞ 
ModifiedDate
∞∞ 
=
∞∞  
DateTime
∞∞! )
.
∞∞) *
UtcNow
∞∞* 0
;
∞∞0 1
}
±± 
)
±± 
;
±± 
await
≤≤ !
_promoterRepository
≤≤ %
.
≤≤% &
UpdateAsync
≤≤& 1
(
≤≤1 2
list_promoter
≤≤2 ?
.
≤≤? @
ToList
≤≤@ F
(
≤≤F G
)
≤≤G H
,
≤≤H I
token
≤≤J O
)
≤≤O P
.
≤≤P Q
ConfigureAwait
≤≤Q _
(
≤≤_ `
false
≤≤` e
)
≤≤e f
;
≤≤f g
var
¥¥ 
list_promoterBank
¥¥ !
=
¥¥" #
await
¥¥$ )%
_promoterBankRepository
¥¥* A
.
¥¥A B#
FindByExpressionAsync
¥¥B W
(
¥¥W X
x
¥¥X Y
=>
¥¥Z \
x
¥¥] ^
.
¥¥^ _
	EnqtempId
¥¥_ h
==
¥¥i k
PromoterDTO
¥¥l w
[
¥¥w x
$num
¥¥x y
]
¥¥y z
.
¥¥z {
	EnqtempId¥¥{ Ñ
&&¥¥Ö á
x¥¥à â
.¥¥â ä
IsActive¥¥ä í
==¥¥ì ï
true¥¥ñ ö
&&¥¥õ ù
x¥¥û ü
.¥¥ü †
	IsDeleted¥¥† ©
==¥¥™ ¨
false¥¥≠ ≤
,¥¥≤ ≥
token¥¥¥ π
)¥¥π ∫
.¥¥∫ ª
ConfigureAwait¥¥ª …
(¥¥…  
false¥¥  œ
)¥¥œ –
;¥¥– —
list_promoterBank
µµ 
.
µµ 
ForEach
µµ %
(
µµ% &
x
µµ& '
=>
µµ( *
{
∂∂ 
x
∑∑ 
.
∑∑ 
IsActive
∑∑ 
=
∑∑ 
false
∑∑ "
;
∑∑" #
x
∏∏ 
.
∏∏ 
	IsDeleted
∏∏ 
=
∏∏ 
true
∏∏ "
;
∏∏" #
x
ππ 
.
ππ 

ModifiedBy
ππ 
=
ππ 
	_userInfo
ππ (
.
ππ( )
Pan
ππ) ,
;
ππ, -
x
∫∫ 
.
∫∫ 
ModifiedDate
∫∫ 
=
∫∫  
DateTime
∫∫! )
.
∫∫) *
UtcNow
∫∫* 0
;
∫∫0 1
}
ªª 
)
ªª 
;
ªª 
await
ºº %
_promoterBankRepository
ºº )
.
ºº) *
UpdateAsync
ºº* 5
(
ºº5 6
list_promoterBank
ºº6 G
.
ººG H
ToList
ººH N
(
ººN O
)
ººO P
,
ººP Q
token
ººR W
)
ººW X
.
ººX Y
ConfigureAwait
ººY g
(
ººg h
false
ººh m
)
ººm n
;
ººn o
await
ææ 
_work
ææ 
.
ææ 
CommitAsync
ææ #
(
ææ# $
token
ææ$ )
)
ææ) *
.
ææ* +
ConfigureAwait
ææ+ 9
(
ææ9 :
false
ææ: ?
)
ææ? @
;
ææ@ A
foreach
¡¡ 
(
¡¡ 
var
¡¡ 
item
¡¡ 
in
¡¡  
PromoterDTO
¡¡! ,
)
¡¡, -
{
¬¬ 
var
√√ 
promasterData
√√ !
=
√√" #
await
√√$ )'
_promoterMasterRepository
√√* C
.
√√C D7
)FirstOrDefaultNoTrackingByExpressionAsync
√√D m
(
ƒƒ 
x
ƒƒ 
=>
ƒƒ 
x
ƒƒ 
.
ƒƒ 
PromoterCode
ƒƒ (
==
ƒƒ) +
item
ƒƒ, 0
.
ƒƒ0 1
PromoterCode
ƒƒ1 =
&&
ƒƒ> @
x
≈≈ 
.
≈≈ 
IsActive
≈≈ 
==
≈≈ !
true
≈≈" &
&&
≈≈' )
x
≈≈* +
.
≈≈+ ,
	IsDeleted
≈≈, 5
==
≈≈6 8
false
≈≈9 >
,
≈≈> ?
token
≈≈@ E
)
≈≈E F
.
≈≈F G
ConfigureAwait
≈≈G U
(
≈≈U V
false
≈≈V [
)
≈≈[ \
;
≈≈\ ]
if
∆∆ 
(
∆∆ 
promasterData
∆∆ !
==
∆∆" $
null
∆∆% )
)
∆∆) *
{
«« 
var
»»  
promoterMasterData
»» *
=
»»+ ,
new
»»- 0
TblPromCdtab
»»1 =
{
…… 

ModifiedBy
   "
=
  # $
	_userInfo
  % .
.
  . /
Pan
  / 2
,
  2 3
ModifiedDate
ÀÀ $
=
ÀÀ% &
DateTime
ÀÀ' /
.
ÀÀ/ 0
UtcNow
ÀÀ0 6
,
ÀÀ6 7
IsActive
ÃÃ  
=
ÃÃ! "
true
ÃÃ# '
,
ÃÃ' (
	IsDeleted
ÕÕ !
=
ÕÕ" #
false
ÕÕ$ )
,
ÕÕ) *
PromoterDob
ŒŒ #
=
ŒŒ$ %
item
ŒŒ& *
.
ŒŒ* +
PromoterMaster
ŒŒ+ 9
.
ŒŒ9 :
PromoterDob
ŒŒ: E
,
ŒŒE F
PromoterEmailid
œœ '
=
œœ( )
item
œœ* .
.
œœ. /
PromoterMaster
œœ/ =
.
œœ= >
PromoterEmailid
œœ> M
,
œœM N
PromoterGender
–– &
=
––' (
item
––) -
.
––- .
PromoterMaster
––. <
.
––< =
PromoterGender
––= K
,
––K L
PromoterMobno
—— %
=
——& '
item
——( ,
.
——, -
PromoterMaster
——- ;
.
——; <
PromoterMobno
——< I
,
——I J
PromoterName
““ $
=
““% &
item
““' +
.
““+ ,
PromoterMaster
““, :
.
““: ;
PromoterName
““; G
,
““G H
PromoterPan
”” #
=
””$ %
item
””& *
.
””* +
PromoterMaster
””+ 9
.
””9 :
PromoterPan
””: E
,
””E F
PromoterPassport
‘‘ (
=
‘‘) *
item
‘‘+ /
.
‘‘/ 0
PromoterMaster
‘‘0 >
.
‘‘> ?
PromoterPassport
‘‘? O
,
‘‘O P
PromoterPhoto
’’ %
=
’’& '
item
’’( ,
.
’’, -
PromoterMaster
’’- ;
.
’’; <
PromoterPhoto
’’< I
,
’’I J
UniqueId
÷÷  
=
÷÷! "
Guid
÷÷# '
.
÷÷' (
NewGuid
÷÷( /
(
÷÷/ 0
)
÷÷0 1
.
÷÷1 2
ToString
÷÷2 :
(
÷÷: ;
)
÷÷; <
}
◊◊ 
;
◊◊ 
var
ŸŸ 
promoterMaster
ŸŸ &
=
ŸŸ' (
await
ŸŸ) .'
_promoterMasterRepository
ŸŸ/ H
.
ŸŸH I
AddAsync
ŸŸI Q
(
ŸŸQ R 
promoterMasterData
ŸŸR d
,
ŸŸd e
token
ŸŸf k
)
ŸŸk l
.
ŸŸl m
ConfigureAwait
ŸŸm {
(
ŸŸ{ |
falseŸŸ| Å
)ŸŸÅ Ç
;ŸŸÇ É
await
⁄⁄ 
_work
⁄⁄ 
.
⁄⁄  
CommitAsync
⁄⁄  +
(
⁄⁄+ ,
token
⁄⁄, 1
)
⁄⁄1 2
.
⁄⁄2 3
ConfigureAwait
⁄⁄3 A
(
⁄⁄A B
false
⁄⁄B G
)
⁄⁄G H
;
⁄⁄H I
promoterCode
€€  
=
€€! "
promoterMaster
€€# 1
.
€€1 2
PromoterCode
€€2 >
;
€€> ?
PromoterMasterDTO
‹‹ %
=
‹‹& '
_mapper
‹‹( /
.
‹‹/ 0
Map
‹‹0 3
<
‹‹3 4
PromoterMasterDTO
‹‹4 E
>
‹‹E F
(
‹‹F G 
promoterMasterData
‹‹G Y
)
‹‹Y Z
;
‹‹Z [
}
›› 
else
ﬁﬁ 
{
ﬂﬂ 
promasterData
‡‡ !
.
‡‡! "

ModifiedBy
‡‡" ,
=
‡‡- .
	_userInfo
‡‡/ 8
.
‡‡8 9
Pan
‡‡9 <
;
‡‡< =
promasterData
·· !
.
··! "
ModifiedDate
··" .
=
··/ 0
DateTime
··1 9
.
··9 :
UtcNow
··: @
;
··@ A
promasterData
‚‚ !
.
‚‚! "
IsActive
‚‚" *
=
‚‚+ ,
true
‚‚- 1
;
‚‚1 2
promasterData
„„ !
.
„„! "
	IsDeleted
„„" +
=
„„, -
false
„„. 3
;
„„3 4
promasterData
‰‰ !
.
‰‰! "
PromoterDob
‰‰" -
=
‰‰. /
item
‰‰0 4
.
‰‰4 5
PromoterMaster
‰‰5 C
.
‰‰C D
PromoterDob
‰‰D O
;
‰‰O P
promasterData
ÂÂ !
.
ÂÂ! "
PromoterEmailid
ÂÂ" 1
=
ÂÂ2 3
item
ÂÂ4 8
.
ÂÂ8 9
PromoterMaster
ÂÂ9 G
.
ÂÂG H
PromoterEmailid
ÂÂH W
;
ÂÂW X
promasterData
ÊÊ !
.
ÊÊ! "
PromoterGender
ÊÊ" 0
=
ÊÊ1 2
item
ÊÊ3 7
.
ÊÊ7 8
PromoterMaster
ÊÊ8 F
.
ÊÊF G
PromoterGender
ÊÊG U
;
ÊÊU V
promasterData
ÁÁ !
.
ÁÁ! "
PromoterMobno
ÁÁ" /
=
ÁÁ0 1
item
ÁÁ2 6
.
ÁÁ6 7
PromoterMaster
ÁÁ7 E
.
ÁÁE F
PromoterMobno
ÁÁF S
;
ÁÁS T
promasterData
ËË !
.
ËË! "
PromoterName
ËË" .
=
ËË/ 0
item
ËË1 5
.
ËË5 6
PromoterMaster
ËË6 D
.
ËËD E
PromoterName
ËËE Q
;
ËËQ R
promasterData
ÈÈ !
.
ÈÈ! "
PromoterPan
ÈÈ" -
=
ÈÈ. /
item
ÈÈ0 4
.
ÈÈ4 5
PromoterMaster
ÈÈ5 C
.
ÈÈC D
PromoterPan
ÈÈD O
;
ÈÈO P
promasterData
ÍÍ !
.
ÍÍ! "
PromoterPassport
ÍÍ" 2
=
ÍÍ3 4
item
ÍÍ5 9
.
ÍÍ9 :
PromoterMaster
ÍÍ: H
.
ÍÍH I
PromoterPassport
ÍÍI Y
;
ÍÍY Z
promasterData
ÎÎ !
.
ÎÎ! "
PromoterPhoto
ÎÎ" /
=
ÎÎ0 1
item
ÎÎ2 6
.
ÎÎ6 7
PromoterMaster
ÎÎ7 E
.
ÎÎE F
PromoterPhoto
ÎÎF S
;
ÎÎS T
await
ÏÏ '
_promoterMasterRepository
ÏÏ 3
.
ÏÏ3 4
UpdateAsync
ÏÏ4 ?
(
ÏÏ? @
promasterData
ÏÏ@ M
,
ÏÏM N
token
ÏÏO T
)
ÏÏT U
.
ÏÏU V
ConfigureAwait
ÏÏV d
(
ÏÏd e
false
ÏÏe j
)
ÏÏj k
;
ÏÏk l
PromoterMasterDTO
ÌÌ %
=
ÌÌ& '
_mapper
ÌÌ( /
.
ÌÌ/ 0
Map
ÌÌ0 3
<
ÌÌ3 4
PromoterMasterDTO
ÌÌ4 E
>
ÌÌE F
(
ÌÌF G
promasterData
ÌÌG T
)
ÌÌT U
;
ÌÌU V
await
ÓÓ 
_work
ÓÓ 
.
ÓÓ  
CommitAsync
ÓÓ  +
(
ÓÓ+ ,
token
ÓÓ, 1
)
ÓÓ1 2
.
ÓÓ2 3
ConfigureAwait
ÓÓ3 A
(
ÓÓA B
false
ÓÓB G
)
ÓÓG H
;
ÓÓH I
}
ÔÔ 
var
ÚÚ 
enqPromoter
ÚÚ 
=
ÚÚ  !
new
ÚÚ" %
TblEnqPromDet
ÚÚ& 3
{
ÛÛ 
PromoterCode
ÙÙ  
=
ÙÙ! "
promasterData
ÙÙ# 0
==
ÙÙ1 3
null
ÙÙ4 8
?
ÙÙ9 :
promoterCode
ÙÙ; G
:
ÙÙH I
promasterData
ÙÙJ W
.
ÙÙW X
PromoterCode
ÙÙX d
,
ÙÙd e
	CreatedBy
ıı 
=
ıı 
	_userInfo
ıı  )
.
ıı) *
Pan
ıı* -
,
ıı- .
CreatedDate
ˆˆ 
=
ˆˆ  !
DateTime
ˆˆ" *
.
ˆˆ* +
UtcNow
ˆˆ+ 1
,
ˆˆ1 2
IsActive
˜˜ 
=
˜˜ 
true
˜˜ #
,
˜˜# $
	IsDeleted
¯¯ 
=
¯¯ 
false
¯¯  %
,
¯¯% &
DomCd
˘˘ 
=
˘˘ 
item
˘˘  
.
˘˘  !
DomCd
˘˘! &
,
˘˘& '
PdesigCd
˙˙ 
=
˙˙ 
item
˙˙ #
.
˙˙# $
PdesigCd
˙˙$ ,
,
˙˙, -
EnqCibil
˚˚ 
=
˚˚ 
item
˚˚ #
.
˚˚# $
EnqCibil
˚˚$ ,
,
˚˚, -

EnqPromExp
¸¸ 
=
¸¸  
item
¸¸! %
.
¸¸% &

EnqPromExp
¸¸& 0
,
¸¸0 1
EnqPromExpdet
˝˝ !
=
˝˝" #
item
˝˝$ (
.
˝˝( )
EnqPromExpdet
˝˝) 6
,
˝˝6 7
EnqPromShare
˛˛  
=
˛˛! "
item
˛˛# '
.
˛˛' (
EnqPromShare
˛˛( 4
,
˛˛4 5
	EnqtempId
ˇˇ 
=
ˇˇ 
item
ˇˇ  $
.
ˇˇ$ %
	EnqtempId
ˇˇ% .
,
ˇˇ. /
UniqueId
ÄÄ 
=
ÄÄ 
Guid
ÄÄ #
.
ÄÄ# $
NewGuid
ÄÄ$ +
(
ÄÄ+ ,
)
ÄÄ, -
.
ÄÄ- .
ToString
ÄÄ. 6
(
ÄÄ6 7
)
ÄÄ7 8
}
ÅÅ 
;
ÅÅ 
var
ÉÉ 
promoter
ÉÉ 
=
ÉÉ 
await
ÉÉ $!
_promoterRepository
ÉÉ% 8
.
ÉÉ8 9
AddAsync
ÉÉ9 A
(
ÉÉA B
enqPromoter
ÉÉB M
,
ÉÉM N
token
ÉÉO T
)
ÉÉT U
.
ÉÉU V
ConfigureAwait
ÉÉV d
(
ÉÉd e
false
ÉÉe j
)
ÉÉj k
;
ÉÉk l
var
ÖÖ !
promoterBankDetails
ÖÖ '
=
ÖÖ( )
new
ÖÖ* -
TblEnqPbankDet
ÖÖ. <
{
ÜÜ 
	CreatedBy
áá 
=
áá 
	_userInfo
áá  )
.
áá) *
Pan
áá* -
,
áá- .
CreatedDate
àà 
=
àà  !
DateTime
àà" *
.
àà* +
UtcNow
àà+ 1
,
àà1 2
IsActive
ââ 
=
ââ 
true
ââ #
,
ââ# $
	IsDeleted
ää 
=
ää 
false
ää  %
,
ää% &
	EnqtempId
ãã 
=
ãã 
item
ãã  $
.
ãã$ %
	EnqtempId
ãã% .
,
ãã. /
PromAccName
åå 
=
åå  !
item
åå" &
.
åå& '!
PromoterBankDetails
åå' :
.
åå: ;
PromAccName
åå; F
,
ååF G
PromAcctype
çç 
=
çç  !
item
çç" &
.
çç& '!
PromoterBankDetails
çç' :
.
çç: ;
PromAcctype
çç; F
,
ççF G
PromBankaccno
éé !
=
éé" #
item
éé$ (
.
éé( )!
PromoterBankDetails
éé) <
.
éé< =
PromBankaccno
éé= J
,
ééJ K

PromBankbr
èè 
=
èè  
item
èè! %
.
èè% &!
PromoterBankDetails
èè& 9
.
èè9 :

PromBankbr
èè: D
,
èèD E
PromBankname
êê  
=
êê! "
item
êê# '
.
êê' (!
PromoterBankDetails
êê( ;
.
êê; <
PromBankname
êê< H
,
êêH I
PromIfsc
ëë 
=
ëë 
item
ëë #
.
ëë# $!
PromoterBankDetails
ëë$ 7
.
ëë7 8
PromIfsc
ëë8 @
,
ëë@ A
PromoterCode
íí  
=
íí! "
promasterData
íí# 0
==
íí1 3
null
íí4 8
?
íí9 :
promoterCode
íí; G
:
ííH I
promasterData
ííJ W
.
ííW X
PromoterCode
ííX d
,
ííd e
UniqueId
ìì 
=
ìì 
Guid
ìì #
.
ìì# $
NewGuid
ìì$ +
(
ìì+ ,
)
ìì, -
.
ìì- .
ToString
ìì. 6
(
ìì6 7
)
ìì7 8
}
îî 
;
îî 
var
ññ 
promBank
ññ 
=
ññ 
await
ññ $%
_promoterBankRepository
ññ% <
.
ññ< =
AddAsync
ññ= E
(
ññE F!
promoterBankDetails
ññF Y
,
ññY Z
token
ññ[ `
)
ññ` a
.
ñña b
ConfigureAwait
ññb p
(
ññp q
false
ññq v
)
ññv w
;
ññw x
await
óó 
_work
óó 
.
óó 
CommitAsync
óó '
(
óó' (
token
óó( -
)
óó- .
.
óó. /
ConfigureAwait
óó/ =
(
óó= >
false
óó> C
)
óóC D
;
óóD E
var
ôô 
promoterBankDto
ôô #
=
ôô$ %
_mapper
ôô& -
.
ôô- .
Map
ôô. 1
<
ôô1 2$
PromoterBankDetailsDTO
ôô2 H
>
ôôH I
(
ôôI J
promBank
ôôJ R
)
ôôR S
;
ôôS T
var
öö 
promoterDto
öö 
=
öö  !
_mapper
öö" )
.
öö) *
Map
öö* -
<
öö- . 
PromoterDetailsDTO
öö. @
>
öö@ A
(
ööA B
promoter
ööB J
)
ööJ K
;
ööK L
var
ùù  
promoterDetailsObj
ùù &
=
ùù' (
new
ùù) , 
PromoterDetailsDTO
ùù- ?
{
ûû !
PromoterBankDetails
üü '
=
üü( )
promoterBankDto
üü* 9
,
üü9 :
PromoterMaster
†† "
=
††# $
PromoterMasterDTO
††% 6
,
††6 7
DomCd
°° 
=
°° 
promoterDto
°° '
.
°°' (
DomCd
°°( -
,
°°- .
EnqCibil
¢¢ 
=
¢¢ 
promoterDto
¢¢ *
.
¢¢* +
EnqCibil
¢¢+ 3
,
¢¢3 4

EnqPromExp
££ 
=
££  
promoterDto
££! ,
.
££, -

EnqPromExp
££- 7
,
££7 8
EnqPromExpdet
§§ !
=
§§" #
promoterDto
§§$ /
.
§§/ 0
EnqPromExpdet
§§0 =
,
§§= >
	EnqPromId
•• 
=
•• 
promoterDto
••  +
.
••+ ,
	EnqPromId
••, 5
,
••5 6
EnqPromShare
¶¶  
=
¶¶! "
promoterDto
¶¶# .
.
¶¶. /
EnqPromShare
¶¶/ ;
,
¶¶; <
	EnqtempId
ßß 
=
ßß 
promoterDto
ßß  +
.
ßß+ ,
	EnqtempId
ßß, 5
,
ßß5 6
PdesigCd
®® 
=
®® 
promoterDto
®® *
.
®®* +
PdesigCd
®®+ 3
,
®®3 4
PromoterCode
©©  
=
©©! "
promoterDto
©©# .
.
©©. /
PromoterCode
©©/ ;
,
©©; <
UniqueId
™™ 
=
™™ 
promoterDto
™™ *
.
™™* +
UniqueId
™™+ 3
}
´´ 
;
´´ 
promoterList
¨¨ 
.
¨¨ 
Add
¨¨  
(
¨¨  ! 
promoterDetailsObj
¨¨! 3
)
¨¨3 4
;
¨¨4 5
}
ÆÆ 
return
∞∞ 
promoterList
∞∞ 
;
∞∞  
}
±± 	
}
¥¥ 
}µµ ˚m
àD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\PromoterGuarantorDetails\PromoterLiabilityDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H$
PromoterGuarantorDetailsH `
{ 
public 

class +
PromoterLiabilityDetailsService 0
:1 2%
IPromoterLiabilityDetails3 L
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqPliabDet+ 9
>9 :#
_proLiabilityRepository; R
;R S
private 
readonly 
IEntityRepository *
<* +
TblEnqTemptab+ 8
>8 9
_enqRepository: H
;H I
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public +
PromoterLiabilityDetailsService .
(. /
IMapper/ 6
mapper7 =
,= >
UserInfo? G
userInfoH P
,P Q
IEntityRepositoryR c
<c d
TblEnqPliabDetd r
>r s#
proLiabilityRepository	t ä
,
ä ã
IUnitOfWork
å ó
work
ò ú
,
ú ù
IEntityRepository
û Ø
<
Ø ∞
TblEnqTemptab
∞ Ω
>
Ω æ
enqRepository
ø Ã
=
Õ Œ
null
œ ”
)
” ‘
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !#
_proLiabilityRepository #
=$ %"
proLiabilityRepository& <
;< =
_work 
= 
work 
; 
_enqRepository 
= 
enqRepository *
;* +
}   	
public!! 
async!! 
Task!! 
<!! 
IEnumerable!! %
<!!% &'
PromoterLiabilityDetailsDTO!!& A
>!!A B
>!!B C'
AddPromoterLiabilityDetails!!D _
(!!_ `
List!!` d
<!!d e(
PromoterLiabilityDetailsDTO	!!e Ä
>
!!Ä Å
liabilityDTO
!!Ç é
,
!!é è
CancellationToken
!!ê °
token
!!¢ ß
)
!!ß ®
{"" 	
var## 
liabilityList## 
=## 
_mapper##  '
.##' (
Map##( +
<##+ ,
List##, 0
<##0 1
TblEnqPliabDet##1 ?
>##? @
>##@ A
(##A B
liabilityDTO##B N
)##N O
;##O P
liabilityList%% 
.%% 
ForEach%% !
(%%! "
x%%" #
=>%%$ &
{&& 
x'' 
.'' 
IsActive'' 
='' 
true'' !
;''! "
x(( 
.(( 
	IsDeleted(( 
=(( 
false(( #
;((# $
x)) 
.)) 
	CreatedBy)) 
=)) 
	_userInfo)) '
.))' (
UserId))( .
;)). /
x** 
.** 
CreatedDate** 
=** 
DateTime**  (
.**( )
UtcNow**) /
;**/ 0
x++ 
.++ 
UniqueId++ 
=++ 
Guid++ !
.++! "
NewGuid++" )
(++) *
)++* +
.+++ ,
ToString++, 4
(++4 5
)++5 6
;++6 7
},, 
),, 
;,, 
var-- 
result-- 
=-- 
await-- #
_proLiabilityRepository-- 6
.--6 7
AddAsync--7 ?
(--? @
liabilityList--@ M
,--M N
token--O T
)--T U
.--U V
ConfigureAwait--V d
(--d e
false--e j
)--j k
;--k l
await.. 
_work.. 
... 
CommitAsync.. #
(..# $
token..$ )
)..) *
...* +
ConfigureAwait..+ 9
(..9 :
false..: ?
)..? @
;..@ A
return00 
_mapper00 
.00 
Map00 
<00 
List00 #
<00# $'
PromoterLiabilityDetailsDTO00$ ?
>00? @
>00@ A
(00A B
result00B H
)00H I
;00I J
}11 	
public33 
async33 
Task33 
<33 
bool33 
>33 *
DeletePromoterLiabilityDetails33  >
(33> ?
int33? B
	enquiryId33C L
,33L M
CancellationToken33N _
token33` e
)33e f
{44 	
var55 
promoter55 
=55 
await55  #
_proLiabilityRepository55! 8
.558 9+
FirstOrDefaultByExpressionAsync559 X
(55X Y
x55Y Z
=>55[ ]
x55^ _
.55_ `
EnqPromliabId55` m
==55n p
	enquiryId55q z
&&55{ }
x55~ 
.	55 Ä
IsActive
55Ä à
==
55â ã
true
55å ê
&&
55ë ì
x
55î ï
.
55ï ñ
	IsDeleted
55ñ ü
==
55† ¢
false
55£ ®
,
55® ©
token
55™ Ø
)
55Ø ∞
.
55∞ ±
ConfigureAwait
55± ø
(
55ø ¿
false
55¿ ≈
)
55≈ ∆
;
55∆ «
if66 
(66 
promoter66 
==66 
null66  
)66  !
{77 
throw88 
new88 
ArgumentException88 +
(88+ ,
$str88, <
)88< =
;88= >
}99 
promoter;; 
.;; 
IsActive;; 
=;; 
false;;  %
;;;% &
promoter<< 
.<< 
	IsDeleted<< 
=<<  
true<<! %
;<<% &
promoter== 
.== 

ModifiedBy== 
===  !
	_userInfo==" +
.==+ ,
UserId==, 2
;==2 3
promoter>> 
.>> 
CreatedDate>>  
=>>! "
DateTime>># +
.>>+ ,
UtcNow>>, 2
;>>2 3
await@@ #
_proLiabilityRepository@@ )
.@@) *
UpdateAsync@@* 5
(@@5 6
promoter@@6 >
,@@> ?
token@@@ E
)@@E F
.@@F G
ConfigureAwait@@G U
(@@U V
false@@V [
)@@[ \
;@@\ ]
awaitAA 
_workAA 
.AA 
CommitAsyncAA #
(AA# $
tokenAA$ )
)AA) *
.AA* +
ConfigureAwaitAA+ 9
(AA9 :
falseAA: ?
)AA? @
;AA@ A
returnBB 
trueBB 
;BB 
}CC 	
publicEE 
asyncEE 
TaskEE 
<EE 
ListEE 
<EE '
PromoterLiabilityDetailsDTOEE :
>EE: ;
>EE; <+
GetByIdPromoterLiabilityDetailsEE= \
(EE\ ]
intEE] `
	enquiryIdEEa j
,EEj k
CancellationTokenEEl }
token	EE~ É
)
EEÉ Ñ
{FF 	
varGG 
listGG 
=GG 
awaitGG #
_proLiabilityRepositoryGG 4
.GG4 5!
FindByExpressionAsyncGG5 J
(GGJ K
xGGK L
=>GGM O
xGGP Q
.GGQ R
EnqPromliabIdGGR _
==GG` b
	enquiryIdGGc l
&&GGm o
xGGp q
.GGq r
IsActiveGGr z
==GG{ }
true	GG~ Ç
&&
GGÉ Ö
x
GGÜ á
.
GGá à
	IsDeleted
GGà ë
==
GGí î
false
GGï ö
,
GGö õ
token
GGú °
)
GG° ¢
.
GG¢ £
ConfigureAwait
GG£ ±
(
GG± ≤
false
GG≤ ∑
)
GG∑ ∏
;
GG∏ π
ifHH 
(HH 
!HH 
listHH 
.HH 
AnyHH 
(HH 
)HH 
)HH 
{II 
throwJJ 
newJJ 
ArgumentExceptionJJ +
(JJ+ ,
$strJJ, <
)JJ< =
;JJ= >
}KK 
returnLL 
_mapperLL 
.LL 
MapLL 
<LL 
ListLL #
<LL# $'
PromoterLiabilityDetailsDTOLL$ ?
>LL? @
>LL@ A
(LLA B
listLLB F
)LLF G
;LLG H
}MM 	
publicOO 
asyncOO 
TaskOO 
<OO 
IEnumerableOO %
<OO% &'
PromoterLiabilityDetailsDTOOO& A
>OOA B
>OOB C*
UpdatePromoterLiabilityDetailsOOD b
(OOb c
ListOOc g
<OOg h(
PromoterLiabilityDetailsDTO	OOh É
>
OOÉ Ñ
PromoterDTO
OOÖ ê
,
OOê ë
CancellationToken
OOí £
token
OO§ ©
)
OO© ™
{PP 	
varQQ 
enquiryQQ 
=QQ 
awaitQQ 
_enqRepositoryQQ  .
.QQ. /+
FirstOrDefaultByExpressionAsyncQQ/ N
(QQN O
xQQO P
=>QQQ S
xQQT U
.QQU V
	EnqtempIdQQV _
==QQ` b
PromoterDTOQQc n
[QQn o
$numQQo p
]QQp q
.QQq r
	EnqtempIdQQr {
&&QQ| ~
x	QQ Ä
.
QQÄ Å
IsActive
QQÅ â
==
QQä å
true
QQç ë
&&
QQí î
x
QQï ñ
.
QQñ ó
	IsDeleted
QQó †
==
QQ° £
false
QQ§ ©
,
QQ© ™
token
QQ´ ∞
)
QQ∞ ±
.
QQ± ≤
ConfigureAwait
QQ≤ ¿
(
QQ¿ ¡
false
QQ¡ ∆
)
QQ∆ «
;
QQ« »
ifRR 
(RR 
enquiryRR 
==RR 
nullRR 
)RR  
{SS 
throwTT 
newTT 
ArgumentExceptionTT +
(TT+ ,
$strTT, D
)TTD E
;TTE F
}UU 
varWW 
liaUListWW 
=WW 
awaitWW  #
_proLiabilityRepositoryWW! 8
.WW8 9!
FindByExpressionAsyncWW9 N
(WWN O
xWWO P
=>WWQ S
xWWT U
.WWU V
	EnqtempIdWWV _
==WW` b
PromoterDTOWWc n
[WWn o
$numWWo p
]WWp q
.WWq r
	EnqtempIdWWr {
&&WW| ~
x	WW Ä
.
WWÄ Å
IsActive
WWÅ â
==
WWä å
true
WWç ë
&&
WWí î
x
WWï ñ
.
WWñ ó
	IsDeleted
WWó †
==
WW° £
false
WW§ ©
,
WW© ™
token
WW´ ∞
)
WW∞ ±
.
WW± ≤
ConfigureAwait
WW≤ ¿
(
WW¿ ¡
false
WW¡ ∆
)
WW∆ «
;
WW« »
liaUListXX 
.XX 
ForEachXX 
(XX 
xXX 
=>XX !
{YY 
xZZ 
.ZZ 
IsActiveZZ 
=ZZ 
falseZZ "
;ZZ" #
x[[ 
.[[ 
	IsDeleted[[ 
=[[ 
true[[ "
;[[" #
x\\ 
.\\ 

ModifiedBy\\ 
=\\ 
	_userInfo\\ (
.\\( )
UserId\\) /
;\\/ 0
x]] 
.]] 
ModifiedDate]] 
=]]  
DateTime]]! )
.]]) *
UtcNow]]* 0
;]]0 1
}^^ 
)^^ 
;^^ 
await__ #
_proLiabilityRepository__ )
.__) *
UpdateAsync__* 5
(__5 6
liaUList__6 >
,__> ?
token__@ E
)__E F
.__F G
ConfigureAwait__G U
(__U V
false__V [
)__[ \
;__\ ]
varaa 

sisterListaa 
=aa 
_mapperaa $
.aa$ %
Mapaa% (
<aa( )
Listaa) -
<aa- .
TblEnqPliabDetaa. <
>aa< =
>aa= >
(aa> ?
PromoterDTOaa? J
)aaJ K
;aaK L

sisterListcc 
.cc 
ForEachcc 
(cc 
xcc  
=>cc! #
{dd 
xee 
.ee 
IsActiveee 
=ee 
trueee !
;ee! "
xff 
.ff 
	IsDeletedff 
=ff 
falseff #
;ff# $
xgg 
.gg 
	CreatedBygg 
=gg 
	_userInfogg '
.gg' (
UserIdgg( .
;gg. /
xhh 
.hh 
CreatedDatehh 
=hh 
DateTimehh  (
.hh( )
UtcNowhh) /
;hh/ 0
xii 
.ii 
UniqueIdii 
=ii 
Guidii !
.ii! "
NewGuidii" )
(ii) *
)ii* +
.ii+ ,
ToStringii, 4
(ii4 5
)ii5 6
;ii6 7
}jj 
)jj 
;jj 
varll 
datall 
=ll 
awaitll #
_proLiabilityRepositoryll 4
.ll4 5
AddAsyncll5 =
(ll= >

sisterListll> H
,llH I
tokenllJ O
)llO P
.llP Q
ConfigureAwaitllQ _
(ll_ `
falsell` e
)lle f
;llf g
awaitmm 
_workmm 
.mm 
CommitAsyncmm #
(mm# $
tokenmm$ )
)mm) *
.mm* +
ConfigureAwaitmm+ 9
(mm9 :
falsemm: ?
)mm? @
;mm@ A
returnnn 
_mappernn 
.nn 
Mapnn 
<nn 
Listnn #
<nn# $'
PromoterLiabilityDetailsDTOnn$ ?
>nn? @
>nn@ A
(nnA B
datannB F
)nnF G
;nnG H
}oo 	
}pp 
}qq Üq
âD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\PromoterGuarantorDetails\PromoterLiabilityNetWorthService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H$
PromoterGuarantorDetailsH `
{ 
public 

class ,
 PromoterLiabilityNetWorthService 1
:2 3&
IPromoterLiabilityNetWorth4 N
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqPnwDet+ 7
>7 8
_enqPNWRepository9 J
;J K
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public ,
 PromoterLiabilityNetWorthService /
(/ 0
IMapper0 7
mapper8 >
,> ?
UserInfo@ H
userInfoI Q
,Q R
IEntityRepositoryS d
<d e
TblEnqPnwDete q
>q r
enqPNWRepository	s É
,
É Ñ
IUnitOfWork
Ö ê
work
ë ï
)
ï ñ
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !
_enqPNWRepository 
= 
enqPNWRepository  0
;0 1
_work 
= 
work 
; 
} 	
public 
async 
Task 
< 
IEnumerable %
<% &&
PromoterNetWorthDetailsDTO& @
>@ A
>A B/
#AddPromoterLiabilityNetWorthDetailsC f
(f g
Listg k
<k l'
PromoterNetWorthDetailsDTO	l Ü
>
Ü á
NetWorthDTO
à ì
,
ì î
CancellationToken
ï ¶
token
ß ¨
)
¨ ≠
{   	
var"" 
dataList"" 
="" 
await""  
_enqPNWRepository""! 2
.""2 3!
FindByExpressionAsync""3 H
(""H I
x""I J
=>""K M
x""N O
.""O P
	EnqtempId""P Y
==""Z \
NetWorthDTO""] h
[""h i
$num""i j
]""j k
.""k l
	EnqtempId""l u
&&""v x
x""y z
.""z {
IsActive	""{ É
==
""Ñ Ü
true
""á ã
&&
""å é
x
""è ê
.
""ê ë
	IsDeleted
""ë ö
==
""õ ù
false
""û £
,
""£ §
token
""• ™
)
""™ ´
.
""´ ¨
ConfigureAwait
""¨ ∫
(
""∫ ª
false
""ª ¿
)
""¿ ¡
;
""¡ ¬
if## 
(## 
dataList## 
!=## 
null##  
&&##! #
dataList##$ ,
.##, -
Count##- 2
>##3 4
$num##5 6
)##6 7
{$$ 
dataList%% 
.%% 
ForEach%%  
(%%  !
x%%! "
=>%%# %
{&& 
x'' 
.'' 
	IsDeleted'' 
=''  !
true''" &
;''& '
x(( 
.(( 
IsActive(( 
=((  
false((! &
;((& '
x)) 
.)) 

ModifiedBy))  
=))! "
	_userInfo))# ,
.)), -
Pan))- 0
;))0 1
x** 
.** 
ModifiedDate** "
=**# $
DateTime**% -
.**- .
UtcNow**. 4
;**4 5
}++ 
)++ 
;++ 
await,, 
_enqPNWRepository,, '
.,,' (
UpdateAsync,,( 3
(,,3 4
dataList,,4 <
,,,< =
token,,> C
),,C D
.,,D E
ConfigureAwait,,E S
(,,S T
false,,T Y
),,Y Z
;,,Z [
}-- 
var.. 
netWorthList.. 
=.. 
_mapper.. &
...& '
Map..' *
<..* +
List..+ /
<../ 0
TblEnqPnwDet..0 <
>..< =
>..= >
(..> ?
NetWorthDTO..? J
)..J K
;..K L
netWorthList// 
.// 
ForEach//  
(//  !
x//! "
=>//# %
{00 
x11 
.11 
IsActive11 
=11 
true11 !
;11! "
x22 
.22 
	IsDeleted22 
=22 
false22 #
;22# $
x33 
.33 
	CreatedBy33 
=33 
	_userInfo33 '
.33' (
Pan33( +
;33+ ,
x44 
.44 
CreatedDate44 
=44 
DateTime44  (
.44( )
UtcNow44) /
;44/ 0
x55 
.55 
UniqueId55 
=55 
Guid55 !
.55! "
NewGuid55" )
(55) *
)55* +
.55+ ,
ToString55, 4
(554 5
)555 6
;556 7
}66 
)66 
;66 
var88 
result88 
=88 
await88 
_enqPNWRepository88 0
.880 1
AddAsync881 9
(889 :
netWorthList88: F
,88F G
token88H M
)88M N
.88N O
ConfigureAwait88O ]
(88] ^
false88^ c
)88c d
;88d e
await99 
_work99 
.99 
CommitAsync99 #
(99# $
token99$ )
)99) *
.99* +
ConfigureAwait99+ 9
(999 :
false99: ?
)99? @
;99@ A
return;; 
_mapper;; 
.;; 
Map;; 
<;; 
List;; #
<;;# $&
PromoterNetWorthDetailsDTO;;$ >
>;;> ?
>;;? @
(;;@ A
result;;A G
);;G H
;;;H I
}<< 	
public>> 
async>> 
Task>> 
<>> 
bool>> 
>>> 2
&DeletePromoterLiabilityNetWorthDetails>>  F
(>>F G
int>>G J
	enquiryId>>K T
,>>T U
CancellationToken>>V g
token>>h m
)>>m n
{?? 	
var@@ 
promoter@@ 
=@@ 
await@@  
_enqPNWRepository@@! 2
.@@2 3+
FirstOrDefaultByExpressionAsync@@3 R
(@@R S
x@@S T
=>@@U W
x@@X Y
.@@Y Z
EnqPromnwId@@Z e
==@@f h
	enquiryId@@i r
&&@@s u
x@@v w
.@@w x
IsActive	@@x Ä
==
@@Å É
true
@@Ñ à
&&
@@â ã
x
@@å ç
.
@@ç é
	IsDeleted
@@é ó
==
@@ò ö
false
@@õ †
,
@@† °
token
@@¢ ß
)
@@ß ®
.
@@® ©
ConfigureAwait
@@© ∑
(
@@∑ ∏
false
@@∏ Ω
)
@@Ω æ
;
@@æ ø
ifAA 
(AA 
promoterAA 
==AA 
nullAA  
)AA  !
{BB 
throwCC 
newCC 
ArgumentExceptionCC +
(CC+ ,
$strCC, <
)CC< =
;CC= >
}DD 
promoterFF 
.FF 
IsActiveFF 
=FF 
falseFF  %
;FF% &
promoterGG 
.GG 
	IsDeletedGG 
=GG  
trueGG! %
;GG% &
promoterHH 
.HH 

ModifiedByHH 
=HH  !
	_userInfoHH" +
.HH+ ,
UserIdHH, 2
;HH2 3
promoterII 
.II 
CreatedDateII  
=II! "
DateTimeII# +
.II+ ,
UtcNowII, 2
;II2 3
awaitKK 
_enqPNWRepositoryKK #
.KK# $
UpdateAsyncKK$ /
(KK/ 0
promoterKK0 8
,KK8 9
tokenKK: ?
)KK? @
.KK@ A
ConfigureAwaitKKA O
(KKO P
falseKKP U
)KKU V
;KKV W
awaitLL 
_workLL 
.LL 
CommitAsyncLL #
(LL# $
tokenLL$ )
)LL) *
.LL* +
ConfigureAwaitLL+ 9
(LL9 :
falseLL: ?
)LL? @
;LL@ A
returnMM 
trueMM 
;MM 
}NN 	
publicPP 
asyncPP 
TaskPP 
<PP 
ListPP 
<PP &
PromoterNetWorthDetailsDTOPP 9
>PP9 :
>PP: ;3
'GetByIdPromoterLiabilityNetWorthDetailsPP< c
(PPc d
intPPd g
	enquiryIdPPh q
,PPq r
CancellationToken	PPs Ñ
token
PPÖ ä
)
PPä ã
{QQ 	
varRR 
listRR 
=RR 
awaitRR 
_enqPNWRepositoryRR .
.RR. /!
FindByExpressionAsyncRR/ D
(RRD E
xRRE F
=>RRG I
xRRJ K
.RRK L
EnqPromnwIdRRL W
==RRX Z
	enquiryIdRR[ d
&&RRe g
xRRh i
.RRi j
IsActiveRRj r
==RRs u
trueRRv z
&&RR{ }
xRR~ 
.	RR Ä
	IsDeleted
RRÄ â
==
RRä å
false
RRç í
,
RRí ì
token
RRî ô
)
RRô ö
.
RRö õ
ConfigureAwait
RRõ ©
(
RR© ™
false
RR™ Ø
)
RRØ ∞
;
RR∞ ±
ifSS 
(SS 
!SS 
listSS 
.SS 
AnySS 
(SS 
)SS 
)SS 
{TT 
throwUU 
newUU 
ArgumentExceptionUU +
(UU+ ,
$strUU, <
)UU< =
;UU= >
}VV 
returnWW 
_mapperWW 
.WW 
MapWW 
<WW 
ListWW #
<WW# $&
PromoterNetWorthDetailsDTOWW$ >
>WW> ?
>WW? @
(WW@ A
listWWA E
)WWE F
;WWF G
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IEnumerableZZ %
<ZZ% &&
PromoterNetWorthDetailsDTOZZ& @
>ZZ@ A
>ZZA B2
&UpdatePromoterLiabilityNetWorthDetailsZZC i
(ZZi j
ListZZj n
<ZZn o'
PromoterNetWorthDetailsDTO	ZZo â
>
ZZâ ä
PromoterDTO
ZZã ñ
,
ZZñ ó
CancellationToken
ZZò ©
token
ZZ™ Ø
)
ZZØ ∞
{[[ 	
var]] 
dataList]] 
=]] 
await]]  
_enqPNWRepository]]! 2
.]]2 3!
FindByExpressionAsync]]3 H
(]]H I
x]]I J
=>]]K M
x]]N O
.]]O P
	EnqtempId]]P Y
==]]Z \
PromoterDTO]]] h
[]]h i
$num]]i j
]]]j k
.]]k l
	EnqtempId]]l u
&&]]v x
x]]y z
.]]z {
IsActive	]]{ É
==
]]Ñ Ü
true
]]á ã
&&
]]å é
x
]]è ê
.
]]ê ë
	IsDeleted
]]ë ö
==
]]õ ù
false
]]û £
,
]]£ §
token
]]• ™
)
]]™ ´
.
]]´ ¨
ConfigureAwait
]]¨ ∫
(
]]∫ ª
false
]]ª ¿
)
]]¿ ¡
;
]]¡ ¬
dataList__ 
.__ 
ForEach__ 
(__ 
x__ 
=>__ !
{`` 
xaa 
.aa 
	IsDeletedaa 
=aa 
trueaa "
;aa" #
xbb 
.bb 
IsActivebb 
=bb 
falsebb "
;bb" #
xcc 
.cc 

ModifiedBycc 
=cc 
	_userInfocc (
.cc( )
Pancc) ,
;cc, -
xdd 
.dd 
ModifiedDatedd 
=dd  
DateTimedd! )
.dd) *
UtcNowdd* 0
;dd0 1
}ee 
)ee 
;ee 
awaitff 
_enqPNWRepositoryff #
.ff# $
UpdateAsyncff$ /
(ff/ 0
dataListff0 8
,ff8 9
tokenff: ?
)ff? @
.ff@ A
ConfigureAwaitffA O
(ffO P
falseffP U
)ffU V
;ffV W
varhh 
netWorthListhh 
=hh 
_mapperhh &
.hh& '
Maphh' *
<hh* +
Listhh+ /
<hh/ 0
TblEnqPnwDethh0 <
>hh< =
>hh= >
(hh> ?
PromoterDTOhh? J
)hhJ K
;hhK L
netWorthListjj 
.jj 
ForEachjj  
(jj  !
xjj! "
=>jj# %
{kk 
xll 
.ll 
IsActivell 
=ll 
truell !
;ll! "
xmm 
.mm 
	IsDeletedmm 
=mm 
falsemm #
;mm# $
xnn 
.nn 
	CreatedBynn 
=nn 
	_userInfonn '
.nn' (
Pannn( +
;nn+ ,
xoo 
.oo 
CreatedDateoo 
=oo 
DateTimeoo  (
.oo( )
UtcNowoo) /
;oo/ 0
xpp 
.pp 
UniqueIdpp 
=pp 
Guidpp !
.pp! "
NewGuidpp" )
(pp) *
)pp* +
.pp+ ,
ToStringpp, 4
(pp4 5
)pp5 6
;pp6 7
}qq 
)qq 
;qq 
varss 
resultss 
=ss 
awaitss 
_enqPNWRepositoryss 0
.ss0 1
AddAsyncss1 9
(ss9 :
netWorthListss: F
,ssF G
tokenssH M
)ssM N
.ssN O
ConfigureAwaitssO ]
(ss] ^
falsess^ c
)ssc d
;ssd e
awaittt 
_worktt 
.tt 
CommitAsynctt #
(tt# $
tokentt$ )
)tt) *
.tt* +
ConfigureAwaittt+ 9
(tt9 :
falsett: ?
)tt? @
;tt@ A
returnvv 
_mappervv 
.vv 
Mapvv 
<vv 
Listvv #
<vv# $&
PromoterNetWorthDetailsDTOvv$ >
>vv> ?
>vv? @
(vv@ A
resultvvA G
)vvG H
;vvH I
}ww 	
}xx 
}yy ∆y
~D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\SecurityDocumentDetails\SecurityDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H#
SecurityDocumentDetailsH _
{ 
public 

class "
SecurityDetailsService '
:( )
ISecurityDetails* :
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqSecDet+ 7
>7 8&
_securityDetailsRepository9 S
;S T
private 
readonly 
IEnquiryHomeService ,
_enquiryService- <
;< =
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public "
SecurityDetailsService %
(% &
IMapper& -
mapper. 4
,4 5
UserInfo6 >
userInfo? G
,G H
IEntityRepositoryI Z
<Z [
TblEnqSecDet[ g
>g h&
securityDetailsRepository	i Ç
,
Ç É
IUnitOfWork
Ñ è
work
ê î
,
î ï!
IEnquiryHomeService
ñ ©
enquiryService
™ ∏
)
∏ π
{ 	
_mapper 
= 
mapper 
; 
	_userInfo 
= 
userInfo  
;  !&
_securityDetailsRepository   &
=  ' (%
securityDetailsRepository  ) B
;  B C
_work!! 
=!! 
work!! 
;!! 
_enquiryService"" 
="" 
enquiryService"" ,
;"", -
}## 	
public%% 
async%% 
Task%% 
<%% 
IEnumerable%% %
<%%% &
SecurityDetailsDTO%%& 8
>%%8 9
>%%9 :
AddSecurityDetails%%; M
(%%M N
List%%N R
<%%R S
SecurityDetailsDTO%%S e
>%%e f
SecurityDetailsDTO%%g y
,%%y z
CancellationToken	%%{ å
token
%%ç í
)
%%í ì
{&& 	
if'' 
('' 
SecurityDetailsDTO'' "
.''" #
Where''# (
(''( )
x'') *
=>''+ -
x''. /
.''/ 0
	EnqtempId''0 9
=='': <
$num''= >
)''> ?
.''? @
Any''@ C
(''C D
)''D E
)''E F
{(( 
var)) 
enqId)) 
=)) 
await)) !
_enquiryService))" 1
.))1 2
AddNewEnqiry))2 >
())> ?
	_userInfo))? H
.))H I
Pan))I L
,))L M
token))N S
)))S T
.))T U
ConfigureAwait))U c
())c d
false))d i
)))i j
;))j k
SecurityDetailsDTO** "
.**" #
ForEach**# *
(*** +
x**+ ,
=>**- /
x**0 1
.**1 2
	EnqtempId**2 ;
=**< =
enqId**> C
)**C D
;**D E
}++ 
var-- 
dataList-- 
=-- 
await--  &
_securityDetailsRepository--! ;
.--; <!
FindByExpressionAsync--< Q
(--Q R
x--R S
=>--T V
x--W X
.--X Y
	EnqtempId--Y b
==--c e
SecurityDetailsDTO--f x
[--x y
$num--y z
]--z {
.--{ |
	EnqtempId	--| Ö
&&
--Ü à
x
--â ä
.
--ä ã
IsActive
--ã ì
==
--î ñ
true
--ó õ
&&
--ú û
x
--ü †
.
--† °
	IsDeleted
--° ™
==
--´ ≠
false
--Æ ≥
,
--≥ ¥
token
--µ ∫
)
--∫ ª
.
--ª º
ConfigureAwait
--º  
(
--  À
false
--À –
)
--– —
;
--— “
dataList.. 
... 
ForEach.. 
(.. 
x.. 
=>.. !
{// 
x00 
.00 
	IsDeleted00 
=00 
true00 "
;00" #
x11 
.11 
IsActive11 
=11 
false11 "
;11" #
x22 
.22 

ModifiedBy22 
=22 
	_userInfo22 (
.22( )
UserId22) /
;22/ 0
x33 
.33 
ModifiedDate33 
=33  
DateTime33! )
.33) *
UtcNow33* 0
;330 1
}44 
)44 
;44 
await55 &
_securityDetailsRepository55 ,
.55, -
UpdateAsync55- 8
(558 9
dataList559 A
,55A B
token55C H
)55H I
.55I J
ConfigureAwait55J X
(55X Y
false55Y ^
)55^ _
;55_ `
var77 
detailsList77 
=77 
_mapper77 %
.77% &
Map77& )
<77) *
List77* .
<77. /
TblEnqSecDet77/ ;
>77; <
>77< =
(77= >
SecurityDetailsDTO77> P
)77P Q
;77Q R
detailsList88 
.88 
ForEach88 
(88  
x88  !
=>88" $
{99 
x:: 
.:: 
EnqSecId:: 
=:: 
$num:: 
;:: 
x;; 
.;; 
IsActive;; 
=;; 
true;; !
;;;! "
x<< 
.<< 
	IsDeleted<< 
=<< 
false<< #
;<<# $
x== 
.== 
	CreatedBy== 
=== 
	_userInfo== '
.==' (
UserId==( .
;==. /
x>> 
.>> 
CreatedDate>> 
=>> 
DateTime>>  (
.>>( )
UtcNow>>) /
;>>/ 0
x?? 
.?? 
UniqueId?? 
=?? 
Guid?? !
.??! "
NewGuid??" )
(??) *
)??* +
.??+ ,
ToString??, 4
(??4 5
)??5 6
;??6 7
}@@ 
)@@ 
;@@ 
varBB 
resultBB 
=BB 
awaitBB &
_securityDetailsRepositoryBB 9
.BB9 :
AddAsyncBB: B
(BBB C
detailsListBBC N
,BBN O
tokenBBP U
)BBU V
.BBV W
ConfigureAwaitBBW e
(BBe f
falseBBf k
)BBk l
;BBl m
awaitCC 
_workCC 
.CC 
CommitAsyncCC #
(CC# $
tokenCC$ )
)CC) *
.CC* +
ConfigureAwaitCC+ 9
(CC9 :
falseCC: ?
)CC? @
;CC@ A
returnDD 
_mapperDD 
.DD 
MapDD 
<DD 
ListDD #
<DD# $
SecurityDetailsDTODD$ 6
>DD6 7
>DD7 8
(DD8 9
resultDD9 ?
)DD? @
;DD@ A
}EE 	
publicGG 
asyncGG 
TaskGG 
<GG 
boolGG 
>GG !
DeleteSecurityDetailsGG  5
(GG5 6
intGG6 9
	enquiryIdGG: C
,GGC D
CancellationTokenGGE V
tokenGGW \
)GG\ ]
{HH 	
varII 
securityII 
=II 
awaitII  &
_securityDetailsRepositoryII! ;
.II; <+
FirstOrDefaultByExpressionAsyncII< [
(II[ \
xII\ ]
=>II^ `
xIIa b
.IIb c
EnqSecIdIIc k
==IIl n
	enquiryIdIIo x
&&IIy {
xII| }
.II} ~
IsActive	II~ Ü
==
IIá â
true
IIä é
&&
IIè ë
x
IIí ì
.
IIì î
	IsDeleted
IIî ù
==
IIû †
false
II° ¶
,
II¶ ß
token
II® ≠
)
II≠ Æ
.
IIÆ Ø
ConfigureAwait
IIØ Ω
(
IIΩ æ
false
IIæ √
)
II√ ƒ
;
IIƒ ≈
ifJJ 
(JJ 
securityJJ 
==JJ 
nullJJ  
)JJ  !
{KK 
throwLL 
newLL 
ArgumentExceptionLL +
(LL+ ,
$strLL, <
)LL< =
;LL= >
}MM 
securityOO 
.OO 
IsActiveOO 
=OO 
falseOO  %
;OO% &
securityPP 
.PP 
	IsDeletedPP 
=PP  
truePP! %
;PP% &
securityQQ 
.QQ 

ModifiedByQQ 
=QQ  !
	_userInfoQQ" +
.QQ+ ,
UserIdQQ, 2
;QQ2 3
securityRR 
.RR 
CreatedDateRR  
=RR! "
DateTimeRR# +
.RR+ ,
UtcNowRR, 2
;RR2 3
awaitTT &
_securityDetailsRepositoryTT ,
.TT, -
UpdateAsyncTT- 8
(TT8 9
securityTT9 A
,TTA B
tokenTTC H
)TTH I
.TTI J
ConfigureAwaitTTJ X
(TTX Y
falseTTY ^
)TT^ _
;TT_ `
awaitUU 
_workUU 
.UU 
CommitAsyncUU #
(UU# $
tokenUU$ )
)UU) *
.UU* +
ConfigureAwaitUU+ 9
(UU9 :
falseUU: ?
)UU? @
;UU@ A
returnWW 
trueWW 
;WW 
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
ListZZ 
<ZZ 
SecurityDetailsDTOZZ 1
>ZZ1 2
>ZZ2 3"
GetByIdSecurityDetailsZZ4 J
(ZZJ K
intZZK N
	enquiryIdZZO X
,ZZX Y
CancellationTokenZZZ k
tokenZZl q
)ZZq r
{[[ 	
var\\ 
list\\ 
=\\ 
await\\ &
_securityDetailsRepository\\ 7
.\\7 8!
FindByExpressionAsync\\8 M
(\\M N
x\\N O
=>\\P R
x\\S T
.\\T U
EnqSecId\\U ]
==\\^ `
	enquiryId\\a j
&&\\k m
x\\n o
.\\o p
IsActive\\p x
==\\y {
true	\\| Ä
&&
\\Å É
x
\\Ñ Ö
.
\\Ö Ü
	IsDeleted
\\Ü è
==
\\ê í
false
\\ì ò
,
\\ò ô
token
\\ö ü
)
\\ü †
.
\\† °
ConfigureAwait
\\° Ø
(
\\Ø ∞
false
\\∞ µ
)
\\µ ∂
;
\\∂ ∑
if]] 
(]] 
!]] 
list]] 
.]] 
Any]] 
(]] 
)]] 
)]] 
{^^ 
throw__ 
new__ 
ArgumentException__ +
(__+ ,
$str__, <
)__< =
;__= >
}`` 
returnaa 
_mapperaa 
.aa 
Mapaa 
<aa 
Listaa #
<aa# $
SecurityDetailsDTOaa$ 6
>aa6 7
>aa7 8
(aa8 9
listaa9 =
)aa= >
;aa> ?
}bb 	
publicdd 
asyncdd 
Taskdd 
<dd 
IEnumerabledd %
<dd% &
SecurityDetailsDTOdd& 8
>dd8 9
>dd9 :!
UpdateSecurityDetailsdd; P
(ddP Q
ListddQ U
<ddU V
SecurityDetailsDTOddV h
>ddh i
SecurityDetailsDTOddj |
,dd| }
CancellationToken	dd~ è
token
ddê ï
)
ddï ñ
{ee 	
vargg 
dataListgg 
=gg 
awaitgg  &
_securityDetailsRepositorygg! ;
.gg; <!
FindByExpressionAsyncgg< Q
(ggQ R
xggR S
=>ggT V
xggW X
.ggX Y
	EnqtempIdggY b
==ggc e
SecurityDetailsDTOggf x
[ggx y
$numggy z
]ggz {
.gg{ |
	EnqtempId	gg| Ö
&&
ggÜ à
x
ggâ ä
.
ggä ã
IsActive
ggã ì
==
ggî ñ
true
ggó õ
&&
ggú û
x
ggü †
.
gg† °
	IsDeleted
gg° ™
==
gg´ ≠
false
ggÆ ≥
,
gg≥ ¥
token
ggµ ∫
)
gg∫ ª
.
ggª º
ConfigureAwait
ggº  
(
gg  À
false
ggÀ –
)
gg– —
;
gg— “
dataListhh 
.hh 
ForEachhh 
(hh 
xhh 
=>hh !
{ii 
xjj 
.jj 
	IsDeletedjj 
=jj 
truejj "
;jj" #
xkk 
.kk 
IsActivekk 
=kk 
falsekk "
;kk" #
xll 
.ll 

ModifiedByll 
=ll 
	_userInfoll (
.ll( )
UserIdll) /
;ll/ 0
xmm 
.mm 
ModifiedDatemm 
=mm  
DateTimemm! )
.mm) *
UtcNowmm* 0
;mm0 1
}nn 
)nn 
;nn 
awaitoo &
_securityDetailsRepositoryoo ,
.oo, -
UpdateAsyncoo- 8
(oo8 9
dataListoo9 A
,ooA B
tokenooC H
)ooH I
.ooI J
ConfigureAwaitooJ X
(ooX Y
falseooY ^
)oo^ _
;oo_ `
varpp 
detailsListpp 
=pp 
_mapperpp %
.pp% &
Mappp& )
<pp) *
Listpp* .
<pp. /
TblEnqSecDetpp/ ;
>pp; <
>pp< =
(pp= >
SecurityDetailsDTOpp> P
)ppP Q
;ppQ R
detailsListrr 
.rr 
ForEachrr 
(rr  
xrr  !
=>rr" $
{ss 
xtt 
.tt 
IsActivett 
=tt 
truett !
;tt! "
xuu 
.uu 
	IsDeleteduu 
=uu 
falseuu #
;uu# $
xvv 
.vv 
	CreatedByvv 
=vv 
	_userInfovv '
.vv' (
UserIdvv( .
;vv. /
xww 
.ww 
CreatedDateww 
=ww 
DateTimeww  (
.ww( )
UtcNowww) /
;ww/ 0
xxx 
.xx 
UniqueIdxx 
=xx 
Guidxx !
.xx! "
NewGuidxx" )
(xx) *
)xx* +
.xx+ ,
ToStringxx, 4
(xx4 5
)xx5 6
;xx6 7
}yy 
)yy 
;yy 
var{{ 
result{{ 
={{ 
await{{ &
_securityDetailsRepository{{ 9
.{{9 :
AddAsync{{: B
({{B C
detailsList{{C N
,{{N O
token{{P U
){{U V
.{{V W
ConfigureAwait{{W e
({{e f
false{{f k
){{k l
;{{l m
await|| 
_work|| 
.|| 
CommitAsync|| #
(||# $
token||$ )
)||) *
.||* +
ConfigureAwait||+ 9
(||9 :
false||: ?
)||? @
;||@ A
return}} 
_mapper}} 
.}} 
Map}} 
<}} 
List}} #
<}}# $
SecurityDetailsDTO}}$ 6
>}}6 7
>}}7 8
(}}8 9
result}}9 ?
)}}? @
;}}@ A
}~~ 	
} 
}ÄÄ êÑ
qD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\UnitDetails\AddressDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H
UnitDetailsH S
{ 
public 

class !
AddressDetailsService &
:' (
IAddressDetails) 8
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqAddressDet+ ;
>; <
_entityRepository= N
;N O
private 
readonly 
IEntityRepository *
<* +
TblEnqTemptab+ 8
>8 9
_enquiryRepository: L
;L M
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public !
AddressDetailsService $
($ %
IEntityRepository% 6
<6 7
TblEnqAddressDet7 G
>G H
entityRepositoryI Y
,Y Z
IEntityRepository[ l
<l m
TblEnqTemptabm z
>z {
enquiryRepository	| ç
,
ç é
UserInfo
è ó
userInfo
ò †
,
† °
IMapper
¢ ©
mapper
™ ∞
,
∞ ±
IUnitOfWork
≤ Ω
work
æ ¬
)
¬ √
{ 	
_entityRepository 
= 
entityRepository  0
;0 1
_enquiryRepository 
=  
enquiryRepository! 2
;2 3
	_userInfo 
= 
userInfo  
;  !
_mapper   
=   
mapper   
;   
_work!! 
=!! 
work!! 
;!! 
}"" 	
public)) 
async)) 
Task)) 
<)) 
IEnumerable)) %
<))% &
AddressDetailsDTO))& 7
>))7 8
>))8 9
AddAddressDetails)): K
())K L
List))L P
<))P Q
AddressDetailsDTO))Q b
>))b c

addressDTO))d n
,))n o
CancellationToken	))p Å
token
))Ç á
)
))á à
{** 	
var++ 
enquiry++ 
=++ 
await++ 
_enquiryRepository++  2
.++2 3+
FirstOrDefaultByExpressionAsync++3 R
(++R S
x++S T
=>++U W
x++X Y
.++Y Z
	EnqtempId++Z c
==++d f

addressDTO++g q
[++q r
$num++r s
]++s t
.++t u
	EnqtempId++u ~
&&	++ Å
x
++Ç É
.
++É Ñ
IsActive
++Ñ å
==
++ç è
true
++ê î
&&
++ï ó
x
++ò ô
.
++ô ö
	IsDeleted
++ö £
==
++§ ¶
false
++ß ¨
,
++¨ ≠
token
++Æ ≥
)
++≥ ¥
.
++¥ µ
ConfigureAwait
++µ √
(
++√ ƒ
false
++ƒ …
)
++…  
;
++  À
if,, 
(,, 
enquiry,, 
==,, 
null,, 
),,  
{-- 
throw.. 
new.. 
ArgumentException.. +
(..+ ,
$str.., D
)..D E
;..E F
}// 
var11 
addressList11 
=11 
_mapper11 %
.11% &
Map11& )
<11) *
List11* .
<11. /
TblEnqAddressDet11/ ?
>11? @
>11@ A
(11A B

addressDTO11B L
)11L M
;11M N
addressList33 
.33 
ForEach33 
(33  
x33  !
=>33" $
{44 
x55 
.55 
IsActive55 
=55 
true55 !
;55! "
x66 
.66 
	IsDeleted66 
=66 
false66 #
;66# $
x77 
.77 
	CreatedBy77 
=77 
	_userInfo77 '
.77' (
UserId77( .
;77. /
x88 
.88 
CreatedDate88 
=88 
DateTime88  (
.88( )
UtcNow88) /
;88/ 0
x99 
.99 
UniqueId99 
=99 
Guid99 !
.99! "
NewGuid99" )
(99) *
)99* +
.99+ ,
ToString99, 4
(994 5
)995 6
;996 7
}:: 
):: 
;:: 
var<< 
data<< 
=<< 
await<< 
_entityRepository<< .
.<<. /
AddAsync<</ 7
(<<7 8
addressList<<8 C
,<<C D
token<<E J
)<<J K
.<<K L
ConfigureAwait<<L Z
(<<Z [
false<<[ `
)<<` a
;<<a b
await== 
_work== 
.== 
CommitAsync== #
(==# $
token==$ )
)==) *
.==* +
ConfigureAwait==+ 9
(==9 :
false==: ?
)==? @
;==@ A
return>> 
_mapper>> 
.>> 
Map>> 
<>> 
List>> #
<>># $
AddressDetailsDTO>>$ 5
>>>5 6
>>>6 7
(>>7 8
data>>8 <
)>>< =
;>>= >
}?? 	
publicFF 
asyncFF 
TaskFF 
<FF 
boolFF 
>FF  
DeleteAddressDetailsFF  4
(FF4 5
intFF5 8
	enquiryIdFF9 B
,FFB C
CancellationTokenFFD U
tokenFFV [
)FF[ \
{GG 	
varHH 
addressHH 
=HH 
awaitHH 
_entityRepositoryHH  1
.HH1 2+
FirstOrDefaultByExpressionAsyncHH2 Q
(HHQ R
xHHR S
=>HHT V
xHHW X
.HHX Y
EnqAddresssIdHHY f
==HHg i
	enquiryIdHHj s
&&HHt v
xHHw x
.HHx y
IsActive	HHy Å
==
HHÇ Ñ
true
HHÖ â
&&
HHä å
x
HHç é
.
HHé è
	IsDeleted
HHè ò
==
HHô õ
false
HHú °
,
HH° ¢
token
HH£ ®
)
HH® ©
.
HH© ™
ConfigureAwait
HH™ ∏
(
HH∏ π
false
HHπ æ
)
HHæ ø
;
HHø ¿
ifII 
(II 
addressII 
==II 
nullII 
)II  
{JJ 
throwKK 
newKK 
ArgumentExceptionKK +
(KK+ ,
$strKK, <
)KK< =
;KK= >
}LL 
addressNN 
.NN 
IsActiveNN 
=NN 
falseNN $
;NN$ %
addressOO 
.OO 
	IsDeletedOO 
=OO 
trueOO  $
;OO$ %
addressPP 
.PP 

ModifiedByPP 
=PP  
	_userInfoPP! *
.PP* +
UserIdPP+ 1
;PP1 2
addressQQ 
.QQ 
CreatedDateQQ 
=QQ  !
DateTimeQQ" *
.QQ* +
UtcNowQQ+ 1
;QQ1 2
awaitSS 
_entityRepositorySS #
.SS# $
UpdateAsyncSS$ /
(SS/ 0
addressSS0 7
,SS7 8
tokenSS9 >
)SS> ?
.SS? @
ConfigureAwaitSS@ N
(SSN O
falseSSO T
)SST U
;SSU V
awaitTT 
_workTT 
.TT 
CommitAsyncTT #
(TT# $
tokenTT$ )
)TT) *
.TT* +
ConfigureAwaitTT+ 9
(TT9 :
falseTT: ?
)TT? @
;TT@ A
returnUU 
trueUU 
;UU 
}VV 	
public]] 
async]] 
Task]] 
<]] 
List]] 
<]] 
AddressDetailsDTO]] 0
>]]0 1
>]]1 2(
GetAddressDetailsByEnquiryId]]3 O
(]]O P
int]]P S
	enquiryId]]T ]
,]]] ^
CancellationToken]]_ p
token]]q v
)]]v w
{^^ 	
var__ 
address__ 
=__ 
await__ 
_entityRepository__  1
.__1 2!
FindByExpressionAsync__2 G
(__G H
x__H I
=>__J L
x__M N
.__N O
	EnqtempId__O X
==__Y [
	enquiryId__\ e
&&__f h
x__i j
.__j k
IsActive__k s
==__t v
true__w {
&&__| ~
x	__ Ä
.
__Ä Å
	IsDeleted
__Å ä
==
__ã ç
false
__é ì
,
__ì î
token
__ï ö
)
__ö õ
.
__õ ú
ConfigureAwait
__ú ™
(
__™ ´
false
__´ ∞
)
__∞ ±
;
__± ≤
if`` 
(`` 
address`` 
==`` 
null`` 
)``  
{aa 
throwbb 
newbb 
ArgumentExceptionbb +
(bb+ ,
$strbb, <
)bb< =
;bb= >
}cc 
returndd 
_mapperdd 
.dd 
Mapdd 
<dd 
Listdd #
<dd# $
AddressDetailsDTOdd$ 5
>dd5 6
>dd6 7
(dd7 8
addressdd8 ?
)dd? @
;dd@ A
}ee 	
publicnn 
asyncnn 
Tasknn 
<nn 
AddressDetailsDTOnn +
>nn+ ,!
GetByIdAddressDetailsnn- B
(nnB C
intnnC F
idnnG I
,nnI J
CancellationTokennnK \
tokennn] b
)nnb c
{oo 	
varpp 
addresspp 
=pp 
awaitpp 
_entityRepositorypp  1
.pp1 2+
FirstOrDefaultByExpressionAsyncpp2 Q
(ppQ R
xppR S
=>ppT V
xppW X
.ppX Y
EnqAddresssIdppY f
==ppg i
idppj l
&&ppm o
xppp q
.ppq r
IsActiveppr z
==pp{ }
true	pp~ Ç
&&
ppÉ Ö
x
ppÜ á
.
ppá à
	IsDeleted
ppà ë
==
ppí î
false
ppï ö
,
ppö õ
token
ppú °
)
pp° ¢
.
pp¢ £
ConfigureAwait
pp£ ±
(
pp± ≤
false
pp≤ ∑
)
pp∑ ∏
;
pp∏ π
ifqq 
(qq 
addressqq 
==qq 
nullqq 
)qq  
{rr 
throwss 
newss 
ArgumentExceptionss +
(ss+ ,
$strss, <
)ss< =
;ss= >
}tt 
returnuu 
_mapperuu 
.uu 
Mapuu 
<uu 
AddressDetailsDTOuu 0
>uu0 1
(uu1 2
addressuu2 9
)uu9 :
;uu: ;
}vv 	
public 
async 
Task 
< 
IEnumerable %
<% &
AddressDetailsDTO& 7
>7 8
>8 9 
UpdateAddressDetails: N
(N O
ListO S
<S T
AddressDetailsDTOT e
>e f

addressDTOg q
,q r
CancellationToken	s Ñ
token
Ö ä
)
ä ã
{
ÄÄ 	
var
ÅÅ 
enquiry
ÅÅ 
=
ÅÅ 
await
ÅÅ  
_enquiryRepository
ÅÅ  2
.
ÅÅ2 3-
FirstOrDefaultByExpressionAsync
ÅÅ3 R
(
ÅÅR S
x
ÅÅS T
=>
ÅÅU W
x
ÅÅX Y
.
ÅÅY Z
	EnqtempId
ÅÅZ c
==
ÅÅd f

addressDTO
ÅÅg q
[
ÅÅq r
$num
ÅÅr s
]
ÅÅs t
.
ÅÅt u
	EnqtempId
ÅÅu ~
&&ÅÅ Å
xÅÅÇ É
.ÅÅÉ Ñ
IsActiveÅÅÑ å
==ÅÅç è
trueÅÅê î
&&ÅÅï ó
xÅÅò ô
.ÅÅô ö
	IsDeletedÅÅö £
==ÅÅ§ ¶
falseÅÅß ¨
,ÅÅ¨ ≠
tokenÅÅÆ ≥
)ÅÅ≥ ¥
.ÅÅ¥ µ
ConfigureAwaitÅÅµ √
(ÅÅ√ ƒ
falseÅÅƒ …
)ÅÅ…  
;ÅÅ  À
if
ÇÇ 
(
ÇÇ 
enquiry
ÇÇ 
==
ÇÇ 
null
ÇÇ 
)
ÇÇ  
{
ÉÉ 
throw
ÑÑ 
new
ÑÑ 
ArgumentException
ÑÑ +
(
ÑÑ+ ,
$str
ÑÑ, D
)
ÑÑD E
;
ÑÑE F
}
ÖÖ 
var
áá 
addressUList
áá 
=
áá 
await
áá #
_entityRepository
áá$ 5
.
áá5 6#
FindByExpressionAsync
áá6 K
(
ááK L
x
ááL M
=>
ááM O
x
ááO P
.
ááP Q
	EnqtempId
ááQ Z
==
ááZ \

addressDTO
áá] g
[
áág h
$num
ááh i
]
áái j
.
ááj k
	EnqtempId
áák t
&&
ááu w
x
ááx y
.
ááy z
IsActiveááz Ç
==ááÉ Ö
trueááÜ ä
&&ááã ç
xááé è
.ááè ê
	IsDeletedááê ô
==ááö ú
falseááù ¢
,áá¢ £
tokenáá§ ©
)áá© ™
.áá™ ´
ConfigureAwaitáá´ π
(ááπ ∫
falseáá∫ ø
)ááø ¿
;áá¿ ¡
addressUList
àà 
.
àà 
ForEach
àà  
(
àà  !
x
àà! "
=>
àà# %
{
ââ 
x
ää 
.
ää 
IsActive
ää 
=
ää 
false
ää "
;
ää" #
x
ãã 
.
ãã 
	IsDeleted
ãã 
=
ãã 
true
ãã "
;
ãã" #
x
åå 
.
åå 

ModifiedBy
åå 
=
åå 
	_userInfo
åå (
.
åå( )
UserId
åå) /
;
åå/ 0
x
çç 
.
çç 
ModifiedDate
çç 
=
çç  
DateTime
çç! )
.
çç) *
UtcNow
çç* 0
;
çç0 1
}
éé 
)
éé 
;
éé 
await
èè 
_entityRepository
èè #
.
èè# $
UpdateAsync
èè$ /
(
èè/ 0
addressUList
èè0 <
,
èè< =
token
èè> C
)
èèC D
.
èèD E
ConfigureAwait
èèE S
(
èèS T
false
èèT Y
)
èèY Z
;
èèZ [
var
ëë 
addressList
ëë 
=
ëë 
_mapper
ëë %
.
ëë% &
Map
ëë& )
<
ëë) *
List
ëë* .
<
ëë. /
TblEnqAddressDet
ëë/ ?
>
ëë? @
>
ëë@ A
(
ëëA B

addressDTO
ëëB L
)
ëëL M
;
ëëM N
addressList
ìì 
.
ìì 
ForEach
ìì 
(
ìì  
x
ìì  !
=>
ìì" $
{
îî 
x
ïï 
.
ïï 
EnqAddresssId
ïï 
=
ïï  !
$num
ïï" #
;
ïï# $
x
ññ 
.
ññ 
IsActive
ññ 
=
ññ 
true
ññ !
;
ññ! "
x
óó 
.
óó 
	IsDeleted
óó 
=
óó 
false
óó #
;
óó# $
x
òò 
.
òò 
	CreatedBy
òò 
=
òò 
	_userInfo
òò '
.
òò' (
UserId
òò( .
;
òò. /
x
ôô 
.
ôô 
CreatedDate
ôô 
=
ôô 
DateTime
ôô  (
.
ôô( )
UtcNow
ôô) /
;
ôô/ 0
x
öö 
.
öö 
UniqueId
öö 
=
öö 
Guid
öö !
.
öö! "
NewGuid
öö" )
(
öö) *
)
öö* +
.
öö+ ,
ToString
öö, 4
(
öö4 5
)
öö5 6
;
öö6 7
}
õõ 
)
õõ 
;
õõ 
var
ùù 
data
ùù 
=
ùù 
await
ùù 
_entityRepository
ùù .
.
ùù. /
AddAsync
ùù/ 7
(
ùù7 8
addressList
ùù8 C
,
ùùC D
token
ùùE J
)
ùùJ K
.
ùùK L
ConfigureAwait
ùùL Z
(
ùùZ [
false
ùù[ `
)
ùù` a
;
ùùa b
await
ûû 
_work
ûû 
.
ûû 
CommitAsync
ûû #
(
ûû# $
token
ûû$ )
)
ûû) *
.
ûû* +
ConfigureAwait
ûû+ 9
(
ûû9 :
false
ûû: ?
)
ûû? @
;
ûû@ A
return
üü 
_mapper
üü 
.
üü 
Map
üü 
<
üü 
List
üü #
<
üü# $
AddressDetailsDTO
üü$ 5
>
üü5 6
>
üü6 7
(
üü7 8
data
üü8 <
)
üü< =
;
üü= >
}
†† 	
}
££ 
}§§ âb
nD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\UnitDetails\BankDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H
UnitDetailsH S
{ 
public 

class 
BankDetailsService #
:$ %
IBankDetails& 2
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqBankDet+ 8
>8 9
_bankRepository: I
;I J
private 
readonly 
IEntityRepository *
<* +
TblEnqTemptab+ 8
>8 9
_enquiryRepository: L
;L M
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public 
BankDetailsService !
(! "
IEntityRepository" 3
<3 4
TblEnqBankDet4 A
>A B
bankRepositoryC Q
,Q R
IEntityRepositoryS d
<d e
TblEnqTemptabe r
>r s
enquiryRepository	t Ö
,
Ö Ü
UserInfo
á è
userInfo
ê ò
,
ò ô
IMapper
ö °
mapper
¢ ®
,
® ©
IUnitOfWork
™ µ
work
∂ ∫
)
∫ ª
{ 	
_bankRepository 
= 
bankRepository ,
;, -
_enquiryRepository 
=  
enquiryRepository! 2
;2 3
	_userInfo 
= 
userInfo  
;  !
_mapper 
= 
mapper 
; 
_work   
=   
work   
;   
}!! 	
public)) 
async)) 
Task)) 
<)) 
BankDetailsDTO)) (
>))( )
AddBankDetailsAsync))* =
())= >
BankDetailsDTO))> L
bankDTO))M T
,))T U
CancellationToken))V g
token))h m
)))m n
{** 	
var++ 
enquiry++ 
=++ 
await++ 
_enquiryRepository++  2
.++2 3+
FirstOrDefaultByExpressionAsync++3 R
(++R S
x++S T
=>++U W
x++X Y
.++Y Z
	EnqtempId++Z c
==++d f
bankDTO++g n
.++n o
	EnqtempId++o x
&&,, 
x,, 
.,, 
IsActive,, 
==,, 
true,, !
&&-- 
x-- 
.-- 
	IsDeleted-- 
==-- 
false-- #
,--# $
token--% *
)--* +
.--+ ,
ConfigureAwait--, :
(--: ;
false--; @
)--@ A
;--A B
if// 
(// 
enquiry// 
==// 
null// 
)//  
{00 
throw11 
new11 
ArgumentException11 +
(11+ ,
$str11, D
)11D E
;11E F
}22 
var44 
bankDetails44 
=44 
_mapper44 %
.44% &
Map44& )
<44) *
TblEnqBankDet44* 7
>447 8
(448 9
bankDTO449 @
)44@ A
;44A B
bankDetails55 
.55 
IsActive55  
=55! "
true55# '
;55' (
bankDetails66 
.66 
	IsDeleted66 !
=66" #
false66$ )
;66) *
bankDetails77 
.77 
CreatedDate77 #
=77$ %
DateTime77& .
.77. /
UtcNow77/ 5
;775 6
bankDetails88 
.88 
	CreatedBy88 !
=88" #
	_userInfo88$ -
.88- .
UserId88. 4
;884 5
bankDetails99 
.99 
UniqueId99  
=99! "
Guid99# '
.99' (
NewGuid99( /
(99/ 0
)990 1
.991 2
ToString992 :
(99: ;
)99; <
;99< =
var;; 
result;; 
=;; 
await;; 
_bankRepository;; .
.;;. /
AddAsync;;/ 7
(;;7 8
bankDetails;;8 C
,;;C D
token;;E J
);;J K
.;;K L
ConfigureAwait;;L Z
(;;Z [
false;;[ `
);;` a
;;;a b
await<< 
_work<< 
.<< 
CommitAsync<< #
(<<# $
token<<$ )
)<<) *
.<<* +
ConfigureAwait<<+ 9
(<<9 :
false<<: ?
)<<? @
;<<@ A
return== 
_mapper== 
.== 
Map== 
<== 
BankDetailsDTO== -
>==- .
(==. /
result==/ 5
)==5 6
;==6 7
}>> 	
publicFF 
asyncFF 
TaskFF 
<FF 
boolFF 
>FF "
DeleteBankDetailsAsyncFF  6
(FF6 7
intFF7 :
	enquiryIdFF; D
,FFD E
CancellationTokenFFF W
tokenFFX ]
)FF] ^
{GG 	
varHH 
bankDetailsHH 
=HH 
awaitHH #
_bankRepositoryHH$ 3
.HH3 4+
FirstOrDefaultByExpressionAsyncHH4 S
(HHS T
xHHT U
=>HHV X
xHHY Z
.HHZ [
	EnqtempIdHH[ d
==HHe g
	enquiryIdHHh q
&&HHr t
xHHu v
.HHv w
IsActiveHHw 
==
HHÄ Ç
true
HHÉ á
&&
HHà ä
x
HHã å
.
HHå ç
	IsDeleted
HHç ñ
==
HHó ô
false
HHö ü
,
HHü †
token
HH° ¶
)
HH¶ ß
.
HHß ®
ConfigureAwait
HH® ∂
(
HH∂ ∑
false
HH∑ º
)
HHº Ω
;
HHΩ æ
ifII 
(II 
bankDetailsII 
==II 
nullII #
)II# $
{JJ 
throwKK 
newKK 
ArgumentExceptionKK +
(KK+ ,
$strKK, <
)KK< =
;KK= >
}LL 
bankDetailsNN 
.NN 
IsActiveNN  
=NN! "
falseNN# (
;NN( )
bankDetailsOO 
.OO 
	IsDeletedOO !
=OO" #
trueOO$ (
;OO( )
bankDetailsPP 
.PP 
	CreatedByPP !
=PP" #
	_userInfoPP$ -
.PP- .
UserIdPP. 4
;PP4 5
bankDetailsQQ 
.QQ 
CreatedDateQQ #
=QQ$ %
DateTimeQQ& .
.QQ. /
UtcNowQQ/ 5
;QQ5 6
awaitSS 
_bankRepositorySS !
.SS! "
UpdateAsyncSS" -
(SS- .
bankDetailsSS. 9
,SS9 :
tokenSS; @
)SS@ A
.SSA B
ConfigureAwaitSSB P
(SSP Q
falseSSQ V
)SSV W
;SSW X
awaitTT 
_workTT 
.TT 
CommitAsyncTT #
(TT# $
tokenTT$ )
)TT) *
.TT* +
ConfigureAwaitTT+ 9
(TT9 :
falseTT: ?
)TT? @
;TT@ A
returnUU 
trueUU 
;UU 
}VV 	
public^^ 
async^^ 
Task^^ 
<^^ 
BankDetailsDTO^^ (
>^^( )#
GetByIdBankDetailsAsync^^* A
(^^A B
int^^B E
	enquiryId^^F O
,^^O P
CancellationToken^^Q b
token^^c h
)^^h i
{__ 	
var`` 
bankDetails`` 
=`` 
await`` #
_bankRepository``$ 3
.``3 4+
FirstOrDefaultByExpressionAsync``4 S
(``S T
x``T U
=>``V X
x``Y Z
.``Z [
	EnqtempId``[ d
==``e g
	enquiryId``h q
&&``r t
x``u v
.``v w
IsActive``w 
==
``Ä Ç
true
``É á
&&
``à ä
x
``ã å
.
``å ç
	IsDeleted
``ç ñ
==
``ó ô
false
``ö ü
,
``ü †
token
``° ¶
)
``¶ ß
.
``ß ®
ConfigureAwait
``® ∂
(
``∂ ∑
false
``∑ º
)
``º Ω
;
``Ω æ
ifaa 
(aa 
bankDetailsaa 
==aa 
nullaa #
)aa# $
{bb 
throwcc 
newcc 
ArgumentExceptioncc +
(cc+ ,
$strcc, <
)cc< =
;cc= >
}dd 
returnee 
_mapperee 
.ee 
Mapee 
<ee 
BankDetailsDTOee -
>ee- .
(ee. /
bankDetailsee/ :
)ee: ;
;ee; <
}ff 	
publicnn 
asyncnn 
Tasknn 
<nn 
BankDetailsDTOnn (
>nn( )"
UpdateBankDetailsAsyncnn* @
(nn@ A
BankDetailsDTOnnA O
bankDTOnnP W
,nnW X
CancellationTokennnY j
tokennnk p
)nnp q
{oo 	
varpp 
bankDetailspp 
=pp 
awaitpp #
_bankRepositorypp$ 3
.qq$ %7
+FindByFirstOrDefalutMatchingPropertiesAsyncqq% P
(qqP Q
tokenqqQ V
,qqV W
xqqX Y
=>qqZ \
xqq] ^
.qq^ _
	EnqtempIdqq_ h
==qqi k
bankDTOqql s
.qqs t
	EnqtempIdqqt }
&&rr' )
xrr* +
.rr+ ,
	EnqBankIdrr, 5
==rr6 8
bankDTOrr9 @
.rr@ A
	EnqBankIdrrA J
&&ss' )
xss* +
.ss+ ,
IsActivess, 4
==ss5 7
truess8 <
&&ss= ?
xss@ A
.ssA B
	IsDeletedssB K
==ssL N
falsessO T
)ssT U
.tt$ %
ConfigureAwaittt% 3
(tt3 4
falsett4 9
)tt9 :
;tt: ;
ifvv 
(vv 
bankDetailsvv 
==vv 
nullvv #
)vv# $
{ww 
throwxx 
newxx 
ArgumentExceptionxx +
(xx+ ,
$strxx, ;
)xx; <
;xx< =
}yy 
varzz 
updatedBankDetailszz "
=zz# $
_mapperzz% ,
.zz, -
Mapzz- 0
<zz0 1
TblEnqBankDetzz1 >
>zz> ?
(zz? @
bankDTOzz@ G
)zzG H
;zzH I
updatedBankDetails|| 
.|| 

ModifiedBy|| )
=||* +
	_userInfo||, 5
.||5 6
UserId||6 <
;||< =
updatedBankDetails}} 
.}} 
ModifiedDate}} +
=}}, -
DateTime}}. 6
.}}6 7
UtcNow}}7 =
;}}= >
updatedBankDetails~~ 
.~~ 
IsActive~~ '
=~~( )
true~~* .
;~~. /
updatedBankDetails 
. 
	IsDeleted (
=) *
false+ 0
;0 1 
updatedBankDetails
ÄÄ 
.
ÄÄ 
	CreatedBy
ÄÄ (
=
ÄÄ) *
bankDetails
ÄÄ+ 6
.
ÄÄ6 7
	CreatedBy
ÄÄ7 @
;
ÄÄ@ A 
updatedBankDetails
ÅÅ 
.
ÅÅ 
CreatedDate
ÅÅ *
=
ÅÅ+ ,
bankDetails
ÅÅ- 8
.
ÅÅ8 9
CreatedDate
ÅÅ9 D
;
ÅÅD E
var
ÉÉ 
result
ÉÉ 
=
ÉÉ 
await
ÉÉ 
_bankRepository
ÉÉ .
.
ÉÉ. /
UpdateAsync
ÉÉ/ :
(
ÉÉ: ; 
updatedBankDetails
ÉÉ; M
,
ÉÉM N
token
ÉÉO T
)
ÉÉT U
.
ÉÉU V
ConfigureAwait
ÉÉV d
(
ÉÉd e
false
ÉÉe j
)
ÉÉj k
;
ÉÉk l
await
ÑÑ 
_work
ÑÑ 
.
ÑÑ 
CommitAsync
ÑÑ #
(
ÑÑ# $
token
ÑÑ$ )
)
ÑÑ) *
.
ÑÑ* +
ConfigureAwait
ÑÑ+ 9
(
ÑÑ9 :
false
ÑÑ: ?
)
ÑÑ? @
;
ÑÑ@ A
return
ÖÖ 
_mapper
ÖÖ 
.
ÖÖ 
Map
ÖÖ 
<
ÖÖ 
BankDetailsDTO
ÖÖ -
>
ÖÖ- .
(
ÖÖ. /
result
ÖÖ/ 5
)
ÖÖ5 6
;
ÖÖ6 7
}
ÜÜ 	
}
àà 
}ââ î
oD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\UnitDetails\BasicDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H
UnitDetailsH S
{ 
public 

class 
BasicDetailsService $
:% &
IBasicDetails' 4
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqBasicDet+ 9
>9 :"
_basicDetailRepository; Q
;Q R
private 
readonly 
IEntityRepository *
<* +
TblEnqTemptab+ 8
>8 9
_enqRepository: H
;H I
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
public$$ 
BasicDetailsService$$ "
($$" #
IEntityRepository$$# 4
<$$4 5
TblEnqBasicDet$$5 C
>$$C D!
basicDetailRepository$$E Z
,$$Z [
IEntityRepository%% 
<%% 
TblEnqTemptab%% +
>%%+ ,
enqRepository%%- :
,%%: ;
UserInfo%%< D
userInfo%%E M
,%%M N
IMapper%%O V
mapper%%W ]
,%%] ^
IUnitOfWork%%_ j
work%%k o
)%%o p
{&& 	"
_basicDetailRepository'' "
=''# $!
basicDetailRepository''% :
;'': ;
_enqRepository(( 
=(( 
enqRepository(( *
;((* +
	_userInfo)) 
=)) 
userInfo))  
;))  !
_mapper** 
=** 
mapper** 
;** 
_work++ 
=++ 
work++ 
;++ 
}-- 	
public55 
async55 
Task55 
<55 
BasicDetailsDto55 )
>55) *
AddBasicDetails55+ :
(55: ;
BasicDetailsDto55; J
basicDetailsDTO55K Z
,55Z [
CancellationToken55\ m
token55n s
)55s t
{66 	
if77 
(77 
basicDetailsDTO77 
.77  
	EnqtempId77  )
==77* ,
null77- 1
||772 4
basicDetailsDTO775 D
.77D E
	EnqtempId77E N
==77O Q
$num77R S
)77S T
{88 
TblEnqTemptab99 
enq99 !
=99" #
new99$ '
TblEnqTemptab99( 5
{:: 
UniqueId;; 
=;; 
Guid;; #
.;;# $
NewGuid;;$ +
(;;+ ,
);;, -
.;;- .
ToString;;. 6
(;;6 7
);;7 8
,;;8 9
	CreatedBy<< 
=<< 
	_userInfo<<  )
.<<) *
Pan<<* -
,<<- .
CreatedDate== 
===  !
DateTime==" *
.==* +
UtcNow==+ 1
,==1 2
EnqInitDate>> 
=>>  !
DateTime>>" *
.>>* +
UtcNow>>+ 1
,>>1 2
IsActive?? 
=?? 
true?? #
,??# $
	IsDeleted@@ 
=@@ 
false@@  %
,@@% &
PromPanAA 
=AA 
	_userInfoAA '
.AA' (
PanAA( +
,AA+ ,
	EnqStatusBB 
=BB 
(BB  !
intBB! $
)BB$ %
	EnqStatusBB% .
.BB. /
DraftBB/ 4
,BB4 5
}CC 
;CC 
varDD 
tempEnqDD 
=DD 
awaitDD #
_enqRepositoryDD$ 2
.DD2 3
AddAsyncDD3 ;
(DD; <
enqDD< ?
,DD? @
tokenDDA F
)DDF G
.DDG H
ConfigureAwaitDDH V
(DDV W
falseDDW \
)DD\ ]
;DD] ^
awaitEE 
_workEE 
.EE 
CommitAsyncEE '
(EE' (
tokenEE( -
)EE- .
.EE. /
ConfigureAwaitEE/ =
(EE= >
falseEE> C
)EEC D
;EED E
basicDetailsDTOFF 
.FF  
	EnqtempIdFF  )
=FF* +
tempEnqFF, 3
.FF3 4
	EnqtempIdFF4 =
;FF= >
}GG 
varHH 
basicDetailsHH 
=HH 
_mapperHH &
.HH& '
MapHH' *
<HH* +
TblEnqBasicDetHH+ 9
>HH9 :
(HH: ;
basicDetailsDTOHH; J
)HHJ K
;HHK L
basicDetailsII 
.II 
IsActiveII !
=II" #
trueII$ (
;II( )
basicDetailsJJ 
.JJ 
	IsDeletedJJ "
=JJ# $
falseJJ% *
;JJ* +
basicDetailsKK 
.KK 
CreatedDateKK $
=KK% &
DateTimeKK' /
.KK/ 0
UtcNowKK0 6
;KK6 7
basicDetailsLL 
.LL 
	CreatedByLL "
=LL# $
	_userInfoLL% .
.LL. /
PanLL/ 2
;LL2 3
basicDetailsMM 
.MM 
UniqueIdMM !
=MM" #
GuidMM$ (
.MM( )
NewGuidMM) 0
(MM0 1
)MM1 2
.MM2 3
ToStringMM3 ;
(MM; <
)MM< =
;MM= >
varOO 
resultOO 
=OO 
awaitOO "
_basicDetailRepositoryOO 5
.OO5 6
AddAsyncOO6 >
(OO> ?
basicDetailsOO? K
,OOK L
tokenOOM R
)OOR S
.OOS T
ConfigureAwaitOOT b
(OOb c
falseOOc h
)OOh i
;OOi j
awaitPP 
_workPP 
.PP 
CommitAsyncPP #
(PP# $
tokenPP$ )
)PP) *
.PP* +
ConfigureAwaitPP+ 9
(PP9 :
falsePP: ?
)PP? @
;PP@ A
varRR 
dataRR 
=RR 
_mapperRR 
.RR 
MapRR "
<RR" #
BasicDetailsDtoRR# 2
>RR2 3
(RR3 4
resultRR4 :
)RR: ;
;RR; <
dataSS 
.SS 
PromoterPanSS 
=SS 
basicDetailsDTOSS .
.SS. /
PromoterPanSS/ :
;SS: ;
returnUU 
dataUU 
;UU 
}VV 	
public^^ 
async^^ 
Task^^ 
<^^ 
bool^^ 
>^^ 
DeleteBasicDetails^^  2
(^^2 3
int^^3 6
	enquiryId^^7 @
,^^@ A
CancellationToken^^B S
token^^T Y
)^^Y Z
{__ 	
var`` 
basicDetails`` 
=`` 
await`` $"
_basicDetailRepository``% ;
.aa% &7
+FindByFirstOrDefalutMatchingPropertiesAsyncaa& Q
(aaQ R
tokenaaR W
,aaW X
xaaY Z
=>aa[ ]
xaa^ _
.aa_ `
	EnqtempIdaa` i
==aaj l
	enquiryIdaam v
&&bb( *
xbb+ ,
.bb, -
IsActivebb- 5
==bb6 8
truebb9 =
&&bb> @
xbbA B
.bbB C
	IsDeletedbbC L
==bbM O
falsebbP U
)bbU V
.cc% &
ConfigureAwaitcc& 4
(cc4 5
falsecc5 :
)cc: ;
;cc; <
ifdd 
(dd 
basicDetailsdd 
==dd 
nulldd  $
)dd$ %
{ee 
throwff 
newff 
ArgumentExceptionff +
(ff+ ,
$strff, ;
)ff; <
;ff< =
}gg 
basicDetailsii 
.ii 
	IsDeletedii "
=ii# $
trueii% )
;ii) *
basicDetailsjj 
.jj 
IsActivejj !
=jj" #
falsejj$ )
;jj) *
basicDetailskk 
.kk 

ModifiedBykk #
=kk$ %
	_userInfokk& /
.kk/ 0
Pankk0 3
;kk3 4
basicDetailsll 
.ll 
ModifiedDatell %
=ll& '
DateTimell( 0
.ll0 1
UtcNowll1 7
;ll7 8
awaitnn "
_basicDetailRepositorynn (
.nn( )
UpdateAsyncnn) 4
(nn4 5
basicDetailsnn5 A
,nnA B
tokennnC H
)nnH I
.nnI J
ConfigureAwaitnnJ X
(nnX Y
falsennY ^
)nn^ _
;nn_ `
awaitoo 
_workoo 
.oo 
CommitAsyncoo #
(oo# $
tokenoo$ )
)oo) *
.oo* +
ConfigureAwaitoo+ 9
(oo9 :
falseoo: ?
)oo? @
;oo@ A
returnpp 
truepp 
;pp 
}qq 	
publicyy 
asyncyy 
Taskyy 
<yy 
BasicDetailsDtoyy )
>yy) *
GetBasicDetailsyy+ :
(yy: ;
intyy; >
	enquiryIdyy? H
,yyH I
CancellationTokenyyJ [
tokenyy\ a
)yya b
{zz 	
var{{ 
data{{ 
={{ 
await{{ "
_basicDetailRepository{{ 3
.{{3 47
+FindByFirstOrDefalutMatchingPropertiesAsync{{4 _
({{_ `
token{{` e
,{{e f
x|| 
=>|| 
x|| 
.|| 
	EnqtempId||  
==||! #
	enquiryId||$ -
&&||. 0
x||1 2
.||2 3
IsActive||3 ;
==||< >
true||? C
&&||D F
x||G H
.||H I
	IsDeleted||I R
==||S U
false||V [
,||[ \

incPurpose}} 
=>}} 

incPurpose}} (
.}}( )
PurpCdNavigation}}) 9
,}}9 :
incSize~~ 
=>~~ 
incSize~~ "
.~~" #
SizeCdNavigation~~# 3
,~~3 4
incConst 
=> 
incConst "
." #
ConstCdNavigation# 4
,4 5
	incoffice
ÄÄ 
=>
ÄÄ 
	incoffice
ÄÄ %
.
ÄÄ% &
OffcCdNavigation
ÄÄ& 6
,
ÄÄ6 7
incprem
ÅÅ 
=>
ÅÅ 
incprem
ÅÅ  
.
ÅÅ  !
PremCdNavigation
ÅÅ! 1
)
ÅÅ1 2
.
ÅÅ2 3
ConfigureAwait
ÅÅ3 A
(
ÅÅA B
false
ÅÅB G
)
ÅÅG H
;
ÅÅH I
var
ÉÉ 
basicDetails
ÉÉ 
=
ÉÉ 
_mapper
ÉÉ &
.
ÉÉ& '
Map
ÉÉ' *
<
ÉÉ* +
BasicDetailsDto
ÉÉ+ :
>
ÉÉ: ;
(
ÉÉ; <
data
ÉÉ< @
)
ÉÉ@ A
;
ÉÉA B
if
ÑÑ 
(
ÑÑ 
data
ÑÑ 
!=
ÑÑ 
null
ÑÑ 
)
ÑÑ 
{
ÖÖ 
basicDetails
ÜÜ 
.
ÜÜ 

SizeOfFirm
ÜÜ '
=
ÜÜ( )
data
ÜÜ* .
?
ÜÜ. /
.
ÜÜ/ 0
SizeCdNavigation
ÜÜ0 @
?
ÜÜ@ A
.
ÜÜA B
SizeDets
ÜÜB J
;
ÜÜJ K
basicDetails
áá 
.
áá 
PurposeOfLoan
áá *
=
áá+ ,
data
áá- 1
?
áá1 2
.
áá2 3
PurpCdNavigation
áá3 C
?
ááC D
.
ááD E
PurpDets
ááE M
;
ááM N
basicDetails
àà 
.
àà 
	ConstType
àà &
=
àà' (
data
àà) -
?
àà- .
.
àà. /
ConstCdNavigation
àà/ @
?
àà@ A
.
ààA B
CnstDets
ààB J
;
ààJ K
basicDetails
ââ 
.
ââ 
OffcCode
ââ %
=
ââ& '
data
ââ( ,
?
ââ, -
.
ââ- .
OffcCdNavigation
ââ. >
?
ââ> ?
.
ââ? @
OffcAdr1
ââ@ H
;
ââH I
basicDetails
ää 
.
ää 
PremCode
ää %
=
ää& '
data
ää( ,
?
ää, -
.
ää- .
PremCdNavigation
ää. >
?
ää> ?
.
ää? @
PremDets
ää@ H
;
ääH I
}
ãã 
return
åå 
basicDetails
åå 
;
åå  
}
çç 	
public
ïï 
async
ïï 
Task
ïï 
<
ïï 
BasicDetailsDto
ïï )
>
ïï) * 
UpdateBasicDetails
ïï+ =
(
ïï= >
BasicDetailsDto
ïï> M
basicDetailsDTO
ïïN ]
,
ïï] ^
CancellationToken
ïï_ p
token
ïïq v
)
ïïv w
{
ññ 	
var
óó 
basicDetails
óó 
=
óó 
await
óó $$
_basicDetailRepository
óó% ;
.
òò$ %9
+FindByFirstOrDefalutMatchingPropertiesAsync
òò% P
(
òòP Q
token
òòQ V
,
òòV W
x
òòX Y
=>
òòZ \
x
òò] ^
.
òò^ _
	EnqtempId
òò_ h
==
òòi k
basicDetailsDTO
òòl {
.
òò{ |
	EnqtempIdòò| Ö
&&
ôô' )
x
ôô* +
.
ôô+ ,
	EnqBdetId
ôô, 5
==
ôô6 8
basicDetailsDTO
ôô9 H
.
ôôH I
	EnqBdetId
ôôI R
&&
öö' )
x
öö* +
.
öö+ ,
IsActive
öö, 4
==
öö5 7
true
öö8 <
&&
öö= ?
x
öö@ A
.
ööA B
	IsDeleted
ööB K
==
ööL N
false
ööO T
)
ööT U
.
õõ$ %
ConfigureAwait
õõ% 3
(
õõ3 4
false
õõ4 9
)
õõ9 :
;
õõ: ;
if
úú 
(
úú 
basicDetails
úú 
==
úú 
null
úú  $
)
úú$ %
{
ùù 
throw
ûû 
new
ûû 
ArgumentException
ûû +
(
ûû+ ,
$str
ûû, ;
)
ûû; <
;
ûû< =
}
üü 
var
†† !
updatedBasicDetails
†† #
=
††$ %
_mapper
††& -
.
††- .
Map
††. 1
<
††1 2
TblEnqBasicDet
††2 @
>
††@ A
(
††A B
basicDetailsDTO
††B Q
)
††Q R
;
††R S!
updatedBasicDetails
¢¢ 
.
¢¢  

ModifiedBy
¢¢  *
=
¢¢+ ,
	_userInfo
¢¢- 6
.
¢¢6 7
Pan
¢¢7 :
;
¢¢: ;!
updatedBasicDetails
££ 
.
££  
ModifiedDate
££  ,
=
££- .
DateTime
££/ 7
.
££7 8
UtcNow
££8 >
;
££> ?!
updatedBasicDetails
§§ 
.
§§  
IsActive
§§  (
=
§§) *
true
§§+ /
;
§§/ 0!
updatedBasicDetails
•• 
.
••  
	IsDeleted
••  )
=
••* +
false
••, 1
;
••1 2!
updatedBasicDetails
¶¶ 
.
¶¶  
UniqueId
¶¶  (
=
¶¶) *
basicDetails
¶¶+ 7
.
¶¶7 8
UniqueId
¶¶8 @
;
¶¶@ A!
updatedBasicDetails
ßß 
.
ßß  
	CreatedBy
ßß  )
=
ßß* +
basicDetails
ßß, 8
.
ßß8 9
	CreatedBy
ßß9 B
;
ßßB C!
updatedBasicDetails
®® 
.
®®  
CreatedDate
®®  +
=
®®, -
basicDetails
®®. :
.
®®: ;
CreatedDate
®®; F
;
®®F G
var
™™ 
result
™™ 
=
™™ 
await
™™ $
_basicDetailRepository
™™ 5
.
™™5 6
UpdateAsync
™™6 A
(
™™A B!
updatedBasicDetails
™™B U
,
™™U V
token
™™W \
)
™™\ ]
.
™™] ^
ConfigureAwait
™™^ l
(
™™l m
false
™™m r
)
™™r s
;
™™s t
await
´´ 
_work
´´ 
.
´´ 
CommitAsync
´´ #
(
´´# $
token
´´$ )
)
´´) *
.
´´* +
ConfigureAwait
´´+ 9
(
´´9 :
false
´´: ?
)
´´? @
;
´´@ A
return
¨¨ 
_mapper
¨¨ 
.
¨¨ 
Map
¨¨ 
<
¨¨ 
BasicDetailsDto
¨¨ .
>
¨¨. /
(
¨¨/ 0
result
¨¨0 6
)
¨¨6 7
;
¨¨7 8
}
≠≠ 	
}
ÆÆ 
}ØØ éÖ
vD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\EnquirySubmission\UnitDetails\RegistrationDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
EnquirySubmission6 G
.G H
UnitDetailsH S
{ 
public 

class &
RegistrationDetailsService +
:, - 
IRegistrationDetails. B
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqRegnoDet+ 9
>9 :#
_registrationRepository; R
;R S
private 
readonly 
IEntityRepository *
<* +
TblEnqTemptab+ 8
>8 9
_enqRepository: H
;H I
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
public &
RegistrationDetailsService )
() *
IEntityRepository* ;
<; <
TblEnqRegnoDet< J
>J K"
registrationRepositoryL b
,b c
IEntityRepositoryd u
<u v
TblEnqTemptab	v É
>
É Ñ
enqRepository
Ö í
,
í ì
UserInfo
î ú
userInfo
ù •
,
• ¶
IMapper
ß Æ
mapper
Ø µ
,
µ ∂
IUnitOfWork
∑ ¬
work
√ «
)
« »
{ 	#
_registrationRepository #
=$ %"
registrationRepository& <
;< =
_enqRepository 
= 
enqRepository *
;* +
	_userInfo   
=   
userInfo    
;    !
_mapper!! 
=!! 
mapper!! 
;!! 
_work"" 
="" 
work"" 
;"" 
}## 	
public++ 
async++ 
Task++ 
<++ 
IEnumerable++ %
<++% &$
RegistrationNoDetailsDTO++& >
>++> ?
>++? @"
AddRegistrationDetails++A W
(++W X
List++X \
<++\ ]$
RegistrationNoDetailsDTO++] u
>++u v
registrationDTO	++w Ü
,
++Ü á
CancellationToken
++à ô
token
++ö ü
)
++ü †
{,, 	
var-- 
enquiry-- 
=-- 
await-- 
_enqRepository--  .
.--. /+
FirstOrDefaultByExpressionAsync--/ N
(--N O
x--O P
=>--Q S
x--T U
.--U V
	EnqtempId--V _
==--` b
registrationDTO--c r
[--r s
$num--s t
]--t u
.--u v
	EnqtempId--v 
&&.. 
x.. 
... 
IsActive.. 
==.. 
true.. !
&&// 
x// 
.// 
	IsDeleted// 
==// 
false// #
,//# $
token//% *
)//* +
.//+ ,
ConfigureAwait//, :
(//: ;
false//; @
)//@ A
;//A B
if11 
(11 
enquiry11 
==11 
null11 
)11  
{22 
throw33 
new33 
ArgumentException33 +
(33+ ,
$str33, D
)33D E
;33E F
}44 
var66 
detailsList66 
=66 
_mapper66 %
.66% &
Map66& )
<66) *
List66* .
<66. /
TblEnqRegnoDet66/ =
>66= >
>66> ?
(66? @
registrationDTO66@ O
)66O P
;66P Q
detailsList88 
.88 
ForEach88 
(88  
x88  !
=>88" $
{99 
x:: 
.:: 
IsActive:: 
=:: 
true:: !
;::! "
x;; 
.;; 
	IsDeleted;; 
=;; 
false;; #
;;;# $
x<< 
.<< 
	CreatedBy<< 
=<< 
	_userInfo<< '
.<<' (
UserId<<( .
;<<. /
x== 
.== 
CreatedDate== 
=== 
DateTime==  (
.==( )
UtcNow==) /
;==/ 0
x>> 
.>> 
UniqueId>> 
=>> 
Guid>> !
.>>! "
NewGuid>>" )
(>>) *
)>>* +
.>>+ ,
ToString>>, 4
(>>4 5
)>>5 6
;>>6 7
}?? 
)?? 
;?? 
varAA 
resultAA 
=AA 
awaitAA #
_registrationRepositoryAA 6
.AA6 7
AddAsyncAA7 ?
(AA? @
detailsListAA@ K
,AAK L
tokenAAM R
)AAR S
.AAS T
ConfigureAwaitAAT b
(AAb c
falseAAc h
)AAh i
;AAi j
awaitBB 
_workBB 
.BB 
CommitAsyncBB #
(BB# $
tokenBB$ )
)BB) *
.BB* +
ConfigureAwaitBB+ 9
(BB9 :
falseBB: ?
)BB? @
;BB@ A
returnCC 
_mapperCC 
.CC 
MapCC 
<CC 
ListCC #
<CC# $$
RegistrationNoDetailsDTOCC$ <
>CC< =
>CC= >
(CC> ?
resultCC? E
)CCE F
;CCF G
}DD 	
publicKK 
asyncKK 
TaskKK 
<KK 
boolKK 
>KK %
DeleteRegistrationDetailsKK  9
(KK9 :
intKK: =
	enquiryIdKK> G
,KKG H
CancellationTokenKKI Z
tokenKK[ `
)KK` a
{LL 	
varMM 
addressMM 
=MM 
awaitMM #
_registrationRepositoryMM  7
.MM7 8+
FirstOrDefaultByExpressionAsyncMM8 W
(MMW X
xMMX Y
=>MMZ \
xMM] ^
.MM^ _

EnqRegnoIdMM_ i
==MMj l
	enquiryIdMMm v
&&MMw y
xMMz {
.MM{ |
IsActive	MM| Ñ
==
MMÖ á
true
MMà å
&&
MMç è
x
MMê ë
.
MMë í
	IsDeleted
MMí õ
==
MMú û
false
MMü §
,
MM§ •
token
MM¶ ´
)
MM´ ¨
.
MM¨ ≠
ConfigureAwait
MM≠ ª
(
MMª º
false
MMº ¡
)
MM¡ ¬
;
MM¬ √
ifNN 
(NN 
addressNN 
==NN 
nullNN 
)NN  
{OO 
throwPP 
newPP 
ArgumentExceptionPP +
(PP+ ,
$strPP, <
)PP< =
;PP= >
}QQ 
addressSS 
.SS 
IsActiveSS 
=SS 
falseSS $
;SS$ %
addressTT 
.TT 
	IsDeletedTT 
=TT 
trueTT  $
;TT$ %
addressUU 
.UU 

ModifiedByUU 
=UU  
	_userInfoUU! *
.UU* +
UserIdUU+ 1
;UU1 2
addressVV 
.VV 
CreatedDateVV 
=VV  !
DateTimeVV" *
.VV* +
UtcNowVV+ 1
;VV1 2
awaitXX #
_registrationRepositoryXX )
.XX) *
UpdateAsyncXX* 5
(XX5 6
addressXX6 =
,XX= >
tokenXX? D
)XXD E
.XXE F
ConfigureAwaitXXF T
(XXT U
falseXXU Z
)XXZ [
;XX[ \
awaitYY 
_workYY 
.YY 
CommitAsyncYY #
(YY# $
tokenYY$ )
)YY) *
.YY* +
ConfigureAwaitYY+ 9
(YY9 :
falseYY: ?
)YY? @
;YY@ A
returnZZ 
trueZZ 
;ZZ 
}[[ 	
publicbb 
asyncbb 
Taskbb 
<bb 
IEnumerablebb %
<bb% &$
RegistrationNoDetailsDTObb& >
>bb> ?
>bb? @-
!GetRegistrationDetailsByEnquiryIdbbA b
(bbb c
intbbc f
	enquiryIdbbg p
,bbp q
CancellationToken	bbr É
token
bbÑ â
)
bbâ ä
{cc 	
vardd 
listdd 
=dd 
awaitdd #
_registrationRepositorydd 4
.dd4 5!
FindByExpressionAsyncdd5 J
(ddJ K
xddK L
=>ddM O
xddP Q
.ddQ R
	EnqtempIdddR [
==dd\ ^
	enquiryIddd_ h
&&ddi k
xddl m
.ddm n
IsActiveddn v
==ddw y
trueddz ~
&&	dd Å
x
ddÇ É
.
ddÉ Ñ
	IsDeleted
ddÑ ç
==
ddé ê
false
ddë ñ
,
ddñ ó
token
ddò ù
)
ddù û
.
ddû ü
ConfigureAwait
ddü ≠
(
dd≠ Æ
false
ddÆ ≥
)
dd≥ ¥
;
dd¥ µ
ifee 
(ee 
!ee 
listee 
.ee 
Anyee 
(ee 
)ee 
)ee 
{ff 
throwgg 
newgg 
ArgumentExceptiongg +
(gg+ ,
$strgg, <
)gg< =
;gg= >
}hh 
returnii 
_mapperii 
.ii 
Mapii 
<ii 
Listii #
<ii# $$
RegistrationNoDetailsDTOii$ <
>ii< =
>ii= >
(ii> ?
listii? C
)iiC D
;iiD E
}jj 	
publicqq 
asyncqq 
Taskqq 
<qq 
IEnumerableqq %
<qq% &$
RegistrationNoDetailsDTOqq& >
>qq> ?
>qq? @%
UpdateRegistrationDetailsqqA Z
(qqZ [
Listqq[ _
<qq_ `$
RegistrationNoDetailsDTOqq` x
>qqx y
registrationDTO	qqz â
,
qqâ ä
CancellationToken
qqã ú
token
qqù ¢
)
qq¢ £
{rr 	
varss 
enquiryss 
=ss 
awaitss 
_enqRepositoryss  .
.ss. /+
FirstOrDefaultByExpressionAsyncss/ N
(ssN O
xssO P
=>ssQ S
xssT U
.ssU V
	EnqtempIdssV _
==ss` b
registrationDTOssc r
[ssr s
$numsss t
]sst u
.ssu v
	EnqtempIdssv 
&&
ssÄ Ç
x
ssÉ Ñ
.
ssÑ Ö
IsActive
ssÖ ç
==
ssé ê
true
ssë ï
&&
ssñ ò
x
ssô ö
.
ssö õ
	IsDeleted
ssõ §
==
ss• ß
false
ss® ≠
,
ss≠ Æ
token
ssØ ¥
)
ss¥ µ
.
ssµ ∂
ConfigureAwait
ss∂ ƒ
(
ssƒ ≈
false
ss≈  
)
ss  À
;
ssÀ Ã
iftt 
(tt 
enquirytt 
==tt 
nulltt 
)tt  
{uu 
throwvv 
newvv 
ArgumentExceptionvv +
(vv+ ,
$strvv, D
)vvD E
;vvE F
}ww 
varyy 
registrationUListyy !
=yy" #
awaityy$ )#
_registrationRepositoryyy* A
.yyA B!
FindByExpressionAsyncyyB W
(yyW X
xyyX Y
=>yyZ \
xyy] ^
.yy^ _
	EnqtempIdyy_ h
==yyi k
registrationDTOyyl {
[yy{ |
$numyy| }
]yy} ~
.yy~ 
	EnqtempId	yy à
&&
yyâ ã
x
yyå ç
.
yyç é
IsActive
yyé ñ
==
yyó ô
true
yyö û
&&
yyü °
x
yy¢ £
.
yy£ §
	IsDeleted
yy§ ≠
==
yyÆ ∞
false
yy± ∂
,
yy∂ ∑
token
yy∏ Ω
)
yyΩ æ
.
yyæ ø
ConfigureAwait
yyø Õ
(
yyÕ Œ
false
yyŒ ”
)
yy” ‘
;
yy‘ ’
registrationUListzz 
.zz 
ForEachzz %
(zz% &
xzz& '
=>zz( *
{{{ 
x|| 
.|| 
IsActive|| 
=|| 
false|| "
;||" #
x}} 
.}} 
	IsDeleted}} 
=}} 
true}} "
;}}" #
x~~ 
.~~ 

ModifiedBy~~ 
=~~ 
	_userInfo~~ (
.~~( )
UserId~~) /
;~~/ 0
x 
. 
ModifiedDate 
=  
DateTime! )
.) *
UtcNow* 0
;0 1
}
ÄÄ 
)
ÄÄ 
;
ÄÄ 
await
ÅÅ %
_registrationRepository
ÅÅ )
.
ÅÅ) *
UpdateAsync
ÅÅ* 5
(
ÅÅ5 6
registrationUList
ÅÅ6 G
,
ÅÅG H
token
ÅÅI N
)
ÅÅN O
.
ÅÅO P
ConfigureAwait
ÅÅP ^
(
ÅÅ^ _
false
ÅÅ_ d
)
ÅÅd e
;
ÅÅe f
var
ÉÉ 
registrationList
ÉÉ  
=
ÉÉ! "
_mapper
ÉÉ# *
.
ÉÉ* +
Map
ÉÉ+ .
<
ÉÉ. /
List
ÉÉ/ 3
<
ÉÉ3 4
TblEnqRegnoDet
ÉÉ4 B
>
ÉÉB C
>
ÉÉC D
(
ÉÉD E
registrationDTO
ÉÉE T
)
ÉÉT U
;
ÉÉU V
registrationList
ÖÖ 
.
ÖÖ 
ForEach
ÖÖ $
(
ÖÖ$ %
x
ÖÖ% &
=>
ÖÖ' )
{
ÜÜ 
x
áá 
.
áá 

EnqRegnoId
áá 
=
áá 
$num
áá  
;
áá  !
x
àà 
.
àà 
IsActive
àà 
=
àà 
true
àà !
;
àà! "
x
ââ 
.
ââ 
	IsDeleted
ââ 
=
ââ 
false
ââ #
;
ââ# $
x
ää 
.
ää 
	CreatedBy
ää 
=
ää 
	_userInfo
ää '
.
ää' (
UserId
ää( .
;
ää. /
x
ãã 
.
ãã 
CreatedDate
ãã 
=
ãã 
DateTime
ãã  (
.
ãã( )
UtcNow
ãã) /
;
ãã/ 0
x
åå 
.
åå 
UniqueId
åå 
=
åå 
Guid
åå !
.
åå! "
NewGuid
åå" )
(
åå) *
)
åå* +
.
åå+ ,
ToString
åå, 4
(
åå4 5
)
åå5 6
;
åå6 7
}
çç 
)
çç 
;
çç 
var
èè 
data
èè 
=
èè 
await
èè %
_registrationRepository
èè 4
.
èè4 5
AddAsync
èè5 =
(
èè= >
registrationList
èè> N
,
èèN O
token
èèP U
)
èèU V
.
èèV W
ConfigureAwait
èèW e
(
èèe f
false
èèf k
)
èèk l
;
èèl m
await
êê 
_work
êê 
.
êê 
CommitAsync
êê #
(
êê# $
token
êê$ )
)
êê) *
.
êê* +
ConfigureAwait
êê+ 9
(
êê9 :
false
êê: ?
)
êê? @
;
êê@ A
return
ëë 
_mapper
ëë 
.
ëë 
Map
ëë 
<
ëë 
List
ëë #
<
ëë# $&
RegistrationNoDetailsDTO
ëë$ <
>
ëë< =
>
ëë= >
(
ëë> ?
data
ëë? C
)
ëëC D
;
ëëD E
}
íí 	
public
öö 
async
öö 
Task
öö 
<
öö &
RegistrationNoDetailsDTO
öö 2
>
öö2 3*
GetRegistrationNoDetailsById
öö4 P
(
ööP Q
int
ööQ T
id
ööU W
,
ööW X
CancellationToken
ööY j
token
öök p
)
ööp q
{
õõ 	
var
úú 
data
úú 
=
úú 
await
úú %
_registrationRepository
úú 4
.
úú4 5-
FirstOrDefaultByExpressionAsync
úú5 T
(
úúT U
x
úúU V
=>
úúW Y
x
úúZ [
.
úú[ \

EnqRegnoId
úú\ f
==
úúg i
id
úúj l
&&
úúm o
x
úúp q
.
úúq r
IsActive
úúr z
==
úú{ }
trueúú~ Ç
&&úúÉ Ö
xúúÜ á
.úúá à
	IsDeletedúúà ë
==úúí î
falseúúï ö
,úúö õ
tokenúúú °
)úú° ¢
.úú¢ £
ConfigureAwaitúú£ ±
(úú± ≤
falseúú≤ ∑
)úú∑ ∏
;úú∏ π
if
ùù 
(
ùù 
data
ùù 
==
ùù 
null
ùù 
)
ùù 
{
ûû 
throw
üü 
new
üü 
ArgumentException
üü +
(
üü+ ,
$str
üü, <
)
üü< =
;
üü= >
}
†† 
return
°° 
_mapper
°° 
.
°° 
Map
°° 
<
°° &
RegistrationNoDetailsDTO
°° 7
>
°°7 8
(
°°8 9
data
°°9 =
)
°°= >
;
°°> ?
}
¢¢ 	
}
££ 
}§§ Òó
ID:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\FileService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
{ 
public 

class 
FileService 
: 
IFileService +
{ 
private 
readonly 
IEntityRepository *
<* +
TblEnqDocument+ 9
>9 :
_documentRepository; N
;N O
private 
readonly 
IEnquiryHomeService ,
_enquiryService- <
;< =
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IUnitOfWork $
_work% *
;* +
private   
readonly   
IConfiguration   '

_configure  ( 2
;  2 3
public!! 
FileService!! 
(!! 
IEntityRepository!! ,
<!!, -
TblEnqDocument!!- ;
>!!; <
documentRepository!!= O
,!!O P
UserInfo!!Q Y
userInfo!!Z b
,!!b c
IMapper!!d k
mapper!!l r
,!!r s
IUnitOfWork!!t 
work
!!Ä Ñ
,
!!Ñ Ö!
IEnquiryHomeService
!!Ü ô
enquiryService
!!ö ®
,
!!® ©
IConfiguration
!!™ ∏
	configure
!!π ¬
)
!!¬ √
{"" 	

_configure## 
=## 
	configure## "
;##" #
_documentRepository$$ 
=$$  !
documentRepository$$" 4
;$$4 5
	_userInfo%% 
=%% 
userInfo%%  
;%%  !
_mapper&& 
=&& 
mapper&& 
;&& 
_work'' 
='' 
work'' 
;'' 
_enquiryService(( 
=(( 
enquiryService(( ,
;((, -
})) 	
public++ 
async++ 
Task++ 
<++ 
bool++ 
>++ 
DeleteFileAsync++  /
(++/ 0
int++0 3

documentId++4 >
,++> ?
IConfiguration++@ N
	configure++O X
,++X Y
CancellationToken++Z k
token++l q
)++q r
{,, 	
var-- 
data-- 
=-- 
await-- 
_documentRepository-- 0
.--0 1+
FirstOrDefaultByExpressionAsync--1 P
(--P Q
x--Q R
=>--S U
x--V W
.--W X
Id--X Z
==--[ ]

documentId--^ h
&&--i k
x--l m
.--m n
IsActive--n v
==--w y
true--z ~
&&	-- Å
x
--Ç É
.
--É Ñ
	IsDeleted
--Ñ ç
==
--é ê
false
--ë ñ
,
--ñ ó
token
--ò ù
)
--ù û
.
--û ü
ConfigureAwait
--ü ≠
(
--≠ Æ
false
--Æ ≥
)
--≥ ¥
;
--¥ µ
if.. 
(.. 
data.. 
!=.. 
null.. 
).. 
{// 
Enum00 
.00 
TryParse00 
(00 
data00 "
.00" #

DocSection00# -
,00- .
out00/ 2
DocumentTypeEnum003 C
typeEnum00D L
)00L M
;00M N
string11 

folderpath11 !
=11" #
$"11$ &
{11& '
FileTypeExtension11( 9
.119 :
GetArchiveFilePath11: L
(11L M
typeEnum11M U
,11U V
	configure11W `
)11` a
}11a b
"11b c
;11c d
string22 
archivedPath22 #
=22$ %
$"22& (
{22( )

folderpath22* 4
}224 5
$str225 7
{227 8
data228 <
.22< =
Name22= A
}22A B
"22B C
;22C D
try33 
{44 
if55 
(55 
!55 
	Directory55 "
.55" #
Exists55# )
(55) *

folderpath55* 4
)554 5
)555 6
	Directory66 !
.66! "
CreateDirectory66" 1
(661 2

folderpath662 <
)66< =
;66= >
File88 
.88 
Move88 
(88 
data88 "
.88" #
FilePath88# +
,88+ ,
archivedPath88- 9
)889 :
;88: ;
}99 
finally:: 
{;; 
data<< 
.<< 
	IsDeleted<< "
=<<# $
true<<% )
;<<) *
data== 
.== 
IsActive== !
===" #
false==$ )
;==) *
data>> 
.>> 
ModifiedDate>> %
=>>& '
DateTime>>( 0
.>>0 1
UtcNow>>1 7
;>>7 8
data?? 
.?? 

ModifiedBy?? #
=??$ %
	_userInfo??& /
.??/ 0
UserId??0 6
;??6 7
await@@ 
_documentRepository@@ -
.@@- .
UpdateAsync@@. 9
(@@9 :
data@@: >
,@@> ?
token@@@ E
)@@E F
.@@F G
ConfigureAwait@@G U
(@@U V
false@@V [
)@@[ \
;@@\ ]
awaitAA 
_workAA 
.AA  
CommitAsyncAA  +
(AA+ ,
tokenAA, 1
)AA1 2
.AA2 3
ConfigureAwaitAA3 A
(AAA B
falseAAB G
)AAG H
;AAH I
}BB 
returnCC 
trueCC 
;CC 
}DD 
returnEE 
falseEE 
;EE 
}FF 	
publicHH 
asyncHH 
TaskHH 
<HH 
FileDetailsDTOHH (
>HH( ) 
GetEncryptedFileByIdHH* >
(HH> ?
stringHH? E

documentIdHHF P
,HHP Q
CancellationTokenHHR c
tokenHHd i
)HHi j
{II 	
varJJ 
dataJJ 
=JJ 
awaitJJ 
_documentRepositoryJJ 0
.JJ0 1+
FirstOrDefaultByExpressionAsyncJJ1 P
(JJP Q
xJJQ R
=>JJS U
xJJV W
.JJW X
UniqueIdJJX `
==JJa c

documentIdJJd n
&&JJo q
xJJr s
.JJs t
IsActiveJJt |
==JJ} 
true
JJÄ Ñ
&&
JJÖ á
x
JJà â
.
JJâ ä
	IsDeleted
JJä ì
==
JJî ñ
false
JJó ú
,
JJú ù
token
JJû £
)
JJ£ §
.
JJ§ •
ConfigureAwait
JJ• ≥
(
JJ≥ ¥
false
JJ¥ π
)
JJπ ∫
;
JJ∫ ª
ifKK 
(KK 
dataKK 
!=KK 
nullKK 
)KK 
{LL 
varMM 
	byteArrayMM 
=MM 
awaitMM  %
FileSecurityMM& 2
.MM2 3&
EncryptedBytesFromFilePathMM3 M
(MMM N
dataMMN R
.MMR S
FilePathMMS [
,MM[ \
$strMM] g
)MMg h
;MMh i
ifNN 
(NN 
	byteArrayNN 
==NN  
nullNN! %
)NN% &
{OO 
throwPP 
newPP "
FileSecurityExceptionsPP 4
(PP4 5
$strPP5 N
)PPN O
;PPO P
}QQ 
returnSS 
newSS 
FileDetailsDTOSS )
{TT 
BytesUU 
=UU 
	byteArrayUU %
,UU% &
DocumentTypeVV  
=VV! "
dataVV# '
.VV' (

DocSectionVV( 2
,VV2 3
FileNameWW 
=WW 
dataWW #
.WW# $
NameWW$ (
}XX 
;XX 
}YY 
throwZZ 
newZZ "
FileSecurityExceptionsZZ ,
(ZZ, -
$strZZ- F
)ZZF G
;ZZG H
}\\ 	
public^^ 
async^^ 
Task^^ 
<^^ 
EnqDocumentDTO^^ (
>^^( )

UploadFile^^* 4
(^^4 5
byte^^5 9
[^^9 :
]^^: ;
bytes^^< A
,^^A B
int^^C F
enqId^^G L
,^^L M
DocumentTypeEnum^^N ^
documentType^^_ k
,^^k l
FileTypesEnum^^m z
	fileTypes	^^{ Ñ
,
^^Ñ Ö
IConfiguration
^^Ü î
	configure
^^ï û
,
^^û ü
CancellationToken
^^† ±
token
^^≤ ∑
)
^^∑ ∏
{__ 	
if`` 
(`` 
!`` 
FileTypeExtension`` "
.``" #
ValidateFileSize``# 3
(``3 4
bytes``4 9
.``9 :
Length``: @
,``@ A
	fileTypes``B K
,``K L
	configure``M V
)``V W
)``W X
{aa 
varbb 
sizebb 
=bb 
FileTypeExtensionbb ,
.bb, -
GetFileSizebb- 8
(bb8 9
	fileTypesbb9 B
,bbB C
	configurebbD M
)bbM N
;bbN O
throwcc 
newcc "
FileSecurityExceptionscc 0
(cc0 1

_configurecc1 ;
[cc; <
$strcc< N
]ccN O
)ccO P
;ccP Q
}dd 
ifee 
(ee 
enqIdee 
==ee 
$numee 
)ee 
{ff 
enqIdgg 
=gg 
awaitgg 
_enquiryServicegg -
.gg- .
AddNewEnqirygg. :
(gg: ;
	_userInfogg; D
.ggD E
PanggE H
,ggH I
tokenggJ O
)ggO P
.ggP Q
ConfigureAwaitggQ _
(gg_ `
falsegg` e
)gge f
;ggf g
}hh 
varjj 
isAlreadyExistjj 
=jj  
awaitjj! &
_documentRepositoryjj' :
.jj: ;+
FirstOrDefaultByExpressionAsyncjj; Z
(jjZ [
xjj[ \
=>jj] _
xjj` a
.jja b
	EnquiryIdjjb k
==jjl n
enqIdjjo t
&&jju w
xjjx y
.jjy z
IsActive	jjz Ç
==
jjÉ Ö
true
jjÜ ä
&&kk# %
xkk& '
.kk' (
	IsDeletedkk( 1
==kk2 4
falsekk5 :
&&kk; =
xkk> ?
.kk? @
Descriptionkk@ K
==kkL N
documentTypekkO [
.kk[ \
ToStringkk\ d
(kkd e
)kke f
&&ll# %
xll& '
.ll' (

DocSectionll( 2
==ll3 5
documentTypell6 B
.llB C
ToStringllC K
(llK L
)llL M
&&llN P
xllQ R
.llR S
ProcessllS Z
==ll[ ]
$strll^ q
,llq r
tokenlls x
)llx y
.lly z
ConfigureAwait	llz à
(
llà â
false
llâ é
)
llé è
;
llè ê
ifnn 
(nn 
isAlreadyExistnn 
!=nn !
nullnn" &
)nn& '
{oo 
stringpp 

folderpathpp !
=pp" #
FileTypeExtensionpp$ 5
.pp5 6
GetArchiveFilePathpp6 H
(ppH I
documentTypeppI U
,ppU V
	configureppW `
)pp` a
;ppa b
stringqq 
archivedPathqq #
=qq$ %
$"qq& (
{qq( )

folderpathqq* 4
}qq5 6
$strqq6 8
{qq8 9
isAlreadyExistqq9 G
.qqG H
NameqqH L
}qqL M
"qqM N
;qqN O
tryrr 
{ss 
iftt 
(tt 
!tt 
	Directorytt "
.tt" #
Existstt# )
(tt) *

folderpathtt* 4
)tt4 5
)tt5 6
	Directoryuu !
.uu! "
CreateDirectoryuu" 1
(uu1 2

folderpathuu2 <
)uu< =
;uu= >
Filevv 
.vv 
Movevv 
(vv 
isAlreadyExistvv ,
.vv, -
FilePathvv- 5
,vv5 6
archivedPathvv7 C
)vvC D
;vvD E
}ww 
finallyxx 
{yy 
isAlreadyExistzz "
.zz" #
IsActivezz# +
=zz, -
falsezz. 3
;zz3 4
isAlreadyExist{{ "
.{{" #
	IsDeleted{{# ,
={{- .
true{{/ 3
;{{3 4
isAlreadyExist|| "
.||" #

ModifiedBy||# -
=||. /
	_userInfo||0 9
.||9 :
UserId||: @
;||@ A
isAlreadyExist}} "
.}}" #
ModifiedDate}}# /
=}}0 1
DateTime}}2 :
.}}: ;
UtcNow}}; A
;}}A B
await 
_documentRepository -
.- .
UpdateAsync. 9
(9 :
isAlreadyExist: H
,H I
tokenJ O
)O P
.P Q
ConfigureAwaitQ _
(_ `
false` e
)e f
;f g
}
ÄÄ 
}
ÅÅ 
string
ÖÖ 
filePath
ÖÖ 
=
ÖÖ 
FileTypeExtension
ÖÖ /
.
ÖÖ/ 0
GetFilePath
ÖÖ0 ;
(
ÖÖ; <
documentType
ÖÖ< H
,
ÖÖH I
	configure
ÖÖJ S
)
ÖÖS T
;
ÖÖT U
string
áá 
fileName
áá 
=
áá 
FileTypeExtension
áá /
.
áá/ 0
GetFileName
áá0 ;
(
áá; <
documentType
áá< H
,
ááH I
enqId
ááJ O
)
ááO P
;
ááP Q
string
ââ 
filepath
ââ 
=
ââ 
$"
ââ  
{
ââ  !
filePath
ââ! )
}
ââ) *
$str
ââ* ,
{
ââ, -
fileName
ââ- 5
}
ââ5 6
$str
ââ6 7
{
ââ7 8
	fileTypes
ââ8 A
.
ââA B
ToString
ââB J
(
ââJ K
)
ââK L
}
ââL M
"
ââM N
;
ââN O
var
ãã 
documentData
ãã 
=
ãã 
new
ãã "
TblEnqDocument
ãã# 1
(
ãã1 2
)
ãã2 3
{
åå 
	EnquiryId
éé 
=
éé 
enqId
éé !
,
éé! "
Description
èè 
=
èè 
documentType
èè *
.
èè* +
ToString
èè+ 3
(
èè3 4
)
èè4 5
,
èè5 6
Name
êê 
=
êê 
$"
êê 
{
êê 
fileName
êê "
}
êê" #
$str
êê# $
{
êê$ %
	fileTypes
êê% .
.
êê. /
ToString
êê/ 7
(
êê7 8
)
êê8 9
}
êê9 :
"
êê: ;
,
êê; <
FilePath
ëë 
=
ëë 
filepath
ëë #
,
ëë# $

DocSection
íí 
=
íí 
documentType
íí )
.
íí) *
ToString
íí* 2
(
íí2 3
)
íí3 4
,
íí4 5
Process
ìì 
=
ìì 
$str
ìì -
,
ìì- .
FileType
îî 
=
îî 
	fileTypes
îî $
.
îî$ %
ToString
îî% -
(
îî- .
)
îî. /
,
îî/ 0
UniqueId
ïï 
=
ïï 
Guid
ïï 
.
ïï  
NewGuid
ïï  '
(
ïï' (
)
ïï( )
.
ïï) *
ToString
ïï* 2
(
ïï2 3
)
ïï3 4
,
ïï4 5
IsActive
ññ 
=
ññ 
true
ññ 
,
ññ  
	IsDeleted
óó 
=
óó 
false
óó !
,
óó! "
CreatedDate
òò 
=
òò 
DateTime
òò &
.
òò& '
UtcNow
òò' -
,
òò- .
	CreatedBy
ôô 
=
ôô 
	_userInfo
ôô %
.
ôô% &
UserId
ôô& ,
}
öö 
;
öö 
var
úú 
data
úú 
=
úú 
await
úú !
_documentRepository
úú 0
.
úú0 1
AddAsync
úú1 9
(
úú9 :
documentData
úú: F
,
úúF G
token
úúH M
)
úúM N
.
úúN O
ConfigureAwait
úúO ]
(
úú] ^
false
úú^ c
)
úúc d
;
úúd e
await
ùù 
_work
ùù 
.
ùù 
CommitAsync
ùù #
(
ùù# $
token
ùù$ )
)
ùù) *
.
ùù* +
ConfigureAwait
ùù+ 9
(
ùù9 :
false
ùù: ?
)
ùù? @
;
ùù@ A
var
üü 
	byteArray
üü 
=
üü 
FileSecurity
üü (
.
üü( )
DecryptByteArray
üü) 9
(
üü9 :
bytes
üü: ?
,
üü? @
$str
üüA K
)
üüK L
;
üüL M
var
°° 
result
°° 
=
°° 
await
°° 
FileSecurity
°° +
.
°°+ ,
SaveBytesToFile
°°, ;
(
°°; <
filepath
°°< D
,
°°D E
	byteArray
°°F O
)
°°O P
;
°°P Q
if
££ 
(
££ 
!
££ 
result
££ 
)
££ 
{
§§ 
throw
•• 
new
•• $
FileSecurityExceptions
•• 0
(
••0 1
$str
••1 J
)
••J K
;
••K L
}
¶¶ 
return
ßß 
_mapper
ßß 
.
ßß 
Map
ßß 
<
ßß 
EnqDocumentDTO
ßß -
>
ßß- .
(
ßß. /
data
ßß/ 3
)
ßß3 4
;
ßß4 5
}
©© 	
public
´´ 
async
´´ 
Task
´´ 
<
´´ 
IEnumerable
´´ %
<
´´% &
EnqDocumentDTO
´´& 4
>
´´4 5
>
´´5 6
GetFileListAsync
´´7 G
(
´´G H
int
´´H K
enqId
´´L Q
,
´´Q R
string
´´S Y
process
´´Z a
,
´´a b
DocumentTypeEnum
´´c s
documentType´´t Ä
,´´Ä Å!
CancellationToken´´Ç ì
token´´î ô
)´´ô ö
{
¨¨ 	
var
≠≠ 
data
≠≠ 
=
≠≠ 
await
≠≠ !
_documentRepository
≠≠ 0
.
≠≠0 1#
FindByExpressionAsync
≠≠1 F
(
≠≠F G
x
≠≠G H
=>
≠≠I K
x
≠≠L M
.
≠≠M N
	EnquiryId
≠≠N W
==
≠≠X Z
enqId
≠≠[ `
&&
ÆÆD F
x
ÆÆG H
.
ÆÆH I
Process
ÆÆI P
==
ÆÆQ S
process
ÆÆT [
&&
ØØD F
x
ØØG H
.
ØØH I

DocSection
ØØI S
==
ØØT V
documentType
ØØW c
.
ØØc d
ToString
ØØd l
(
ØØl m
)
ØØm n
&&
∞∞D F
x
∞∞G H
.
∞∞H I
IsActive
∞∞I Q
==
∞∞R T
true
∞∞U Y
&&
±±D F
x
±±G H
.
±±H I
	IsDeleted
±±I R
==
±±S U
false
±±V [
,
±±[ \
token
±±] b
)
±±b c
.
±±c d
ConfigureAwait
±±d r
(
±±r s
false
±±s x
)
±±x y
;
±±y z
return
≥≥ 
_mapper
≥≥ 
.
≥≥ 
Map
≥≥ 
<
≥≥ 
IEnumerable
≥≥ *
<
≥≥* +
EnqDocumentDTO
≥≥+ 9
>
≥≥9 :
>
≥≥: ;
(
≥≥; <
data
≥≥< @
)
≥≥@ A
;
≥≥A B
}
µµ 	
}
∂∂ 
}∑∑ ˘T
`D:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\AuditModule\AuditService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @
AuditModule@ K
{ 
public 

class 
AuditService 
: 
IAuditService  -
{ 
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IEntityRepository *
<* +
TblIdmAuditDet+ 9
>9 :
_idmAuditRepository; N
;N O
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
public 
AuditService 
( 
IUnitOfWork (
work) -
,- .
IMapper #
mapper$ *
,* +
IEntityRepository, =
<= >
TblIdmAuditDet> L
>L M
idmAuditRepositoryN `
,` a
UserInfob j
userInfok s
)s t
{   	
_work"" 
="" 
work"" 
;"" 
_mapper## 
=## 
mapper## 
;## 
_idmAuditRepository$$ 
=$$  !
idmAuditRepository$$" 4
;$$4 5
	_userInfo%% 
=%% 
userInfo%%  
;%%  !
}&& 	
public** 
async** 
Task** 
<** 
IEnumerable** %
<**% &
IdmAuditDetailsDTO**& 8
>**8 9
>**9 :)
GetAllAuditClearanceListAsync**; X
(**X Y
long**Y ]
accountNumber**^ k
,**k l
CancellationToken**m ~
token	** Ñ
)
**Ñ Ö
{++ 	
var,, 
data,, 
=,, 
await,, 
_idmAuditRepository,, 0
.,,0 1)
FindByMatchingPropertiesAsync,,1 N
(,,N O
token,,O T
,,,T U
x,,V W
=>,,X Z
x,,[ \
.,,\ ]
LoanAcc,,] d
==,,e g
accountNumber,,h u
&&,,v x
x,,y z
.,,z {
IsActive	,,{ É
==
,,Ñ Ü
true
,,á ã
&&
,,å é
x
,,è ê
.
,,ê ë
	IsDeleted
,,ë ö
==
,,õ ù
false
,,û £
)
,,£ §
.
,,§ •
ConfigureAwait
,,• ≥
(
,,≥ ¥
false
,,¥ π
)
,,π ∫
;
,,∫ ª
return-- 
_mapper-- 
.-- 
Map-- 
<-- 
List-- #
<--# $
IdmAuditDetailsDTO--$ 6
>--6 7
>--7 8
(--8 9
data--9 =
)--= >
;--> ?
}.. 	
public00 
async00 
Task00 
<00 
bool00 
>00 '
UpdateAuditClearanceDetails00  ;
(00; <
IdmAuditDetailsDTO00< N
AuditDTO00O W
,00W X
CancellationToken00Y j
token00k p
)00p q
{11 	
var22 
currentDetails22 
=22  
await22! &
_idmAuditRepository22' :
.22: ;+
FirstOrDefaultByExpressionAsync22; Z
(22Z [
x22[ \
=>22] _
x22` a
.22a b

IdmAuditId22b l
==22m o
AuditDTO22p x
.22x y

IdmAuditId	22y É
,
22É Ñ
token
22Ö ä
)
22ä ã
;
22ã å
if44 
(44 
currentDetails44 
==44 !
null44" &
)44& '
throw44( -
new44. 1%
InvalidOperationException442 K
(44K L
)44L M
;44M N
else66 
{77 
currentDetails88 
.88 
	IsDeleted88 (
=88) *
true88+ /
;88/ 0
currentDetails99 
.99 
IsActive99 '
=99( )
false99* /
;99/ 0
currentDetails:: 
.:: 

ModifiedBy:: )
=::* +
	_userInfo::, 5
.::5 6
Name::6 :
;::: ;
currentDetails;; 
.;; 
ModifiedDate;; +
=;;, -
DateTime;;. 6
.;;6 7
UtcNow;;7 =
;;;= >
}<< 
await== 
_idmAuditRepository== %
.==% &
UpdateAsync==& 1
(==1 2
currentDetails==2 @
,==@ A
token==B G
)==G H
.==H I
ConfigureAwait==I W
(==W X
false==X ]
)==] ^
;==^ _
var@@ 
basicDetails@@ 
=@@ 
_mapper@@ &
.@@& '
Map@@' *
<@@* +
TblIdmAuditDet@@+ 9
>@@9 :
(@@: ;
AuditDTO@@; C
)@@C D
;@@D E
basicDetailsAA 
.AA 

IdmAuditIdAA #
=AA$ %
$numAA& '
;AA' (
basicDetailsBB 
.BB 
IsActiveBB !
=BB" #
trueBB$ (
;BB( )
basicDetailsCC 
.CC 
	IsDeletedCC "
=CC# $
falseCC% *
;CC* +
basicDetailsDD 
.DD 
CreateByDD !
=DD" #
	_userInfoDD$ -
.DD- .
NameDD. 2
;DD2 3
basicDetailsEE 
.EE 

ModifiedByEE #
=EE$ %
	_userInfoEE& /
.EE/ 0
NameEE0 4
;EE4 5
basicDetailsFF 
.FF 
CreatedDateFF $
=FF% &
DateTimeFF' /
.FF/ 0
UtcNowFF0 6
;FF6 7
basicDetailsGG 
.GG 
ModifiedDateGG %
=GG& '
DateTimeGG( 0
.GG0 1
UtcNowGG1 7
;GG7 8
varII 
responseII 
=II 
awaitII  
_idmAuditRepositoryII! 4
.II4 5
AddAsyncII5 =
(II= >
basicDetailsII> J
,IIJ K
tokenIIL Q
)IIQ R
.IIR S
ConfigureAwaitIIS a
(IIa b
falseIIb g
)IIg h
;IIh i
awaitJJ 
_workJJ 
.JJ 
CommitAsyncJJ #
(JJ# $
tokenJJ$ )
)JJ) *
.JJ* +
ConfigureAwaitJJ+ 9
(JJ9 :
falseJJ: ?
)JJ? @
;JJ@ A
ifKK 
(KK 
responseKK 
!=KK 
nullKK  
)KK  !
{LL 
returnMM 
trueMM 
;MM 
}NN 
elseOO 
{PP 
returnQQ 
falseQQ 
;QQ 
}RR 
}SS 	
publicTT 
asyncTT 
TaskTT 
<TT 
boolTT 
>TT '
CreateAuditClearanceDetailsTT  ;
(TT; <
IdmAuditDetailsDTOTT< N
AuditDTOTTO W
,TTW X
CancellationTokenTTY j
tokenTTk p
)TTp q
{UU 	
varVV 
basicDetailsVV 
=VV 
_mapperVV &
.VV& '
MapVV' *
<VV* +
TblIdmAuditDetVV+ 9
>VV9 :
(VV: ;
AuditDTOVV; C
)VVC D
;VVD E
basicDetailsXX 
.XX 
IsActiveXX !
=XX" #
trueXX$ (
;XX( )
basicDetailsYY 
.YY 
	IsDeletedYY "
=YY# $
falseYY% *
;YY* +
basicDetailsZZ 
.ZZ 
CreateByZZ !
=ZZ" #
	_userInfoZZ$ -
.ZZ- .
NameZZ. 2
;ZZ2 3
basicDetails[[ 
.[[ 
CreatedDate[[ $
=[[% &
DateTime[[' /
.[[/ 0
UtcNow[[0 6
;[[6 7
var]] 
response]] 
=]] 
await]]  
_idmAuditRepository]]! 4
.]]4 5
AddAsync]]5 =
(]]= >
basicDetails]]> J
,]]J K
token]]L Q
)]]Q R
.]]R S
ConfigureAwait]]S a
(]]a b
false]]b g
)]]g h
;]]h i
await^^ 
_work^^ 
.^^ 
CommitAsync^^ #
(^^# $
token^^$ )
)^^) *
.^^* +
ConfigureAwait^^+ 9
(^^9 :
false^^: ?
)^^? @
;^^@ A
if__ 
(__ 
response__ 
!=__ 
null__  
)__  !
{`` 
returnaa 
trueaa 
;aa 
}bb 
elsecc 
{dd 
returnee 
falseee 
;ee 
}ff 
}gg 	
publichh 
asynchh 
Taskhh 
<hh 
boolhh 
>hh '
DeleteAuditClearanceDetailshh  ;
(hh; <
IdmAuditDetailsDTOhh< N
AuditDTOhhO W
,hhW X
CancellationTokenhhY j
tokenhhk p
)hhp q
{ii 	
varjj 
basicDetailsjj 
=jj 
_mapperjj &
.jj& '
Mapjj' *
<jj* +
TblIdmAuditDetjj+ 9
>jj9 :
(jj: ;
AuditDTOjj; C
)jjC D
;jjD E
basicDetailskk 
.kk 
IsActivekk !
=kk" #
falsekk$ )
;kk) *
basicDetailsll 
.ll 
ModifiedDatell %
=ll& '
DateTimell( 0
.ll0 1
UtcNowll1 7
;ll7 8
basicDetailsmm 
.mm 

ModifiedBymm #
=mm$ %
	_userInfomm& /
.mm/ 0
Namemm0 4
;mm4 5
basicDetailsnn 
.nn 
	IsDeletednn "
=nn# $
truenn% )
;nn) *
varoo 
responseoo 
=oo 
awaitoo  
_idmAuditRepositoryoo! 4
.oo4 5
UpdateAsyncoo5 @
(oo@ A
basicDetailsooA M
,ooM N
tokenooO T
)ooT U
.ooU V
ConfigureAwaitooV d
(ood e
falseooe j
)ooj k
;ook l
awaitpp 
_workpp 
.pp 
CommitAsyncpp #
(pp# $
tokenpp$ )
)pp) *
.pp* +
ConfigureAwaitpp+ 9
(pp9 :
falsepp: ?
)pp? @
;pp@ A
ifqq 
(qq 
responseqq 
!=qq 
nullqq  
)qq  !
{rr 
returnss 
truess 
;ss 
}tt 
elseuu 
{vv 
returnww 
falseww 
;ww 
}xx 
}yy 	
}}} 
}~~ ‹À
ÉD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\CreationOfDisbursmentProposal\CreationOfDisbursmentProposal.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @)
CreationOfDisbursmentProposal@ ]
{ 
public 

class )
CreationOfDisbursmentProposal .
:/ 01
%ICreationOfDisbursmentProposalService1 V
{ 
private 
readonly 
IEntityRepository *
<* +

IdmDsbdets+ 5
>5 6.
"_RecomDisbursmentDetailsRepository7 Y
;Y Z
private 
readonly 
IEntityRepository *
<* +
TblAllcCdTab+ 7
>7 8'
_AllocationDetailRepository9 T
;T U
private 
readonly 
IEntityRepository *
<* +
TblIdmReleDetls+ :
>: ;4
(_RecomDisbursmentReleaseDetailRepository< d
;d e
private 
readonly 
IEntityRepository *
<* +
TblIdmBenfDet+ 8
>8 9)
_beneficiaryDetailsRepository: W
;W X
private 
readonly 
IEntityRepository *
<* +
TblIdmDisbProp+ 9
>9 :"
_dispursmentRepository; Q
;Q R
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
public )
CreationOfDisbursmentProposal ,
(, -
IEntityRepository- >
<> ?

IdmDsbdets? I
>I J&
RecomDisbursmentRepositoryK e
,e f
IEntityRepositoryf w
<w x
TblAllcCdTab	x Ñ
>
Ñ Ö(
allocationDetailRepository
Ü †
,
† °
IEntityRepository
¢ ≥
<
≥ ¥
TblIdmDisbProp
¥ ¬
>
¬ √#
dispursmentRepository
ƒ Ÿ
, 
IEntityRepository 
<  
TblIdmReleDetls  /
>/ 03
'recomDisbursmentReleaseDetailRepository1 X
,X Y
IUnitOfWorkZ e
workf j
,j k
IMapperk r
mappers y
,y z
UserInfo	{ É
userInfo
Ñ å
,
å ç
IEntityRepository
é ü
<
ü †
TblIdmBenfDet
† ≠
>
≠ Æ*
beneficiaryDetailsRepository
Ø À
)
À Ã
{ 	.
"_RecomDisbursmentDetailsRepository   .
=  / 0&
RecomDisbursmentRepository  1 K
;  K L'
_AllocationDetailRepository!! '
=!!( )&
allocationDetailRepository!!* D
;!!D E4
(_RecomDisbursmentReleaseDetailRepository"" 4
=""5 63
'recomDisbursmentReleaseDetailRepository""7 ^
;""^ _)
_beneficiaryDetailsRepository## )
=##* +(
beneficiaryDetailsRepository##, H
;##H I"
_dispursmentRepository$$ "
=$$# $!
dispursmentRepository$$% :
;$$: ;
_work%% 
=%% 
work%% 
;%% 
_mapper&& 
=&& 
mapper&& 
;&& 
	_userInfo'' 
='' 
userInfo''  
;''  !
}(( 	
public,, 
async,, 
Task,, 
<,, 
IEnumerable,, %
<,,% &
IdmDsbdetsDTO,,& 3
>,,3 4
>,,4 5*
GetAllRecomDisbursementDetails,,6 T
(,,T U
long,,U Y
accountNumber,,Z g
,,,g h
CancellationToken,,i z
token	,,{ Ä
)
,,Ä Å
{-- 	
var.. 
data.. 
=.. 
await.. .
"_RecomDisbursmentDetailsRepository.. ?
...? @)
FindByMatchingPropertiesAsync..@ ]
(..] ^
token..^ c
,..c d
x..e f
=>..g i
x..j k
...k l
LoanAcc..l s
==..t v
accountNumber	..w Ñ
&&
..Ö á
x
..à â
.
..â ä
IsActive
..ä í
==
..ì ï
true
..ñ ö
&&
..õ ù
x
..û ü
.
..ü †
	IsDeleted
..† ©
==
..™ ¨
false
..≠ ≤
)
..≤ ≥
.
..≥ ¥
ConfigureAwait
..¥ ¬
(
..¬ √
false
..√ »
)
..» …
;
..…  
return// 
_mapper// 
.// 
Map// 
<// 
List// #
<//# $
IdmDsbdetsDTO//$ 1
>//1 2
>//2 3
(//3 4
data//4 8
)//8 9
;//9 :
}00 	
public11 
async11 
Task11 
<11 
IEnumerable11 %
<11% &
TblAllcCdTabDTO11& 5
>115 6
>116 7$
GetAllocationCodeDetails118 P
(11P Q
CancellationToken11Q b
token11c h
)11h i
{22 	
var33 
data33 
=33 
await33 '
_AllocationDetailRepository33 8
.338 9)
FindByMatchingPropertiesAsync339 V
(33V W
token33W \
,33\ ]
x33^ _
=>33` b
x33c d
.33d e
IsActive33e m
==33n p
true33q u
&&33v x
x33y z
.33z {
	IsDeleted	33{ Ñ
==
33Ö á
false
33à ç
)
33ç é
.
33é è
ConfigureAwait
33è ù
(
33ù û
false
33û £
)
33£ §
;
33§ •
return44 
_mapper44 
.44 
Map44 
<44 
List44 #
<44# $
TblAllcCdTabDTO44$ 3
>443 4
>444 5
(445 6
data446 :
)44: ;
;44; <
}55 	
public77 
async77 
Task77 
<77 
IEnumerable77 %
<77% &
TblIdmReleDetlsDTO77& 8
>778 9
>779 :.
"GetRecomDisbursementReleaseDetails77; ]
(77] ^
CancellationToken77^ o
token77p u
)77u v
{88 	
var99 
data99 
=99 
await99 4
(_RecomDisbursmentReleaseDetailRepository99 E
.99E F)
FindByMatchingPropertiesAsync99F c
(99c d
token99d i
,99i j
x99k l
=>99m o
x99p q
.99q r
IsActive99r z
==99{ }
true	99~ Ç
&&
99É Ö
x
99Ü á
.
99á à
	IsDeleted
99à ë
==
99í î
false
99ï ö
)
99ö õ
.
99õ ú
ConfigureAwait
99ú ™
(
99™ ´
false
99´ ∞
)
99∞ ±
;
99± ≤
return:: 
_mapper:: 
.:: 
Map:: 
<:: 
List:: #
<::# $
TblIdmReleDetlsDTO::$ 6
>::6 7
>::7 8
(::8 9
data::9 =
)::= >
;::> ?
};; 	
public== 
async== 
Task== 
<== 
IdmDsbdetsDTO== '
>==' ()
UpdateRecomDisbursementDetail==) F
(==F G
IdmDsbdetsDTO==G T
idmDsbdetsDTO==U b
,==b c
CancellationToken==d u
token==v {
)=={ |
{>> 	
var?? 
currentDetails?? 
=??  
await??! &.
"_RecomDisbursmentDetailsRepository??' I
.??I J+
FirstOrDefaultByExpressionAsync??J i
(??i j
x??j k
=>??l n
x??o p
.??p q
	DsbdetsID??q z
==??{ }
idmDsbdetsDTO	??~ ã
.
??ã å
	DsbdetsID
??å ï
,
??ï ñ
token
??ó ú
)
??ú ù
;
??ù û
currentDetails@@ 
.@@ 
	IsDeleted@@ $
=@@% &
true@@' +
;@@+ ,
currentDetailsAA 
.AA 
IsActiveAA #
=AA$ %
falseAA& +
;AA+ ,
awaitCC .
"_RecomDisbursmentDetailsRepositoryCC 4
.CC4 5
UpdateAsyncCC5 @
(CC@ A
currentDetailsCCA O
,CCO P
tokenCCQ V
)CCV W
.CCW X
ConfigureAwaitCCX f
(CCf g
falseCCg l
)CCl m
;CCm n
varEE 
basicDetailsEE 
=EE 
_mapperEE &
.EE& '
MapEE' *
<EE* +

IdmDsbdetsEE+ 5
>EE5 6
(EE6 7
idmDsbdetsDTOEE7 D
)EED E
;EEE F
basicDetailsFF 
.FF 
	DsbdetsIDFF "
=FF# $
$numFF% &
;FF& '
basicDetailsGG 
.GG 
IsActiveGG !
=GG" #
trueGG$ (
;GG( )
basicDetailsHH 
.HH 
	IsDeletedHH "
=HH# $
falseHH% *
;HH* +
basicDetailsII 
.II 
CreatedDateII $
=II% &
DateTimeII' /
.II/ 0
UtcNowII0 6
;II6 7
varKK 
responseKK 
=KK 
awaitKK  .
"_RecomDisbursmentDetailsRepositoryKK! C
.KKC D
AddAsyncKKD L
(KKL M
basicDetailsKKM Y
,KKY Z
tokenKK[ `
)KK` a
.KKa b
ConfigureAwaitKKb p
(KKp q
falseKKq v
)KKv w
;KKw x
awaitLL 
_workLL 
.LL 
CommitAsyncLL #
(LL# $
tokenLL$ )
)LL) *
.LL* +
ConfigureAwaitLL+ 9
(LL9 :
falseLL: ?
)LL? @
;LL@ A
returnMM 
_mapperMM 
.MM 
MapMM 
<MM 
IdmDsbdetsDTOMM ,
>MM, -
(MM- .
responseMM. 6
)MM6 7
;MM7 8
}NN 	
publicWW 
asyncWW 
TaskWW 
<WW 
IEnumerableWW %
<WW% &
TblIdmReleDetlsDTOWW& 8
>WW8 9
>WW9 :!
GetAllProposalDetailsWW; P
(WWP Q
longWWQ U
accountNumberWWV c
,WWc d
CancellationTokenWWe v
tokenWWw |
)WW| }
{XX 	
varYY 
dataYY 
=YY 
awaitYY 4
(_RecomDisbursmentReleaseDetailRepositoryYY E
.YYE F)
FindByMatchingPropertiesAsyncYYF c
(YYc d
tokenYYd i
,YYi j
xYYk l
=>YYm o
xYYp q
.YYq r
LoanAccYYr y
==YYz |
accountNumber	YY} ä
&&
YYã ç
x
YYé è
.
YYè ê
IsActive
YYê ò
==
YYô õ
true
YYú †
&&
YY° £
x
YY§ •
.
YY• ¶
	IsDeleted
YY¶ Ø
==
YY∞ ≤
false
YY≥ ∏
,
YY∏ π
DisbPropZZ 
=>ZZ 
DisbPropZZ #
.ZZ# $
TblIdmDisbPropZZ$ 2
)[[ 
.[[ 
ConfigureAwait[[  
([[  !
false[[! &
)[[& '
;[[' (
return\\ 
_mapper\\ 
.\\ 
Map\\ 
<\\ 
List\\ #
<\\# $
TblIdmReleDetlsDTO\\$ 6
>\\6 7
>\\7 8
(\\8 9
data\\9 =
)\\= >
;\\> ?
}]] 	
public__ 
async__ 
Task__ 
<__ 
TblIdmReleDetlsDTO__ ,
>__, - 
CreateProposalDetail__. B
(__B C
TblIdmReleDetlsDTO__C U
tblIdmReleDetlsDTO__V h
,__h i
CancellationToken__j {
token	__| Å
)
__Å Ç
{`` 	
varaa 
basicDetailsaa 
=aa 
_mapperaa &
.aa& '
Mapaa' *
<aa* +
TblIdmReleDetlsaa+ :
>aa: ;
(aa; <
tblIdmReleDetlsDTOaa< N
)aaN O
;aaO P
TblIdmDisbPropcc 
disbpropcc #
=cc$ %
basicDetailscc& 2
.cc2 3
TblIdmDisbPropcc3 A
;ccA B
disbpropdd 
.dd 
IsActivedd 
=dd 
truedd  $
;dd$ %
disbpropee 
.ee 
	IsDeletedee 
=ee  
falseee! &
;ee& '
disbpropff 
.ff 
LoanAccff 
=ff 
basicDetailsff +
.ff+ ,
LoanAccff, 3
;ff3 4
disbpropgg 
.gg 
LoanSubgg 
=gg 
basicDetailsgg +
.gg+ ,
LoanSubgg, 3
;gg3 4
disbprophh 
.hh 
OffcCdhh 
=hh 
basicDetailshh *
.hh* +
OffcCdhh+ 1
;hh1 2
disbpropii 
.ii 
	CreatedByii 
=ii  
	_userInfoii! *
.ii* +
Nameii+ /
;ii/ 0
disbpropjj 
.jj 
CreatedDatejj  
=jj! "
DateTimejj# +
.jj+ ,
UtcNowjj, 2
;jj2 3
varkk 
proposalresponsekk  
=kk! "
awaitkk# ("
_dispursmentRepositorykk) ?
.kk? @
AddAsynckk@ H
(kkH I
disbpropkkI Q
,kkQ R
tokenkkR W
)kkW X
.kkX Y
ConfigureAwaitkkY g
(kkg h
falsekkh m
)kkm n
;kkn o
longll 
Releidll 
=ll 
proposalresponsell *
.ll* +
PropIdll+ 1
;ll1 2
basicDetailsoo 
.oo 
ReleIdoo 
=oo  !
$numoo" #
;oo# $
basicDetailspp 
.pp 

PropNumberpp #
=pp$ %
Releidpp& ,
;pp, -
basicDetailsqq 
.qq 
IsActiveqq !
=qq" #
trueqq$ (
;qq( )
basicDetailsrr 
.rr 
	IsDeletedrr "
=rr# $
falserr% *
;rr* +
basicDetailsss 
.ss 
	CreatedByss "
=ss# $
	_userInfoss% .
.ss. /
Namess/ 3
;ss3 4
basicDetailstt 
.tt 
CreatedDatett $
=tt% &
DateTimett' /
.tt/ 0
UtcNowtt0 6
;tt6 7
varuu 
responseuu 
=uu 
awaituu  4
(_RecomDisbursmentReleaseDetailRepositoryuu! I
.uuI J
AddAsyncuuJ R
(uuR S
basicDetailsuuS _
,uu_ `
tokenuu` e
)uue f
.uuf g
ConfigureAwaituug u
(uuu v
falseuuv {
)uu{ |
;uu| }
awaitvv 
_workvv 
.vv 
CommitAsyncvv #
(vv# $
tokenvv$ )
)vv) *
.vv* +
ConfigureAwaitvv+ 9
(vv9 :
falsevv: ?
)vv? @
;vv@ A
returnww 
_mapperww 
.ww 
Mapww 
<ww 
TblIdmReleDetlsDTOww 1
>ww1 2
(ww2 3
responseww3 ;
)ww; <
;ww< =
}xx 	
publiczz 
asynczz 
Taskzz 
<zz 
TblIdmReleDetlsDTOzz ,
>zz, - 
UpdateProposalDetailzz. B
(zzB C
TblIdmReleDetlsDTOzzC U
tblIdmReleDetlsDTOzzV h
,zzh i
CancellationTokenzzj {
token	zz| Å
)
zzÅ Ç
{{{ 	
var|| 
currentDetails|| 
=||  
await||! &4
(_RecomDisbursmentReleaseDetailRepository||' O
.||O P+
FirstOrDefaultByExpressionAsync||P o
(||o p
x||p q
=>||r t
x||u v
.||v w
ReleId||w }
==	||~ Ä 
tblIdmReleDetlsDTO
||Å ì
.
||ì î
ReleId
||î ö
,
||ö õ
token
||ú °
)
||° ¢
;
||¢ £
currentDetails}} 
.}} 
	IsDeleted}} $
=}}% &
true}}' +
;}}+ ,
currentDetails~~ 
.~~ 
IsActive~~ #
=~~$ %
false~~& +
;~~+ ,
currentDetails 
. 

ModifiedBy %
=& '
	_userInfo( 1
.1 2
Name2 6
;6 7
currentDetails
ÄÄ 
.
ÄÄ 
ModifiedDate
ÄÄ '
=
ÄÄ( )
DateTime
ÄÄ* 2
.
ÄÄ2 3
UtcNow
ÄÄ3 9
;
ÄÄ9 :
await
ÅÅ 6
(_RecomDisbursmentReleaseDetailRepository
ÅÅ :
.
ÅÅ: ;
UpdateAsync
ÅÅ; F
(
ÅÅF G
currentDetails
ÅÅG U
,
ÅÅU V
token
ÅÅW \
)
ÅÅ\ ]
.
ÅÅ] ^
ConfigureAwait
ÅÅ^ l
(
ÅÅl m
false
ÅÅm r
)
ÅÅr s
;
ÅÅs t
var
ÑÑ 
basicDetails
ÑÑ 
=
ÑÑ 
_mapper
ÑÑ &
.
ÑÑ& '
Map
ÑÑ' *
<
ÑÑ* +
TblIdmReleDetls
ÑÑ+ :
>
ÑÑ: ;
(
ÑÑ; < 
tblIdmReleDetlsDTO
ÑÑ< N
)
ÑÑN O
;
ÑÑO P
basicDetails
ÖÖ 
.
ÖÖ 
ReleId
ÖÖ 
=
ÖÖ  !
$num
ÖÖ" #
;
ÖÖ# $
basicDetails
ÜÜ 
.
ÜÜ 
IsActive
ÜÜ !
=
ÜÜ" #
true
ÜÜ$ (
;
ÜÜ( )
basicDetails
áá 
.
áá 
	IsDeleted
áá "
=
áá# $
false
áá% *
;
áá* +
basicDetails
àà 
.
àà 
	CreatedBy
àà "
=
àà# $
	_userInfo
àà% .
.
àà. /
Name
àà/ 3
;
àà3 4
basicDetails
ââ 
.
ââ 
CreatedDate
ââ $
=
ââ% &
DateTime
ââ' /
.
ââ/ 0
UtcNow
ââ0 6
;
ââ6 7
var
ãã 
response
ãã 
=
ãã 
await
ãã  6
(_RecomDisbursmentReleaseDetailRepository
ãã! I
.
ããI J
AddAsync
ããJ R
(
ããR S
basicDetails
ããS _
,
ãã_ `
token
ããa f
)
ããf g
.
ããg h
ConfigureAwait
ããh v
(
ããv w
false
ããw |
)
ãã| }
;
ãã} ~
await
åå 
_work
åå 
.
åå 
CommitAsync
åå #
(
åå# $
token
åå$ )
)
åå) *
.
åå* +
ConfigureAwait
åå+ 9
(
åå9 :
false
åå: ?
)
åå? @
;
åå@ A
return
çç 
_mapper
çç 
.
çç 
Map
çç 
<
çç  
TblIdmReleDetlsDTO
çç 1
>
çç1 2
(
çç2 3
response
çç3 ;
)
çç; <
;
çç< =
}
éé 	
public
êê 
async
êê 
Task
êê 
<
êê  
TblIdmReleDetlsDTO
êê ,
>
êê, -"
DeleteProposalDetail
êê. B
(
êêB C 
TblIdmReleDetlsDTO
êêC U 
tblIdmReleDetlsDTO
êêV h
,
êêh i
CancellationToken
êêj {
tokenêê| Å
)êêÅ Ç
{
ëë 	
var
íí 
basicDetails
íí 
=
íí 
_mapper
íí &
.
íí& '
Map
íí' *
<
íí* +
TblIdmReleDetls
íí+ :
>
íí: ;
(
íí; < 
tblIdmReleDetlsDTO
íí< N
)
ííN O
;
ííO P
basicDetails
ìì 
.
ìì 
IsActive
ìì !
=
ìì" #
false
ìì$ )
;
ìì) *
basicDetails
îî 
.
îî 
	IsDeleted
îî "
=
îî# $
true
îî% )
;
îî) *
basicDetails
ïï 
.
ïï 
ModifiedDate
ïï %
=
ïï& '
DateTime
ïï( 0
.
ïï0 1
UtcNow
ïï1 7
;
ïï7 8
basicDetails
ññ 
.
ññ 

ModifiedBy
ññ #
=
ññ$ %
	_userInfo
ññ& /
.
ññ/ 0
Name
ññ0 4
;
ññ4 5
var
óó 
result
óó 
=
óó 
await
óó 6
(_RecomDisbursmentReleaseDetailRepository
óó G
.
óóG H
UpdateAsync
óóH S
(
óóS T
basicDetails
óóT `
,
óó` a
token
óób g
)
óóg h
.
óóh i
ConfigureAwait
óói w
(
óów x
false
óóx }
)
óó} ~
;
óó~ 
await
òò 
_work
òò 
.
òò 
CommitAsync
òò #
(
òò# $
token
òò$ )
)
òò) *
.
òò* +
ConfigureAwait
òò+ 9
(
òò9 :
false
òò: ?
)
òò? @
;
òò@ A
return
ôô 
_mapper
ôô 
.
ôô 
Map
ôô 
<
ôô  
TblIdmReleDetlsDTO
ôô 1
>
ôô1 2
(
ôô2 3
result
ôô3 9
)
ôô9 :
;
ôô: ;
}
öö 	
public
°° 
async
°° 
Task
°° 
<
°° 
IEnumerable
°° %
<
°°% &
TblIdmBenfDetDTO
°°& 6
>
°°6 7
>
°°7 8&
GetAllBeneficiaryDetails
°°9 Q
(
°°Q R
long
°°R V
accountNumber
°°W d
,
°°d e
CancellationToken
°°f w
token
°°x }
)
°°} ~
{
¢¢ 	
var
££ 
benfdet
££ 
=
££ 
await
££ +
_beneficiaryDetailsRepository
££  =
.
££= >+
FindByMatchingPropertiesAsync
££> [
(
££[ \
token
££\ a
,
££a b
x
££c d
=>
££e g
x
££h i
.
££i j
LoanAcc
££j q
==
££r t
accountNumber££u Ç
&&££É Ö
x££Ü á
.££á à
IsActive££à ê
==££ë ì
true££î ò
&&££ô õ
x££ú ù
.££ù û
	IsDeleted££û ß
==££® ™
false££´ ∞
)££∞ ±
.££± ≤
ConfigureAwait££≤ ¿
(££¿ ¡
false££¡ ∆
)££∆ «
;££« »
return
§§ 
_mapper
§§ 
.
§§ 
Map
§§ 
<
§§ 
List
§§ #
<
§§# $
TblIdmBenfDetDTO
§§$ 4
>
§§4 5
>
§§5 6
(
§§6 7
benfdet
§§7 >
)
§§> ?
;
§§? @
}
•• 	
public
ßß 
async
ßß 
Task
ßß 
<
ßß 
TblIdmBenfDetDTO
ßß *
>
ßß* +&
UpdateBeneficiaryDetails
ßß, D
(
ßßD E
TblIdmBenfDetDTO
ßßE U
beneficiaryDet
ßßV d
,
ßßd e
CancellationToken
ßßf w
token
ßßx }
)
ßß} ~
{
®® 	
var
©© 
basicDetails
©© 
=
©© 
_mapper
©© &
.
©©& '
Map
©©' *
<
©©* +
TblIdmBenfDet
©©+ 8
>
©©8 9
(
©©9 :
beneficiaryDet
©©: H
)
©©H I
;
©©I J
var
™™ 
currentDetails
™™ 
=
™™  
await
™™! &+
_beneficiaryDetailsRepository
™™' D
.
™™D E-
FirstOrDefaultByExpressionAsync
™™E d
(
™™d e
x
™™e f
=>
™™g i
x
™™j k
.
™™k l
IsActive
™™l t
==
™™u w
true
™™x |
&&
™™} 
x™™Ä Å
.™™Å Ç
	IsDeleted™™Ç ã
==™™å é
false™™è î
&&™™ï ó
x™™ò ô
.™™ô ö

BenfNumber™™ö §
==™™• ß
beneficiaryDet™™® ∂
.™™∂ ∑

BenfNumber™™∑ ¡
,™™¡ ¬
token™™√ »
)™™» …
;™™…  
if
´´ 
(
´´ 
currentDetails
´´ 
!=
´´ !
null
´´" &
)
´´& '
{
¨¨ 
currentDetails
≠≠ 
.
≠≠ 
	IsDeleted
≠≠ (
=
≠≠) *
true
≠≠+ /
;
≠≠/ 0
currentDetails
ÆÆ 
.
ÆÆ 
IsActive
ÆÆ '
=
ÆÆ( )
false
ÆÆ* /
;
ÆÆ/ 0
await
ØØ +
_beneficiaryDetailsRepository
ØØ 3
.
ØØ3 4
UpdateAsync
ØØ4 ?
(
ØØ? @
currentDetails
ØØ@ N
,
ØØN O
token
ØØP U
)
ØØU V
.
ØØV W
ConfigureAwait
ØØW e
(
ØØe f
false
ØØf k
)
ØØk l
;
ØØl m
}
∞∞ 
basicDetails
≤≤ 
.
≤≤ 
BenfId
≤≤ 
=
≤≤  !
$num
≤≤" #
;
≤≤# $
basicDetails
≥≥ 
.
≥≥ 
IsActive
≥≥ !
=
≥≥" #
true
≥≥$ (
;
≥≥( )
basicDetails
¥¥ 
.
¥¥ 
	IsDeleted
¥¥ "
=
¥¥# $
false
¥¥% *
;
¥¥* +
basicDetails
µµ 
.
µµ 
ModifiedDate
µµ %
=
µµ& '
DateTime
µµ( 0
.
µµ0 1
UtcNow
µµ1 7
;
µµ7 8
var
∑∑ 
response
∑∑ 
=
∑∑ 
await
∑∑  +
_beneficiaryDetailsRepository
∑∑! >
.
∑∑> ?
AddAsync
∑∑? G
(
∑∑G H
basicDetails
∑∑H T
,
∑∑T U
token
∑∑V [
)
∑∑[ \
.
∑∑\ ]
ConfigureAwait
∑∑] k
(
∑∑k l
false
∑∑l q
)
∑∑q r
;
∑∑r s
await
∏∏ 
_work
∏∏ 
.
∏∏ 
CommitAsync
∏∏ #
(
∏∏# $
token
∏∏$ )
)
∏∏) *
.
∏∏* +
ConfigureAwait
∏∏+ 9
(
∏∏9 :
false
∏∏: ?
)
∏∏? @
;
∏∏@ A
return
ππ 
_mapper
ππ 
.
ππ 
Map
ππ 
<
ππ 
TblIdmBenfDetDTO
ππ /
>
ππ/ 0
(
ππ0 1
response
ππ1 9
)
ππ9 :
;
ππ: ;
}
∫∫ 	
}
ºº 
}ΩΩ úµ
ëD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\CreationOfSecurityandAquisitionAsset\CreationOfSecurityandAquisitionAsset.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @0
$CreationOfSecurityandAquisitionAsset@ d
{ 
public 

class 0
$CreationOfSecurityandAquisitionAsset 5
:6 71
%ICreationOfSecurityandAquisitionAsset8 ]
{ 
private 
readonly 
IEntityRepository *
<* +
TblIdmIrLand+ 7
>7 8$
_landacquitionRepository9 Q
;Q R
private 
readonly 
IEntityRepository *
<* +
TblIdmIrPlmc+ 7
>7 8 
_machineryRepository9 M
;M N
private 
readonly 
IEntityRepository *
<* +,
 TblIdmBuildingAcquisitionDetails+ K
>K L&
_buildingDetailsRepositoryM g
;g h
private 
readonly 
IEntityRepository *
<* +
TblIdmIrFurn+ 7
>7 8*
_furnitureAcuisitionRepository9 W
;W X
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
public 0
$CreationOfSecurityandAquisitionAsset 3
(3 4
IEntityRepository4 E
<E F
TblIdmIrLandF R
>R S#
landacquitionRepositoryT k
,k l
IUnitOfWorkm x
worky }
,} ~
IMapper   #
mapper  $ *
,  * +
UserInfo  - 5
userInfo  6 >
,  > ?
IEntityRepository  @ Q
<  Q R
TblIdmIrPlmc  R ^
>  ^ _
machineryRepository  ` s
,  s t
IEntityRepository	  u Ü
<
  Ü á.
 TblIdmBuildingAcquisitionDetails
  á ß
>
  ß ®'
buildingDetailsRepository
  © ¬
,
  ¬ √
IEntityRepository
  ƒ ’
<
  ’ ÷
TblIdmIrFurn
  ÷ ‚
>
  ‚ „+
furnitureAcuisitionRepository
  ‰ Å
)
  Å Ç
{!! 	$
_landacquitionRepository## $
=##% &#
landacquitionRepository##' >
;##> ?*
_furnitureAcuisitionRepository$$ *
=$$+ ,)
furnitureAcuisitionRepository$$- J
;$$J K
_work%% 
=%% 
work%% 
;%% 
_mapper&& 
=&& 
mapper&& 
;&& 
	_userInfo'' 
='' 
userInfo''  
;''  ! 
_machineryRepository((  
=((! "
machineryRepository((# 6
;((6 7&
_buildingDetailsRepository)) &
=))' (%
buildingDetailsRepository))) B
;))B C
}** 	
public00 
async00 
Task00 
<00 
IEnumerable00 %
<00% &
TblIdmIrLandDTO00& 5
>005 6
>006 7:
.GetAllCreationOfSecurityandAquisitionAssetList008 f
(00f g
long00g k
accountNumber00l y
,00y z
CancellationToken	00{ å
token
00ç í
)
00í ì
{11 	
var22 
data22 
=22 
await22 $
_landacquitionRepository22 5
.225 6)
FindByMatchingPropertiesAsync226 S
(22S T
token22T Y
,22Y Z
x22[ \
=>22] _
x22` a
.22a b
LoanAcc22b i
==22j l
accountNumber22m z
&&22{ }
x22~ 
.	22 Ä
IsActive
22Ä à
==
22â ã
true
22å ê
&&
22ë ì
x
22î ï
.
22ï ñ
	IsDeleted
22ñ ü
==
22† ¢
false
22£ ®
)
22® ©
.
22© ™
ConfigureAwait
22™ ∏
(
22∏ π
false
22π æ
)
22æ ø
;
22ø ¿
return33 
_mapper33 
.33 
Map33 
<33 
List33 #
<33# $
TblIdmIrLandDTO33$ 3
>333 4
>334 5
(335 6
data336 :
)33: ;
;33; <
}44 	
public55 
async55 
Task55 
<55 
bool55 
>55 (
UpadteLandAcquisitionDetails55  <
(55< =
TblIdmIrLandDTO55= L
LandDTO55M T
,55T U
CancellationToken55V g
token55h m
)55m n
{66 	
var77 
currentDetails77 
=77  
await77! &$
_landacquitionRepository77' ?
.77? @+
FirstOrDefaultByExpressionAsync77@ _
(77_ `
x77` a
=>77b d
x77e f
.77f g
IrlId77g l
==77m o
LandDTO77p w
.77w x
IrlId77x }
,77} ~
token	77 Ñ
)
77Ñ Ö
;
77Ö Ü
if88 
(88 
currentDetails88 
!=88  
null88! %
)88% &
{99 
currentDetails:: 
.:: 
	IsDeleted:: (
=::) *
true::+ /
;::/ 0
currentDetails;; 
.;; 
IsActive;; '
=;;( )
false;;* /
;;;/ 0
currentDetails<< 
.<< 

ModifiedBy<< )
=<<* +
	_userInfo<<, 5
.<<5 6
Name<<6 :
;<<: ;
currentDetails== 
.== 
ModifiedDate== +
===, -
DateTime==. 6
.==6 7
UtcNow==7 =
;=== >
await>> $
_landacquitionRepository>> .
.>>. /
UpdateAsync>>/ :
(>>: ;
currentDetails>>; I
,>>I J
token>>K P
)>>P Q
.>>Q R
ConfigureAwait>>R `
(>>` a
false>>a f
)>>f g
;>>g h
}?? 
varBB 
basicDetailsBB 
=BB 
_mapperBB &
.BB& '
MapBB' *
<BB* +
TblIdmIrLandBB+ 7
>BB7 8
(BB8 9
LandDTOBB9 @
)BB@ A
;BBA B
basicDetailsCC 
.CC 
IrlIdCC 
=CC  
$numCC! "
;CC" #
basicDetailsDD 
.DD 
IsActiveDD !
=DD" #
trueDD$ (
;DD( )
basicDetailsEE 
.EE 
	IsDeletedEE "
=EE# $
falseEE% *
;EE* +
basicDetailsFF 
.FF 
	CreatedByFF "
=FF# $
	_userInfoFF% .
.FF. /
NameFF/ 3
;FF3 4
basicDetailsGG 
.GG 
CreatedDateGG $
=GG% &
DateTimeGG' /
.GG/ 0
UtcNowGG0 6
;GG6 7
varHH 
responseHH 
=HH 
awaitHH  $
_landacquitionRepositoryHH! 9
.HH9 :
AddAsyncHH: B
(HHB C
basicDetailsHHC O
,HHO P
tokenHHQ V
)HHV W
.HHW X
ConfigureAwaitHHX f
(HHf g
falseHHg l
)HHl m
;HHm n
awaitJJ 
_workJJ 
.JJ 
CommitAsyncJJ #
(JJ# $
tokenJJ$ )
)JJ) *
.JJ* +
ConfigureAwaitJJ+ 9
(JJ9 :
falseJJ: ?
)JJ? @
;JJ@ A
ifKK 
(KK 
responseKK 
!=KK 
nullKK 
)KK  
{LL 
returnMM 
trueMM 
;MM 
}NN 
elseOO 
{PP 
returnQQ 
falseQQ 
;QQ 
}RR 
}SS 	
public\\ 
async\\ 
Task\\ 
<\\ 
IEnumerable\\ %
<\\% &
TblIdmIrFurnDTO\\& 5
>\\5 6
>\\6 7.
"GetFurnitureAcquisitionDetailsList\\8 Z
(\\Z [
long\\[ _
accountNumber\\` m
,\\m n
CancellationToken	\\o Ä
token
\\Å Ü
)
\\Ü á
{]] 	
var^^ 
data^^ 
=^^ 
await^^ *
_furnitureAcuisitionRepository^^ ;
.^^; <)
FindByMatchingPropertiesAsync^^< Y
(^^Y Z
token^^Z _
,^^_ `
x^^a b
=>^^c e
x^^f g
.^^g h
LoanAcc^^h o
==^^p r
accountNumber	^^s Ä
&&
^^Å É
x
^^Ñ Ö
.
^^Ö Ü
IsActive
^^Ü é
==
^^è ë
true
^^í ñ
&&
^^ó ô
x
^^ö õ
.
^^õ ú
	IsDeleted
^^ú •
==
^^¶ ®
false
^^© Æ
)
^^Æ Ø
.
^^Ø ∞
ConfigureAwait
^^∞ æ
(
^^æ ø
false
^^ø ƒ
)
^^ƒ ≈
;
^^≈ ∆
return__ 
_mapper__ 
.__ 
Map__ 
<__ 
List__ #
<__# $
TblIdmIrFurnDTO__$ 3
>__3 4
>__4 5
(__5 6
data__6 :
)__: ;
;__; <
}`` 	
publicbb 
asyncbb 
Taskbb 
<bb 
boolbb 
>bb &
UpdateFurnitureAcquisitionbb  :
(bb: ;
TblIdmIrFurnDTObb; J
FurnitureAcqDTObbK Z
,bbZ [
CancellationTokenbb\ m
tokenbbn s
)bbs t
{cc 	
vardd 
currentDetailsdd 
=dd  
awaitdd! &*
_furnitureAcuisitionRepositorydd' E
.ddE F+
FirstOrDefaultByExpressionAsyncddF e
(dde f
xddf g
=>ddh j
xddk l
.ddl m
IrfIdddm r
==dds u
FurnitureAcqDTO	ddv Ö
.
ddÖ Ü
IrfId
ddÜ ã
,
ddã å
token
ddç í
)
ddí ì
;
ddì î
ifee 
(ee 
currentDetailsee 
!=ee  
nullee! %
)ee% &
{ff 
currentDetailsgg 
.gg 
	IsDeletedgg (
=gg) *
truegg+ /
;gg/ 0
currentDetailshh 
.hh 
IsActivehh '
=hh( )
falsehh* /
;hh/ 0
currentDetailsii 
.ii 

ModifiedByii )
=ii* +
	_userInfoii, 5
.ii5 6
Nameii6 :
;ii: ;
currentDetailsjj 
.jj 
ModifiedDatejj +
=jj, -
DateTimejj. 6
.jj6 7
UtcNowjj7 =
;jj= >
awaitkk *
_furnitureAcuisitionRepositorykk 4
.kk4 5
UpdateAsynckk5 @
(kk@ A
currentDetailskkA O
,kkO P
tokenkkQ V
)kkV W
.kkW X
ConfigureAwaitkkX f
(kkf g
falsekkg l
)kkl m
;kkm n
}ll 
varoo 
FurnitureAcqDetailsoo #
=oo$ %
_mapperoo& -
.oo- .
Mapoo. 1
<oo1 2
TblIdmIrFurnoo2 >
>oo> ?
(oo? @
FurnitureAcqDTOoo@ O
)ooO P
;ooP Q
FurnitureAcqDetailspp 
.pp  
IrfIdpp  %
=pp& '
$numpp( )
;pp) *
FurnitureAcqDetailsqq 
.qq  
IsActiveqq  (
=qq) *
trueqq+ /
;qq/ 0
FurnitureAcqDetailsrr 
.rr  
	IsDeletedrr  )
=rr* +
falserr, 1
;rr1 2
FurnitureAcqDetailsss 
.ss  
CreateByss  (
=ss) *
	_userInfoss+ 4
.ss4 5
Namess5 9
;ss9 :
FurnitureAcqDetailstt 
.tt  
CreatedDatett  +
=tt, -
DateTimett. 6
.tt6 7
UtcNowtt7 =
;tt= >
varvv 
responsevv 
=vv 
awaitvv  *
_furnitureAcuisitionRepositoryvv! ?
.vv? @
AddAsyncvv@ H
(vvH I
FurnitureAcqDetailsvvI \
,vv\ ]
tokenvv^ c
)vvc d
.vvd e
ConfigureAwaitvve s
(vvs t
falsevvt y
)vvy z
;vvz {
awaitww 
_workww 
.ww 
CommitAsyncww #
(ww# $
tokenww$ )
)ww) *
.ww* +
ConfigureAwaitww+ 9
(ww9 :
falseww: ?
)ww? @
;ww@ A
ifxx 
(xx 
responsexx 
!=xx 
nullxx  
)xx  !
{yy 
returnzz 
truezz 
;zz 
}{{ 
else|| 
{}} 
return~~ 
false~~ 
;~~ 
} 
}
ÄÄ 	
public
àà 
async
àà 
Task
àà 
<
àà 
IEnumerable
àà %
<
àà% &
IdmIrPlmcDTO
àà& 2
>
àà2 3
>
àà3 4/
!GetAllMachineryAcquisitionDetails
àà5 V
(
ààV W
long
ààW [
accountNumber
àà\ i
,
àài j
CancellationToken
ààk |
tokenàà} Ç
)ààÇ É
{
ââ 	
var
ää 
data
ää 
=
ää 
await
ää "
_machineryRepository
ää 1
.
ää1 2+
FindByMatchingPropertiesAsync
ää2 O
(
ääO P
token
ääP U
,
ääU V
x
ääW X
=>
ääY [
x
ää\ ]
.
ää] ^
LoanAcc
ää^ e
==
ääf h
accountNumber
ääi v
&&
ääw y
x
ääz {
.
ää{ |
IsActiveää| Ñ
==ääÖ á
trueääà å
&&ääç è
xääê ë
.ääë í
	IsDeletedääí õ
==ääú û
falseääü §
)ää§ •
.ää• ¶
ConfigureAwaitää¶ ¥
(ää¥ µ
falseääµ ∫
)ää∫ ª
;ääª º
return
ãã 
_mapper
ãã 
.
ãã 
Map
ãã 
<
ãã 
List
ãã #
<
ãã# $
IdmIrPlmcDTO
ãã$ 0
>
ãã0 1
>
ãã1 2
(
ãã2 3
data
ãã3 7
)
ãã7 8
;
ãã8 9
}
åå 	
public
éé 
async
éé 
Task
éé 
<
éé 
bool
éé 
>
éé /
!UpadteMachineryAcquisitionDetails
éé  A
(
ééA B
IdmIrPlmcDTO
ééB N

MachineDTO
ééO Y
,
ééY Z
CancellationToken
éé[ l
token
éém r
)
éér s
{
èè 	
var
êê 
currentDetails
êê 
=
êê  
await
êê! &"
_machineryRepository
êê' ;
.
êê; <-
FirstOrDefaultByExpressionAsync
êê< [
(
êê[ \
x
êê\ ]
=>
êê^ `
x
êêa b
.
êêb c
IrPlmcId
êêc k
==
êêl n

MachineDTO
êêo y
.
êêy z
IrPlmcIdêêz Ç
,êêÇ É
tokenêêÑ â
)êêâ ä
;êêä ã
if
ëë 
(
ëë 
currentDetails
ëë 
!=
ëë  
null
ëë! %
)
ëë% &
{
íí 
currentDetails
ìì 
.
ìì 
	IsDeleted
ìì (
=
ìì) *
true
ìì+ /
;
ìì/ 0
currentDetails
îî 
.
îî 
IsActive
îî '
=
îî( )
false
îî* /
;
îî/ 0
currentDetails
ïï 
.
ïï 

ModifiedBy
ïï )
=
ïï* +
	_userInfo
ïï, 5
.
ïï5 6
Name
ïï6 :
;
ïï: ;
currentDetails
ññ 
.
ññ 
ModifiedDate
ññ +
=
ññ, -
DateTime
ññ. 6
.
ññ6 7
UtcNow
ññ7 =
;
ññ= >
await
óó "
_machineryRepository
óó *
.
óó* +
UpdateAsync
óó+ 6
(
óó6 7
currentDetails
óó7 E
,
óóE F
token
óóG L
)
óóL M
.
óóM N
ConfigureAwait
óóN \
(
óó\ ]
false
óó] b
)
óób c
;
óóc d
}
òò 
var
õõ 
basicDetails
õõ 
=
õõ 
_mapper
õõ &
.
õõ& '
Map
õõ' *
<
õõ* +
TblIdmIrPlmc
õõ+ 7
>
õõ7 8
(
õõ8 9

MachineDTO
õõ9 C
)
õõC D
;
õõD E
basicDetails
úú 
.
úú 
IrPlmcId
úú !
=
úú" #
$num
úú$ %
;
úú% &
basicDetails
ùù 
.
ùù 
IsActive
ùù !
=
ùù" #
true
ùù$ (
;
ùù( )
basicDetails
ûû 
.
ûû 
	IsDeleted
ûû "
=
ûû# $
false
ûû% *
;
ûû* +
basicDetails
üü 
.
üü 
	CreatedBy
üü "
=
üü# $
	_userInfo
üü% .
.
üü. /
Name
üü/ 3
;
üü3 4
basicDetails
†† 
.
†† 
CreatedDate
†† $
=
††% &
DateTime
††' /
.
††/ 0
UtcNow
††0 6
;
††6 7
var
¢¢ 
response
¢¢ 
=
¢¢ 
await
¢¢  "
_machineryRepository
¢¢! 5
.
¢¢5 6
AddAsync
¢¢6 >
(
¢¢> ?
basicDetails
¢¢? K
,
¢¢K L
token
¢¢M R
)
¢¢R S
.
¢¢S T
ConfigureAwait
¢¢T b
(
¢¢b c
false
¢¢c h
)
¢¢h i
;
¢¢i j
await
££ 
_work
££ 
.
££ 
CommitAsync
££ #
(
££# $
token
££$ )
)
££) *
.
££* +
ConfigureAwait
££+ 9
(
££9 :
false
££: ?
)
££? @
;
££@ A
if
§§ 
(
§§ 
response
§§ 
!=
§§ 
null
§§  
)
§§  !
{
•• 
return
¶¶ 
true
¶¶ 
;
¶¶ 
}
ßß 
else
®® 
{
©© 
return
™™ 
false
™™ 
;
™™ 
}
´´ 
}
¨¨ 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
IEnumerable
≥≥ %
<
≥≥% &1
#TblIdmBuildingAcquisitionDetailsDTO
≥≥& I
>
≥≥I J
>
≥≥J K.
 GetAllBuildingAcquisitionDetails
≥≥L l
(
≥≥l m
long
≥≥m q
accountNumber
≥≥r 
,≥≥ Ä!
CancellationToken≥≥Å í
token≥≥ì ò
)≥≥ò ô
{
¥¥ 	
var
µµ 
data
µµ 
=
µµ 
await
µµ (
_buildingDetailsRepository
µµ 7
.
µµ7 8+
FindByMatchingPropertiesAsync
µµ8 U
(
µµU V
token
µµV [
,
µµ[ \
x
µµ] ^
=>
µµ_ a
x
µµb c
.
µµc d
LoanAcc
µµd k
==
µµl n
accountNumber
µµo |
&&
µµ} 
xµµÄ Å
.µµÅ Ç
IsActiveµµÇ ä
==µµã ç
trueµµé í
&&µµì ï
xµµñ ó
.µµó ò
	IsDeletedµµò °
==µµ¢ §
falseµµ• ™
)µµ™ ´
.µµ´ ¨
ConfigureAwaitµµ¨ ∫
(µµ∫ ª
falseµµª ¿
)µµ¿ ¡
;µµ¡ ¬
return
∂∂ 
_mapper
∂∂ 
.
∂∂ 
Map
∂∂ 
<
∂∂ 
List
∂∂ #
<
∂∂# $1
#TblIdmBuildingAcquisitionDetailsDTO
∂∂$ G
>
∂∂G H
>
∂∂H I
(
∂∂I J
data
∂∂J N
)
∂∂N O
;
∂∂O P
}
∑∑ 	
public
∏∏ 
async
∏∏ 
Task
∏∏ 
<
∏∏ 
bool
∏∏ 
>
∏∏ -
UpdateBuildingAcquisitionDetail
∏∏  ?
(
∏∏? @1
#TblIdmBuildingAcquisitionDetailsDTO
∏∏@ c2
#tblidmBuildingAcquisitionDetailsDTO∏∏d á
,∏∏á à!
CancellationToken∏∏â ö
token∏∏õ †
)∏∏† °
{
ππ 	
var
∫∫ 
currentDetails
∫∫ 
=
∫∫  
await
∫∫! &(
_buildingDetailsRepository
∫∫' A
.
∫∫A B-
FirstOrDefaultByExpressionAsync
∫∫B a
(
∫∫a b
x
∫∫b c
=>
∫∫d f
x
∫∫g h
.
∫∫h i
Irbid
∫∫i n
==
∫∫o q2
#tblidmBuildingAcquisitionDetailsDTO∫∫r ï
.∫∫ï ñ
Irbid∫∫ñ õ
,∫∫õ ú
token∫∫ù ¢
)∫∫¢ £
;∫∫£ §
if
ªª 
(
ªª 
currentDetails
ªª 
!=
ªª  
null
ªª! %
)
ªª% &
{
ºº 
currentDetails
ΩΩ 
.
ΩΩ 
	IsDeleted
ΩΩ (
=
ΩΩ) *
true
ΩΩ+ /
;
ΩΩ/ 0
currentDetails
ææ 
.
ææ 
IsActive
ææ '
=
ææ( )
false
ææ* /
;
ææ/ 0
await
øø (
_buildingDetailsRepository
øø 0
.
øø0 1
UpdateAsync
øø1 <
(
øø< =
currentDetails
øø= K
,
øøK L
token
øøM R
)
øøR S
.
øøS T
ConfigureAwait
øøT b
(
øøb c
false
øøc h
)
øøh i
;
øøi j
}
¿¿ 
var
√√ 
basicDetails
√√ 
=
√√ 
_mapper
√√ &
.
√√& '
Map
√√' *
<
√√* +.
 TblIdmBuildingAcquisitionDetails
√√+ K
>
√√K L
(
√√L M1
#tblidmBuildingAcquisitionDetailsDTO
√√M p
)
√√p q
;
√√q r
basicDetails
ƒƒ 
.
ƒƒ 
Irbid
ƒƒ 
=
ƒƒ  
$num
ƒƒ! "
;
ƒƒ" #
basicDetails
≈≈ 
.
≈≈ 
IsActive
≈≈ !
=
≈≈" #
true
≈≈$ (
;
≈≈( )
basicDetails
∆∆ 
.
∆∆ 
	IsDeleted
∆∆ "
=
∆∆# $
false
∆∆% *
;
∆∆* +
basicDetails
«« 
.
«« 
CreatedDate
«« $
=
««% &
DateTime
««' /
.
««/ 0
UtcNow
««0 6
;
««6 7
var
…… 
response
…… 
=
…… 
await
……  (
_buildingDetailsRepository
……! ;
.
……; <
AddAsync
……< D
(
……D E
basicDetails
……E Q
,
……Q R
token
……S X
)
……X Y
.
……Y Z
ConfigureAwait
……Z h
(
……h i
false
……i n
)
……n o
;
……o p
await
   
_work
   
.
   
CommitAsync
   #
(
  # $
token
  $ )
)
  ) *
.
  * +
ConfigureAwait
  + 9
(
  9 :
false
  : ?
)
  ? @
;
  @ A
if
ÀÀ 
(
ÀÀ 
response
ÀÀ 
!=
ÀÀ 
null
ÀÀ  
)
ÀÀ  !
{
ÃÃ 
return
ÕÕ 
true
ÕÕ 
;
ÕÕ 
}
ŒŒ 
else
œœ 
{
–– 
return
—— 
false
—— 
;
—— 
}
““ 
}
”” 	
}
÷÷ 
}◊◊ Çù
nD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\DisbursementModule\DisbursementService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @
DisbursementModule@ R
{ 
public 

class 
DisbursementService $
:% & 
IDisbursementService' ;
{ 
private 
readonly 
IEntityRepository *
<* +
TblAppLoanMast+ 9
>9 :
_loanRepository; J
;J K
private 
readonly 
IEntityRepository *
<* +
TblIdmCondDet+ 8
>8 9
_condRepository: I
;I J
private 
readonly 
IEntityRepository *
<* +
TblIdmDsbFm813+ 9
>9 :!
_form8and13Repository; P
;P Q
private 
readonly 
IEntityRepository *
<* +
TblIdmSidbiApproval+ >
>> ?
_sidbirepository@ P
;P Q
private 
readonly 
IEntityRepository *
<* +
TblAddlCondDet+ 9
>9 : 
_additionalCondition; O
;O P
private 
readonly 
IEntityRepository *
<* +'
TblIdmFirstInvestmentClause+ F
>F G
_FICRepositoryH V
;V W
private 
readonly 
IEntityRepository *
<* +
TblIdmCondDet+ 8
>8 9
_relaxRepository: J
;J K
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IUnitOfWork $
_work% *
;* +
private   
readonly   
IMapper    
_mapper  ! (
;  ( )
public"" 
DisbursementService"" "
(""" #
IEntityRepository""# 4
<""4 5
TblAppLoanMast""5 C
>""C D
loanRepository""E S
,""S T
IUnitOfWork""U `
work""a e
,""e f
IMapper##$ +
mapper##, 2
,##2 3
IEntityRepository##4 E
<##E F
TblIdmCondDet##F S
>##S T
condRepository##U c
,##c d
IEntityRepository##e v
<##v w
TblIdmDsbFm813	##w Ö
>
##Ö Ü"
form8and13Repository
##á õ
,
##õ ú
IEntityRepository$$$ 5
<$$5 6
TblIdmSidbiApproval$$6 I
>$$I J
sidbirepository$$K Z
,$$Z [
IEntityRepository%%$ 5
<%%5 6
TblAddlCondDet%%6 D
>%%D E
additionalCondition%%F Y
,%%Y Z
IEntityRepository%%[ l
<%%l m(
TblIdmFirstInvestmentClause	%%m à
>
%%à â
FICRepository
%%ä ó
,
%%ó ò
UserInfo
%%ò †
userInfo
%%° ©
,
%%© ™
IEntityRepository&&$ 5
<&&5 6
TblIdmCondDet&&6 C
>&&C D
relaxRepository&&E T
)&&T U
{'' 	
_loanRepository(( 
=(( 
loanRepository(( ,
;((, -
_work)) 
=)) 
work)) 
;)) 
_mapper** 
=** 
mapper** 
;** 
_condRepository++ 
=++ 
condRepository++ ,
;++, -
_sidbirepository,, 
=,, 
sidbirepository,, .
;,,. /!
_form8and13Repository-- !
=--" # 
form8and13Repository--$ 8
;--8 9 
_additionalCondition..  
=..! "
additionalCondition..# 6
;..6 7
_FICRepository// 
=// 
FICRepository// *
;//* +
	_userInfo00 
=00 
userInfo00  
;00  !
_relaxRepository11 
=11 
relaxRepository11 .
;11. /
}22 	
public44 
async44 
Task44 
<44 
IEnumerable44 %
<44% & 
LoanAccountNumberDTO44& :
>44: ;
>44; <
GetAccountNumber44= M
(44M N
CancellationToken44N _
token44` e
)44e f
{55 	
var66 
data66 
=66 
await66 
_loanRepository66 ,
.66, -)
FindByMatchingPropertiesAsync66- J
(66J K
token66K P
,66P Q
x66R S
=>66T V
x66W X
.66X Y
IsActive66Y a
==66b d
true66e i
,66i j
incOff77 
=>77 
incOff77  
.77  !
	OffcCdtab77! *
,77* +
incUnit88 
=>88 
incUnit88 "
.88" #
TblUnitMast88# .
,88. /

incLoanAcc99 
=>99 

incLoanAcc99 )
.99) *
TblIdmLegalWorkflow99* =
):: 
.:: 
ConfigureAwait::  
(::  !
false::! &
)::& '
;::' (
return<< 
_mapper<< 
.<< 
Map<< 
<<< 
List<< #
<<<# $ 
LoanAccountNumberDTO<<$ 8
><<8 9
><<9 :
(<<: ;
data<<; ?
)<<? @
;<<@ A
}== 	
public?? 
async?? 
Task?? 
<?? 
IEnumerable?? %
<??% &!
LDConditionDetailsDTO??& ;
>??; <
>??< =-
!GetDisbursementConditionListAsync??> _
(??_ `
long??` d
accountNumber??e r
,??r s
CancellationToken	??t Ö
token
??Ü ã
)
??ã å
{@@ 	
varAA 
dataAA 
=AA 
awaitAA 
_condRepositoryAA ,
.AA, -)
FindByMatchingPropertiesAsyncAA- J
(AAJ K
tokenAAK P
,AAP Q
xAAR S
=>AAT V
xAAW X
.AAX Y
LoanAccAAY `
==AAa c
accountNumberAAd q
&&AAr t
xAAu v
.AAv w
IsActiveAAw 
==
AAÄ Ç
true
AAÉ á
&&
AAà ä
x
AAã å
.
AAå ç
	IsDeleted
AAç ñ
==
AAó ô
false
AAö ü
,
AAü †
CondstgBB 
=>BB 
CondstgBB "
.BB" #
TblCondStgCdtabBB# 2
,BB2 3
CondtypeBB4 <
=>BB= ?
CondtypeBB@ H
.BBH I
TblCondTypeCdtabBBI Y
)BBY Z
.BBZ [
ConfigureAwaitBB[ i
(BBi j
falseBBj o
)BBo p
;BBp q
returnCC 
_mapperCC 
.CC 
MapCC 
<CC 
ListCC #
<CC# $!
LDConditionDetailsDTOCC$ 9
>CC9 :
>CC: ;
(CC; <
dataCC< @
)CC@ A
;CCA B
}DD 	
publicFF 
asyncFF 
TaskFF 
<FF 
boolFF 
>FF .
"UpdateDisbursementConditionDetailsFF  B
(FFB C!
LDConditionDetailsDTOFFC X
CondtionDTOFFY d
,FFd e
CancellationTokenFFf w
tokenFFx }
)FF} ~
{GG 	
varHH 
currentDetailsHH 
=HH  
awaitHH! &
_condRepositoryHH' 6
.HH6 7+
FirstOrDefaultByExpressionAsyncHH7 V
(HHV W
xHHW X
=>HHY [
xHH\ ]
.HH] ^
	CondDetIdHH^ g
==HHh j
CondtionDTOHHk v
.HHv w
	CondDetId	HHw Ä
,
HHÄ Å
token
HHÇ á
)
HHá à
;
HHà â
currentDetailsII 
.II 
	IsDeletedII $
=II% &
trueII' +
;II+ ,
currentDetailsJJ 
.JJ 
IsActiveJJ #
=JJ$ %
falseJJ& +
;JJ+ ,
currentDetailsKK 
.KK 

ModifiedByKK %
=KK& '
	_userInfoKK( 1
.KK1 2
NameKK2 6
;KK6 7
currentDetailsLL 
.LL 
ModifiedDateLL '
=LL( )
DateTimeLL* 2
.LL2 3
UtcNowLL3 9
;LL9 :
awaitMM 
_condRepositoryMM !
.MM! "
UpdateAsyncMM" -
(MM- .
currentDetailsMM. <
,MM< =
tokenMM> C
)MMC D
.MMD E
ConfigureAwaitMME S
(MMS T
falseMMT Y
)MMY Z
;MMZ [
varPP 
basicDetailsPP 
=PP 
_mapperPP &
.PP& '
MapPP' *
<PP* +
TblIdmCondDetPP+ 8
>PP8 9
(PP9 :
CondtionDTOPP: E
)PPE F
;PPF G
basicDetailsQQ 
.QQ 
	CondDetIdQQ "
=QQ# $
$numQQ% &
;QQ& '
basicDetailsRR 
.RR 
IsActiveRR !
=RR" #
trueRR$ (
;RR( )
basicDetailsSS 
.SS 
	IsDeletedSS "
=SS# $
falseSS% *
;SS* +
basicDetailsTT 
.TT 
CreateByTT !
=TT" #
	_userInfoTT$ -
.TT- .
NameTT. 2
;TT2 3
basicDetailsUU 
.UU 
CreatedDateUU $
=UU% &
DateTimeUU' /
.UU/ 0
UtcNowUU0 6
;UU6 7
varWW 
responseWW 
=WW 
awaitWW  
_condRepositoryWW! 0
.WW0 1
AddAsyncWW1 9
(WW9 :
basicDetailsWW: F
,WWF G
tokenWWH M
)WWM N
.WWN O
ConfigureAwaitWWO ]
(WW] ^
falseWW^ c
)WWc d
;WWd e
awaitXX 
_workXX 
.XX 
CommitAsyncXX #
(XX# $
tokenXX$ )
)XX) *
.XX* +
ConfigureAwaitXX+ 9
(XX9 :
falseXX: ?
)XX? @
;XX@ A
ifYY 
(YY 
responseYY 
!=YY 
nullYY 
)YY  
{ZZ 
return[[ 
true[[ 
;[[ 
}\\ 
else]] 
{^^ 
return__ 
false__ 
;__ 
}`` 
}aa 	
publiccc 
asynccc 
Taskcc 
<cc 
boolcc 
>cc .
"CreateDisbursementConditionDetailscc  B
(ccB C!
LDConditionDetailsDTOccC X
CondtionDTOccY d
,ccd e
CancellationTokenccf w
tokenccx }
)cc} ~
{dd 	
varee 
basicDetailsee 
=ee 
_mapperee &
.ee& '
Mapee' *
<ee* +
TblIdmCondDetee+ 8
>ee8 9
(ee9 :
CondtionDTOee: E
)eeE F
;eeF G
basicDetailsgg 
.gg 
IsActivegg !
=gg" #
truegg$ (
;gg( )
basicDetailshh 
.hh 
	IsDeletedhh "
=hh# $
falsehh% *
;hh* +
basicDetailsii 
.ii 
CreateByii !
=ii" #
	_userInfoii$ -
.ii- .
Nameii. 2
;ii2 3
basicDetailsjj 
.jj 
CreatedDatejj $
=jj% &
DateTimejj' /
.jj/ 0
UtcNowjj0 6
;jj6 7
varll 
responsell 
=ll 
awaitll  
_condRepositoryll! 0
.ll0 1
AddAsyncll1 9
(ll9 :
basicDetailsll: F
,llF G
tokenllH M
)llM N
.llN O
ConfigureAwaitllO ]
(ll] ^
falsell^ c
)llc d
;lld e
awaitmm 
_workmm 
.mm 
CommitAsyncmm #
(mm# $
tokenmm$ )
)mm) *
.mm* +
ConfigureAwaitmm+ 9
(mm9 :
falsemm: ?
)mm? @
;mm@ A
ifnn 
(nn 
responsenn 
!=nn 
nullnn  
)nn  !
{oo 
returnpp 
truepp 
;pp 
}qq 
elserr 
{ss 
returntt 
falsett 
;tt 
}uu 
}vv 	
publicxx 
asyncxx 
Taskxx 
<xx 
boolxx 
>xx -
!DeleteDisbursementCondtionDetailsxx  A
(xxA B!
LDConditionDetailsDTOxxB W
CondtionDTOxxX c
,xxc d
CancellationTokenxxe v
tokenxxw |
)xx| }
{yy 	
varzz 
basicDetailszz 
=zz 
_mapperzz &
.zz& '
Mapzz' *
<zz* +
TblIdmCondDetzz+ 8
>zz8 9
(zz9 :
CondtionDTOzz: E
)zzE F
;zzF G
basicDetails{{ 
.{{ 
IsActive{{ !
={{" #
false{{$ )
;{{) *
basicDetails|| 
.|| 
	IsDeleted|| "
=||# $
true||% )
;||) *
basicDetails}} 
.}} 
ModifiedDate}} %
=}}& '
DateTime}}( 0
.}}0 1
UtcNow}}1 7
;}}7 8
basicDetails~~ 
.~~ 

ModifiedBy~~ #
=~~$ %
	_userInfo~~& /
.~~/ 0
Name~~0 4
;~~4 5
var 
response 
= 
await  
_condRepository! 0
.0 1
UpdateAsync1 <
(< =
basicDetails= I
,I J
tokenK P
)P Q
.Q R
ConfigureAwaitR `
(` a
falsea f
)f g
;g h
await
ÄÄ 
_work
ÄÄ 
.
ÄÄ 
CommitAsync
ÄÄ #
(
ÄÄ# $
token
ÄÄ$ )
)
ÄÄ) *
.
ÄÄ* +
ConfigureAwait
ÄÄ+ 9
(
ÄÄ9 :
false
ÄÄ: ?
)
ÄÄ? @
;
ÄÄ@ A
if
ÅÅ 
(
ÅÅ 
response
ÅÅ 
!=
ÅÅ 
null
ÅÅ  
)
ÅÅ  !
{
ÇÇ 
return
ÉÉ 
true
ÉÉ 
;
ÉÉ 
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
return
áá 
false
áá 
;
áá 
}
àà 
}
ââ 	
public
éé 
async
éé 
Task
éé 
<
éé !
IdmSidbiApprovalDTO
éé -
>
éé- .#
GetSidbiApprovalAsync
éé/ D
(
ééD E
long
ééE I
accountNumber
ééJ W
,
ééW X
CancellationToken
ééY j
token
éék p
)
éép q
{
èè 	
var
ëë 
sidbi
ëë 
=
ëë 
await
ëë 
_sidbirepository
ëë .
.
ëë. /+
FindByMatchingPropertiesAsync
ëë/ L
(
ëëL M
token
ëëM R
,
ëëR S
x
ëëT U
=>
ëëV X
x
ëëY Z
.
ëëZ [
LoanAcc
ëë[ b
==
ëëc e
accountNumber
ëëf s
&&
ëët v
x
ëëw x
.
ëëx y
IsActiveëëy Å
==ëëÇ Ñ
trueëëÖ â
&&ëëä å
xëëç é
.ëëé è
	IsDeletedëëè ò
==ëëô õ
falseëëú °
)ëë° ¢
.ëë¢ £
ConfigureAwaitëë£ ±
(ëë± ≤
falseëë≤ ∑
)ëë∑ ∏
;ëë∏ π
var
ïï 
result
ïï 
=
ïï 
sidbi
ïï 
.
ïï 
FirstOrDefault
ïï -
(
ïï- .
)
ïï. /
;
ïï/ 0
return
óó 
_mapper
óó 
.
óó 
Map
óó 
<
óó !
IdmSidbiApprovalDTO
óó 2
>
óó2 3
(
óó3 4
result
óó4 :
)
óó: ;
;
óó; <
}
ôô 	
public
öö 
async
öö 
Task
öö 
<
öö 
bool
öö 
>
öö (
UpdateSidbiApprovalDetails
öö 9
(
öö9 :!
IdmSidbiApprovalDTO
öö: M
sidbi
ööN S
,
ööS T
CancellationToken
ööU f
token
öög l
)
ööl m
{
õõ 	
var
úú 
basicDetails
úú 
=
úú 
_mapper
úú &
.
úú& '
Map
úú' *
<
úú* +!
TblIdmSidbiApproval
úú+ >
>
úú> ?
(
úú? @
sidbi
úú@ E
)
úúE F
;
úúF G
var
ùù 
currentDetails
ùù 
=
ùù  
await
ùù! &
_sidbirepository
ùù' 7
.
ùù7 8-
FirstOrDefaultByExpressionAsync
ùù8 W
(
ùùW X
x
ùùX Y
=>
ùùZ \
x
ùù] ^
.
ùù^ _
IsActive
ùù_ g
==
ùùh j
true
ùùk o
&&
ùùp r
x
ùùs t
.
ùùt u
	IsDeleted
ùùu ~
==ùù Å
falseùùÇ á
&&ùùà ä
xùùã å
.ùùå ç
SidbiApprIdùùç ò
==ùùô õ
basicDetailsùùú ®
.ùù® ©
SidbiApprIdùù© ¥
,ùù¥ µ
tokenùù∂ ª
)ùùª º
;ùùº Ω
if
ûû 
(
ûû 
currentDetails
ûû 
!=
ûû !
null
ûû" &
)
ûû& '
{
üü 
currentDetails
†† 
.
†† 
	IsDeleted
†† (
=
††) *
true
††+ /
;
††/ 0
currentDetails
°° 
.
°° 
IsActive
°° '
=
°°( )
false
°°* /
;
°°/ 0
await
¢¢ 
_sidbirepository
¢¢ &
.
¢¢& '
UpdateAsync
¢¢' 2
(
¢¢2 3
currentDetails
¢¢3 A
,
¢¢A B
token
¢¢B G
)
¢¢G H
.
¢¢H I
ConfigureAwait
¢¢I W
(
¢¢W X
false
¢¢X ]
)
¢¢] ^
;
¢¢^ _
}
££ 
basicDetails
•• 
.
•• 
SidbiApprId
•• $
=
••% &
$num
••' (
;
••( )
basicDetails
¶¶ 
.
¶¶ 
IsActive
¶¶ !
=
¶¶" #
true
¶¶$ (
;
¶¶( )
basicDetails
ßß 
.
ßß 
	IsDeleted
ßß "
=
ßß# $
false
ßß% *
;
ßß* +
basicDetails
©© 
.
©© 
ModifiedDate
©© %
=
©©& '
DateTime
©©( 0
.
©©0 1
UtcNow
©©1 7
;
©©7 8
basicDetails
™™ 
.
™™ 

ModifiedBy
™™ #
=
™™$ %
	_userInfo
™™& /
.
™™/ 0
Name
™™0 4
;
™™4 5
var
´´ 
response
´´ 
=
´´ 
await
´´  
_sidbirepository
´´! 1
.
´´1 2
AddAsync
´´2 :
(
´´: ;
basicDetails
´´; G
,
´´G H
token
´´I N
)
´´N O
.
´´O P
ConfigureAwait
´´P ^
(
´´^ _
false
´´_ d
)
´´d e
;
´´e f
await
¨¨ 
_work
¨¨ 
.
¨¨ 
CommitAsync
¨¨ #
(
¨¨# $
token
¨¨$ )
)
¨¨) *
.
¨¨* +
ConfigureAwait
¨¨+ 9
(
¨¨9 :
false
¨¨: ?
)
¨¨? @
;
¨¨@ A
if
≠≠ 
(
≠≠ 
response
≠≠ 
!=
≠≠ 
null
≠≠  
)
≠≠  !
{
ÆÆ 
return
ØØ 
true
ØØ 
;
ØØ 
}
∞∞ 
else
±± 
{
≤≤ 
return
≥≥ 
false
≥≥ 
;
≥≥ 
}
¥¥ 
}
µµ 	
public
ππ 
async
ππ 
Task
ππ 
<
ππ 
IEnumerable
ππ %
<
ππ% &
Form8AndForm13DTO
ππ& 7
>
ππ7 8
>
ππ8 9+
GetAllForm8AndForm13ListAsync
ππ: W
(
ππW X
long
ππX \
accountNumber
ππ] j
,
ππj k
CancellationToken
ππl }
tokenππ~ É
)ππÉ Ñ
{
∫∫ 	
var
ªª 
data
ªª 
=
ªª 
await
ªª #
_form8and13Repository
ªª 2
.
ªª2 3+
FindByMatchingPropertiesAsync
ªª3 P
(
ªªP Q
token
ªªQ V
,
ªªV W
x
ªªX Y
=>
ªªZ \
x
ªª] ^
.
ªª^ _
DF813LoanAcc
ªª_ k
==
ªªl n
accountNumber
ªªo |
&&
ªª} 
xªªÄ Å
.ªªÅ Ç
IsActiveªªÇ ä
==ªªã ç
trueªªé í
&&ªªì ï
xªªñ ó
.ªªó ò
	IsDeletedªªò °
==ªª¢ §
falseªª• ™
,ªª™ ´
FormType
ºº 
=>
ºº 
FormType
ºº $
.
ºº$ %
Tblfm8fm13CDTab
ºº% 4
)
ºº4 5
;
ºº5 6
return
ΩΩ 
_mapper
ΩΩ 
.
ΩΩ 
Map
ΩΩ 
<
ΩΩ 
List
ΩΩ #
<
ΩΩ# $
Form8AndForm13DTO
ΩΩ$ 5
>
ΩΩ5 6
>
ΩΩ6 7
(
ΩΩ7 8
data
ΩΩ8 <
)
ΩΩ< =
;
ΩΩ= >
}
ææ 	
public
¿¿ 
async
¿¿ 
Task
¿¿ 
<
¿¿ 
bool
¿¿ 
>
¿¿ )
UpdateForm8AndForm13Details
¿¿  ;
(
¿¿; <
Form8AndForm13DTO
¿¿< M
form8and13DTO
¿¿N [
,
¿¿[ \
CancellationToken
¿¿] n
token
¿¿o t
)
¿¿t u
{
¡¡ 	
var
¬¬ 
currentDetails
¬¬ 
=
¬¬  
await
¬¬! &#
_form8and13Repository
¬¬' <
.
¬¬< =-
FirstOrDefaultByExpressionAsync
¬¬= \
(
¬¬\ ]
x
¬¬] ^
=>
¬¬_ a
x
¬¬b c
.
¬¬c d
DF813Id
¬¬d k
==
¬¬l n
form8and13DTO
¬¬o |
.
¬¬| }
DF813Id¬¬} Ñ
,¬¬Ñ Ö
token¬¬Ü ã
)¬¬ã å
;¬¬å ç
currentDetails
√√ 
.
√√ 
	IsDeleted
√√ $
=
√√% &
true
√√' +
;
√√+ ,
currentDetails
ƒƒ 
.
ƒƒ 

ModifiedBy
ƒƒ %
=
ƒƒ& '
	_userInfo
ƒƒ( 1
.
ƒƒ1 2
Name
ƒƒ2 6
;
ƒƒ6 7
currentDetails
≈≈ 
.
≈≈ 
ModifiedDate
≈≈ '
=
≈≈( )
DateTime
≈≈* 2
.
≈≈2 3
UtcNow
≈≈3 9
;
≈≈9 :
currentDetails
∆∆ 
.
∆∆ 
IsActive
∆∆ #
=
∆∆$ %
false
∆∆& +
;
∆∆+ ,
await
«« #
_form8and13Repository
«« '
.
««' (
UpdateAsync
««( 3
(
««3 4
currentDetails
««4 B
,
««B C
token
««D I
)
««I J
.
««J K
ConfigureAwait
««K Y
(
««Y Z
false
««Z _
)
««_ `
;
««` a
var
   
basicDetails
   
=
   
_mapper
   &
.
  & '
Map
  ' *
<
  * +
TblIdmDsbFm813
  + 9
>
  9 :
(
  : ;
form8and13DTO
  ; H
)
  H I
;
  I J
basicDetails
ÀÀ 
.
ÀÀ 
DF813Id
ÀÀ  
=
ÀÀ! "
$num
ÀÀ# $
;
ÀÀ$ %
basicDetails
ÃÃ 
.
ÃÃ 
IsActive
ÃÃ !
=
ÃÃ" #
true
ÃÃ$ (
;
ÃÃ( )
basicDetails
ÕÕ 
.
ÕÕ 
	IsDeleted
ÕÕ "
=
ÕÕ# $
false
ÕÕ% *
;
ÕÕ* +
basicDetails
ŒŒ 
.
ŒŒ 
	CreatedBy
ŒŒ "
=
ŒŒ# $
	_userInfo
ŒŒ% .
.
ŒŒ. /
Name
ŒŒ/ 3
;
ŒŒ3 4
basicDetails
œœ 
.
œœ 
CreatedDate
œœ $
=
œœ% &
DateTime
œœ' /
.
œœ/ 0
UtcNow
œœ0 6
;
œœ6 7
var
—— 
response
—— 
=
—— 
await
——  #
_form8and13Repository
——! 6
.
——6 7
AddAsync
——7 ?
(
——? @
basicDetails
——@ L
,
——L M
token
——N S
)
——S T
.
——T U
ConfigureAwait
——U c
(
——c d
false
——d i
)
——i j
;
——j k
await
““ 
_work
““ 
.
““ 
CommitAsync
““ #
(
““# $
token
““$ )
)
““) *
.
““* +
ConfigureAwait
““+ 9
(
““9 :
false
““: ?
)
““? @
;
““@ A
if
”” 
(
”” 
response
”” 
!=
”” 
null
””  
)
””  !
{
‘‘ 
return
’’ 
true
’’ 
;
’’ 
}
÷÷ 
else
◊◊ 
{
ÿÿ 
return
ŸŸ 
false
ŸŸ 
;
ŸŸ 
}
⁄⁄ 
}
€€ 	
public
›› 
async
›› 
Task
›› 
<
›› 
bool
›› 
>
›› )
CreateForm8AndForm13Details
››  ;
(
››; <
Form8AndForm13DTO
››< M
form8and13DTO
››N [
,
››[ \
CancellationToken
››] n
token
››o t
)
››t u
{
ﬁﬁ 	
var
ﬂﬂ 
basicDetails
ﬂﬂ 
=
ﬂﬂ 
_mapper
ﬂﬂ &
.
ﬂﬂ& '
Map
ﬂﬂ' *
<
ﬂﬂ* +
TblIdmDsbFm813
ﬂﬂ+ 9
>
ﬂﬂ9 :
(
ﬂﬂ: ;
form8and13DTO
ﬂﬂ; H
)
ﬂﬂH I
;
ﬂﬂI J
basicDetails
·· 
.
·· 
IsActive
·· !
=
··" #
true
··$ (
;
··( )
basicDetails
‚‚ 
.
‚‚ 
	IsDeleted
‚‚ "
=
‚‚# $
false
‚‚% *
;
‚‚* +
basicDetails
„„ 
.
„„ 
	CreatedBy
„„ "
=
„„# $
	_userInfo
„„% .
.
„„. /
Name
„„/ 3
;
„„3 4
basicDetails
‰‰ 
.
‰‰ 
CreatedDate
‰‰ $
=
‰‰% &
DateTime
‰‰' /
.
‰‰/ 0
UtcNow
‰‰0 6
;
‰‰6 7
var
ÊÊ 
response
ÊÊ 
=
ÊÊ 
await
ÊÊ  #
_form8and13Repository
ÊÊ! 6
.
ÊÊ6 7
AddAsync
ÊÊ7 ?
(
ÊÊ? @
basicDetails
ÊÊ@ L
,
ÊÊL M
token
ÊÊN S
)
ÊÊS T
.
ÊÊT U
ConfigureAwait
ÊÊU c
(
ÊÊc d
false
ÊÊd i
)
ÊÊi j
;
ÊÊj k
await
ÁÁ 
_work
ÁÁ 
.
ÁÁ 
CommitAsync
ÁÁ #
(
ÁÁ# $
token
ÁÁ$ )
)
ÁÁ) *
.
ÁÁ* +
ConfigureAwait
ÁÁ+ 9
(
ÁÁ9 :
false
ÁÁ: ?
)
ÁÁ? @
;
ÁÁ@ A
if
ËË 
(
ËË 
response
ËË 
!=
ËË 
null
ËË  
)
ËË  !
{
ÈÈ 
return
ÍÍ 
true
ÍÍ 
;
ÍÍ 
}
ÎÎ 
else
ÏÏ 
{
ÌÌ 
return
ÓÓ 
false
ÓÓ 
;
ÓÓ 
}
ÔÔ 
}
 	
public
ÚÚ 
async
ÚÚ 
Task
ÚÚ 
<
ÚÚ 
bool
ÚÚ 
>
ÚÚ )
DeleteForm8AndForm13Details
ÚÚ  ;
(
ÚÚ; <
Form8AndForm13DTO
ÚÚ< M
form8and13DTO
ÚÚN [
,
ÚÚ[ \
CancellationToken
ÚÚ] n
token
ÚÚo t
)
ÚÚt u
{
ÛÛ 	
var
ÙÙ 
basicDetails
ÙÙ 
=
ÙÙ 
_mapper
ÙÙ &
.
ÙÙ& '
Map
ÙÙ' *
<
ÙÙ* +
TblIdmDsbFm813
ÙÙ+ 9
>
ÙÙ9 :
(
ÙÙ: ;
form8and13DTO
ÙÙ; H
)
ÙÙH I
;
ÙÙI J
basicDetails
ıı 
.
ıı 
IsActive
ıı !
=
ıı" #
false
ıı$ )
;
ıı) *
basicDetails
ˆˆ 
.
ˆˆ 
ModifiedDate
ˆˆ %
=
ˆˆ& '
DateTime
ˆˆ( 0
.
ˆˆ0 1
UtcNow
ˆˆ1 7
;
ˆˆ7 8
basicDetails
˜˜ 
.
˜˜ 

ModifiedBy
˜˜ #
=
˜˜$ %
	_userInfo
˜˜& /
.
˜˜/ 0
Name
˜˜0 4
;
˜˜4 5
basicDetails
¯¯ 
.
¯¯ 
	IsDeleted
¯¯ "
=
¯¯# $
true
¯¯% )
;
¯¯) *
var
˘˘ 
response
˘˘ 
=
˘˘ 
await
˘˘  #
_form8and13Repository
˘˘! 6
.
˘˘6 7
UpdateAsync
˘˘7 B
(
˘˘B C
basicDetails
˘˘C O
,
˘˘O P
token
˘˘Q V
)
˘˘V W
.
˘˘W X
ConfigureAwait
˘˘X f
(
˘˘f g
false
˘˘g l
)
˘˘l m
;
˘˘m n
await
˙˙ 
_work
˙˙ 
.
˙˙ 
CommitAsync
˙˙ #
(
˙˙# $
token
˙˙$ )
)
˙˙) *
.
˙˙* +
ConfigureAwait
˙˙+ 9
(
˙˙9 :
false
˙˙: ?
)
˙˙? @
;
˙˙@ A
if
˚˚ 
(
˚˚ 
response
˚˚ 
!=
˚˚ 
null
˚˚  
)
˚˚  !
{
¸¸ 
return
˝˝ 
true
˝˝ 
;
˝˝ 
}
˛˛ 
else
ˇˇ 
{
ÄÄ 
return
ÅÅ 
false
ÅÅ 
;
ÅÅ 
}
ÇÇ 
}
ÉÉ 	
public
áá 
async
áá 
Task
áá 
<
áá 
IEnumerable
áá %
<
áá% &)
AdditionConditionDetailsDTO
áá& A
>
ááA B
>
ááB C+
GetAdditionConditionListAsync
ááD a
(
ááa b
long
ááb f
accountNumber
áág t
,
áát u 
CancellationTokenááv á
tokenááà ç
)ááç é
{
àà 	
var
ää 
data
ää 
=
ää 
await
ää "
_additionalCondition
ää 1
.
ää1 2+
FindByMatchingPropertiesAsync
ää2 O
(
ääO P
token
ääP U
,
ääU V
x
ääW X
=>
ääY [
x
ää\ ]
.
ää] ^
LoanAcc
ää^ e
==
ääf h
accountNumber
ääi v
&&
ääw y
x
ääz {
.
ää{ |
IsActiveää| Ñ
==ääÖ á
trueääà å
,ääå ç
condmst
ãã 
=>
ãã 
condmst
ãã "
.
ãã" #
TblCondStgCdtab
ãã# 2
)
ãã2 3
;
ãã3 4
return
çç 
_mapper
çç 
.
çç 
Map
çç 
<
çç 
List
çç #
<
çç# $)
AdditionConditionDetailsDTO
çç$ ?
>
çç? @
>
çç@ A
(
ççA B
data
ççB F
)
ççF G
;
ççG H
}
èè 	
public
íí 
async
íí 
Task
íí 
<
íí 
bool
íí 
>
íí .
 CreateAdditionalConditionDetails
íí  @
(
íí@ A)
AdditionConditionDetailsDTO
ííA \
CondtionDTO
íí] h
,
ííh i
CancellationToken
ííj {
tokeníí| Å
)ííÅ Ç
{
ìì 	
var
îî 
basicDetails
îî 
=
îî 
_mapper
îî &
.
îî& '
Map
îî' *
<
îî* +
TblAddlCondDet
îî+ 9
>
îî9 :
(
îî: ;
CondtionDTO
îî; F
)
îîF G
;
îîG H
basicDetails
ññ 
.
ññ 
IsActive
ññ !
=
ññ" #
true
ññ$ (
;
ññ( )
basicDetails
óó 
.
óó 
CreatedDate
óó $
=
óó% &
DateTime
óó' /
.
óó/ 0
UtcNow
óó0 6
;
óó6 7
basicDetails
òò 
.
òò 
CreateBy
òò !
=
òò" #
	_userInfo
òò$ -
.
òò- .
Name
òò. 2
;
òò2 3
basicDetails
ôô 
.
ôô 
	IsDeleted
ôô "
=
ôô# $
false
ôô% *
;
ôô* +
basicDetails
öö 
.
öö 
CreatedDate
öö $
=
öö% &
DateTime
öö' /
.
öö/ 0
UtcNow
öö0 6
;
öö6 7
var
úú 
response
úú 
=
úú 
await
úú  "
_additionalCondition
úú! 5
.
úú5 6
AddAsync
úú6 >
(
úú> ?
basicDetails
úú? K
,
úúK L
token
úúM R
)
úúR S
.
úúS T
ConfigureAwait
úúT b
(
úúb c
false
úúc h
)
úúh i
;
úúi j
await
ùù 
_work
ùù 
.
ùù 
CommitAsync
ùù #
(
ùù# $
token
ùù$ )
)
ùù) *
.
ùù* +
ConfigureAwait
ùù+ 9
(
ùù9 :
false
ùù: ?
)
ùù? @
;
ùù@ A
if
ûû 
(
ûû 
response
ûû 
!=
ûû 
null
ûû  
)
ûû  !
{
üü 
return
†† 
true
†† 
;
†† 
}
°° 
else
¢¢ 
{
££ 
return
§§ 
false
§§ 
;
§§ 
}
•• 
}
¶¶ 	
public
®® 
async
®® 
Task
®® 
<
®® 
bool
®® 
>
®® .
 UpdateAdditionalConditionDetails
®®  @
(
®®@ A)
AdditionConditionDetailsDTO
®®A \
CondtionDTO
®®] h
,
®®h i
CancellationToken
®®j {
token®®| Å
)®®Å Ç
{
©© 	
var
™™ 
currentDetails
™™ 
=
™™  
await
™™! &"
_additionalCondition
™™' ;
.
™™; <-
FirstOrDefaultByExpressionAsync
™™< [
(
™™[ \
x
™™\ ]
=>
™™^ `
x
™™a b
.
™™b c
	AddCondId
™™c l
==
™™m o
CondtionDTO
™™p {
.
™™{ |
	AddCondId™™| Ö
,™™Ö Ü
token™™á å
)™™å ç
;™™ç é
currentDetails
´´ 
.
´´ 
	IsDeleted
´´ $
=
´´% &
true
´´' +
;
´´+ ,
currentDetails
¨¨ 
.
¨¨ 

ModifiedBy
¨¨ %
=
¨¨& '
	_userInfo
¨¨( 1
.
¨¨1 2
Name
¨¨2 6
;
¨¨6 7
currentDetails
≠≠ 
.
≠≠ 
ModifiedDate
≠≠ '
=
≠≠( )
DateTime
≠≠* 2
.
≠≠2 3
UtcNow
≠≠3 9
;
≠≠9 :
currentDetails
ÆÆ 
.
ÆÆ 
IsActive
ÆÆ #
=
ÆÆ$ %
false
ÆÆ& +
;
ÆÆ+ ,
await
ØØ "
_additionalCondition
ØØ &
.
ØØ& '
UpdateAsync
ØØ' 2
(
ØØ2 3
currentDetails
ØØ3 A
,
ØØA B
token
ØØC H
)
ØØH I
.
ØØI J
ConfigureAwait
ØØJ X
(
ØØX Y
false
ØØY ^
)
ØØ^ _
;
ØØ_ `
var
≤≤ 
basicDetails
≤≤ 
=
≤≤ 
_mapper
≤≤ &
.
≤≤& '
Map
≤≤' *
<
≤≤* +
TblAddlCondDet
≤≤+ 9
>
≤≤9 :
(
≤≤: ;
CondtionDTO
≤≤; F
)
≤≤F G
;
≤≤G H
basicDetails
≥≥ 
.
≥≥ 
	AddCondId
≥≥ "
=
≥≥# $
$num
≥≥% &
;
≥≥& '
basicDetails
¥¥ 
.
¥¥ 
IsActive
¥¥ !
=
¥¥" #
true
¥¥$ (
;
¥¥( )
basicDetails
µµ 
.
µµ 
CreateBy
µµ !
=
µµ" #
	_userInfo
µµ$ -
.
µµ- .
Name
µµ. 2
;
µµ2 3
basicDetails
∂∂ 
.
∂∂ 
	IsDeleted
∂∂ "
=
∂∂# $
false
∂∂% *
;
∂∂* +
basicDetails
∑∑ 
.
∑∑ 
CreatedDate
∑∑ $
=
∑∑% &
DateTime
∑∑' /
.
∑∑/ 0
UtcNow
∑∑0 6
;
∑∑6 7
var
ππ 
response
ππ 
=
ππ 
await
ππ  "
_additionalCondition
ππ! 5
.
ππ5 6
AddAsync
ππ6 >
(
ππ> ?
basicDetails
ππ? K
,
ππK L
token
ππM R
)
ππR S
.
ππS T
ConfigureAwait
ππT b
(
ππb c
false
ππc h
)
ππh i
;
ππi j
await
∫∫ 
_work
∫∫ 
.
∫∫ 
CommitAsync
∫∫ #
(
∫∫# $
token
∫∫$ )
)
∫∫) *
.
∫∫* +
ConfigureAwait
∫∫+ 9
(
∫∫9 :
false
∫∫: ?
)
∫∫? @
;
∫∫@ A
if
ªª 
(
ªª 
response
ªª 
!=
ªª 
null
ªª  
)
ªª  !
{
ºº 
return
ΩΩ 
true
ΩΩ 
;
ΩΩ 
}
ææ 
else
øø 
{
¿¿ 
return
¡¡ 
false
¡¡ 
;
¡¡ 
}
¬¬ 
}
√√ 	
public
∆∆ 
async
∆∆ 
Task
∆∆ 
<
∆∆ 
bool
∆∆ 
>
∆∆ -
DeleteAdditionalCondtionDetails
∆∆  ?
(
∆∆? @)
AdditionConditionDetailsDTO
∆∆@ [
CondtionDTO
∆∆\ g
,
∆∆g h
CancellationToken
∆∆i z
token∆∆{ Ä
)∆∆Ä Å
{
«« 	
var
»» 
basicDetails
»» 
=
»» 
_mapper
»» &
.
»»& '
Map
»»' *
<
»»* +
TblAddlCondDet
»»+ 9
>
»»9 :
(
»»: ;
CondtionDTO
»»; F
)
»»F G
;
»»G H
basicDetails
…… 
.
…… 
IsActive
…… !
=
……" #
false
……$ )
;
……) *
basicDetails
   
.
   
ModifiedDate
   %
=
  & '
DateTime
  ( 0
.
  0 1
UtcNow
  1 7
;
  7 8
basicDetails
ÀÀ 
.
ÀÀ 

ModifiedBy
ÀÀ #
=
ÀÀ$ %
	_userInfo
ÀÀ& /
.
ÀÀ/ 0
Name
ÀÀ0 4
;
ÀÀ4 5
basicDetails
ÃÃ 
.
ÃÃ 
	IsDeleted
ÃÃ "
=
ÃÃ# $
true
ÃÃ% )
;
ÃÃ) *
var
ÕÕ 
response
ÕÕ 
=
ÕÕ 
await
ÕÕ  "
_additionalCondition
ÕÕ! 5
.
ÕÕ5 6
UpdateAsync
ÕÕ6 A
(
ÕÕA B
basicDetails
ÕÕB N
,
ÕÕN O
token
ÕÕP U
)
ÕÕU V
.
ÕÕV W
ConfigureAwait
ÕÕW e
(
ÕÕe f
false
ÕÕf k
)
ÕÕk l
;
ÕÕl m
await
ŒŒ 
_work
ŒŒ 
.
ŒŒ 
CommitAsync
ŒŒ #
(
ŒŒ# $
token
ŒŒ$ )
)
ŒŒ) *
.
ŒŒ* +
ConfigureAwait
ŒŒ+ 9
(
ŒŒ9 :
false
ŒŒ: ?
)
ŒŒ? @
;
ŒŒ@ A
if
œœ 
(
œœ 
response
œœ 
!=
œœ 
null
œœ  
)
œœ  !
{
–– 
return
—— 
true
—— 
;
—— 
}
““ 
else
”” 
{
‘‘ 
return
’’ 
false
’’ 
;
’’ 
}
÷÷ 
}
◊◊ 	
public
‹‹ 
async
‹‹ 
Task
‹‹ 
<
‹‹ )
IdmFirstInvestmentClauseDTO
‹‹ 5
>
‹‹5 6+
GetFirstInvestmentClauseAsync
‹‹6 S
(
‹‹S T
long
‹‹T X
accountNumber
‹‹Y f
,
‹‹f g
CancellationToken
‹‹h y
token
‹‹z 
)‹‹ Ä
{
›› 	
var
ﬁﬁ 
FICdata
ﬁﬁ 
=
ﬁﬁ 
await
ﬁﬁ 
_FICRepository
ﬁﬁ  .
.
ﬁﬁ. /+
FindByMatchingPropertiesAsync
ﬁﬁ/ L
(
ﬁﬁL M
token
ﬁﬁM R
,
ﬁﬁR S
x
ﬁﬁT U
=>
ﬁﬁV X
x
ﬁﬁY Z
.
ﬁﬁZ [
DCFICLoanACC
ﬁﬁ[ g
==
ﬁﬁh j
accountNumber
ﬁﬁk x
&&
ﬁﬁy {
x
ﬁﬁ| }
.
ﬁﬁ} ~
IsActiveﬁﬁ~ Ü
==ﬁﬁÜ à
trueﬁﬁà å
&&ﬁﬁç è
xﬁﬁê ë
.ﬁﬁë í
	IsDeletedﬁﬁí õ
==ﬁﬁõ ù
falseﬁﬁù ¢
)ﬁﬁ¢ £
.ﬁﬁ£ §
ConfigureAwaitﬁﬁ§ ≤
(ﬁﬁ≤ ≥
falseﬁﬁ≥ ∏
)ﬁﬁ∏ π
;ﬁﬁπ ∫
var
ﬂﬂ 
result
ﬂﬂ 
=
ﬂﬂ 
FICdata
ﬂﬂ  
.
ﬂﬂ  !
FirstOrDefault
ﬂﬂ! /
(
ﬂﬂ/ 0
)
ﬂﬂ0 1
;
ﬂﬂ1 2
return
‡‡ 
_mapper
‡‡ 
.
‡‡ 
Map
‡‡ 
<
‡‡ )
IdmFirstInvestmentClauseDTO
‡‡ :
>
‡‡: ;
(
‡‡; <
result
‡‡< B
)
‡‡B C
;
‡‡C D
}
‚‚ 	
public
„„ 
async
„„ 
Task
„„ 
<
„„ 
bool
„„ 
>
„„ 3
%UpdateAllFirstInvestmentClauseDetails
„„  E
(
„„E F)
IdmFirstInvestmentClauseDTO
„„F a
idmFICDetail
„„b n
,
„„n o 
CancellationToken„„p Å
token„„Ç á
)„„á à
{
‰‰ 	
var
ÂÂ 
basicDetails
ÂÂ 
=
ÂÂ 
_mapper
ÂÂ &
.
ÂÂ& '
Map
ÂÂ' *
<
ÂÂ* +)
TblIdmFirstInvestmentClause
ÂÂ+ F
>
ÂÂF G
(
ÂÂG H
idmFICDetail
ÂÂH T
)
ÂÂT U
;
ÂÂU V
var
ÊÊ 
currentDetails
ÊÊ 
=
ÊÊ  
await
ÊÊ! &
_FICRepository
ÊÊ' 5
.
ÊÊ5 6-
FirstOrDefaultByExpressionAsync
ÊÊ6 U
(
ÊÊU V
x
ÊÊW X
=>
ÊÊY [
x
ÊÊ\ ]
.
ÊÊ] ^
IsActive
ÊÊ^ f
==
ÊÊg i
true
ÊÊj n
&&
ÊÊo q
x
ÊÊr s
.
ÊÊs t
	IsDeleted
ÊÊt }
==ÊÊ~ Ä
falseÊÊÅ Ü
&&ÊÊá â
xÊÊä ã
.ÊÊã å
DCFICIdÊÊå ì
==ÊÊî ñ
basicDetailsÊÊó £
.ÊÊ£ §
DCFICIdÊÊ§ ´
,ÊÊ´ ¨
tokenÊÊ¨ ±
)ÊÊ± ≤
;ÊÊ≤ ≥
if
ÁÁ 
(
ÁÁ 
currentDetails
ÁÁ 
!=
ÁÁ 
null
ÁÁ #
)
ÁÁ# $
{
ËË 
currentDetails
ÈÈ 
.
ÈÈ 
	IsDeleted
ÈÈ (
=
ÈÈ) *
true
ÈÈ+ /
;
ÈÈ/ 0
currentDetails
ÍÍ 
.
ÍÍ 
IsActive
ÍÍ '
=
ÍÍ( )
false
ÍÍ* /
;
ÍÍ/ 0
await
ÎÎ 
_FICRepository
ÎÎ $
.
ÎÎ$ %
UpdateAsync
ÎÎ% 0
(
ÎÎ0 1
currentDetails
ÎÎ1 ?
,
ÎÎ? @
token
ÎÎA F
)
ÎÎF G
.
ÎÎG H
ConfigureAwait
ÎÎH V
(
ÎÎV W
false
ÎÎW \
)
ÎÎ\ ]
;
ÎÎ] ^
}
ÏÏ 
basicDetails
ÓÓ 
.
ÓÓ 
DCFICId
ÓÓ  
=
ÓÓ! "
$num
ÓÓ# $
;
ÓÓ$ %
basicDetails
ÔÔ 
.
ÔÔ 
IsActive
ÔÔ !
=
ÔÔ" #
true
ÔÔ$ (
;
ÔÔ( )
basicDetails
 
.
 
	IsDeleted
 "
=
# $
false
% *
;
* +
basicDetails
ÒÒ 
.
ÒÒ 
ModifiedDate
ÒÒ %
=
ÒÒ& '
DateTime
ÒÒ( 0
.
ÒÒ0 1
UtcNow
ÒÒ1 7
;
ÒÒ7 8
var
ÛÛ 
response
ÛÛ 
=
ÛÛ 
await
ÛÛ  
_FICRepository
ÛÛ! /
.
ÛÛ/ 0
AddAsync
ÛÛ0 8
(
ÛÛ8 9
basicDetails
ÛÛ9 E
,
ÛÛE F
token
ÛÛG L
)
ÛÛL M
.
ÛÛM N
ConfigureAwait
ÛÛN \
(
ÛÛ\ ]
false
ÛÛ] b
)
ÛÛb c
;
ÛÛc d
await
ÙÙ 
_work
ÙÙ 
.
ÙÙ 
CommitAsync
ÙÙ #
(
ÙÙ# $
token
ÙÙ$ )
)
ÙÙ) *
.
ÙÙ* +
ConfigureAwait
ÙÙ+ 9
(
ÙÙ9 :
false
ÙÙ: ?
)
ÙÙ? @
;
ÙÙ@ A
if
ıı 
(
ıı 
response
ıı 
!=
ıı 
null
ıı  
)
ıı  !
{
ˆˆ 
return
˜˜ 
true
˜˜ 
;
˜˜ 
}
¯¯ 
else
˘˘ 
{
˙˙ 
return
˚˚ 
false
˚˚ 
;
˚˚ 
}
¸¸ 
}
˝˝ 	
public
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 
IEnumerable
ÇÇ %
<
ÇÇ% &
RelaxationDTO
ÇÇ& 3
>
ÇÇ3 4
>
ÇÇ4 5#
GetAllOtherRelaxation
ÇÇ6 K
(
ÇÇK L
long
ÇÇL P
accountNumber
ÇÇQ ^
,
ÇÇ^ _
CancellationToken
ÇÇ` q
token
ÇÇr w
)
ÇÇw x
{
ÉÉ 	
var
ÖÖ 
conddet
ÖÖ 
=
ÖÖ 
await
ÖÖ 
_relaxRepository
ÖÖ  0
.
ÖÖ0 1+
FindByMatchingPropertiesAsync
ÖÖ1 N
(
ÖÖN O
token
ÖÖO T
,
ÖÖT U
x
ÖÖV W
=>
ÖÖX Z
x
ÖÖ[ \
.
ÖÖ\ ]
LoanAcc
ÖÖ] d
==
ÖÖe g
accountNumber
ÖÖh u
&&
ÖÖv x
x
ÖÖy z
.
ÖÖz {
IsActiveÖÖ{ É
==ÖÖÑ Ü
trueÖÖá ã
&&ÖÖå é
xÖÖè ê
.ÖÖê ë
WhRelaxationÖÖë ù
==ÖÖû †
trueÖÖ° •
&&ÖÖ¶ ®
xÖÖ© ™
.ÖÖ™ ´
WhRelAllowedÖÖ´ ∑
==ÖÖ∏ ∫
nullÖÖª ø
,ÖÖø ¿
cdtypeÖÖ¡ «
=>ÖÖ»  
cdtypeÖÖÀ —
.ÖÖ— “ 
TblCondTypeCdtabÖÖ“ ‚
)ÖÖ‚ „
;ÖÖ„ ‰
var
áá 
addlconddet
áá 
=
áá 
await
áá #"
_additionalCondition
áá$ 8
.
áá8 9#
FindByExpressionAsync
áá9 N
(
ááN O
x
ááO P
=>
ááQ S
x
ááT U
.
ááU V
LoanAcc
ááV ]
==
áá^ `
accountNumber
ááa n
&&
ááo q
x
áár s
.
áás t
IsActive
áát |
==
áá} 
trueááÄ Ñ
&&ááÖ á
xááà â
.ááâ ä

Relaxationááä î
==ááï ó
trueááò ú
&&ááù ü
xáá† °
.áá° ¢
WhRelAllowedáá¢ Æ
==ááØ ±
nulláá≤ ∂
,áá∂ ∑
tokenáá∏ Ω
)ááΩ æ
;ááæ ø
var
ââ 
result
ââ 
=
ââ 
new
ââ 
List
ââ !
<
ââ! "
RelaxationDTO
ââ" /
>
ââ/ 0
(
ââ0 1
)
ââ1 2
;
ââ2 3
foreach
ãã 
(
ãã 
var
ãã 
i
ãã 
in
ãã 
conddet
ãã %
)
ãã% &
{
åå 
result
çç 
.
çç 
Add
çç 
(
çç 
new
çç 
RelaxationDTO
çç ,
(
çç, -
)
çç- .
{
éé 
LoanAcc
èè 
=
èè 
i
èè 
.
èè  
LoanAcc
èè  '
,
èè' (
RelaxCondId
êê 
=
êê  !
i
êê" #
.
êê# $
	CondDetId
êê$ -
,
êê- .
ConditionDetails
ëë $
=
ëë% &
i
ëë' (
.
ëë( )
CondDetails
ëë) 4
,
ëë4 5
WhRelAllowed
íí  
=
íí! "
i
íí# $
.
íí$ %
WhRelAllowed
íí% 1
,
íí1 2
ConditionType
ìì !
=
ìì" #
i
ìì$ %
.
ìì% &
CondType
ìì& .
,
ìì. /
	ModelName
îî 
=
îî 
$str
îî  8
,
îî8 9
WhRelaxation
ïï  
=
ïï! "
i
ïï# $
.
ïï$ %
WhRelaxation
ïï% 1
,
ïï1 2
}
ññ 
)
ññ 
;
ññ 
}
óó 
foreach
òò 
(
òò 
var
òò 
i
òò 
in
òò 
addlconddet
òò )
)
òò) *
{
ôô 
result
öö 
.
öö 
Add
öö 
(
öö 
new
öö 
RelaxationDTO
öö ,
(
öö, -
)
öö- .
{
õõ 
LoanAcc
úú 
=
úú 
i
úú 
.
úú  
LoanAcc
úú  '
,
úú' (
RelaxCondId
ùù 
=
ùù  !
i
ùù" #
.
ùù# $
	AddCondId
ùù$ -
,
ùù- .
ConditionDetails
ûû $
=
ûû% &
i
ûû' (
.
ûû( )
AddCondDetails
ûû) 7
,
ûû7 8
WhRelAllowed
üü  
=
üü! "
i
üü# $
.
üü$ %
WhRelAllowed
üü% 1
,
üü1 2
	ModelName
†† 
=
†† 
$str
††  6
,
††6 7
WhRelaxation
°°  
=
°°! "
i
°°# $
.
°°$ %

Relaxation
°°% /
,
°°/ 0
}
¢¢ 
)
¢¢ 
;
¢¢ 
}
££ 
return
§§ 
result
§§ 
;
§§ 
}
•• 	
public
ßß 
async
ßß 
Task
ßß 
<
ßß 
List
ßß 
<
ßß 
RelaxationDTO
ßß ,
>
ßß, -
>
ßß- .#
UpdateOtherRelaxation
ßß/ D
(
ßßD E
List
ßßE I
<
ßßI J
RelaxationDTO
ßßJ W
>
ßßW X
relax
ßßY ^
,
ßß^ _
CancellationToken
ßß` q
token
ßßr w
)
ßßw x
{
®® 	
foreach
©© 
(
©© 
var
©© 
item
©© 
in
©©  
relax
©©! &
)
©©& '
{
™™ 
if
´´ 
(
´´ 
relax
´´ 
.
´´ 
First
´´ 
(
´´  
)
´´  !
.
´´! "
	ModelName
´´" +
==
´´, .
$str
´´/ G
)
´´G H
{
¨¨ 
var
≠≠ 
result
≠≠ 
=
≠≠  
await
≠≠! &
_condRepository
≠≠' 6
.
≠≠6 7-
FirstOrDefaultByExpressionAsync
≠≠7 V
(
≠≠V W
x
≠≠W X
=>
≠≠Y [
x
≠≠\ ]
.
≠≠] ^
	CondDetId
≠≠^ g
==
≠≠h j
relax
≠≠k p
.
≠≠p q
First
≠≠q v
(
≠≠v w
)
≠≠w x
.
≠≠x y
RelaxCondId≠≠y Ñ
,≠≠Ñ Ö
token≠≠Ü ã
)≠≠ã å
;≠≠å ç
relax
ÆÆ 
.
ÆÆ 
First
ÆÆ 
(
ÆÆ  
)
ÆÆ  !
.
ÆÆ! "
WhRelAllowed
ÆÆ" .
=
ÆÆ/ 0
true
ÆÆ1 5
;
ÆÆ5 6
result
ØØ 
.
ØØ 
WhRelAllowed
ØØ '
=
ØØ( )
relax
ØØ* /
.
ØØ/ 0
First
ØØ0 5
(
ØØ5 6
)
ØØ6 7
.
ØØ7 8
WhRelAllowed
ØØ8 D
;
ØØD E
await
±± 
_condRepository
±± )
.
±±) *
UpdateAsync
±±* 5
(
±±5 6
result
±±6 <
,
±±< =
token
±±> C
)
±±C D
.
±±D E
ConfigureAwait
±±E S
(
±±S T
false
±±T Y
)
±±Y Z
;
±±Z [
}
≤≤ 
else
≥≥ 
if
≥≥ 
(
≥≥ 
relax
≥≥ 
.
≥≥ 
First
≥≥ $
(
≥≥$ %
)
≥≥% &
.
≥≥& '
	ModelName
≥≥' 0
==
≥≥1 3
$str
≥≥4 J
)
≥≥J K
{
¥¥ 
var
µµ 
result
µµ 
=
µµ  
await
µµ! &"
_additionalCondition
µµ' ;
.
µµ; <-
FirstOrDefaultByExpressionAsync
µµ< [
(
µµ[ \
x
µµ\ ]
=>
µµ^ `
x
µµa b
.
µµb c
	AddCondId
µµc l
==
µµm o
relax
µµp u
.
µµu v
First
µµv {
(
µµ{ |
)
µµ| }
.
µµ} ~
RelaxCondIdµµ~ â
,µµâ ä
tokenµµã ê
)µµê ë
;µµë í
relax
∑∑ 
.
∑∑ 
First
∑∑ 
(
∑∑  
)
∑∑  !
.
∑∑! "
WhRelAllowed
∑∑" .
=
∑∑/ 0
true
∑∑1 5
;
∑∑5 6
result
∏∏ 
.
∏∏ 
WhRelAllowed
∏∏ '
=
∏∏( )
relax
∏∏* /
.
∏∏/ 0
First
∏∏0 5
(
∏∏5 6
)
∏∏6 7
.
∏∏7 8
WhRelAllowed
∏∏8 D
;
∏∏D E
await
∫∫ "
_additionalCondition
∫∫ .
.
∫∫. /
UpdateAsync
∫∫/ :
(
∫∫: ;
result
∫∫; A
,
∫∫A B
token
∫∫C H
)
∫∫H I
.
∫∫I J
ConfigureAwait
∫∫J X
(
∫∫X Y
false
∫∫Y ^
)
∫∫^ _
;
∫∫_ `
}
ªª 
await
ºº 
_work
ºº 
.
ºº 
CommitAsync
ºº '
(
ºº' (
token
ºº( -
)
ºº- .
.
ºº. /
ConfigureAwait
ºº/ =
(
ºº= >
false
ºº> C
)
ººC D
;
ººD E
}
ΩΩ 
return
ææ 
_mapper
ææ 
.
ææ 
Map
ææ 
<
ææ 
List
ææ #
<
ææ# $
RelaxationDTO
ææ$ 1
>
ææ1 2
>
ææ2 3
(
ææ3 4
relax
ææ4 9
)
ææ9 :
;
ææ: ;
}
øø 	
}
¡¡ 
}¬¬ £c
tD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\EntryOfOtherDebits\EntryOfOtherDebitsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @
EntryOfOtherDebits@ R
{ 
public 

class %
EntryOfOtherDebitsService *
:* +&
IEntryOfOtherDebitsService, F
{ 
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IEntityRepository *
<* +
IdmOthdebitsDetails+ >
>> ?%
_idmOtherdebitsRepository@ Y
;Y Z
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
public %
EntryOfOtherDebitsService (
(( )
IEntityRepository) :
<: ;
IdmOthdebitsDetails; N
>N O$
idmOtherdebitsRepositoryP h
,h i
IUnitOfWorkj u
workv z
,z {
IMapper #
mapper$ *
,* +
UserInfo- 5
userInfo6 >
)> ?
{ 	
_work 
= 
work 
; 
_mapper   
=   
mapper   
;   %
_idmOtherdebitsRepository!! %
=!!& '$
idmOtherdebitsRepository!!( @
;!!@ A
	_userInfo"" 
="" 
userInfo""  
;""  !
}## 	
public$$ 
async$$ 
Task$$ 
<$$ 
IEnumerable$$ %
<$$% &"
IdmOthdebitsDetailsDTO$$& <
>$$< =
>$$= >!
GetAllOtherDebitsList$$? T
($$T U
long$$U Y
accountNumber$$Z g
,$$g h
CancellationToken$$i z
token	$${ Ä
)
$$Ä Å
{%% 	
var&& 
data&& 
=&& 
await&& %
_idmOtherdebitsRepository&& 6
.&&6 7)
FindByMatchingPropertiesAsync&&7 T
(&&T U
token&&U Z
,&&Z [
x&&\ ]
=>&&^ `
x&&a b
.&&b c
LoanAcc&&c j
==&&k m
accountNumber&&n {
&&&&| ~
x	&& Ä
.
&&Ä Å
IsActive
&&Å â
==
&&ä å
true
&&ç ë
&&
&&í î
x
&&ï ñ
.
&&ñ ó
	IsDeleted
&&ó †
==
&&° £
false
&&§ ©
)
&&© ™
.
&&™ ´
ConfigureAwait
&&´ π
(
&&π ∫
false
&&∫ ø
)
&&ø ¿
;
&&¿ ¡
return'' 
_mapper'' 
.'' 
Map'' 
<'' 
List'' #
<''# $"
IdmOthdebitsDetailsDTO''$ :
>'': ;
>''; <
(''< =
data''= A
)''A B
;''B C
}(( 	
public)) 
async)) 
Task)) 
<)) 
bool)) 
>)) #
UpdateOtherDebitDetails))  7
())7 8"
IdmOthdebitsDetailsDTO))8 N
othdebit))O W
,))W X
CancellationToken))Y j
token))k p
)))p q
{** 	
var++ 
currentDetails++ 
=++  
await++! &%
_idmOtherdebitsRepository++' @
.++@ A+
FirstOrDefaultByExpressionAsync++A `
(++` a
x++a b
=>++c e
x++f g
.++g h
OthdebitDetId++h u
==++v x
othdebit	++y Å
.
++Å Ç
OthdebitDetId
++Ç è
,
++è ê
token
++ë ñ
)
++ñ ó
;
++ó ò
if,, 
(,, 
currentDetails,, 
!=,,  
null,,! %
),,% &
{-- 
currentDetails.. 
... 
	IsDeleted.. (
=..) *
true..+ /
;../ 0
currentDetails// 
.// 
IsActive// '
=//( )
false//* /
;/// 0
currentDetails00 
.00 

ModifiedBy00 )
=00* +
	_userInfo00, 5
.005 6
Name006 :
;00: ;
currentDetails11 
.11 
ModifiedDate11 +
=11, -
DateTime11. 6
.116 7
UtcNow117 =
;11= >
await22 %
_idmOtherdebitsRepository22 /
.22/ 0
UpdateAsync220 ;
(22; <
currentDetails22< J
,22J K
token22L Q
)22Q R
.22R S
ConfigureAwait22S a
(22a b
false22b g
)22g h
;22h i
}44 
var77 
basicDetails77 
=77 
_mapper77 &
.77& '
Map77' *
<77* +
IdmOthdebitsDetails77+ >
>77> ?
(77? @
othdebit77@ H
)77H I
;77I J
basicDetails88 
.88 
OthdebitDetId88 &
=88' (
$num88) *
;88* +
basicDetails99 
.99 
IsActive99 !
=99" #
true99$ (
;99( )
basicDetails:: 
.:: 
	IsDeleted:: "
=::# $
false::% *
;::* +
basicDetails;; 
.;; 
IsSubmitted;; $
=;;% &
true;;' +
;;;+ ,
basicDetails<< 
.<< 
CreateBy<< !
=<<" #
	_userInfo<<$ -
.<<- .
Name<<. 2
;<<2 3
basicDetails== 
.== 
CreatedDate== $
===% &
DateTime==' /
.==/ 0
UtcNow==0 6
;==6 7
var?? 
response?? 
=?? 
await??  %
_idmOtherdebitsRepository??! :
.??: ;
AddAsync??; C
(??C D
basicDetails??D P
,??P Q
token??R W
)??W X
.??X Y
ConfigureAwait??Y g
(??g h
false??h m
)??m n
;??n o
await@@ 
_work@@ 
.@@ 
CommitAsync@@ #
(@@# $
token@@$ )
)@@) *
.@@* +
ConfigureAwait@@+ 9
(@@9 :
false@@: ?
)@@? @
;@@@ A
ifAA 
(AA 
responseAA 
!=AA 
nullAA  
)AA  !
{BB 
returnCC 
trueCC 
;CC 
}DD 
elseEE 
{FF 
returnGG 
falseGG 
;GG 
}HH 
}II 	
publicKK 
asyncKK 
TaskKK 
<KK 
boolKK 
>KK #
DeleteOtherDebitDetailsKK  7
(KK7 8"
IdmOthdebitsDetailsDTOKK8 N
othdebitKKO W
,KKW X
CancellationTokenKKY j
tokenKKk p
)KKp q
{LL 	
varMM 
basicDetailsMM 
=MM 
_mapperMM &
.MM& '
MapMM' *
<MM* +
IdmOthdebitsDetailsMM+ >
>MM> ?
(MM? @
othdebitMM@ H
)MMH I
;MMI J
basicDetailsNN 
.NN 
IsActiveNN !
=NN" #
falseNN$ )
;NN) *
basicDetailsOO 
.OO 
	IsDeletedOO "
=OO# $
trueOO% )
;OO) *
basicDetailsPP 
.PP 
ModifiedDatePP %
=PP& '
DateTimePP( 0
.PP0 1
UtcNowPP1 7
;PP7 8
basicDetailsQQ 
.QQ 

ModifiedByQQ #
=QQ$ %
	_userInfoQQ& /
.QQ/ 0
NameQQ0 4
;QQ4 5
varSS 
responseSS 
=SS 
awaitSS  %
_idmOtherdebitsRepositorySS! :
.SS: ;
UpdateAsyncSS; F
(SSF G
basicDetailsSSG S
,SSS T
tokenSSU Z
)SSZ [
.SS[ \
ConfigureAwaitSS\ j
(SSj k
falseSSk p
)SSp q
;SSq r
awaitTT 
_workTT 
.TT 
CommitAsyncTT #
(TT# $
tokenTT$ )
)TT) *
.TT* +
ConfigureAwaitTT+ 9
(TT9 :
falseTT: ?
)TT? @
;TT@ A
ifUU 
(UU 
responseUU 
!=UU 
nullUU  
)UU  !
{VV 
returnWW 
trueWW 
;WW 
}XX 
elseYY 
{ZZ 
return[[ 
false[[ 
;[[ 
}\\ 
}]] 	
public__ 
async__ 
Task__ 
<__ 
bool__ 
>__ #
CreateOtherDebitDetails__  7
(__7 8"
IdmOthdebitsDetailsDTO__8 N
othdebit__O W
,__W X
CancellationToken__Y j
token__k p
)__p q
{`` 	
varaa 
basicDetailsaa 
=aa 
_mapperaa &
.aa& '
Mapaa' *
<aa* +
IdmOthdebitsDetailsaa+ >
>aa> ?
(aa? @
othdebitaa@ H
)aaH I
;aaI J
basicDetailscc 
.cc 
IsActivecc !
=cc" #
truecc$ (
;cc( )
basicDetailsdd 
.dd 
IsSubmitteddd $
=dd% &
truedd' +
;dd+ ,
basicDetailsee 
.ee 
CreateByee !
=ee" #
	_userInfoee$ -
.ee- .
Nameee. 2
;ee2 3
basicDetailsff 
.ff 
	IsDeletedff "
=ff# $
falseff% *
;ff* +
basicDetailsgg 
.gg 
CreatedDategg $
=gg% &
DateTimegg' /
.gg/ 0
UtcNowgg0 6
;gg6 7
varii 
responseii 
=ii 
awaitii  %
_idmOtherdebitsRepositoryii! :
.ii: ;
AddAsyncii; C
(iiC D
basicDetailsiiD P
,iiP Q
tokeniiR W
)iiW X
.iiX Y
ConfigureAwaitiiY g
(iig h
falseiih m
)iim n
;iin o
awaitjj 
_workjj 
.jj 
CommitAsyncjj #
(jj# $
tokenjj$ )
)jj) *
.jj* +
ConfigureAwaitjj+ 9
(jj9 :
falsejj: ?
)jj? @
;jj@ A
ifkk 
(kk 
responsekk 
!=kk 
nullkk  
)kk  !
{ll 
returnmm 
truemm 
;mm 
}nn 
elseoo 
{pp 
returnqq 
falseqq 
;qq 
}rr 
}ss 	
publicuu 
asyncuu 
Taskuu 
<uu 
booluu 
>uu #
SubmitOtherDebitDetailsuu  7
(uu7 8"
IdmOthdebitsDetailsDTOuu8 N
othdebituuO W
,uuW X
CancellationTokenuuY j
tokenuuk p
)uup q
{vv 	
varww 
basicDetailsww 
=ww 
_mapperww &
.ww& '
Mapww' *
<ww* +
IdmOthdebitsDetailsww+ >
>ww> ?
(ww? @
othdebitww@ H
)wwH I
;wwI J
basicDetailsxx 
.xx 
IsSubmittedxx $
=xx% &
truexx' +
;xx+ ,
basicDetailsyy 
.yy 
ModifiedDateyy %
=yy& '
DateTimeyy( 0
.yy0 1
UtcNowyy1 7
;yy7 8
basicDetailszz 
.zz 

ModifiedByzz #
=zz$ %
	_userInfozz& /
.zz/ 0
Namezz0 4
;zz4 5
var|| 
response|| 
=|| 
await||  %
_idmOtherdebitsRepository||! :
.||: ;
UpdateAsync||; F
(||F G
basicDetails||G S
,||S T
token||U Z
)||Z [
.||[ \
ConfigureAwait||\ j
(||j k
false||k p
)||p q
;||q r
await}} 
_work}} 
.}} 
CommitAsync}} #
(}}# $
token}}$ )
)}}) *
.}}* +
ConfigureAwait}}+ 9
(}}9 :
false}}: ?
)}}? @
;}}@ A
if~~ 
(~~ 
response~~ 
!=~~ 
null~~  
)~~  !
{ 
return
ÄÄ 
true
ÄÄ 
;
ÄÄ 
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 
return
ÑÑ 
false
ÑÑ 
;
ÑÑ 
}
ÖÖ 
}
ÜÜ 	
}
àà 
}ââ ˙˙
VD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\IdmFileService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
{ 
public 

class 
IdmFileService 
:  !
IIdmFileService" 1
{ 
private 
readonly 
IEntityRepository *
<* +
TblLdDocument+ 8
>8 9!
_ldDocumentRepository: O
;O P
private 
readonly 
IEntityRepository *
<* +
TblUCDocument+ 8
>8 9!
_acDocumentRepository: O
;O P
private 
readonly 
IEntityRepository *
<* +
TblDCDocument+ 8
>8 9!
_dcDocumentRepository: O
;O P
private   
readonly   
IEntityRepository   *
<  * +
TblINSPDocument  + :
>  : ;#
_inspDocumentRepository  < S
;  S T
private!! 
readonly!! 
IEntityRepository!! *
<!!* +
TblCUDocument!!+ 8
>!!8 9!
_cuDocumentRepository!!: O
;!!O P
private"" 
readonly"" 
UserInfo"" !
	_userInfo""" +
;""+ ,
private## 
readonly## 
IMapper##  
_mapper##! (
;##( )
private$$ 
readonly$$ 
IUnitOfWork$$ $
_work$$% *
;$$* +
private%% 
readonly%% 
IConfiguration%% '

_configure%%( 2
;%%2 3
public'' 
IdmFileService'' 
('' 
IEntityRepository'' /
<''/ 0
TblDCDocument''0 =
>''= > 
dcDocumentRepository''? S
,''S T
IEntityRepository(( 0
<((0 1
TblLdDocument((1 >
>((> ? 
ldDocumentRepository((@ T
,((T U
IEntityRepository)) 0
<))0 1
TblUCDocument))1 >
>))> ? 
ucDocumentRepository))@ T
,))T U
IMapper))V ]
mapper))^ d
,))d e
IUnitOfWork))f q
work))r v
,))v w
IConfiguration** -
	configure**. 7
,**7 8
UserInfo**8 @
UserInfo**A I
,**I J
IEntityRepository**K \
<**\ ]
TblINSPDocument**] l
>**l m#
inspDocumentRepository	**n Ñ
,
**Ñ Ö
IEntityRepository
**Ü ó
<
**ó ò
TblCUDocument
**ò •
>
**• ¶"
cuDocumentRepository
**ß ª
)
**ª º
{++ 	!
_ldDocumentRepository,, !
=,," # 
ldDocumentRepository,,$ 8
;,,8 9!
_acDocumentRepository-- !
=--" # 
ucDocumentRepository--$ 8
;--8 9!
_dcDocumentRepository.. !
=.." # 
dcDocumentRepository..$ 8
;..8 9
_mapper// 
=// 
mapper// 
;// 
_work00 
=00 
work00 
;00 

_configure11 
=11 
	configure11 "
;11" #
	_userInfo22 
=22 
UserInfo22  
;22  !#
_inspDocumentRepository33 #
=33$ %"
inspDocumentRepository33& <
;33< =!
_cuDocumentRepository44 !
=44" # 
cuDocumentRepository44$ 8
;448 9
}55 	
public88 
async88 
Task88 
<88 
bool88 
>88 
DeleteFileAsync88  /
(88/ 0
string880 6

mainModule887 A
,88A B
string88C I
documentUniqueId88J Z
,88Z [
IConfiguration88\ j
	configure88k t
,88t u
CancellationToken	88v á
token
88à ç
)
88ç é
{99 	
bool:: 
result:: 
;:: 
switch;; 
(;; 

mainModule;; 
);; 
{<< 
case== 
Document== 
.== 
LegalDocumentation== 0
:==0 1
var>> 
ldDoc>> 
=>> 
await>>  %!
_ldDocumentRepository>>& ;
.>>; <+
FirstOrDefaultByExpressionAsync>>< [
(>>[ \
x>>\ ]
=>>>^ `
x>>a b
.>>b c
UniqueId>>c k
==>>l n
documentUniqueId>>o 
&&
>>Ä Ç
x
>>É Ñ
.
>>Ñ Ö
IsActive
>>Ö ç
==
>>é ê
true
>>ë ï
&&
>>ñ ò
x
>>ô ö
.
>>ö õ
	IsDeleted
>>õ §
==
>>• ß
false
>>® ≠
,
>>≠ Æ
token
>>Ø ¥
)
>>¥ µ
.
>>µ ∂
ConfigureAwait
>>∂ ƒ
(
>>ƒ ≈
false
>>≈  
)
>>  À
;
>>À Ã
if?? 
(?? 
ldDoc?? 
!=??  
null??! %
)??% &
{@@ 
stringAA 

folderpathAA )
=AA* +
$"AA, .
{AA. /
FileTypeExtensionAA/ @
.AA@ A
GetArchiveFilePathAAA S
(AAS T
DocumentTypeEnumAAT d
.AAd e
LegalDocument1AAe s
,AAs t
	configureAAu ~
)AA~ 
}	AA Ä
"
AAÄ Å
;
AAÅ Ç
stringBB 
archivedPathBB +
=BB, -
$"BB. 0
{BB0 1

folderpathBB1 ;
}BB; <
$strBB< >
{BB> ?
ldDocBB? D
.BBD E
FileNameBBE M
}BBM N
"BBN O
;BBO P
tryCC 
{DD 
ifEE 
(EE  
!EE  !
	DirectoryEE! *
.EE* +
ExistsEE+ 1
(EE1 2

folderpathEE2 <
)EE< =
)EE= >
	DirectoryFF  )
.FF) *
CreateDirectoryFF* 9
(FF9 :

folderpathFF: D
)FFD E
;FFE F
FileHH  
.HH  !
MoveHH! %
(HH% &
ldDocHH& +
.HH+ ,
FilePathHH, 4
,HH4 5
archivedPathHH6 B
)HHB C
;HHC D
}II 
finallyJJ 
{KK 
ldDocLL !
.LL! "
	IsDeletedLL" +
=LL, -
trueLL. 2
;LL2 3
ldDocMM !
.MM! "
IsActiveMM" *
=MM+ ,
falseMM- 2
;MM2 3
ldDocNN !
.NN! "
ModifiedDateNN" .
=NN/ 0
DateTimeNN1 9
.NN9 :
UtcNowNN: @
;NN@ A
ldDocOO !
.OO! "

ModifiedByOO" ,
=OO- .
	_userInfoOO/ 8
.OO8 9
NameOO9 =
;OO= >
awaitPP !!
_ldDocumentRepositoryPP" 7
.PP7 8
UpdateAsyncPP8 C
(PPC D
ldDocPPD I
,PPI J
tokenPPK P
)PPP Q
.PPQ R
ConfigureAwaitPPR `
(PP` a
falsePPa f
)PPf g
;PPg h
awaitQQ !
_workQQ" '
.QQ' (
CommitAsyncQQ( 3
(QQ3 4
tokenQQ4 9
)QQ9 :
.QQ: ;
ConfigureAwaitQQ; I
(QQI J
falseQQJ O
)QQO P
;QQP Q
}RR 
resultSS 
=SS  
trueSS! %
;SS% &
returnTT 
resultTT %
;TT% &
}UU 
breakVV 
;VV 
caseWW 
DocumentWW 
.WW 
AuditClearanceWW ,
:WW, -
varXX 
acDocXX 
=XX 
awaitXX  %!
_acDocumentRepositoryXX& ;
.XX; <+
FirstOrDefaultByExpressionAsyncXX< [
(XX[ \
xXX\ ]
=>XX^ `
xXXa b
.XXb c
UniqueIdXXc k
==XXl n
documentUniqueIdXXo 
&&
XXÄ Ç
x
XXÉ Ñ
.
XXÑ Ö
IsActive
XXÖ ç
==
XXé ê
true
XXë ï
&&
XXñ ò
x
XXô ö
.
XXö õ
	IsDeleted
XXõ §
==
XX• ß
false
XX® ≠
,
XX≠ Æ
token
XXØ ¥
)
XX¥ µ
.
XXµ ∂
ConfigureAwait
XX∂ ƒ
(
XXƒ ≈
false
XX≈  
)
XX  À
;
XXÀ Ã
ifYY 
(YY 
acDocYY 
!=YY  
nullYY! %
)YY% &
{ZZ 
string[[ 

folderpath[[ )
=[[* +
$"[[, .
{[[. /
FileTypeExtension[[/ @
.[[@ A
GetArchiveFilePath[[A S
([[S T
DocumentTypeEnum[[T d
.[[d e
AuditClearance[[e s
,[[s t
	configure[[u ~
)[[~ 
}	[[ Ä
"
[[Ä Å
;
[[Å Ç
string\\ 
archivedPath\\ +
=\\, -
$"\\. 0
{\\0 1

folderpath\\1 ;
}\\; <
$str\\< >
{\\> ?
acDoc\\? D
.\\D E
FileName\\E M
}\\M N
"\\N O
;\\O P
try]] 
{^^ 
if__ 
(__  
!__  !
	Directory__! *
.__* +
Exists__+ 1
(__1 2

folderpath__2 <
)__< =
)__= >
	Directory``  )
.``) *
CreateDirectory``* 9
(``9 :

folderpath``: D
)``D E
;``E F
Filebb  
.bb  !
Movebb! %
(bb% &
acDocbb& +
.bb+ ,
FilePathbb, 4
,bb4 5
archivedPathbb6 B
)bbB C
;bbC D
}cc 
finallydd 
{ee 
acDocff !
.ff! "
	IsDeletedff" +
=ff, -
trueff. 2
;ff2 3
acDocgg !
.gg! "
IsActivegg" *
=gg+ ,
falsegg- 2
;gg2 3
acDochh !
.hh! "
ModifiedDatehh" .
=hh/ 0
DateTimehh1 9
.hh9 :
UtcNowhh: @
;hh@ A
acDocii !
.ii! "

ModifiedByii" ,
=ii- .
	_userInfoii/ 8
.ii8 9
Nameii9 =
;ii= >
awaitjj !!
_acDocumentRepositoryjj" 7
.jj7 8
UpdateAsyncjj8 C
(jjC D
acDocjjD I
,jjI J
tokenjjK P
)jjP Q
.jjQ R
ConfigureAwaitjjR `
(jj` a
falsejja f
)jjf g
;jjg h
awaitkk !
_workkk" '
.kk' (
CommitAsynckk( 3
(kk3 4
tokenkk4 9
)kk9 :
.kk: ;
ConfigureAwaitkk; I
(kkI J
falsekkJ O
)kkO P
;kkP Q
}ll 
resultmm 
=mm  
truemm! %
;mm% &
returnnn 
resultnn %
;nn% &
}oo 
breakpp 
;pp 
caseqq 
Documentqq 
.qq !
DisbursementConditionqq 3
:qq3 4
varrr 
dcDocrr 
=rr 
awaitrr  %!
_dcDocumentRepositoryrr& ;
.rr; <+
FirstOrDefaultByExpressionAsyncrr< [
(rr[ \
xrr\ ]
=>rr^ `
xrra b
.rrb c
UniqueIdrrc k
==rrl n
documentUniqueIdrro 
&&
rrÄ Ç
x
rrÉ Ñ
.
rrÑ Ö
IsActive
rrÖ ç
==
rré ê
true
rrë ï
&&
rrñ ò
x
rrô ö
.
rrö õ
	IsDeleted
rrõ §
==
rr• ß
false
rr® ≠
,
rr≠ Æ
token
rrØ ¥
)
rr¥ µ
.
rrµ ∂
ConfigureAwait
rr∂ ƒ
(
rrƒ ≈
false
rr≈  
)
rr  À
;
rrÀ Ã
ifss 
(ss 
dcDocss 
!=ss  
nullss! %
)ss% &
{tt 
stringuu 

folderpathuu )
=uu* +
$"uu, .
{uu. /
FileTypeExtensionuu/ @
.uu@ A
GetArchiveFilePathuuA S
(uuS T
DocumentTypeEnumuuT d
.uud e!
DisbursementConditionuue z
,uuz {
	configure	uu| Ö
)
uuÖ Ü
}
uuÜ á
"
uuá à
;
uuà â
stringvv 
archivedPathvv +
=vv, -
$"vv. 0
{vv0 1

folderpathvv1 ;
}vv; <
$strvv< >
{vv> ?
dcDocvv? D
.vvD E
FileNamevvE M
}vvM N
"vvN O
;vvO P
tryww 
{xx 
ifyy 
(yy  
!yy  !
	Directoryyy! *
.yy* +
Existsyy+ 1
(yy1 2

folderpathyy2 <
)yy< =
)yy= >
	Directoryzz  )
.zz) *
CreateDirectoryzz* 9
(zz9 :

folderpathzz: D
)zzD E
;zzE F
File||  
.||  !
Move||! %
(||% &
dcDoc||& +
.||+ ,
FilePath||, 4
,||4 5
archivedPath||6 B
)||B C
;||C D
}}} 
finally~~ 
{ 
dcDoc
ÄÄ !
.
ÄÄ! "
	IsDeleted
ÄÄ" +
=
ÄÄ, -
true
ÄÄ. 2
;
ÄÄ2 3
dcDoc
ÅÅ !
.
ÅÅ! "
IsActive
ÅÅ" *
=
ÅÅ+ ,
false
ÅÅ- 2
;
ÅÅ2 3
dcDoc
ÇÇ !
.
ÇÇ! "
ModifiedDate
ÇÇ" .
=
ÇÇ/ 0
DateTime
ÇÇ1 9
.
ÇÇ9 :
UtcNow
ÇÇ: @
;
ÇÇ@ A
dcDoc
ÉÉ !
.
ÉÉ! "

ModifiedBy
ÉÉ" ,
=
ÉÉ- .
	_userInfo
ÉÉ/ 8
.
ÉÉ8 9
Name
ÉÉ9 =
;
ÉÉ= >
await
ÑÑ !#
_dcDocumentRepository
ÑÑ" 7
.
ÑÑ7 8
UpdateAsync
ÑÑ8 C
(
ÑÑC D
dcDoc
ÑÑD I
,
ÑÑI J
token
ÑÑK P
)
ÑÑP Q
.
ÑÑQ R
ConfigureAwait
ÑÑR `
(
ÑÑ` a
false
ÑÑa f
)
ÑÑf g
;
ÑÑg h
await
ÖÖ !
_work
ÖÖ" '
.
ÖÖ' (
CommitAsync
ÖÖ( 3
(
ÖÖ3 4
token
ÖÖ4 9
)
ÖÖ9 :
.
ÖÖ: ;
ConfigureAwait
ÖÖ; I
(
ÖÖI J
false
ÖÖJ O
)
ÖÖO P
;
ÖÖP Q
}
ÜÜ 
result
áá 
=
áá  
true
áá! %
;
áá% &
return
àà 
result
àà %
;
àà% &
}
ââ 
break
ää 
;
ää 
case
ãã 
Document
ãã 
.
ãã 
InspectionOfUnit
ãã .
:
ãã. /
var
åå 
inspDoc
åå 
=
åå  !
await
åå" '%
_inspDocumentRepository
åå( ?
.
åå? @-
FirstOrDefaultByExpressionAsync
åå@ _
(
åå_ `
x
åå` a
=>
ååb d
x
ååe f
.
ååf g
UniqueId
ååg o
==
ååp r
documentUniqueIdåås É
&&ååÑ Ü
xååá à
.ååà â
IsActiveååâ ë
==ååí î
trueååï ô
&&ååö ú
xååù û
.ååû ü
	IsDeletedååü ®
==åå© ´
falseåå¨ ±
,åå± ≤
tokenåå≥ ∏
)åå∏ π
.ååπ ∫
ConfigureAwaitåå∫ »
(åå» …
falseåå… Œ
)ååŒ œ
;ååœ –
if
çç 
(
çç 
inspDoc
çç 
!=
çç  "
null
çç# '
)
çç' (
{
éé 
string
èè 

folderpath
èè )
=
èè* +
$"
èè, .
{
èè. /
FileTypeExtension
èè/ @
.
èè@ A 
GetArchiveFilePath
èèA S
(
èèS T
DocumentTypeEnum
èèT d
.
èèd e
InspectionOfUnit
èèe u
,
èèu v
	configureèèw Ä
)èèÄ Å
}èèÅ Ç
"èèÇ É
;èèÉ Ñ
string
êê 
archivedPath
êê +
=
êê, -
$"
êê. 0
{
êê0 1

folderpath
êê1 ;
}
êê; <
$str
êê< >
{
êê> ?
inspDoc
êê? F
.
êêF G
FileName
êêG O
}
êêO P
"
êêP Q
;
êêQ R
try
ëë 
{
íí 
if
ìì 
(
ìì  
!
ìì  !
	Directory
ìì! *
.
ìì* +
Exists
ìì+ 1
(
ìì1 2

folderpath
ìì2 <
)
ìì< =
)
ìì= >
	Directory
îî  )
.
îî) *
CreateDirectory
îî* 9
(
îî9 :

folderpath
îî: D
)
îîD E
;
îîE F
File
ññ  
.
ññ  !
Move
ññ! %
(
ññ% &
inspDoc
ññ& -
.
ññ- .
FilePath
ññ. 6
,
ññ6 7
archivedPath
ññ8 D
)
ññD E
;
ññE F
}
óó 
finally
òò 
{
ôô 
inspDoc
öö #
.
öö# $
	IsDeleted
öö$ -
=
öö. /
true
öö0 4
;
öö4 5
inspDoc
õõ #
.
õõ# $
IsActive
õõ$ ,
=
õõ- .
false
õõ/ 4
;
õõ4 5
inspDoc
úú #
.
úú# $
ModifiedDate
úú$ 0
=
úú1 2
DateTime
úú3 ;
.
úú; <
UtcNow
úú< B
;
úúB C
inspDoc
ùù #
.
ùù# $

ModifiedBy
ùù$ .
=
ùù/ 0
	_userInfo
ùù1 :
.
ùù: ;
Name
ùù; ?
;
ùù? @
await
ûû !%
_inspDocumentRepository
ûû" 9
.
ûû9 :
UpdateAsync
ûû: E
(
ûûE F
inspDoc
ûûF M
,
ûûM N
token
ûûO T
)
ûûT U
.
ûûU V
ConfigureAwait
ûûV d
(
ûûd e
false
ûûe j
)
ûûj k
;
ûûk l
await
üü !
_work
üü" '
.
üü' (
CommitAsync
üü( 3
(
üü3 4
token
üü4 9
)
üü9 :
.
üü: ;
ConfigureAwait
üü; I
(
üüI J
false
üüJ O
)
üüO P
;
üüP Q
}
†† 
result
°° 
=
°°  
true
°°! %
;
°°% &
return
¢¢ 
result
¢¢ %
;
¢¢% &
}
££ 
break
§§ 
;
§§ 
case
•• 
Document
•• 
.
•• 
ChangeOfUnit
•• *
:
••* +
var
¶¶ 
cuDoc
¶¶ 
=
¶¶ 
await
¶¶  %#
_cuDocumentRepository
¶¶& ;
.
¶¶; <-
FirstOrDefaultByExpressionAsync
¶¶< [
(
¶¶[ \
x
¶¶\ ]
=>
¶¶^ `
x
¶¶a b
.
¶¶b c
UniqueId
¶¶c k
==
¶¶l n
documentUniqueId
¶¶o 
&&¶¶Ä Ç
x¶¶É Ñ
.¶¶Ñ Ö
IsActive¶¶Ö ç
==¶¶é ê
true¶¶ë ï
&&¶¶ñ ò
x¶¶ô ö
.¶¶ö õ
	IsDeleted¶¶õ §
==¶¶• ß
false¶¶® ≠
,¶¶≠ Æ
token¶¶Ø ¥
)¶¶¥ µ
.¶¶µ ∂
ConfigureAwait¶¶∂ ƒ
(¶¶ƒ ≈
false¶¶≈  
)¶¶  À
;¶¶À Ã
if
ßß 
(
ßß 
cuDoc
ßß 
!=
ßß  
null
ßß! %
)
ßß% &
{
®® 
string
©© 

folderpath
©© )
=
©©* +
$"
©©, .
{
©©. /
FileTypeExtension
©©/ @
.
©©@ A 
GetArchiveFilePath
©©A S
(
©©S T
DocumentTypeEnum
©©T d
.
©©d e
ChangeOfUnit
©©e q
,
©©q r
	configure
©©s |
)
©©| }
}
©©} ~
"
©©~ 
;©© Ä
string
™™ 
archivedPath
™™ +
=
™™, -
$"
™™. 0
{
™™0 1

folderpath
™™1 ;
}
™™; <
$str
™™< >
{
™™> ?
cuDoc
™™? D
.
™™D E
FileName
™™E M
}
™™M N
"
™™N O
;
™™O P
try
´´ 
{
¨¨ 
if
≠≠ 
(
≠≠  
!
≠≠  !
	Directory
≠≠! *
.
≠≠* +
Exists
≠≠+ 1
(
≠≠1 2

folderpath
≠≠2 <
)
≠≠< =
)
≠≠= >
	Directory
ÆÆ  )
.
ÆÆ) *
CreateDirectory
ÆÆ* 9
(
ÆÆ9 :

folderpath
ÆÆ: D
)
ÆÆD E
;
ÆÆE F
File
∞∞  
.
∞∞  !
Move
∞∞! %
(
∞∞% &
cuDoc
∞∞& +
.
∞∞+ ,
FilePath
∞∞, 4
,
∞∞4 5
archivedPath
∞∞6 B
)
∞∞B C
;
∞∞C D
}
±± 
finally
≤≤ 
{
≥≥ 
cuDoc
¥¥ !
.
¥¥! "
	IsDeleted
¥¥" +
=
¥¥, -
true
¥¥. 2
;
¥¥2 3
cuDoc
µµ !
.
µµ! "
IsActive
µµ" *
=
µµ+ ,
false
µµ- 2
;
µµ2 3
cuDoc
∂∂ !
.
∂∂! "
ModifiedDate
∂∂" .
=
∂∂/ 0
DateTime
∂∂1 9
.
∂∂9 :
UtcNow
∂∂: @
;
∂∂@ A
cuDoc
∑∑ !
.
∑∑! "

ModifiedBy
∑∑" ,
=
∑∑- .
	_userInfo
∑∑/ 8
.
∑∑8 9
Name
∑∑9 =
;
∑∑= >
await
∏∏ !#
_cuDocumentRepository
∏∏" 7
.
∏∏7 8
UpdateAsync
∏∏8 C
(
∏∏C D
cuDoc
∏∏D I
,
∏∏I J
token
∏∏K P
)
∏∏P Q
.
∏∏Q R
ConfigureAwait
∏∏R `
(
∏∏` a
false
∏∏a f
)
∏∏f g
;
∏∏g h
await
ππ !
_work
ππ" '
.
ππ' (
CommitAsync
ππ( 3
(
ππ3 4
token
ππ4 9
)
ππ9 :
.
ππ: ;
ConfigureAwait
ππ; I
(
ππI J
false
ππJ O
)
ππO P
;
ππP Q
}
∫∫ 
result
ªª 
=
ªª  
true
ªª! %
;
ªª% &
return
ºº 
result
ºº %
;
ºº% &
}
ΩΩ 
break
ææ 
;
ææ 
}
øø 
return
¿¿ 
result
¿¿ 
=
¿¿ 
false
¿¿ !
;
¿¿! "
}
¡¡ 	
public
√√ 
async
√√ 
Task
√√ 
<
√√ 
IdmFileUploadDto
√√ *
>
√√* +"
GetEncryptedFileById
√√, @
(
√√@ A
string
√√A G

mainModule
√√H R
,
√√R S
string
√√T Z

documentId
√√[ e
,
√√e f
CancellationToken
√√g x
token
√√y ~
)
√√~ 
{
ƒƒ 	
switch
≈≈ 
(
≈≈ 

mainModule
≈≈ 
)
≈≈ 
{
∆∆ 
case
«« 
Document
«« 
.
««  
LegalDocumentation
«« 0
:
««0 1
var
»» 
ldDoc
»» 
=
»» 
await
»»  %#
_ldDocumentRepository
»»& ;
.
»»; <-
FirstOrDefaultByExpressionAsync
»»< [
(
»»[ \
x
»»\ ]
=>
»»^ `
x
»»a b
.
»»b c
UniqueId
»»c k
==
»»l n

documentId
»»o y
&&
»»z |
x
»»} ~
.
»»~ 
IsActive»» á
==»»à ä
true»»ã è
&&»»ê í
x»»ì î
.»»î ï
	IsDeleted»»ï û
==»»ü °
false»»¢ ß
,»»ß ®
token»»© Æ
)»»Æ Ø
.»»Ø ∞
ConfigureAwait»»∞ æ
(»»æ ø
false»»ø ƒ
)»»ƒ ≈
;»»≈ ∆
if
…… 
(
…… 
ldDoc
…… 
!=
……  
null
……! %
)
……% &
{
   
var
ÀÀ 
	byteArray
ÀÀ %
=
ÀÀ& '
await
ÀÀ( -
FileSecurity
ÀÀ. :
.
ÀÀ: ;(
EncryptedBytesFromFilePath
ÀÀ; U
(
ÀÀU V
ldDoc
ÀÀV [
.
ÀÀ[ \
FilePath
ÀÀ\ d
,
ÀÀd e
$str
ÀÀf p
)
ÀÀp q
;
ÀÀq r
if
ÃÃ 
(
ÃÃ 
	byteArray
ÃÃ %
==
ÃÃ& (
null
ÃÃ) -
)
ÃÃ- .
{
ÕÕ 
throw
ŒŒ !
new
ŒŒ" %$
FileSecurityExceptions
ŒŒ& <
(
ŒŒ< =
DocumentError
ŒŒ= J
.
ŒŒJ K
Encryptionfailed
ŒŒK [
)
ŒŒ[ \
;
ŒŒ\ ]
}
œœ 
return
–– 
new
–– "
IdmFileUploadDto
––# 3
{
—— 
Bytes
““ !
=
““" #
	byteArray
““$ -
,
““- .
SubModuleId
”” '
=
””( )
ldDoc
””* /
.
””/ 0
SubModuleId
””0 ;
,
””; <
SubModuleType
‘‘ )
=
‘‘* +
ldDoc
‘‘, 1
.
‘‘1 2
SubModuleType
‘‘2 ?
,
‘‘? @

MainModule
’’ &
=
’’' (
ldDoc
’’) .
.
’’. /

MainModule
’’/ 9
}
÷÷ 
;
÷÷ 
}
◊◊ 
break
ÿÿ 
;
ÿÿ 
case
ŸŸ 
Document
ŸŸ 
.
ŸŸ 
AuditClearance
ŸŸ ,
:
ŸŸ, -
var
⁄⁄ 
acDoc
⁄⁄ 
=
⁄⁄ 
await
⁄⁄  %#
_acDocumentRepository
⁄⁄& ;
.
⁄⁄; <-
FirstOrDefaultByExpressionAsync
⁄⁄< [
(
⁄⁄[ \
x
⁄⁄\ ]
=>
⁄⁄^ `
x
⁄⁄a b
.
⁄⁄b c
UniqueId
⁄⁄c k
==
⁄⁄l n

documentId
⁄⁄o y
&&
⁄⁄z |
x
⁄⁄} ~
.
⁄⁄~ 
IsActive⁄⁄ á
==⁄⁄à ä
true⁄⁄ã è
&&⁄⁄ê í
x⁄⁄ì î
.⁄⁄î ï
	IsDeleted⁄⁄ï û
==⁄⁄ü °
false⁄⁄¢ ß
,⁄⁄ß ®
token⁄⁄© Æ
)⁄⁄Æ Ø
.⁄⁄Ø ∞
ConfigureAwait⁄⁄∞ æ
(⁄⁄æ ø
false⁄⁄ø ƒ
)⁄⁄ƒ ≈
;⁄⁄≈ ∆
if
€€ 
(
€€ 
acDoc
€€ 
!=
€€  
null
€€! %
)
€€% &
{
‹‹ 
var
›› 
	byteArray
›› %
=
››& '
await
››( -
FileSecurity
››. :
.
››: ;(
EncryptedBytesFromFilePath
››; U
(
››U V
acDoc
››V [
.
››[ \
FilePath
››\ d
,
››d e
$str
››f p
)
››p q
;
››q r
if
ﬁﬁ 
(
ﬁﬁ 
	byteArray
ﬁﬁ %
==
ﬁﬁ& (
null
ﬁﬁ) -
)
ﬁﬁ- .
{
ﬂﬂ 
throw
‡‡ !
new
‡‡" %$
FileSecurityExceptions
‡‡& <
(
‡‡< =
DocumentError
‡‡= J
.
‡‡J K
Encryptionfailed
‡‡K [
)
‡‡[ \
;
‡‡\ ]
}
·· 
return
‚‚ 
new
‚‚ "
IdmFileUploadDto
‚‚# 3
{
„„ 
Bytes
‰‰ !
=
‰‰" #
	byteArray
‰‰$ -
,
‰‰- .
SubModuleId
ÂÂ '
=
ÂÂ( )
acDoc
ÂÂ* /
.
ÂÂ/ 0
SubModuleId
ÂÂ0 ;
,
ÂÂ; <
SubModuleType
ÊÊ )
=
ÊÊ* +
acDoc
ÊÊ, 1
.
ÊÊ1 2
SubModuleType
ÊÊ2 ?
,
ÊÊ? @

MainModule
ÁÁ &
=
ÁÁ' (
acDoc
ÁÁ) .
.
ÁÁ. /

MainModule
ÁÁ/ 9
}
ËË 
;
ËË 
}
ÈÈ 
break
ÍÍ 
;
ÍÍ 
case
ÎÎ 
Document
ÎÎ 
.
ÎÎ #
DisbursementCondition
ÎÎ 3
:
ÎÎ3 4
var
ÏÏ 
dcDoc
ÏÏ 
=
ÏÏ 
await
ÏÏ  %#
_dcDocumentRepository
ÏÏ& ;
.
ÏÏ; <-
FirstOrDefaultByExpressionAsync
ÏÏ< [
(
ÏÏ[ \
x
ÏÏ\ ]
=>
ÏÏ^ `
x
ÏÏa b
.
ÏÏb c
UniqueId
ÏÏc k
==
ÏÏl n

documentId
ÏÏo y
&&
ÏÏz |
x
ÏÏ} ~
.
ÏÏ~ 
IsActiveÏÏ á
==ÏÏà ä
trueÏÏã è
&&ÏÏê í
xÏÏì î
.ÏÏî ï
	IsDeletedÏÏï û
==ÏÏü °
falseÏÏ¢ ß
,ÏÏß ®
tokenÏÏ© Æ
)ÏÏÆ Ø
.ÏÏØ ∞
ConfigureAwaitÏÏ∞ æ
(ÏÏæ ø
falseÏÏø ƒ
)ÏÏƒ ≈
;ÏÏ≈ ∆
if
ÌÌ 
(
ÌÌ 
dcDoc
ÌÌ 
!=
ÌÌ  
null
ÌÌ! %
)
ÌÌ% &
{
ÓÓ 
var
ÔÔ 
	byteArray
ÔÔ %
=
ÔÔ& '
await
ÔÔ( -
FileSecurity
ÔÔ. :
.
ÔÔ: ;(
EncryptedBytesFromFilePath
ÔÔ; U
(
ÔÔU V
dcDoc
ÔÔV [
.
ÔÔ[ \
FilePath
ÔÔ\ d
,
ÔÔd e
$str
ÔÔf p
)
ÔÔp q
;
ÔÔq r
if
 
(
 
	byteArray
 %
==
& (
null
) -
)
- .
{
ÒÒ 
throw
ÚÚ !
new
ÚÚ" %$
FileSecurityExceptions
ÚÚ& <
(
ÚÚ< =
DocumentError
ÚÚ= J
.
ÚÚJ K
Encryptionfailed
ÚÚK [
)
ÚÚ[ \
;
ÚÚ\ ]
}
ÛÛ 
return
ÙÙ 
new
ÙÙ "
IdmFileUploadDto
ÙÙ# 3
{
ıı 
Bytes
ˆˆ !
=
ˆˆ" #
	byteArray
ˆˆ$ -
,
ˆˆ- .
SubModuleId
˜˜ '
=
˜˜( )
dcDoc
˜˜* /
.
˜˜/ 0
SubModuleId
˜˜0 ;
,
˜˜; <
SubModuleType
¯¯ )
=
¯¯* +
dcDoc
¯¯, 1
.
¯¯1 2
SubModuleType
¯¯2 ?
,
¯¯? @

MainModule
˘˘ &
=
˘˘' (
dcDoc
˘˘) .
.
˘˘. /

MainModule
˘˘/ 9
}
˙˙ 
;
˙˙ 
}
˚˚ 
break
¸¸ 
;
¸¸ 
case
˝˝ 
Document
˝˝ 
.
˝˝ 
InspectionOfUnit
˝˝ *
:
˝˝* +
var
˛˛ 
inspDoc
˛˛ 
=
˛˛  !
await
˛˛" '%
_inspDocumentRepository
˛˛( ?
.
˛˛? @-
FirstOrDefaultByExpressionAsync
˛˛@ _
(
˛˛_ `
x
˛˛` a
=>
˛˛b d
x
˛˛e f
.
˛˛f g
UniqueId
˛˛g o
==
˛˛p r

documentId
˛˛s }
&&˛˛~ Ä
x˛˛Å Ç
.˛˛Ç É
IsActive˛˛É ã
==˛˛å é
true˛˛è ì
&&˛˛î ñ
x˛˛ó ò
.˛˛ò ô
	IsDeleted˛˛ô ¢
==˛˛£ •
false˛˛¶ ´
,˛˛´ ¨
token˛˛≠ ≤
)˛˛≤ ≥
.˛˛≥ ¥
ConfigureAwait˛˛¥ ¬
(˛˛¬ √
false˛˛√ »
)˛˛» …
;˛˛…  
if
ˇˇ 
(
ˇˇ 
inspDoc
ˇˇ 
!=
ˇˇ  "
null
ˇˇ# '
)
ˇˇ' (
{
ÄÄ 
var
ÅÅ 
	byteArray
ÅÅ %
=
ÅÅ& '
await
ÅÅ( -
FileSecurity
ÅÅ. :
.
ÅÅ: ;(
EncryptedBytesFromFilePath
ÅÅ; U
(
ÅÅU V
inspDoc
ÅÅV ]
.
ÅÅ] ^
FilePath
ÅÅ^ f
,
ÅÅf g
$str
ÅÅh r
)
ÅÅr s
;
ÅÅs t
if
ÇÇ 
(
ÇÇ 
	byteArray
ÇÇ %
==
ÇÇ& (
null
ÇÇ) -
)
ÇÇ- .
{
ÉÉ 
throw
ÑÑ !
new
ÑÑ" %$
FileSecurityExceptions
ÑÑ& <
(
ÑÑ< =
DocumentError
ÑÑ= J
.
ÑÑJ K
Encryptionfailed
ÑÑK [
)
ÑÑ[ \
;
ÑÑ\ ]
}
ÖÖ 
return
ÜÜ 
new
ÜÜ "
IdmFileUploadDto
ÜÜ# 3
{
áá 
Bytes
àà !
=
àà" #
	byteArray
àà$ -
,
àà- .
SubModuleId
ââ '
=
ââ( )
inspDoc
ââ* 1
.
ââ1 2
SubModuleId
ââ2 =
,
ââ= >
SubModuleType
ää )
=
ää* +
inspDoc
ää, 3
.
ää3 4
SubModuleType
ää4 A
,
ääA B

MainModule
ãã &
=
ãã' (
inspDoc
ãã) 0
.
ãã0 1

MainModule
ãã1 ;
}
åå 
;
åå 
}
çç 
break
éé 
;
éé 
case
èè 
Document
èè 
.
èè 
ChangeOfUnit
èè *
:
èè* +
var
êê 
cuDoc
êê 
=
êê 
await
êê  %#
_cuDocumentRepository
êê& ;
.
êê; <-
FirstOrDefaultByExpressionAsync
êê< [
(
êê[ \
x
êê\ ]
=>
êê^ `
x
êêa b
.
êêb c
UniqueId
êêc k
==
êêl n

documentId
êêo y
&&
êêz |
x
êê} ~
.
êê~ 
IsActiveêê á
==êêà ä
trueêêã è
&&êêê í
xêêì î
.êêî ï
	IsDeletedêêï û
==êêü °
falseêê¢ ß
,êêß ®
tokenêê© Æ
)êêÆ Ø
.êêØ ∞
ConfigureAwaitêê∞ æ
(êêæ ø
falseêêø ƒ
)êêƒ ≈
;êê≈ ∆
if
ëë 
(
ëë 
cuDoc
ëë 
!=
ëë  
null
ëë! %
)
ëë% &
{
íí 
var
ìì 
	byteArray
ìì %
=
ìì& '
await
ìì( -
FileSecurity
ìì. :
.
ìì: ;(
EncryptedBytesFromFilePath
ìì; U
(
ììU V
cuDoc
ììV [
.
ìì[ \
FilePath
ìì\ d
,
ììd e
$str
ììf p
)
ììp q
;
ììq r
if
îî 
(
îî 
	byteArray
îî %
==
îî& (
null
îî) -
)
îî- .
{
ïï 
throw
ññ !
new
ññ" %$
FileSecurityExceptions
ññ& <
(
ññ< =
DocumentError
ññ= J
.
ññJ K
Encryptionfailed
ññK [
)
ññ[ \
;
ññ\ ]
}
óó 
return
òò 
new
òò "
IdmFileUploadDto
òò# 3
{
ôô 
Bytes
öö !
=
öö" #
	byteArray
öö$ -
,
öö- .
SubModuleId
õõ '
=
õõ( )
cuDoc
õõ* /
.
õõ/ 0
SubModuleId
õõ0 ;
,
õõ; <
SubModuleType
úú )
=
úú* +
cuDoc
úú, 1
.
úú1 2
SubModuleType
úú2 ?
,
úú? @

MainModule
ùù &
=
ùù' (
cuDoc
ùù) .
.
ùù. /

MainModule
ùù/ 9
}
ûû 
;
ûû 
}
üü 
break
†† 
;
†† 
}
°° 
throw
¢¢ 
new
¢¢ $
FileSecurityExceptions
¢¢ ,
(
¢¢, -
DocumentError
¢¢- :
.
¢¢: ;
Encryptionfailed
¢¢; K
)
¢¢K L
;
¢¢L M
}
££ 	
public
•• 
async
•• 
Task
•• 
<
•• 
List
•• 
<
•• 
ldDocumentDto
•• ,
>
••, -
>
••- .
GetFileListAsync
••/ ?
(
••? @
string
••@ F

MainModule
••G Q
,
••Q R
CancellationToken
••S d
token
••e j
)
••j k
{
¶¶ 	
var
ßß 
result
ßß 
=
ßß 
new
ßß 
List
ßß !
<
ßß! "
ldDocumentDto
ßß" /
>
ßß/ 0
(
ßß0 1
)
ßß1 2
;
ßß2 3
switch
®® 
(
®® 

MainModule
®® 
)
®® 
{
©© 
case
™™ 
Document
™™ 
.
™™  
LegalDocumentation
™™ 0
:
™™0 1
var
´´ 
ldDoc
´´ 
=
´´ 
await
´´  %#
_ldDocumentRepository
´´& ;
.
´´; <#
FindByExpressionAsync
´´< Q
(
´´Q R
x
´´R S
=>
´´T V
x
´´W X
.
´´X Y
IsActive
´´Y a
==
´´b d
true
´´e i
&&
´´j l
x
´´m n
.
´´n o
	IsDeleted
´´o x
==
´´y {
false´´| Å
&&´´Ç Ñ
x´´Ö Ü
.´´Ü á

MainModule´´á ë
==´´í î

MainModule´´ï ü
,´´ü †
token´´° ¶
)´´¶ ß
.´´ß ®
ConfigureAwait´´® ∂
(´´∂ ∑
false´´∑ º
)´´º Ω
;´´Ω æ
if
¨¨ 
(
¨¨ 
ldDoc
¨¨ 
.
¨¨ 
Count
¨¨ #
>
¨¨$ %
$num
¨¨& '
)
¨¨' (
return
≠≠ 
result
≠≠ %
=
≠≠& '
_mapper
≠≠( /
.
≠≠/ 0
Map
≠≠0 3
<
≠≠3 4
List
≠≠4 8
<
≠≠8 9
ldDocumentDto
≠≠9 F
>
≠≠F G
>
≠≠G H
(
≠≠H I
ldDoc
≠≠I N
)
≠≠N O
;
≠≠O P
break
ÆÆ 
;
ÆÆ 
case
ØØ 
Document
ØØ 
.
ØØ 
AuditClearance
ØØ ,
:
ØØ, -
var
∞∞ 
acDoc
∞∞ 
=
∞∞ 
await
∞∞  %#
_acDocumentRepository
∞∞& ;
.
∞∞; <#
FindByExpressionAsync
∞∞< Q
(
∞∞Q R
x
∞∞R S
=>
∞∞T V
x
∞∞W X
.
∞∞X Y
IsActive
∞∞Y a
==
∞∞b d
true
∞∞e i
&&
∞∞j l
x
∞∞m n
.
∞∞n o
	IsDeleted
∞∞o x
==
∞∞y {
false∞∞| Å
&&∞∞Ç Ñ
x∞∞Ö Ü
.∞∞Ü á

MainModule∞∞á ë
==∞∞í î

MainModule∞∞ï ü
,∞∞ü †
token∞∞° ¶
)∞∞¶ ß
.∞∞ß ®
ConfigureAwait∞∞® ∂
(∞∞∂ ∑
false∞∞∑ º
)∞∞º Ω
;∞∞Ω æ
if
±± 
(
±± 
acDoc
±± 
.
±± 
Count
±± #
>
±±$ %
$num
±±& '
)
±±' (
return
≤≤ 
result
≤≤ %
=
≤≤& '
_mapper
≤≤( /
.
≤≤/ 0
Map
≤≤0 3
<
≤≤3 4
List
≤≤4 8
<
≤≤8 9
ldDocumentDto
≤≤9 F
>
≤≤F G
>
≤≤G H
(
≤≤H I
acDoc
≤≤I N
)
≤≤N O
;
≤≤O P
break
≥≥ 
;
≥≥ 
case
¥¥ 
Document
¥¥ 
.
¥¥ #
DisbursementCondition
¥¥ 3
:
¥¥3 4
var
µµ 
dcDoc
µµ 
=
µµ 
await
µµ  %#
_dcDocumentRepository
µµ& ;
.
µµ; <#
FindByExpressionAsync
µµ< Q
(
µµQ R
x
µµR S
=>
µµT V
x
µµW X
.
µµX Y
IsActive
µµY a
==
µµb d
true
µµe i
&&
µµj l
x
µµm n
.
µµn o
	IsDeleted
µµo x
==
µµy {
falseµµ| Å
&&µµÇ Ñ
xµµÖ Ü
.µµÜ á

MainModuleµµá ë
==µµí î

MainModuleµµï ü
,µµü †
tokenµµ° ¶
)µµ¶ ß
.µµß ®
ConfigureAwaitµµ® ∂
(µµ∂ ∑
falseµµ∑ º
)µµº Ω
;µµΩ æ
if
∂∂ 
(
∂∂ 
dcDoc
∂∂ 
.
∂∂ 
Count
∂∂ #
>
∂∂$ %
$num
∂∂& '
)
∂∂' (
return
∑∑ 
result
∑∑ %
=
∑∑& '
_mapper
∑∑( /
.
∑∑/ 0
Map
∑∑0 3
<
∑∑3 4
List
∑∑4 8
<
∑∑8 9
ldDocumentDto
∑∑9 F
>
∑∑F G
>
∑∑G H
(
∑∑H I
dcDoc
∑∑I N
)
∑∑N O
;
∑∑O P
break
∏∏ 
;
∏∏ 
case
ππ 
Document
ππ 
.
ππ 
InspectionOfUnit
ππ .
:
ππ. /
var
∫∫ 
inspDoc
∫∫ 
=
∫∫  !
await
∫∫" '%
_inspDocumentRepository
∫∫( ?
.
∫∫? @#
FindByExpressionAsync
∫∫@ U
(
∫∫U V
x
∫∫V W
=>
∫∫X Z
x
∫∫[ \
.
∫∫\ ]
IsActive
∫∫] e
==
∫∫f h
true
∫∫i m
&&
∫∫n p
x
∫∫q r
.
∫∫r s
	IsDeleted
∫∫s |
==
∫∫} 
false∫∫Ä Ö
&&∫∫Ü à
x∫∫â ä
.∫∫ä ã

MainModule∫∫ã ï
==∫∫ñ ò

MainModule∫∫ô £
,∫∫£ §
token∫∫• ™
)∫∫™ ´
.∫∫´ ¨
ConfigureAwait∫∫¨ ∫
(∫∫∫ ª
false∫∫ª ¿
)∫∫¿ ¡
;∫∫¡ ¬
if
ªª 
(
ªª 
inspDoc
ªª 
.
ªª  
Count
ªª  %
>
ªª& '
$num
ªª( )
)
ªª) *
return
ºº 
result
ºº %
=
ºº& '
_mapper
ºº( /
.
ºº/ 0
Map
ºº0 3
<
ºº3 4
List
ºº4 8
<
ºº8 9
ldDocumentDto
ºº9 F
>
ººF G
>
ººG H
(
ººH I
inspDoc
ººI P
)
ººP Q
;
ººQ R
break
ΩΩ 
;
ΩΩ 
case
ææ 
Document
ææ 
.
ææ 
ChangeOfUnit
ææ *
:
ææ* +
var
øø 
cuDoc
øø 
=
øø 
await
øø  %#
_cuDocumentRepository
øø& ;
.
øø; <#
FindByExpressionAsync
øø< Q
(
øøQ R
x
øøR S
=>
øøT V
x
øøW X
.
øøX Y
IsActive
øøY a
==
øøb d
true
øøe i
&&
øøj l
x
øøm n
.
øøn o
	IsDeleted
øøo x
==
øøy {
falseøø| Å
&&øøÇ Ñ
xøøÖ Ü
.øøÜ á

MainModuleøøá ë
==øøí î

MainModuleøøï ü
,øøü †
tokenøø° ¶
)øø¶ ß
.øøß ®
ConfigureAwaitøø® ∂
(øø∂ ∑
falseøø∑ º
)øøº Ω
;øøΩ æ
if
¿¿ 
(
¿¿ 
cuDoc
¿¿ 
.
¿¿ 
Count
¿¿ #
>
¿¿$ %
$num
¿¿& '
)
¿¿' (
return
¡¡ 
result
¡¡ %
=
¡¡& '
_mapper
¡¡( /
.
¡¡/ 0
Map
¡¡0 3
<
¡¡3 4
List
¡¡4 8
<
¡¡8 9
ldDocumentDto
¡¡9 F
>
¡¡F G
>
¡¡G H
(
¡¡H I
cuDoc
¡¡I N
)
¡¡N O
;
¡¡O P
break
¬¬ 
;
¬¬ 
}
√√ 
return
ƒƒ 
result
ƒƒ 
;
ƒƒ 
}
≈≈ 	
public
«« 
async
«« 
Task
«« 
<
«« 
ldDocumentDto
«« '
>
««' (

UploadFile
««) 3
(
««3 4
byte
««4 8
[
««8 9
]
««9 :
bytes
««; @
,
««@ A
int
««B E
subModuleId
««F Q
,
««Q R
string
««S Y
subModuleType
««Z g
,
««g h
string
««i o

mainModule
««p z
,
««z {
IConfiguration««| ä
	configure««ã î
,««î ï!
CancellationToken««ñ ß
token««® ≠
)««≠ Æ
{
»» 	
try
…… 
{
   
if
ÀÀ 
(
ÀÀ 
!
ÀÀ 
FileTypeExtension
ÀÀ &
.
ÀÀ& '
ValidateFileSize
ÀÀ' 7
(
ÀÀ7 8
bytes
ÀÀ8 =
.
ÀÀ= >
Length
ÀÀ> D
,
ÀÀD E
FileTypesEnum
ÀÀF S
.
ÀÀS T
Pdf
ÀÀT W
,
ÀÀW X
	configure
ÀÀY b
)
ÀÀb c
)
ÀÀc d
{
ÃÃ 
var
ÕÕ 
size
ÕÕ 
=
ÕÕ 
FileTypeExtension
ÕÕ 0
.
ÕÕ0 1
GetFileSize
ÕÕ1 <
(
ÕÕ< =
FileTypesEnum
ÕÕ= J
.
ÕÕJ K
Pdf
ÕÕK N
,
ÕÕN O
	configure
ÕÕP Y
)
ÕÕY Z
;
ÕÕZ [
throw
ŒŒ 
new
ŒŒ $
FileSecurityExceptions
ŒŒ 4
(
ŒŒ4 5

_configure
ŒŒ5 ?
[
ŒŒ? @
$str
ŒŒ@ R
]
ŒŒR S
)
ŒŒS T
;
ŒŒT U
}
œœ 
ldDocumentDto
—— 
ldDocumentDto
—— +
=
——, -
new
——. 1
(
——1 2
)
——2 3
;
——3 4
switch
”” 
(
”” 

mainModule
”” "
)
””" #
{
‘‘ 
case
’’ 
Document
’’ !
.
’’! " 
LegalDocumentation
’’" 4
:
’’4 5
string
◊◊ 
filePath
◊◊ '
=
◊◊( )
FileTypeExtension
◊◊* ;
.
◊◊; <
GetFilePath
◊◊< G
(
◊◊G H
DocumentTypeEnum
◊◊H X
.
◊◊X Y
LegalDocument1
◊◊Y g
,
◊◊g h
	configure
◊◊i r
)
◊◊r s
;
◊◊s t
string
ŸŸ 
fileName
ŸŸ '
=
ŸŸ( )
FileTypeExtension
ŸŸ* ;
.
ŸŸ; <
GetFileName
ŸŸ< G
(
ŸŸG H
DocumentTypeEnum
ŸŸH X
.
ŸŸX Y
LegalDocument1
ŸŸY g
,
ŸŸg h
subModuleId
ŸŸi t
)
ŸŸt u
;
ŸŸu v
string
€€ 
filepath
€€ '
=
€€( )
$"
€€* ,
{
€€, -
filePath
€€- 5
}
€€5 6
$str
€€6 8
{
€€8 9
fileName
€€9 A
}
€€A B
$str
€€B C
{
€€C D
FileTypesEnum
€€D Q
.
€€Q R
Pdf
€€R U
.
€€U V
ToString
€€V ^
(
€€^ _
)
€€_ `
}
€€` a
"
€€a b
;
€€b c
var
›› 
documentData
›› (
=
››) *
new
››+ .
TblLdDocument
››/ <
(
››< =
)
››= >
{
ﬁﬁ 
SubModuleId
‡‡ '
=
‡‡( )
subModuleId
‡‡* 5
,
‡‡5 6
SubModuleType
·· )
=
··* +
subModuleType
··, 9
,
··9 :

MainModule
‚‚ &
=
‚‚' (

mainModule
‚‚) 3
,
‚‚3 4
FileName
„„ $
=
„„% &
$"
„„' )
{
„„) *
fileName
„„* 2
}
„„2 3
$str
„„3 4
{
„„4 5
FileTypesEnum
„„5 B
.
„„B C
Pdf
„„C F
.
„„F G
ToString
„„G O
(
„„O P
)
„„P Q
}
„„Q R
"
„„R S
,
„„S T
FilePath
‰‰ $
=
‰‰% &
filepath
‰‰' /
,
‰‰/ 0
FileType
ÂÂ $
=
ÂÂ% &
FileTypesEnum
ÂÂ' 4
.
ÂÂ4 5
Pdf
ÂÂ5 8
.
ÂÂ8 9
ToString
ÂÂ9 A
(
ÂÂA B
)
ÂÂB C
,
ÂÂC D
UniqueId
ÊÊ $
=
ÊÊ% &
Guid
ÊÊ' +
.
ÊÊ+ ,
NewGuid
ÊÊ, 3
(
ÊÊ3 4
)
ÊÊ4 5
.
ÊÊ5 6
ToString
ÊÊ6 >
(
ÊÊ> ?
)
ÊÊ? @
,
ÊÊ@ A
IsActive
ÁÁ $
=
ÁÁ% &
true
ÁÁ' +
,
ÁÁ+ ,
	IsDeleted
ËË %
=
ËË& '
false
ËË( -
,
ËË- .
CreatedDate
ÈÈ '
=
ÈÈ( )
DateTime
ÈÈ* 2
.
ÈÈ2 3
UtcNow
ÈÈ3 9
,
ÈÈ9 :
	CreatedBy
ÍÍ %
=
ÍÍ& '
	_userInfo
ÍÍ( 1
.
ÍÍ1 2
Name
ÍÍ2 6
}
ÎÎ 
;
ÎÎ 
var
ÏÏ 
data
ÏÏ  
=
ÏÏ! "
await
ÏÏ# (#
_ldDocumentRepository
ÏÏ) >
.
ÏÏ> ?
AddAsync
ÏÏ? G
(
ÏÏG H
documentData
ÏÏH T
,
ÏÏT U
token
ÏÏV [
)
ÏÏ[ \
.
ÏÏ\ ]
ConfigureAwait
ÏÏ] k
(
ÏÏk l
false
ÏÏl q
)
ÏÏq r
;
ÏÏr s
ldDocumentDto
ÓÓ %
=
ÓÓ& '
_mapper
ÓÓ( /
.
ÓÓ/ 0
Map
ÓÓ0 3
<
ÓÓ3 4
ldDocumentDto
ÓÓ4 A
>
ÓÓA B
(
ÓÓB C
data
ÓÓC G
)
ÓÓG H
;
ÓÓH I
var
 
	byteArray
 %
=
& '
FileSecurity
( 4
.
4 5
DecryptByteArray
5 E
(
E F
bytes
F K
,
K L
$str
M W
)
W X
;
X Y
var
ÚÚ 
result
ÚÚ "
=
ÚÚ# $
await
ÚÚ% *
FileSecurity
ÚÚ+ 7
.
ÚÚ7 8
SaveBytesToFile
ÚÚ8 G
(
ÚÚG H
filepath
ÚÚH P
,
ÚÚP Q
	byteArray
ÚÚR [
)
ÚÚ[ \
;
ÚÚ\ ]
break
ÛÛ 
;
ÛÛ 
case
ıı 
Document
ıı !
.
ıı! "
AuditClearance
ıı" 0
:
ıı0 1
string
ˆˆ 
	filePath1
ˆˆ (
=
ˆˆ) *
FileTypeExtension
ˆˆ+ <
.
ˆˆ< =
GetFilePath
ˆˆ= H
(
ˆˆH I
DocumentTypeEnum
ˆˆI Y
.
ˆˆY Z
AuditClearance
ˆˆZ h
,
ˆˆh i
	configure
ˆˆj s
)
ˆˆs t
;
ˆˆt u
string
¯¯ 
	fileName1
¯¯ (
=
¯¯) *
FileTypeExtension
¯¯+ <
.
¯¯< =
GetFileName
¯¯= H
(
¯¯H I
DocumentTypeEnum
¯¯I Y
.
¯¯Y Z
AuditClearance
¯¯Z h
,
¯¯h i
subModuleId
¯¯j u
)
¯¯u v
;
¯¯v w
string
˙˙ 
	filepath1
˙˙ (
=
˙˙) *
$"
˙˙+ -
{
˙˙- .
	filePath1
˙˙. 7
}
˙˙7 8
$str
˙˙8 :
{
˙˙: ;
	fileName1
˙˙; D
}
˙˙D E
$str
˙˙E F
{
˙˙F G
FileTypesEnum
˙˙G T
.
˙˙T U
Jpeg
˙˙U Y
.
˙˙Y Z
ToString
˙˙Z b
(
˙˙b c
)
˙˙c d
}
˙˙d e
"
˙˙e f
;
˙˙f g
var
¸¸ 
UCdocumentData
¸¸ *
=
¸¸+ ,
new
¸¸- 0
TblUCDocument
¸¸1 >
(
¸¸> ?
)
¸¸? @
{
˝˝ 
SubModuleId
ˇˇ '
=
ˇˇ( )
subModuleId
ˇˇ* 5
,
ˇˇ5 6
SubModuleType
ÄÄ )
=
ÄÄ* +
subModuleType
ÄÄ, 9
,
ÄÄ9 :

MainModule
ÅÅ &
=
ÅÅ' (

mainModule
ÅÅ) 3
,
ÅÅ3 4
FileName
ÇÇ $
=
ÇÇ% &
$"
ÇÇ' )
{
ÇÇ) *
	fileName1
ÇÇ* 3
}
ÇÇ3 4
$str
ÇÇ4 5
{
ÇÇ5 6
FileTypesEnum
ÇÇ6 C
.
ÇÇC D
Pdf
ÇÇD G
.
ÇÇG H
ToString
ÇÇH P
(
ÇÇP Q
)
ÇÇQ R
}
ÇÇR S
"
ÇÇS T
,
ÇÇT U
FilePath
ÉÉ $
=
ÉÉ% &
	filepath1
ÉÉ' 0
,
ÉÉ0 1
FileType
ÑÑ $
=
ÑÑ% &
FileTypesEnum
ÑÑ' 4
.
ÑÑ4 5
Pdf
ÑÑ5 8
.
ÑÑ8 9
ToString
ÑÑ9 A
(
ÑÑA B
)
ÑÑB C
,
ÑÑC D
UniqueId
ÖÖ $
=
ÖÖ% &
Guid
ÖÖ' +
.
ÖÖ+ ,
NewGuid
ÖÖ, 3
(
ÖÖ3 4
)
ÖÖ4 5
.
ÖÖ5 6
ToString
ÖÖ6 >
(
ÖÖ> ?
)
ÖÖ? @
,
ÖÖ@ A
IsActive
ÜÜ $
=
ÜÜ% &
true
ÜÜ' +
,
ÜÜ+ ,
	IsDeleted
áá %
=
áá& '
false
áá( -
,
áá- .
CreatedDate
àà '
=
àà( )
DateTime
àà* 2
.
àà2 3
UtcNow
àà3 9
,
àà9 :
	CreatedBy
ââ %
=
ââ& '
	_userInfo
ââ( 1
.
ââ1 2
Name
ââ2 6
}
ää 
;
ää 
var
åå 
ucdata
åå "
=
åå# $
await
åå% *#
_acDocumentRepository
åå+ @
.
åå@ A
AddAsync
ååA I
(
ååI J
UCdocumentData
ååJ X
,
ååX Y
token
ååZ _
)
åå_ `
.
åå` a
ConfigureAwait
ååa o
(
ååo p
false
ååp u
)
ååu v
;
ååv w
ldDocumentDto
çç %
=
çç& '
_mapper
çç( /
.
çç/ 0
Map
çç0 3
<
çç3 4
ldDocumentDto
çç4 A
>
ççA B
(
ççB C
ucdata
ççC I
)
ççI J
;
ççJ K
var
èè 

byteArray1
èè &
=
èè' (
FileSecurity
èè) 5
.
èè5 6
DecryptByteArray
èè6 F
(
èèF G
bytes
èèG L
,
èèL M
$str
èèN X
)
èèX Y
;
èèY Z
var
ëë 
result1
ëë #
=
ëë$ %
await
ëë& +
FileSecurity
ëë, 8
.
ëë8 9
SaveBytesToFile
ëë9 H
(
ëëH I
	filepath1
ëëI R
,
ëëR S

byteArray1
ëëT ^
)
ëë^ _
;
ëë_ `
break
íí 
;
íí 
case
ìì 
Document
ìì !
.
ìì! "#
DisbursementCondition
ìì" 7
:
ìì7 8
string
îî 
	filePath2
îî (
=
îî) *
FileTypeExtension
îî+ <
.
îî< =
GetFilePath
îî= H
(
îîH I
DocumentTypeEnum
îîI Y
.
îîY Z#
DisbursementCondition
îîZ o
,
îîo p
	configure
îîq z
)
îîz {
;
îî{ |
string
ññ 
	fileName2
ññ (
=
ññ) *
FileTypeExtension
ññ+ <
.
ññ< =
GetFileName
ññ= H
(
ññH I
DocumentTypeEnum
ññI Y
.
ññY Z#
DisbursementCondition
ññZ o
,
ñño p
subModuleId
ññq |
)
ññ| }
;
ññ} ~
string
òò 
	filepath2
òò (
=
òò) *
$"
òò+ -
{
òò- .
	filePath2
òò. 7
}
òò7 8
$str
òò8 :
{
òò: ;
	fileName2
òò; D
}
òòD E
$str
òòE F
{
òòF G
FileTypesEnum
òòG T
.
òòT U
Pdf
òòU X
.
òòX Y
ToString
òòY a
(
òòa b
)
òòb c
}
òòc d
"
òòd e
;
òòe f
var
ôô 
DCdocumentData
ôô *
=
ôô+ ,
new
ôô- 0
TblDCDocument
ôô1 >
(
ôô> ?
)
ôô? @
{
öö 
SubModuleId
úú '
=
úú( )
subModuleId
úú* 5
,
úú5 6
SubModuleType
ùù )
=
ùù* +
subModuleType
ùù, 9
,
ùù9 :

MainModule
ûû &
=
ûû' (

mainModule
ûû) 3
,
ûû3 4
FileName
üü $
=
üü% &
$"
üü' )
{
üü) *
	fileName2
üü* 3
}
üü3 4
$str
üü4 5
{
üü5 6
FileTypesEnum
üü6 C
.
üüC D
Pdf
üüD G
.
üüG H
ToString
üüH P
(
üüP Q
)
üüQ R
}
üüR S
"
üüS T
,
üüT U
FilePath
†† $
=
††% &
	filepath2
††' 0
,
††0 1
FileType
°° $
=
°°% &
FileTypesEnum
°°' 4
.
°°4 5
Pdf
°°5 8
.
°°8 9
ToString
°°9 A
(
°°A B
)
°°B C
,
°°C D
UniqueId
¢¢ $
=
¢¢% &
Guid
¢¢' +
.
¢¢+ ,
NewGuid
¢¢, 3
(
¢¢3 4
)
¢¢4 5
.
¢¢5 6
ToString
¢¢6 >
(
¢¢> ?
)
¢¢? @
,
¢¢@ A
IsActive
££ $
=
££% &
true
££' +
,
££+ ,
	IsDeleted
§§ %
=
§§& '
false
§§( -
,
§§- .
CreatedDate
•• '
=
••( )
DateTime
••* 2
.
••2 3
UtcNow
••3 9
,
••9 :
	CreatedBy
¶¶ %
=
¶¶& '
	_userInfo
¶¶( 1
.
¶¶1 2
Name
¶¶2 6
}
ßß 
;
ßß 
var
®® 
dcdata
®® "
=
®®# $
await
®®% *#
_dcDocumentRepository
®®+ @
.
®®@ A
AddAsync
®®A I
(
®®I J
DCdocumentData
®®J X
,
®®X Y
token
®®Z _
)
®®_ `
.
®®` a
ConfigureAwait
®®a o
(
®®o p
false
®®p u
)
®®u v
;
®®v w
ldDocumentDto
©© %
=
©©& '
_mapper
©©( /
.
©©/ 0
Map
©©0 3
<
©©3 4
ldDocumentDto
©©4 A
>
©©A B
(
©©B C
dcdata
©©C I
)
©©I J
;
©©J K
var
´´ 

byteArray2
´´ &
=
´´' (
FileSecurity
´´) 5
.
´´5 6
DecryptByteArray
´´6 F
(
´´F G
bytes
´´G L
,
´´L M
$str
´´N X
)
´´X Y
;
´´Y Z
var
≠≠ 
result2
≠≠ #
=
≠≠$ %
await
≠≠& +
FileSecurity
≠≠, 8
.
≠≠8 9
SaveBytesToFile
≠≠9 H
(
≠≠H I
	filepath2
≠≠I R
,
≠≠R S

byteArray2
≠≠T ^
)
≠≠^ _
;
≠≠_ `
break
ØØ 
;
ØØ 
case
±± 
Document
±± !
.
±±! "
InspectionOfUnit
±±" 2
:
±±2 3
string
≤≤ &
filePathInspectionDetail
≤≤ 7
=
≤≤8 9
FileTypeExtension
≤≤: K
.
≤≤K L
GetFilePath
≤≤L W
(
≤≤W X
DocumentTypeEnum
≤≤X h
.
≤≤h i
InspectionOfUnit
≤≤i y
,
≤≤y z
	configure≤≤{ Ñ
)≤≤Ñ Ö
;≤≤Ö Ü
string
¥¥ &
fileNameInspectionDetail
¥¥ 7
=
¥¥8 9
FileTypeExtension
¥¥: K
.
¥¥K L
GetFileName
¥¥L W
(
¥¥W X
DocumentTypeEnum
¥¥X h
.
¥¥h i
InspectionOfUnit
¥¥i y
,
¥¥y z
subModuleId¥¥{ Ü
)¥¥Ü á
;¥¥á à
string
∂∂ '
filepathInspectionDetail1
∂∂ 8
=
∂∂9 :
$"
∂∂; =
{
∂∂= >&
filePathInspectionDetail
∂∂> V
}
∂∂V W
$str
∂∂W Y
{
∂∂Y Z&
fileNameInspectionDetail
∂∂Z r
}
∂∂r s
$str
∂∂s t
{
∂∂t u
FileTypesEnum∂∂u Ç
.∂∂Ç É
Pdf∂∂É Ü
.∂∂Ü á
ToString∂∂á è
(∂∂è ê
)∂∂ê ë
}∂∂ë í
"∂∂í ì
;∂∂ì î
var
∑∑ 
INSPdocumentData
∑∑ ,
=
∑∑- .
new
∑∑/ 2
TblINSPDocument
∑∑3 B
(
∑∑B C
)
∑∑C D
{
∏∏ 
SubModuleId
∫∫ '
=
∫∫( )
subModuleId
∫∫* 5
,
∫∫5 6
SubModuleType
ªª )
=
ªª* +
subModuleType
ªª, 9
,
ªª9 :

MainModule
ºº &
=
ºº' (

mainModule
ºº) 3
,
ºº3 4
FileName
ΩΩ $
=
ΩΩ% &
$"
ΩΩ' )
{
ΩΩ) *&
fileNameInspectionDetail
ΩΩ* B
}
ΩΩB C
$str
ΩΩC D
{
ΩΩD E
FileTypesEnum
ΩΩE R
.
ΩΩR S
Pdf
ΩΩS V
.
ΩΩV W
ToString
ΩΩW _
(
ΩΩ_ `
)
ΩΩ` a
}
ΩΩa b
"
ΩΩb c
,
ΩΩc d
FilePath
ææ $
=
ææ% &'
filepathInspectionDetail1
ææ' @
,
ææ@ A
FileType
øø $
=
øø% &
FileTypesEnum
øø' 4
.
øø4 5
Pdf
øø5 8
.
øø8 9
ToString
øø9 A
(
øøA B
)
øøB C
,
øøC D
UniqueId
¿¿ $
=
¿¿% &
Guid
¿¿' +
.
¿¿+ ,
NewGuid
¿¿, 3
(
¿¿3 4
)
¿¿4 5
.
¿¿5 6
ToString
¿¿6 >
(
¿¿> ?
)
¿¿? @
,
¿¿@ A
IsActive
¡¡ $
=
¡¡% &
true
¡¡' +
,
¡¡+ ,
	IsDeleted
¬¬ %
=
¬¬& '
false
¬¬( -
,
¬¬- .
CreatedDate
√√ '
=
√√( )
DateTime
√√* 2
.
√√2 3
UtcNow
√√3 9
,
√√9 :
	CreatedBy
ƒƒ %
=
ƒƒ& '
	_userInfo
ƒƒ( 1
.
ƒƒ1 2
Name
ƒƒ2 6
}
≈≈ 
;
≈≈ 
var
∆∆ 
inspdata
∆∆ $
=
∆∆% &
await
∆∆' ,%
_inspDocumentRepository
∆∆- D
.
∆∆D E
AddAsync
∆∆E M
(
∆∆M N
INSPdocumentData
∆∆N ^
,
∆∆^ _
token
∆∆` e
)
∆∆e f
.
∆∆f g
ConfigureAwait
∆∆g u
(
∆∆u v
false
∆∆v {
)
∆∆{ |
;
∆∆| }
ldDocumentDto
«« %
=
««& '
_mapper
««( /
.
««/ 0
Map
««0 3
<
««3 4
ldDocumentDto
««4 A
>
««A B
(
««B C
inspdata
««C K
)
««K L
;
««L M
var
…… 
byteArrayinsp
…… )
=
……* +
FileSecurity
……, 8
.
……8 9
DecryptByteArray
……9 I
(
……I J
bytes
……J O
,
……O P
$str
……Q [
)
……[ \
;
……\ ]
var
ÀÀ 

resultInsp
ÀÀ &
=
ÀÀ' (
await
ÀÀ) .
FileSecurity
ÀÀ/ ;
.
ÀÀ; <
SaveBytesToFile
ÀÀ< K
(
ÀÀK L'
filepathInspectionDetail1
ÀÀL e
,
ÀÀe f
byteArrayinsp
ÀÀg t
)
ÀÀt u
;
ÀÀu v
break
ÃÃ 
;
ÃÃ 
case
ŒŒ 
Document
ŒŒ !
.
ŒŒ! "
ChangeOfUnit
ŒŒ" .
:
ŒŒ. /
string
œœ "
changeofunitfilePath
œœ 3
=
œœ4 5
FileTypeExtension
œœ6 G
.
œœG H
GetFilePath
œœH S
(
œœS T
DocumentTypeEnum
œœT d
.
œœd e
ChangeOfUnit
œœe q
,
œœq r
	configure
œœs |
)
œœ| }
;
œœ} ~
string
—— "
changeofunitfileName
—— 3
=
——4 5
FileTypeExtension
——6 G
.
——G H
GetFileName
——H S
(
——S T
DocumentTypeEnum
——T d
.
——d e
ChangeOfUnit
——e q
,
——q r
subModuleId
——s ~
)
——~ 
;—— Ä
string
”” #
changeofunitfilePath1
”” 4
=
””5 6
$"
””7 9
{
””9 :"
changeofunitfilePath
””: N
}
””N O
$str
””O Q
{
””Q R"
changeofunitfileName
””R f
}
””f g
$str
””g h
{
””h i
FileTypesEnum
””i v
.
””v w
Jpeg
””w {
.
””{ |
ToString””| Ñ
(””Ñ Ö
)””Ö Ü
}””Ü á
"””á à
;””à â
var
’’ 
CUphotoData
’’ '
=
’’( )
new
’’* -
TblCUDocument
’’. ;
(
’’; <
)
’’< =
{
÷÷ 
SubModuleId
ÿÿ '
=
ÿÿ( )
subModuleId
ÿÿ* 5
,
ÿÿ5 6
SubModuleType
ŸŸ )
=
ŸŸ* +
subModuleType
ŸŸ, 9
,
ŸŸ9 :

MainModule
⁄⁄ &
=
⁄⁄' (

mainModule
⁄⁄) 3
,
⁄⁄3 4
FileName
€€ $
=
€€% &
$"
€€' )
{
€€) *"
changeofunitfileName
€€* >
}
€€> ?
$str
€€? @
{
€€@ A
FileTypesEnum
€€A N
.
€€N O
Jpeg
€€O S
.
€€S T
ToString
€€T \
(
€€\ ]
)
€€] ^
}
€€^ _
"
€€_ `
,
€€` a
FilePath
‹‹ $
=
‹‹% &#
changeofunitfilePath1
‹‹' <
,
‹‹< =
FileType
›› $
=
››% &
FileTypesEnum
››' 4
.
››4 5
Jpeg
››5 9
.
››9 :
ToString
››: B
(
››B C
)
››C D
,
››D E
UniqueId
ﬁﬁ $
=
ﬁﬁ% &
Guid
ﬁﬁ' +
.
ﬁﬁ+ ,
NewGuid
ﬁﬁ, 3
(
ﬁﬁ3 4
)
ﬁﬁ4 5
.
ﬁﬁ5 6
ToString
ﬁﬁ6 >
(
ﬁﬁ> ?
)
ﬁﬁ? @
,
ﬁﬁ@ A
IsActive
ﬂﬂ $
=
ﬂﬂ% &
true
ﬂﬂ' +
,
ﬂﬂ+ ,
	IsDeleted
‡‡ %
=
‡‡& '
false
‡‡( -
,
‡‡- .
CreatedDate
·· '
=
··( )
DateTime
··* 2
.
··2 3
UtcNow
··3 9
,
··9 :
	CreatedBy
‚‚ %
=
‚‚& '
	_userInfo
‚‚( 1
.
‚‚1 2
Name
‚‚2 6
}
„„ 
;
„„ 
var
ÂÂ 
cudata
ÂÂ "
=
ÂÂ# $
await
ÂÂ% *#
_cuDocumentRepository
ÂÂ+ @
.
ÂÂ@ A
AddAsync
ÂÂA I
(
ÂÂI J
CUphotoData
ÂÂJ U
,
ÂÂU V
token
ÂÂW \
)
ÂÂ\ ]
.
ÂÂ] ^
ConfigureAwait
ÂÂ^ l
(
ÂÂl m
false
ÂÂm r
)
ÂÂr s
;
ÂÂs t
ldDocumentDto
ÊÊ %
=
ÊÊ& '
_mapper
ÊÊ( /
.
ÊÊ/ 0
Map
ÊÊ0 3
<
ÊÊ3 4
ldDocumentDto
ÊÊ4 A
>
ÊÊA B
(
ÊÊB C
cudata
ÊÊC I
)
ÊÊI J
;
ÊÊJ K
var
ËË 
cubyteArray
ËË '
=
ËË( )
FileSecurity
ËË* 6
.
ËË6 7
DecryptByteArray
ËË7 G
(
ËËG H
bytes
ËËH M
,
ËËM N
$str
ËËO Y
)
ËËY Z
;
ËËZ [
var
ÍÍ 
curesult
ÍÍ $
=
ÍÍ% &
await
ÍÍ' ,
FileSecurity
ÍÍ- 9
.
ÍÍ9 :
SaveBytesToFile
ÍÍ: I
(
ÍÍI J#
changeofunitfilePath1
ÍÍJ _
,
ÍÍ_ `
cubyteArray
ÍÍa l
)
ÍÍl m
;
ÍÍm n
break
ÎÎ 
;
ÎÎ 
}
ÌÌ 
await
ÓÓ 
_work
ÓÓ 
.
ÓÓ 
CommitAsync
ÓÓ '
(
ÓÓ' (
token
ÓÓ( -
)
ÓÓ- .
.
ÓÓ. /
ConfigureAwait
ÓÓ/ =
(
ÓÓ= >
false
ÓÓ> C
)
ÓÓC D
;
ÓÓD E
return
ÔÔ 
ldDocumentDto
ÔÔ $
;
ÔÔ$ %
}
 
catch
ÚÚ 
(
ÚÚ 
	Exception
ÚÚ 
ex
ÚÚ 
)
ÚÚ  
{
ÛÛ 
throw
ÙÙ 
ex
ÙÙ 
;
ÙÙ 
}
ıı 
}
˜˜ 	
}
¸¸ 
}˝˝ ä<
RD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\IdmService.cs
	namespace

 	
KAR


 
.

 
KSFC

 
.

 
API

 
.

 
ServiceFacade

 $
.

$ %
Internal

% -
.

- .
Service

. 5
.

5 6
	IDMModule

6 ?
{ 
public 

class 

IdmService 
: 
IIdmService )
{ 
private 
readonly 
IEntityRepository *
<* +
TblAppLoanMast+ 9
>9 :
_loanRepository; J
;J K
private 
readonly 
IEntityRepository *
<* +
TblEmpchairDet+ 9
>9 :
_empChairDet; G
;G H
private 
readonly 
IEntityRepository *
<* +
TblIdmLegalWorkflow+ >
>> ?
_legalWokFlow@ M
;M N
public 

IdmService 
( 
IEntityRepository +
<+ ,
TblAppLoanMast, :
>: ;
loanRepository< J
,J K
IEntityRepositoryL ]
<] ^
TblEmpchairDet^ l
>l m
empChairDetn y
,y z
IEntityRepository	{ å
<
å ç!
TblIdmLegalWorkflow
ç †
>
† °
legalWokFlow
¢ Æ
)
Æ Ø
{ 	
_loanRepository 
= 
loanRepository ,
;, -
_empChairDet 
= 
empChairDet &
;& '
_legalWokFlow 
= 
legalWokFlow (
;( )
} 	
public 
async 
Task 
< 
IEnumerable %
<% & 
LoanAccountNumberDTO& :
>: ;
>; <
GetAccountNumber= M
(M N
stringN T
EmpIdU Z
,[ \
CancellationToken] n
tokeno t
)t u
{ 	
var 
OffcUnit 
= 
await  
_loanRepository! 0
.0 1)
FindByMatchingPropertiesAsync1 N
(N O
tokenO T
,T U
xV W
=>X Z
x[ \
.\ ]
IsActive] e
==f h
truei m
&&n p
xq r
.r s
	IsDeleteds |
==} 
false
Ä Ö
,
Ö Ü
incOff 
=> 
incOff  
.  !
	OffcCdtab! *
,* +
incUnit 
=> 
incUnit "
." #
TblUnitMast# .
,. /
workflow 
=> 
workflow "
." #
TblIdmLegalWorkflow# 6
) 
. 
ConfigureAwait !
(! "
false" '
)' (
;( )
var   
EmpChair   
=   
await    
_empChairDet  ! -
.  - .)
FindByMatchingPropertiesAsync  . K
(  K L
token  L Q
,  Q R
x  S T
=>  U W
x  X Y
.  Y Z
IsActive  Z b
==  c e
true  f j
&&  k m
x  n o
.  o p
	IsDeleted  p y
==  z |
false	  } Ç
&&
  É Ö
x
  Ü á
.
  á à
EmpId
  à ç
==
  ç è
EmpId
  è î
,
  î ï
incEmp!! 
=>!! 
incEmp!! 
.!! 
ChairCodeNavigation!! 2
)"" 
."" 
ConfigureAwait"" 
("" 
false"" $
)""$ %
;""% &
var$$ 
workFlow$$ 
=$$ 
await$$ 
_legalWokFlow$$  -
.$$- .)
FindByMatchingPropertiesAsync$$. K
($$K L
token$$L Q
,$$Q R
x$$S T
=>$$U W
x$$X Y
.$$Y Z
IsActive$$Z b
==$$c e
true$$f j
&&$$k m
x$$n o
.$$o p
	IsDeleted$$p y
==$$z |
false	$$} Ç
)%% 
.%% 
ConfigureAwait%% 
(%%  
false%%  %
)%%% &
;%%& '
var'' 
LoanList'' 
='' 
OffcUnit'' #
.''# $
Join''$ (
(''( )
EmpChair'') 1
,''1 2
loanmast(( 
=>(( 
loanmast((  
.((  !
InOffc((! '
,((' (
chair)) 
=>)) 
chair)) 
.)) 
OffcCd)) !
,))! "
(** 
loanmast** 
,** 
chair** 
)** 
=>**  
new**! $
{++ 

LoanMastID,, 
=,, 
loanmast,, %
.,,% &
InMastId,,& .
,,,. /

LoanOffice-- 
=-- 
loanmast-- %
.--% &
	OffcCdtab--& /
.--/ 0
OffcNam--0 7
,--7 8
LoanUnit.. 
=.. 
loanmast.. #
...# $
TblUnitMast..$ /
.../ 0
UtName..0 6
,..6 7
LoanAcc// 
=// 
loanmast// "
.//" #
InNo//# '
,//' (
LoanSub00 
=00 
loanmast00 "
.00" #
InSub00# (
,00( )
InOffc11 
=11 
loanmast11 !
.11! "
InOffc11" (
,11( )
InUnit22 
=22 
loanmast22 !
.22! "
InUnit22" (
}33 
)33 
.33 
ToList33 
(33 
)33 
;33 
var44 
LoanAccounts44 
=44 
LoanList44 '
.44' (
Where44( -
(44- .
x44. /
=>440 2
workFlow443 ;
.44; <
Any44< ?
(44? @
y44@ A
=>44B D
y44E F
.44F G
LoanAcc44G N
==44O Q
x44R S
.44S T
LoanAcc44T [
)44[ \
)44\ ]
.44] ^
ToList44^ d
(44d e
)44e f
;44f g
var77 
result77 
=77 
new77 
List77 !
<77! " 
LoanAccountNumberDTO77" 6
>776 7
(777 8
)778 9
;779 :
if88 
(88 
LoanList88 
.88 
Count88 
>88  
$num88! "
)88" #
{99 
foreach:: 
(:: 
var:: 
i:: 
in:: !
LoanAccounts::" .
)::. /
{;; 
result<< 
.<< 
Add<< 
(<< 
new<< " 
LoanAccountNumberDTO<<# 7
(<<7 8
)<<8 9
{== 

LoanOffice>> "
=>># $
i>>% &
.>>& '

LoanOffice>>' 1
,>>1 2
LoanUnit??  
=??! "
i??# $
.??$ %
LoanUnit??% -
,??- .
LoanAcc@@ 
=@@  !
i@@" #
.@@# $
LoanAcc@@$ +
,@@+ ,
LoanSubAA 
=AA  !
iAA" #
.AA# $
LoanSubAA$ +
,AA+ ,
InOffcBB 
=BB  
iBB! "
.BB" #
InOffcBB# )
,BB) *
InUnitCC 
=CC  
iCC! "
.CC" #
InUnitCC# )
}DD 
)DD 
;DD 
}EE 
}FF 
returnGG 
resultGG 
;GG 
}HH 	
}II 
}JJ ÙÄ
vD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\InspectionOfUnitModule\InspectionOfUnitService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @"
InspectionOfUnitModule@ V
{ 
public 

class #
InspectionOfUnitService (
:) *$
IInspectionOfUnitService+ C
{ 
private 
readonly 
IEntityRepository *
<* +
TblAppLoanMast+ 9
>9 :
_loanRepository; J
;J K
private 
readonly 
IEntityRepository *
<* +!
TblIdmDchgBuildingDet+ @
>@ A)
_buildingInspectionRepositoryB _
;_ `
private 
readonly 
IEntityRepository *
<* +
TblIdmDchgLand+ 9
>9 :%
_landInspectionRepository; T
;T U
private 
readonly 
IEntityRepository *
<* +
TblIdmDspInsp+ 8
>8 9'
_InspectionDetailRepository: U
;U V
private 
readonly 
IEntityRepository *
<* +
TblIdmDChgFurn+ 9
>9 :0
$_furnitureInspectionDetailRepository; _
;_ `
private 
readonly 
IEntityRepository *
<* +
TblIdmIrBldgMat+ :
>: ;'
_buildingMaterialRepository< W
;W X
private 
readonly 
IEntityRepository *
<* +$
TblIdmDchgWorkingCapital+ C
>C D$
_WokingCapitalRepositoryE ]
;] ^
private 
readonly 
IEntityRepository *
<* +%
TblIdmDchgImportMachinery+ D
>D E&
_importMachineryRepositoryF `
;` a
private 
readonly 
IEntityRepository *
<* +$
TblIdmDchgMeansOfFinance+ C
>C D%
_meansOfFinanceRepositoryE ^
;^ _
private 
readonly 
IEntityRepository *
<* +
TblIdmIrLand+ 7
>7 8

_idmIrLand9 C
;C D
private   
readonly   
IEntityRepository   *
<  * +
TblIdmIrPlmc  + 7
>  7 8 
_machineryRepository  9 M
;  M N
private!! 
readonly!! 
IEntityRepository!! *
<!!* +,
 TblIdmBuildingAcquisitionDetails!!+ K
>!!K L&
_buildingDetailsRepository!!M g
;!!g h
private"" 
readonly"" 
IEntityRepository"" *
<""* +
TblIdmIrFurn""+ 7
>""7 8*
_furnitureAcuisitionRepository""9 W
;""W X
private## 
readonly## 
UserInfo## !
	_userInfo##" +
;##+ ,
private%% 
readonly%% 
IEntityRepository%% *
<%%* +,
 TblIdmDchgIndigenousMachineryDet%%+ K
>%%K L*
_indigenousMachineryRepository%%M k
;%%k l
private&& 
readonly&& 
IEntityRepository&& *
<&&* +!
TblIdmDchgProjectCost&&+ @
>&&@ A"
_projectCostRepository&&B X
;&&X Y
private'' 
readonly'' 
IEntityRepository'' *
<''* +#
TblIdmDsbLetterOfCredit''+ B
>''B C%
_letterOfCreditRepository''D ]
;''] ^
private(( 
readonly(( 
IEntityRepository(( *
<((* +
TblMachineryStatus((+ =
>((= >
_machinaryStatus((? O
;((O P
private)) 
readonly)) 
IEntityRepository)) *
<))* +
TblProcureMast))+ 9
>))9 :
_procureStatus)); I
;))I J
private++ 
readonly++ 
IUnitOfWork++ $
_work++% *
;++* +
private,, 
readonly,, 
IMapper,,  
_mapper,,! (
;,,( )
public// #
InspectionOfUnitService// &
(//& '
IEntityRepository//' 8
<//8 9
TblAppLoanMast//9 G
>//G H
loanRepository//I W
,//W X
IUnitOfWork//Y d
work//e i
,//i j
IMapper//k r
mapper//s y
,//y z
IEntityRepository00( 9
<009 :
TblIdmDchgLand00: H
>00H I$
landInspectionRepository00J b
,00b c
IEntityRepository11( 9
<119 :
TblIdmDspInsp11: G
>11G H&
inspectionDetailRepository11I c
,11c d
IEntityRepository22( 9
<229 :!
TblIdmDchgBuildingDet22: O
>22O P(
buildingInspectionRepository22Q m
,22m n
IEntityRepository33( 9
<339 :$
TblIdmDchgWorkingCapital33: R
>33R S#
WokingCapitalRepository33T k
,33k l
IEntityRepository44) :
<44: ;
TblIdmIrBldgMat44; J
>44J K&
buildingMaterialRepository44L f
,44f g
IEntityRepository55) :
<55: ;%
TblIdmDchgImportMachinery55; T
>55T U%
importMachineryRepository55V o
,55o p
IEntityRepository66) :
<66: ;
TblIdmDChgFurn66; I
>66I J/
#furnitureInspectionDetailRepository66K n
,66n o
IEntityRepository77( 9
<779 :,
 TblIdmDchgIndigenousMachineryDet77: Z
>77Z [)
indigenousMachineryRepository77\ y
,77y z
UserInfo88( 0
userInfo881 9
,889 :
IEntityRepository88; L
<88L M
TblIdmIrPlmc88M Y
>88Y Z
machineryRepository88[ n
,88n o
IEntityRepository	88p Å
<
88Å Ç.
 TblIdmBuildingAcquisitionDetails
88Ç ¢
>
88¢ £'
buildingDetailsRepository
88§ Ω
,
88Ω æ
IEntityRepository99( 9
<999 :
TblIdmIrFurn99: F
>99F G)
furnitureAcuisitionRepository99H e
,99e f
IEntityRepository99g x
<99x y
TblIdmIrLand	99y Ö
>
99Ö Ü%
landacquitionRepository
99á û
,
99û ü
IEntityRepository::( 9
<::9 :$
TblIdmDchgMeansOfFinance::: R
>::R S$
meansOfFinanceRepository::T l
,::l m
IEntityRepository::n 
<	:: Ä%
TblIdmDsbLetterOfCredit
::Ä ó
>
::ó ò&
letterOfCreditRepository
::ô ±
,
::± ≤
IEntityRepository;;) :
<;;: ;!
TblIdmDchgProjectCost;;; P
>;;P Q!
projectCostRepository;;R g
,;;g h
IEntityRepository;;i z
<;;z {
TblIdmIrLand	;;{ á
>
;;á à
	idmIrLand
;;â í
,
;;í ì
IEntityRepository
;;î •
<
;;• ¶ 
TblMachineryStatus
;;¶ ∏
>
;;∏ π
machinaryStatus
;;∫ …
,
;;…  
IEntityRepository
;;À ‹
<
;;‹ ›
TblProcureMast
;;› Î
>
;;Î Ï
procureStatus
;;Ì ˙
)
;;˙ ˚
{<< 	
_loanRepository== 
=== 
loanRepository== ,
;==, -
_work>> 
=>> 
work>> 
;>> 
_mapper?? 
=?? 
mapper?? 
;?? %
_landInspectionRepository@@ %
=@@& '$
landInspectionRepository@@( @
;@@@ A'
_InspectionDetailRepositoryAA '
=AA( )&
inspectionDetailRepositoryAA* D
;AAD E)
_buildingInspectionRepositoryBB )
=BB* +(
buildingInspectionRepositoryBB, H
;BBH I$
_WokingCapitalRepositoryCC $
=CC% &#
WokingCapitalRepositoryCC' >
;CC> ?'
_buildingMaterialRepositoryDD '
=DD( )&
buildingMaterialRepositoryDD* D
;DDD E0
$_furnitureInspectionDetailRepositoryEE 0
=EE1 2/
#furnitureInspectionDetailRepositoryEE3 V
;EEV W*
_indigenousMachineryRepositoryFF *
=FF+ ,)
indigenousMachineryRepositoryFF- J
;FFJ K&
_importMachineryRepositoryGG &
=GG' (%
importMachineryRepositoryGG) B
;GGB C%
_meansOfFinanceRepositoryHH %
=HH& '$
meansOfFinanceRepositoryHH( @
;HH@ A%
_letterOfCreditRepositoryII %
=II& '$
letterOfCreditRepositoryII( @
;II@ A
	_userInfoJJ 
=JJ 
userInfoJJ  
;JJ  !"
_projectCostRepositoryKK "
=KK# $!
projectCostRepositoryKK% :
;KK: ;

_idmIrLandLL 
=LL 
	idmIrLandLL "
;LL" # 
_machineryRepositoryMM  
=MM! "
machineryRepositoryMM# 6
;MM6 7&
_buildingDetailsRepositoryNN &
=NN' (%
buildingDetailsRepositoryNN) B
;NNB C*
_furnitureAcuisitionRepositoryOO *
=OO+ ,)
furnitureAcuisitionRepositoryOO- J
;OOJ K
_machinaryStatusPP 
=PP 
machinaryStatusPP .
;PP. /
_procureStatusQQ 
=QQ 
procureStatusQQ *
;QQ* +
}RR 	
publicUU 
asyncUU 
TaskUU 
<UU 
IEnumerableUU %
<UU% & 
LoanAccountNumberDTOUU& :
>UU: ;
>UU; <
GetAccountNumberUU= M
(UUM N
CancellationTokenUUN _
tokenUU` e
)UUe f
{VV 	
varWW 
dataWW 
=WW 
awaitWW 
_loanRepositoryWW ,
.WW, -)
FindByMatchingPropertiesAsyncWW- J
(WWJ K
tokenWWK P
,WWP Q
xWWR S
=>WWT V
xWWW X
.WWX Y
IsActiveWWY a
==WWb d
trueWWe i
,WWi j
incOffXX 
=>XX 
incOffXX  
.XX  !
	OffcCdtabXX! *
,XX* +
incUnitYY 
=>YY 
incUnitYY "
.YY" #
TblUnitMastYY# .
,YY. /

incLoanAccZZ 
=>ZZ 

incLoanAccZZ )
.ZZ) *
TblIdmLegalWorkflowZZ* =
)[[ 
.[[ 
ConfigureAwait[[  
([[  !
false[[! &
)[[& '
;[[' (
return]] 
_mapper]] 
.]] 
Map]] 
<]] 
List]] #
<]]# $ 
LoanAccountNumberDTO]]$ 8
>]]8 9
>]]9 :
(]]: ;
data]]; ?
)]]? @
;]]@ A
}^^ 	
publicaa 
asyncaa 
Taskaa 
<aa 
IEnumerableaa %
<aa% &
IdmDchgLandDetDTOaa& 7
>aa7 8
>aa8 9)
GetAllLandInspectionListAsyncaa: W
(aaW X
longaaX \
accountNumberaa] j
,aaj k
longaal p
InspectionIdaaq }
,aa} ~
CancellationToken	aa ê
token
aaë ñ
)
aañ ó
{bb 	
Listcc 
<cc 
TblIdmDchgLandcc 
>cc  
landInspectionListcc! 3
;cc3 4
ifdd 
(dd 
InspectionIddd 
!=dd 
$numdd  !
)dd! "
{ee 
landInspectionListff "
=ff# $
awaitff% *%
_landInspectionRepositoryff+ D
.ffD E!
FindByExpressionAsyncffE Z
(ffZ [
xff[ \
=>ff] _
xff` a
.ffa b
LoanAccffb i
==ffj l
accountNumberffm z
&&ff{ }
xff~ 
.	ff Ä
DcLndIno
ffÄ à
==
ffâ ã
InspectionId
ffå ò
&&
ffô õ
x
ffú ù
.
ffù û
IsActive
ffû ¶
==
ffß ©
true
ff™ Æ
&&
ffØ ±
x
ff≤ ≥
.
ff≥ ¥
	IsDeleted
ff¥ Ω
==
ffæ ¿
false
ff¡ ∆
,
ff∆ «
token
ff» Õ
)
ffÕ Œ
;
ffŒ œ
}hh 
elseii 
{jj 
landInspectionListkk "
=kk# $
awaitkk% *%
_landInspectionRepositorykk+ D
.kkD E!
FindByExpressionAsynckkE Z
(kkZ [
xkk[ \
=>kk] _
xkk` a
.kka b
LoanAcckkb i
==kkj l
accountNumberkkm z
&&kk{ }
xkk~ 
.	kk Ä
IsActive
kkÄ à
==
kkâ ã
true
kkå ê
&&
kkë ì
x
kkî ï
.
kkï ñ
	IsDeleted
kkñ ü
==
kk† ¢
false
kk£ ®
,
kk® ©
token
kk™ Ø
)
kkØ ∞
;
kk∞ ±
}mm 
returnnn 
_mappernn 
.nn 
Mapnn 
<nn 
Listnn #
<nn# $
IdmDchgLandDetDTOnn$ 5
>nn5 6
>nn6 7
(nn7 8
landInspectionListnn8 J
)nnJ K
;nnK L
}oo 	
publicrr 
asyncrr 
Taskrr 
<rr 
boolrr 
>rr '
UpdateLandInspectionDetailsrr  ;
(rr; <
IdmDchgLandDetDTOrr< M
landInspectionDTOrrN _
,rr_ `
CancellationTokenrra r
tokenrrs x
)rrx y
{ss 	
vartt 
currentDetailstt 
=tt  
awaittt! &%
_landInspectionRepositorytt' @
.tt@ A+
FirstOrDefaultByExpressionAsyncttA `
(tt` a
xtta b
=>ttc e
xttf g
.ttg h

DcLndRowIdtth r
==tts u
landInspectionDTO	ttv á
.
ttá à

DcLndRowId
ttà í
,
ttí ì
token
ttî ô
)
ttô ö
;
ttö õ
ifuu 
(uu 
currentDetailsuu 
!=uu !
nulluu" &
)uu& '
{vv 
currentDetailsww 
.ww 
	IsDeletedww (
=ww) *
trueww+ /
;ww/ 0
currentDetailsxx 
.xx 
IsActivexx '
=xx( )
falsexx* /
;xx/ 0
currentDetailsyy 
.yy 

ModifiedByyy )
=yy* +
	_userInfoyy, 5
.yy5 6
Nameyy6 :
;yy: ;
currentDetailszz 
.zz 
ModifiedDatezz +
=zz, -
DateTimezz. 6
.zz6 7
UtcNowzz7 =
;zz= >
await{{ %
_landInspectionRepository{{ /
.{{/ 0
UpdateAsync{{0 ;
({{; <
currentDetails{{< J
,{{J K
token{{L Q
){{Q R
.{{R S
ConfigureAwait{{S a
({{a b
false{{b g
){{g h
;{{h i
var}} 
basicDetails}}  
=}}! "
_mapper}}# *
.}}* +
Map}}+ .
<}}. /
TblIdmDchgLand}}/ =
>}}= >
(}}> ?
landInspectionDTO}}? P
)}}P Q
;}}Q R
basicDetails~~ 
.~~ 

DcLndRowId~~ '
=~~( )
$num~~* +
;~~+ ,
basicDetails 
. 
IsActive %
=& '
true( ,
;, -
basicDetails
ÄÄ 
.
ÄÄ 
	IsDeleted
ÄÄ &
=
ÄÄ' (
false
ÄÄ) .
;
ÄÄ. /
basicDetails
ÅÅ 
.
ÅÅ 
	CreatedBy
ÅÅ &
=
ÅÅ' (
	_userInfo
ÅÅ) 2
.
ÅÅ2 3
Name
ÅÅ3 7
;
ÅÅ7 8
basicDetails
ÇÇ 
.
ÇÇ 
CreatedDate
ÇÇ (
=
ÇÇ) *
DateTime
ÇÇ+ 3
.
ÇÇ3 4
UtcNow
ÇÇ4 :
;
ÇÇ: ;
var
ÑÑ 
response
ÑÑ 
=
ÑÑ 
await
ÑÑ $'
_landInspectionRepository
ÑÑ% >
.
ÑÑ> ?
AddAsync
ÑÑ? G
(
ÑÑG H
basicDetails
ÑÑH T
,
ÑÑT U
token
ÑÑV [
)
ÑÑ[ \
.
ÑÑ\ ]
ConfigureAwait
ÑÑ] k
(
ÑÑk l
false
ÑÑl q
)
ÑÑq r
;
ÑÑr s
await
ÜÜ 
_work
ÜÜ 
.
ÜÜ 
CommitAsync
ÜÜ '
(
ÜÜ' (
token
ÜÜ( -
)
ÜÜ- .
.
ÜÜ. /
ConfigureAwait
ÜÜ/ =
(
ÜÜ= >
false
ÜÜ> C
)
ÜÜC D
;
ÜÜD E
if
áá 
(
áá 
response
áá 
!=
áá 
null
áá  $
)
áá$ %
{
àà 
return
ââ 
true
ââ 
;
ââ  
}
ää 
else
ãã 
{
åå 
return
çç 
false
çç  
;
çç  !
}
éé 
}
èè 
return
êê 
false
êê 
;
êê 
}
ëë 	
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
bool
ìì 
>
ìì )
CreateLandInspectionDetails
ìì  ;
(
ìì; <
IdmDchgLandDetDTO
ìì< M
landInspectionDTO
ììN _
,
ìì_ `
CancellationToken
ììa r
token
ììs x
)
ììx y
{
îî 	
var
ïï 
basicDetails
ïï 
=
ïï 
_mapper
ïï &
.
ïï& '
Map
ïï' *
<
ïï* +
TblIdmDchgLand
ïï+ 9
>
ïï9 :
(
ïï: ;
landInspectionDTO
ïï; L
)
ïïL M
;
ïïM N
basicDetails
ññ 
.
ññ 
IsActive
ññ !
=
ññ" #
true
ññ$ (
;
ññ( )
basicDetails
óó 
.
óó 
	IsDeleted
óó "
=
óó# $
false
óó% *
;
óó* +
basicDetails
òò 
.
òò 
	CreatedBy
òò "
=
òò# $
	_userInfo
òò% .
.
òò. /
Name
òò/ 3
;
òò3 4
basicDetails
ôô 
.
ôô 
CreatedDate
ôô $
=
ôô% &
DateTime
ôô' /
.
ôô/ 0
UtcNow
ôô0 6
;
ôô6 7
var
õõ $
landacquisitionDetails
õõ &
=
õõ' (
new
õõ) ,
TblIdmIrLand
õõ- 9
(
õõ9 :
)
õõ: ;
;
õõ; <$
landacquisitionDetails
úú "
.
úú" #
LoanAcc
úú# *
=
úú+ ,
basicDetails
úú- 9
.
úú9 :
LoanAcc
úú: A
;
úúA B$
landacquisitionDetails
ùù "
.
ùù" #
LoanSub
ùù# *
=
ùù+ ,
basicDetails
ùù- 9
.
ùù9 :
LoanSub
ùù: A
;
ùùA B$
landacquisitionDetails
ûû "
.
ûû" #
OffcCd
ûû# )
=
ûû* +
basicDetails
ûû, 8
.
ûû8 9
OffcCd
ûû9 ?
;
ûû? @$
landacquisitionDetails
üü "
.
üü" #
IrlLandCost
üü# .
=
üü/ 0
basicDetails
üü1 =
.
üü= >
DcLndAmt
üü> F
;
üüF G$
landacquisitionDetails
°° "
.
°°" #
IrlArea
°°# *
=
°°+ ,
basicDetails
°°- 9
.
°°9 :
	DcLndArea
°°: C
;
°°C D$
landacquisitionDetails
¢¢ "
.
¢¢" #
IrlIno
¢¢# )
=
¢¢* +
basicDetails
¢¢, 8
.
¢¢8 9
DcLndIno
¢¢9 A
;
¢¢A B$
landacquisitionDetails
££ "
.
££" #

IrlDevCost
££# -
=
££. /
basicDetails
££0 <
.
££< =
DcLndDevCst
££= H
;
££H I$
landacquisitionDetails
§§ "
.
§§" #
IrlLandFinance
§§# 1
=
§§2 3
basicDetails
§§4 @
.
§§@ A
DcLndLandFinance
§§A Q
;
§§Q R$
landacquisitionDetails
•• "
.
••" #
	IrlAreaIn
••# ,
=
••- .
basicDetails
••/ ;
.
••; <
DcLndAreaIn
••< G
;
••G H$
landacquisitionDetails
¶¶ "
.
¶¶" #
	IrlLandTy
¶¶# ,
=
¶¶- .
basicDetails
¶¶/ ;
.
¶¶; <
	DcLndType
¶¶< E
;
¶¶E F$
landacquisitionDetails
ßß "
.
ßß" #
IrlSecValue
ßß# .
=
ßß/ 0
basicDetails
ßß1 =
.
ßß= >
DcLndSecCreated
ßß> M
;
ßßM N$
landacquisitionDetails
©© "
.
©©" #
IsActive
©©# +
=
©©, -
true
©©. 2
;
©©2 3$
landacquisitionDetails
™™ "
.
™™" #
	IsDeleted
™™# ,
=
™™- .
false
™™/ 4
;
™™4 5$
landacquisitionDetails
´´ "
.
´´" #
	CreatedBy
´´# ,
=
´´- .
	_userInfo
´´/ 8
.
´´8 9
Name
´´9 =
;
´´= >$
landacquisitionDetails
¨¨ "
.
¨¨" #
CreatedDate
¨¨# .
=
¨¨/ 0
DateTime
¨¨1 9
.
¨¨9 :
UtcNow
¨¨: @
;
¨¨@ A
var
ÆÆ 
response
ÆÆ 
=
ÆÆ 
await
ÆÆ  '
_landInspectionRepository
ÆÆ! :
.
ÆÆ: ;
AddAsync
ÆÆ; C
(
ÆÆC D
basicDetails
ÆÆD P
,
ÆÆP Q
token
ÆÆR W
)
ÆÆW X
.
ÆÆX Y
ConfigureAwait
ÆÆY g
(
ÆÆg h
false
ÆÆh m
)
ÆÆm n
;
ÆÆn o
await
ØØ 

_idmIrLand
ØØ 
.
ØØ 
AddAsync
ØØ %
(
ØØ% &$
landacquisitionDetails
ØØ& <
,
ØØ< =
token
ØØ> C
)
ØØC D
.
ØØD E
ConfigureAwait
ØØE S
(
ØØS T
false
ØØT Y
)
ØØY Z
;
ØØZ [
await
∞∞ 
_work
∞∞ 
.
∞∞ 
CommitAsync
∞∞ #
(
∞∞# $
token
∞∞$ )
)
∞∞) *
.
∞∞* +
ConfigureAwait
∞∞+ 9
(
∞∞9 :
false
∞∞: ?
)
∞∞? @
;
∞∞@ A
if
±± 
(
±± 
response
±± 
!=
±± 
null
±±  
)
±±  !
{
≤≤ 
return
≥≥ 
true
≥≥ 
;
≥≥ 
}
¥¥ 
else
µµ 
{
∂∂ 
return
∑∑ 
false
∑∑ 
;
∑∑ 
}
∏∏ 
}
ππ 	
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
bool
ªª 
>
ªª )
DeleteLandInspectionDetails
ªª  ;
(
ªª; <
IdmDchgLandDetDTO
ªª< M
landInspectionDTO
ªªN _
,
ªª_ `
CancellationToken
ªªa r
token
ªªs x
)
ªªx y
{
ºº 	
var
ΩΩ 
basicDetails
ΩΩ 
=
ΩΩ 
_mapper
ΩΩ &
.
ΩΩ& '
Map
ΩΩ' *
<
ΩΩ* +
TblIdmDchgLand
ΩΩ+ 9
>
ΩΩ9 :
(
ΩΩ: ;
landInspectionDTO
ΩΩ; L
)
ΩΩL M
;
ΩΩM N
basicDetails
ææ 
.
ææ 
IsActive
ææ !
=
ææ" #
false
ææ$ )
;
ææ) *
basicDetails
øø 
.
øø 
	IsDeleted
øø "
=
øø# $
true
øø% )
;
øø) *
basicDetails
¿¿ 
.
¿¿ 
ModifiedDate
¿¿ %
=
¿¿& '
DateTime
¿¿( 0
.
¿¿0 1
UtcNow
¿¿1 7
;
¿¿7 8
basicDetails
¡¡ 
.
¡¡ 

ModifiedBy
¡¡ #
=
¡¡$ %
	_userInfo
¡¡& /
.
¡¡/ 0
Name
¡¡0 4
;
¡¡4 5
var
¬¬ 
response
¬¬ 
=
¬¬ 
await
¬¬  '
_landInspectionRepository
¬¬! :
.
¬¬: ;
UpdateAsync
¬¬; F
(
¬¬F G
basicDetails
¬¬G S
,
¬¬S T
token
¬¬U Z
)
¬¬Z [
.
¬¬[ \
ConfigureAwait
¬¬\ j
(
¬¬j k
false
¬¬k p
)
¬¬p q
;
¬¬q r
await
√√ 
_work
√√ 
.
√√ 
CommitAsync
√√ #
(
√√# $
token
√√$ )
)
√√) *
.
√√* +
ConfigureAwait
√√+ 9
(
√√9 :
false
√√: ?
)
√√? @
;
√√@ A
if
ƒƒ 
(
ƒƒ 
response
ƒƒ 
!=
ƒƒ 
null
ƒƒ  
)
ƒƒ  !
{
≈≈ 
return
∆∆ 
true
∆∆ 
;
∆∆ 
}
«« 
else
»» 
{
…… 
return
   
false
   
;
   
}
ÀÀ 
}
ÃÃ 	
public
—— 
async
—— 
Task
—— 
<
—— 
IEnumerable
—— %
<
——% &
IdmDspInspDTO
——& 3
>
——3 4
>
——4 5)
GetAllInspectionDetailsList
——6 Q
(
——Q R
long
——R V
accountNumber
——W d
,
——d e
CancellationToken
——f w
token
——x }
)
——} ~
{
““ 	
var
”” 
InspectionList
”” 
=
””  
await
””! &)
_InspectionDetailRepository
””' B
.
””B C#
FindByExpressionAsync
””C X
(
””X Y
x
””Y Z
=>
””[ ]
x
””^ _
.
””_ `
LoanAcc
””` g
==
””h j
accountNumber
””k x
&&
””y {
x
””| }
.
””} ~
IsActive””~ Ü
==””á â
true””ä é
&&””è ë
x””í ì
.””ì î
	IsDeleted””î ù
==””û †
false””° ¶
,””¶ ß
token””® ≠
)””≠ Æ
;””Æ Ø
return
‘‘ 
_mapper
‘‘ 
.
‘‘ 
Map
‘‘ 
<
‘‘ 
List
‘‘ #
<
‘‘# $
IdmDspInspDTO
‘‘$ 1
>
‘‘1 2
>
‘‘2 3
(
‘‘3 4
InspectionList
‘‘4 B
)
‘‘B C
;
‘‘C D
}
’’ 	
public
÷÷ 
async
÷÷ 
Task
÷÷ 
<
÷÷ 
bool
÷÷ 
>
÷÷ %
UpdateInspectionDetails
÷÷  7
(
÷÷7 8
IdmDspInspDTO
÷÷8 E
InspectionDTO
÷÷F S
,
÷÷S T
CancellationToken
÷÷U f
token
÷÷g l
)
÷÷l m
{
◊◊ 	
var
ÿÿ 
currentDetails
ÿÿ 
=
ÿÿ  
await
ÿÿ! &)
_InspectionDetailRepository
ÿÿ' B
.
ÿÿB C-
FirstOrDefaultByExpressionAsync
ÿÿC b
(
ÿÿb c
x
ÿÿc d
=>
ÿÿe g
x
ÿÿh i
.
ÿÿi j
DinRowID
ÿÿj r
==
ÿÿs u
InspectionDTOÿÿv É
.ÿÿÉ Ñ
DinRowIDÿÿÑ å
,ÿÿå ç
tokenÿÿé ì
)ÿÿì î
;ÿÿî ï
if
ŸŸ 
(
ŸŸ 
currentDetails
ŸŸ 
!=
ŸŸ !
null
ŸŸ" &
)
ŸŸ& '
{
⁄⁄ 
currentDetails
€€ 
.
€€ 
	IsDeleted
€€ (
=
€€) *
true
€€+ /
;
€€/ 0
currentDetails
‹‹ 
.
‹‹ 
IsActive
‹‹ '
=
‹‹( )
false
‹‹* /
;
‹‹/ 0
currentDetails
›› 
.
›› 

ModifiedBy
›› )
=
››* +
	_userInfo
››, 5
.
››5 6
Name
››6 :
;
››: ;
currentDetails
ﬁﬁ 
.
ﬁﬁ 
ModifiedDate
ﬁﬁ +
=
ﬁﬁ, -
DateTime
ﬁﬁ. 6
.
ﬁﬁ6 7
UtcNow
ﬁﬁ7 =
;
ﬁﬁ= >
await
ﬂﬂ )
_InspectionDetailRepository
ﬂﬂ 1
.
ﬂﬂ1 2
UpdateAsync
ﬂﬂ2 =
(
ﬂﬂ= >
currentDetails
ﬂﬂ> L
,
ﬂﬂL M
token
ﬂﬂN S
)
ﬂﬂS T
.
ﬂﬂT U
ConfigureAwait
ﬂﬂU c
(
ﬂﬂc d
false
ﬂﬂd i
)
ﬂﬂi j
;
ﬂﬂj k
var
‚‚ 
basicDetails
‚‚  
=
‚‚! "
_mapper
‚‚# *
.
‚‚* +
Map
‚‚+ .
<
‚‚. /
TblIdmDspInsp
‚‚/ <
>
‚‚< =
(
‚‚= >
InspectionDTO
‚‚> K
)
‚‚K L
;
‚‚L M
basicDetails
„„ 
.
„„ 
DinRowID
„„ %
=
„„& '
$num
„„( )
;
„„) *
basicDetails
‰‰ 
.
‰‰ 
IsActive
‰‰ %
=
‰‰& '
true
‰‰( ,
;
‰‰, -
basicDetails
ÂÂ 
.
ÂÂ 
	IsDeleted
ÂÂ &
=
ÂÂ' (
false
ÂÂ) .
;
ÂÂ. /
basicDetails
ÊÊ 
.
ÊÊ 
CreateBy
ÊÊ %
=
ÊÊ& '
	_userInfo
ÊÊ( 1
.
ÊÊ1 2
Name
ÊÊ2 6
;
ÊÊ6 7
basicDetails
ÁÁ 
.
ÁÁ 
CreatedDate
ÁÁ (
=
ÁÁ) *
DateTime
ÁÁ+ 3
.
ÁÁ3 4
UtcNow
ÁÁ4 :
;
ÁÁ: ;
var
ÈÈ 
response
ÈÈ 
=
ÈÈ 
await
ÈÈ $)
_InspectionDetailRepository
ÈÈ% @
.
ÈÈ@ A
AddAsync
ÈÈA I
(
ÈÈI J
basicDetails
ÈÈJ V
,
ÈÈV W
token
ÈÈX ]
)
ÈÈ] ^
.
ÈÈ^ _
ConfigureAwait
ÈÈ_ m
(
ÈÈm n
false
ÈÈn s
)
ÈÈs t
;
ÈÈt u
await
ÍÍ 
_work
ÍÍ 
.
ÍÍ 
CommitAsync
ÍÍ '
(
ÍÍ' (
token
ÍÍ( -
)
ÍÍ- .
.
ÍÍ. /
ConfigureAwait
ÍÍ/ =
(
ÍÍ= >
false
ÍÍ> C
)
ÍÍC D
;
ÍÍD E
if
ÎÎ 
(
ÎÎ 
response
ÎÎ 
!=
ÎÎ 
null
ÎÎ  $
)
ÎÎ$ %
{
ÏÏ 
return
ÌÌ 
true
ÌÌ 
;
ÌÌ  
}
ÓÓ 
else
ÔÔ 
{
 
return
ÒÒ 
false
ÒÒ  
;
ÒÒ  !
}
ÚÚ 
}
ÛÛ 
return
ÙÙ 
false
ÙÙ 
;
ÙÙ 
}
ıı 	
public
˜˜ 
async
˜˜ 
Task
˜˜ 
<
˜˜ 
bool
˜˜ 
>
˜˜ %
CreateInspectionDetails
˜˜  7
(
˜˜7 8
IdmDspInspDTO
˜˜8 E
inspectionDTO
˜˜F S
,
˜˜S T
CancellationToken
˜˜U f
token
˜˜g l
)
˜˜l m
{
¯¯ 	
var
˘˘ 
basicDetails
˘˘ 
=
˘˘ 
_mapper
˘˘ &
.
˘˘& '
Map
˘˘' *
<
˘˘* +
TblIdmDspInsp
˘˘+ 8
>
˘˘8 9
(
˘˘9 :
inspectionDTO
˘˘: G
)
˘˘G H
;
˘˘H I
basicDetails
˙˙ 
.
˙˙ 
IsActive
˙˙ !
=
˙˙" #
true
˙˙$ (
;
˙˙( )
basicDetails
˚˚ 
.
˚˚ 
CreateBy
˚˚ !
=
˚˚" #
	_userInfo
˚˚$ -
.
˚˚- .
Name
˚˚. 2
;
˚˚2 3
basicDetails
¸¸ 
.
¸¸ 
	IsDeleted
¸¸ "
=
¸¸# $
false
¸¸% *
;
¸¸* +
basicDetails
˝˝ 
.
˝˝ 
CreatedDate
˝˝ $
=
˝˝% &
DateTime
˝˝' /
.
˝˝/ 0
UtcNow
˝˝0 6
;
˝˝6 7
var
ˇˇ 
response
ˇˇ 
=
ˇˇ 
await
ˇˇ  )
_InspectionDetailRepository
ˇˇ! <
.
ˇˇ< =
AddAsync
ˇˇ= E
(
ˇˇE F
basicDetails
ˇˇF R
,
ˇˇR S
token
ˇˇT Y
)
ˇˇY Z
.
ˇˇZ [
ConfigureAwait
ˇˇ[ i
(
ˇˇi j
false
ˇˇj o
)
ˇˇo p
;
ˇˇp q
await
ÄÄ 
_work
ÄÄ 
.
ÄÄ 
CommitAsync
ÄÄ #
(
ÄÄ# $
token
ÄÄ$ )
)
ÄÄ) *
.
ÄÄ* +
ConfigureAwait
ÄÄ+ 9
(
ÄÄ9 :
false
ÄÄ: ?
)
ÄÄ? @
;
ÄÄ@ A
if
ÅÅ 
(
ÅÅ 
response
ÅÅ 
!=
ÅÅ 
null
ÅÅ  
)
ÅÅ  !
{
ÇÇ 
return
ÉÉ 
true
ÉÉ 
;
ÉÉ 
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
return
áá 
false
áá 
;
áá 
}
àà 
}
ââ 	
public
ãã 
async
ãã 
Task
ãã 
<
ãã 
bool
ãã 
>
ãã %
DeleteInspectionDetails
ãã  7
(
ãã7 8
IdmDspInspDTO
ãã8 E
InspectionDTO
ããF S
,
ããS T
CancellationToken
ããU f
token
ããg l
)
ããl m
{
åå 	
var
çç 
basicDetails
çç 
=
çç 
_mapper
çç &
.
çç& '
Map
çç' *
<
çç* +
TblIdmDspInsp
çç+ 8
>
çç8 9
(
çç9 :
InspectionDTO
çç: G
)
ççG H
;
ççH I
basicDetails
éé 
.
éé 
IsActive
éé !
=
éé" #
false
éé$ )
;
éé) *
basicDetails
èè 
.
èè 
	IsDeleted
èè "
=
èè# $
true
èè% )
;
èè) *
basicDetails
êê 
.
êê 
ModifiedDate
êê %
=
êê& '
DateTime
êê( 0
.
êê0 1
UtcNow
êê1 7
;
êê7 8
basicDetails
ëë 
.
ëë 

ModifiedBy
ëë #
=
ëë$ %
	_userInfo
ëë& /
.
ëë/ 0
Name
ëë0 4
;
ëë4 5
var
íí 
response
íí 
=
íí 
await
íí  )
_InspectionDetailRepository
íí! <
.
íí< =
UpdateAsync
íí= H
(
ííH I
basicDetails
ííI U
,
ííU V
token
ííW \
)
íí\ ]
.
íí] ^
ConfigureAwait
íí^ l
(
ííl m
false
íím r
)
íír s
;
íís t
await
ìì 
_work
ìì 
.
ìì 
CommitAsync
ìì #
(
ìì# $
token
ìì$ )
)
ìì) *
.
ìì* +
ConfigureAwait
ìì+ 9
(
ìì9 :
false
ìì: ?
)
ìì? @
;
ìì@ A
if
îî 
(
îî 
response
îî 
!=
îî 
null
îî  
)
îî  !
{
ïï 
return
ññ 
true
ññ 
;
ññ 
}
óó 
else
òò 
{
ôô 
return
öö 
false
öö 
;
öö 
}
õõ 
}
úú 	
public
¢¢ 
async
¢¢ 
Task
¢¢ 
<
¢¢ 
IEnumerable
¢¢ %
<
¢¢% &#
IdmDchgBuildingDetDTO
¢¢& ;
>
¢¢; <
>
¢¢< =*
GetAllBuildingInspectionList
¢¢> Z
(
¢¢Z [
long
¢¢[ _
accountNumber
¢¢` m
,
¢¢m n
long
¢¢o s
InspectionId¢¢t Ä
,¢¢Ä Å!
CancellationToken¢¢Ç ì
token¢¢î ô
)¢¢ô ö
{
££ 	
List
§§ 
<
§§ #
TblIdmDchgBuildingDet
§§ &
>
§§& ' 
landInspectionList
§§( :
;
§§: ;
if
•• 
(
•• 
InspectionId
•• 
!=
•• 
$num
••  !
)
••! "
{
¶¶  
landInspectionList
ßß "
=
ßß# $
await
ßß% *+
_buildingInspectionRepository
ßß+ H
.
ßßH I#
FindByExpressionAsync
ßßI ^
(
ßß^ _
x
ßß_ `
=>
ßßa c
x
ßßd e
.
ßße f
LoanAcc
ßßf m
==
ßßn p
accountNumber
ßßq ~
&&ßß Å
xßßÇ É
.ßßÉ Ñ
DcBdgInoßßÑ å
==ßßç è
InspectionIdßßê ú
&&ßßù ü
xßß† °
.ßß° ¢
IsActiveßß¢ ™
==ßß´ ≠
trueßßÆ ≤
&&ßß≥ µ
xßß∂ ∑
.ßß∑ ∏
	IsDeletedßß∏ ¡
==ßß¬ ƒ
falseßß≈  
,ßß  À
tokenßßÃ —
)ßß— “
;ßß“ ”
}
©© 
else
™™ 
{
´´  
landInspectionList
¨¨ "
=
¨¨# $
await
¨¨% *+
_buildingInspectionRepository
¨¨+ H
.
¨¨H I#
FindByExpressionAsync
¨¨I ^
(
¨¨^ _
x
¨¨_ `
=>
¨¨a c
x
¨¨d e
.
¨¨e f
LoanAcc
¨¨f m
==
¨¨n p
accountNumber
¨¨q ~
&&¨¨Ä Ç
x¨¨É Ñ
.¨¨Ñ Ö
IsActive¨¨Ö ç
==¨¨é ê
true¨¨ë ï
&&¨¨ñ ò
x¨¨ô ö
.¨¨ö õ
	IsDeleted¨¨õ §
==¨¨• ß
false¨¨® ≠
,¨¨≠ Æ
token¨¨Ø ¥
)¨¨¥ µ
;¨¨µ ∂
}
ÆÆ 
return
ØØ 
_mapper
ØØ 
.
ØØ 
Map
ØØ 
<
ØØ 
List
ØØ #
<
ØØ# $#
IdmDchgBuildingDetDTO
ØØ$ 9
>
ØØ9 :
>
ØØ: ;
(
ØØ; < 
landInspectionList
ØØ< N
)
ØØN O
;
ØØO P
}
∞∞ 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
bool
≥≥ 
>
≥≥ -
CreateBuilidngInspectionDetails
≥≥  ?
(
≥≥? @#
IdmDchgBuildingDetDTO
≥≥@ U
BuildingDto
≥≥V a
,
≥≥a b
CancellationToken
≥≥c t
token
≥≥u z
)
≥≥z {
{
¥¥ 	
var
µµ 
basicDetails
µµ 
=
µµ 
_mapper
µµ &
.
µµ& '
Map
µµ' *
<
µµ* +#
TblIdmDchgBuildingDet
µµ+ @
>
µµ@ A
(
µµA B
BuildingDto
µµB M
)
µµM N
;
µµN O
basicDetails
∂∂ 
.
∂∂ 
CreatedDate
∂∂ $
=
∂∂% &
DateTime
∂∂' /
.
∂∂/ 0
UtcNow
∂∂0 6
;
∂∂6 7
basicDetails
∑∑ 
.
∑∑ 
	CreatedBy
∑∑ "
=
∑∑# $
	_userInfo
∑∑% .
.
∑∑. /
Name
∑∑/ 3
;
∑∑3 4
var
ππ (
buildingAcquisitionDetails
ππ *
=
ππ+ ,
new
ππ- 0.
 TblIdmBuildingAcquisitionDetails
ππ1 Q
(
ππQ R
)
ππR S
;
ππS T(
buildingAcquisitionDetails
ªª &
.
ªª& '
LoanAcc
ªª' .
=
ªª/ 0
basicDetails
ªª1 =
.
ªª= >
LoanAcc
ªª> E
;
ªªE F(
buildingAcquisitionDetails
ºº &
.
ºº& '
LoanSub
ºº' .
=
ºº/ 0
basicDetails
ºº1 =
.
ºº= >
LoanSub
ºº> E
;
ººE F(
buildingAcquisitionDetails
ΩΩ &
.
ΩΩ& '
OffcCd
ΩΩ' -
=
ΩΩ. /
basicDetails
ΩΩ0 <
.
ΩΩ< =
OffcCd
ΩΩ= C
;
ΩΩC D(
buildingAcquisitionDetails
øø &
.
øø& '
IrbItem
øø' .
=
øø/ 0
basicDetails
øø1 =
.
øø= >

DcBdgItmNo
øø> H
;
øøH I(
buildingAcquisitionDetails
¿¿ &
.
¿¿& '
IrbIno
¿¿' -
=
¿¿. /
basicDetails
¿¿0 <
.
¿¿< =
DcBdgIno
¿¿= E
;
¿¿E F(
buildingAcquisitionDetails
¡¡ &
.
¡¡& '
IrbBldgDetails
¡¡' 5
=
¡¡6 7
basicDetails
¡¡8 D
.
¡¡D E
	DcBdgDets
¡¡E N
;
¡¡N O(
buildingAcquisitionDetails
√√ &
.
√√& '
IrbValue
√√' /
=
√√0 1
basicDetails
√√2 >
.
√√> ?

DcBdgTcost
√√? I
;
√√I J(
buildingAcquisitionDetails
≈≈ &
.
≈≈& '
	IrbStatus
≈≈' 0
=
≈≈1 2
basicDetails
≈≈3 ?
.
≈≈? @
	DcBdgStat
≈≈@ I
;
≈≈I J(
buildingAcquisitionDetails
∆∆ &
.
∆∆& '
IrbSecValue
∆∆' 2
=
∆∆3 4
basicDetails
∆∆5 A
.
∆∆A B
DcBdgSecCreatd
∆∆B P
;
∆∆P Q(
buildingAcquisitionDetails
«« &
.
««& '
IrbBldgDetails
««' 5
=
««6 7
basicDetails
««8 D
.
««D E
	DcBdgDets
««E N
;
««N O(
buildingAcquisitionDetails
…… &
.
……& '
CreatedDate
……' 2
=
……3 4
DateTime
……5 =
.
……= >
UtcNow
……> D
;
……D E(
buildingAcquisitionDetails
   &
.
  & '
	CreatedBy
  ' 0
=
  1 2
	_userInfo
  3 <
.
  < =
Name
  = A
;
  A B(
buildingAcquisitionDetails
ÀÀ &
.
ÀÀ& '
IsActive
ÀÀ' /
=
ÀÀ0 1
true
ÀÀ2 6
;
ÀÀ6 7(
buildingAcquisitionDetails
ÃÃ &
.
ÃÃ& '
	IsDeleted
ÃÃ' 0
=
ÃÃ1 2
false
ÃÃ3 8
;
ÃÃ8 9
var
ŒŒ 
response
ŒŒ 
=
ŒŒ 
await
ŒŒ  +
_buildingInspectionRepository
ŒŒ! >
.
ŒŒ> ?
AddAsync
ŒŒ? G
(
ŒŒG H
basicDetails
ŒŒH T
,
ŒŒT U
token
ŒŒV [
)
ŒŒ[ \
.
ŒŒ\ ]
ConfigureAwait
ŒŒ] k
(
ŒŒk l
false
ŒŒl q
)
ŒŒq r
;
ŒŒr s
await
–– (
_buildingDetailsRepository
–– ,
.
––, -
AddAsync
––- 5
(
––5 6(
buildingAcquisitionDetails
––6 P
,
––P Q
token
––R W
)
––W X
.
––X Y
ConfigureAwait
––Y g
(
––g h
false
––h m
)
––m n
;
––n o
await
““ 
_work
““ 
.
““ 
CommitAsync
““ #
(
““# $
token
““$ )
)
““) *
.
““* +
ConfigureAwait
““+ 9
(
““9 :
false
““: ?
)
““? @
;
““@ A
if
”” 
(
”” 
response
”” 
!=
”” 
null
””  
)
””  !
{
‘‘ 
return
’’ 
true
’’ 
;
’’ 
}
÷÷ 
else
◊◊ 
{
ÿÿ 
return
ŸŸ 
false
ŸŸ 
;
ŸŸ 
}
⁄⁄ 
}
€€ 	
public
‹‹ 
async
‹‹ 
Task
‹‹ 
<
‹‹ 
bool
‹‹ 
>
‹‹ -
UpdateBuilidngInspectionDetails
‹‹  ?
(
‹‹? @#
IdmDchgBuildingDetDTO
‹‹@ U
BuildingDto
‹‹V a
,
‹‹a b
CancellationToken
‹‹c t
token
‹‹u z
)
‹‹z {
{
›› 	
var
ﬁﬁ 
currentDetails
ﬁﬁ 
=
ﬁﬁ  
await
ﬁﬁ! &+
_buildingInspectionRepository
ﬁﬁ' D
.
ﬁﬁD E-
FirstOrDefaultByExpressionAsync
ﬁﬁE d
(
ﬁﬁd e
x
ﬁﬁe f
=>
ﬁﬁg i
x
ﬁﬁj k
.
ﬁﬁk l

DcBdgRowId
ﬁﬁl v
==
ﬁﬁw y
BuildingDtoﬁﬁz Ö
.ﬁﬁÖ Ü

DcBdgRowIdﬁﬁÜ ê
,ﬁﬁê ë
tokenﬁﬁí ó
)ﬁﬁó ò
;ﬁﬁò ô
if
ﬂﬂ 
(
ﬂﬂ 
currentDetails
ﬂﬂ 
!=
ﬂﬂ !
null
ﬂﬂ" &
)
ﬂﬂ& '
{
‡‡ 
currentDetails
·· 
.
·· 
	IsDeleted
·· (
=
··) *
true
··+ /
;
··/ 0
currentDetails
‚‚ 
.
‚‚ 
IsActive
‚‚ '
=
‚‚( )
false
‚‚* /
;
‚‚/ 0
currentDetails
„„ 
.
„„ 

ModifiedBy
„„ )
=
„„* +
	_userInfo
„„, 5
.
„„5 6
Name
„„6 :
;
„„: ;
currentDetails
‰‰ 
.
‰‰ 
ModifiedDate
‰‰ +
=
‰‰, -
DateTime
‰‰. 6
.
‰‰6 7
UtcNow
‰‰7 =
;
‰‰= >
await
ÂÂ +
_buildingInspectionRepository
ÂÂ 3
.
ÂÂ3 4
UpdateAsync
ÂÂ4 ?
(
ÂÂ? @
currentDetails
ÂÂ@ N
,
ÂÂN O
token
ÂÂP U
)
ÂÂU V
.
ÂÂV W
ConfigureAwait
ÂÂW e
(
ÂÂe f
false
ÂÂf k
)
ÂÂk l
;
ÂÂl m
var
ÁÁ 
basicDetails
ÁÁ  
=
ÁÁ! "
_mapper
ÁÁ# *
.
ÁÁ* +
Map
ÁÁ+ .
<
ÁÁ. /#
TblIdmDchgBuildingDet
ÁÁ/ D
>
ÁÁD E
(
ÁÁE F
BuildingDto
ÁÁF Q
)
ÁÁQ R
;
ÁÁR S
basicDetails
ËË 
.
ËË 

DcBdgRowId
ËË '
=
ËË( )
$num
ËË* +
;
ËË+ ,
basicDetails
ÈÈ 
.
ÈÈ 
IsActive
ÈÈ %
=
ÈÈ& '
true
ÈÈ( ,
;
ÈÈ, -
basicDetails
ÍÍ 
.
ÍÍ 
	IsDeleted
ÍÍ &
=
ÍÍ' (
false
ÍÍ) .
;
ÍÍ. /
basicDetails
ÎÎ 
.
ÎÎ 
	CreatedBy
ÎÎ &
=
ÎÎ' (
	_userInfo
ÎÎ) 2
.
ÎÎ2 3
Name
ÎÎ3 7
;
ÎÎ7 8
basicDetails
ÏÏ 
.
ÏÏ 
CreatedDate
ÏÏ (
=
ÏÏ) *
DateTime
ÏÏ+ 3
.
ÏÏ3 4
UtcNow
ÏÏ4 :
;
ÏÏ: ;
var
ÓÓ 
response
ÓÓ 
=
ÓÓ 
await
ÓÓ $+
_buildingInspectionRepository
ÓÓ% B
.
ÓÓB C
AddAsync
ÓÓC K
(
ÓÓK L
basicDetails
ÓÓL X
,
ÓÓX Y
token
ÓÓZ _
)
ÓÓ_ `
.
ÓÓ` a
ConfigureAwait
ÓÓa o
(
ÓÓo p
false
ÓÓp u
)
ÓÓu v
;
ÓÓv w
await
ÔÔ 
_work
ÔÔ 
.
ÔÔ 
CommitAsync
ÔÔ '
(
ÔÔ' (
token
ÔÔ( -
)
ÔÔ- .
.
ÔÔ. /
ConfigureAwait
ÔÔ/ =
(
ÔÔ= >
false
ÔÔ> C
)
ÔÔC D
;
ÔÔD E
if
 
(
 
response
 
!=
 
null
  $
)
$ %
{
ÒÒ 
return
ÚÚ 
true
ÚÚ 
;
ÚÚ  
}
ÛÛ 
else
ÙÙ 
{
ıı 
return
ˆˆ 
false
ˆˆ  
;
ˆˆ  !
}
˜˜ 
}
¯¯ 
return
˘˘ 
false
˘˘ 
;
˘˘ 
}
˙˙ 	
public
¸¸ 
async
¸¸ 
Task
¸¸ 
<
¸¸ 
bool
¸¸ 
>
¸¸ -
DeleteBuilidngInspectionDetails
¸¸  ?
(
¸¸? @#
IdmDchgBuildingDetDTO
¸¸@ U
BuildingDto
¸¸V a
,
¸¸a b
CancellationToken
¸¸c t
token
¸¸u z
)
¸¸z {
{
˝˝ 	
var
˛˛ 
basicDetails
˛˛ 
=
˛˛ 
_mapper
˛˛ &
.
˛˛& '
Map
˛˛' *
<
˛˛* +#
TblIdmDchgBuildingDet
˛˛+ @
>
˛˛@ A
(
˛˛A B
BuildingDto
˛˛B M
)
˛˛M N
;
˛˛N O
basicDetails
ˇˇ 
.
ˇˇ 
IsActive
ˇˇ !
=
ˇˇ" #
false
ˇˇ$ )
;
ˇˇ) *
basicDetails
ÄÄ 
.
ÄÄ 
	IsDeleted
ÄÄ "
=
ÄÄ# $
true
ÄÄ% )
;
ÄÄ) *
basicDetails
ÅÅ 
.
ÅÅ 
ModifiedDate
ÅÅ %
=
ÅÅ& '
DateTime
ÅÅ( 0
.
ÅÅ0 1
UtcNow
ÅÅ1 7
;
ÅÅ7 8
basicDetails
ÇÇ 
.
ÇÇ 

ModifiedBy
ÇÇ #
=
ÇÇ$ %
	_userInfo
ÇÇ& /
.
ÇÇ/ 0
Name
ÇÇ0 4
;
ÇÇ4 5
var
ÉÉ 
response
ÉÉ 
=
ÉÉ 
await
ÉÉ  +
_buildingInspectionRepository
ÉÉ! >
.
ÉÉ> ?
UpdateAsync
ÉÉ? J
(
ÉÉJ K
basicDetails
ÉÉK W
,
ÉÉW X
token
ÉÉY ^
)
ÉÉ^ _
.
ÉÉ_ `
ConfigureAwait
ÉÉ` n
(
ÉÉn o
false
ÉÉo t
)
ÉÉt u
;
ÉÉu v
await
ÑÑ 
_work
ÑÑ 
.
ÑÑ 
CommitAsync
ÑÑ #
(
ÑÑ# $
token
ÑÑ$ )
)
ÑÑ) *
.
ÑÑ* +
ConfigureAwait
ÑÑ+ 9
(
ÑÑ9 :
false
ÑÑ: ?
)
ÑÑ? @
;
ÑÑ@ A
if
ÖÖ 
(
ÖÖ 
response
ÖÖ 
!=
ÖÖ 
null
ÖÖ  
)
ÖÖ  !
{
ÜÜ 
return
áá 
true
áá 
;
áá 
}
àà 
else
ââ 
{
ää 
return
ãã 
false
ãã 
;
ãã 
}
åå 
}
çç 	
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
bool
ìì 
>
ìì 3
%CreateWorkingCapitalInspectionDetails
ìì  E
(
ììE F&
IdmDchgWorkingCapitalDTO
ììF ^
workingCapital
ìì_ m
,
ììm n 
CancellationTokenììo Ä
tokenììÅ Ü
)ììÜ á
{
îî 	
var
ïï 
basicDetails
ïï 
=
ïï 
_mapper
ïï &
.
ïï& '
Map
ïï' *
<
ïï* +&
TblIdmDchgWorkingCapital
ïï+ C
>
ïïC D
(
ïïD E
workingCapital
ïïE S
)
ïïS T
;
ïïT U
basicDetails
ññ 
.
ññ 
	CreatedBy
ññ "
=
ññ# $
	_userInfo
ññ% .
.
ññ. /
Name
ññ/ 3
;
ññ3 4
basicDetails
óó 
.
óó 
CreatedDate
óó $
=
óó% &
DateTime
óó' /
.
óó/ 0
UtcNow
óó0 6
;
óó6 7
var
öö 
response
öö 
=
öö 
await
öö  &
_WokingCapitalRepository
öö! 9
.
öö9 :
AddAsync
öö: B
(
ööB C
basicDetails
ööC O
,
ööO P
token
ööQ V
)
ööV W
.
ööW X
ConfigureAwait
ööX f
(
ööf g
false
öög l
)
ööl m
;
ööm n
await
õõ 
_work
õõ 
.
õõ 
CommitAsync
õõ #
(
õõ# $
token
õõ$ )
)
õõ) *
.
õõ* +
ConfigureAwait
õõ+ 9
(
õõ9 :
false
õõ: ?
)
õõ? @
;
õõ@ A
if
úú 
(
úú 
response
úú 
!=
úú 
null
úú  
)
úú  !
{
ùù 
return
ûû 
true
ûû 
;
ûû 
}
üü 
else
†† 
{
°° 
return
¢¢ 
false
¢¢ 
;
¢¢ 
}
££ 
}
§§ 	
public
™™ 
async
™™ 
Task
™™ 
<
™™ 
IEnumerable
™™ %
<
™™% &2
$IdmBuildingMaterialSiteInspectionDTO
™™& J
>
™™J K
>
™™K L7
)GetAllBuildingMaterialInspectionListAsync
™™M v
(
™™v w
long
™™w {
accountNumber™™| â
,™™â ä
long™™ã è
InspectionId™™ê ú
,™™ú ù!
CancellationToken™™û Ø
token™™∞ µ
)™™µ ∂
{
´´ 	
var
¨¨ ,
buildingMaterialInspectionList
¨¨ .
=
¨¨/ 0
await
¨¨1 6)
_buildingMaterialRepository
¨¨7 R
.
¨¨R S#
FindByExpressionAsync
¨¨S h
(
¨¨h i
x
¨¨i j
=>
¨¨k m
x
¨¨n o
.
¨¨o p
LoanAcc
¨¨p w
==
¨¨x z
accountNumber¨¨{ à
&&¨¨â ã
x¨¨å ç
.¨¨ç é
IrbmIno¨¨é ï
==¨¨ñ ò
InspectionId¨¨ô •
&&¨¨¶ ®
x¨¨© ™
.¨¨™ ´
IsActive¨¨´ ≥
==¨¨¥ ∂
true¨¨∑ ª
&&¨¨º æ
x¨¨ø ¿
.¨¨¿ ¡
	IsDeleted¨¨¡  
==¨¨À Õ
false¨¨Œ ”
,¨¨” ‘
token¨¨’ ⁄
)¨¨⁄ €
;¨¨€ ‹
return
≠≠ 
_mapper
≠≠ 
.
≠≠ 
Map
≠≠ 
<
≠≠ 
List
≠≠ #
<
≠≠# $2
$IdmBuildingMaterialSiteInspectionDTO
≠≠$ H
>
≠≠H I
>
≠≠I J
(
≠≠J K,
buildingMaterialInspectionList
≠≠K i
)
≠≠i j
;
≠≠j k
}
ÆÆ 	
public
∞∞ 
async
∞∞ 
Task
∞∞ 
<
∞∞ 
bool
∞∞ 
>
∞∞ 1
#UpdateBuildMatSiteInspectionDetails
∞∞  C
(
∞∞C D2
$IdmBuildingMaterialSiteInspectionDTO
∞∞D h"
bildMatInspectionDTO
∞∞i }
,
∞∞} ~ 
CancellationToken∞∞ ê
token∞∞ë ñ
)∞∞ñ ó
{
±± 	
var
≤≤ 
currentDetails
≤≤ 
=
≤≤  
await
≤≤! &)
_buildingMaterialRepository
≤≤' B
.
≤≤B C-
FirstOrDefaultByExpressionAsync
≤≤C b
(
≤≤b c
x
≤≤c d
=>
≤≤e g
x
≤≤h i
.
≤≤i j
	IrbmRowId
≤≤j s
==
≤≤t v#
bildMatInspectionDTO≤≤w ã
.≤≤ã å
	IrbmRowId≤≤å ï
,≤≤ï ñ
token≤≤ó ú
)≤≤ú ù
;≤≤ù û
if
≥≥ 
(
≥≥ 
currentDetails
≥≥ 
!=
≥≥ !
null
≥≥" &
)
≥≥& '
{
¥¥ 
currentDetails
µµ 
.
µµ 
	IsDeleted
µµ (
=
µµ) *
true
µµ+ /
;
µµ/ 0
currentDetails
∂∂ 
.
∂∂ 
IsActive
∂∂ '
=
∂∂( )
false
∂∂* /
;
∂∂/ 0
currentDetails
∑∑ 
.
∑∑ 

ModifiedBy
∑∑ )
=
∑∑* +
	_userInfo
∑∑, 5
.
∑∑5 6
Name
∑∑6 :
;
∑∑: ;
currentDetails
∏∏ 
.
∏∏ 
ModifiedDate
∏∏ +
=
∏∏, -
DateTime
∏∏. 6
.
∏∏6 7
UtcNow
∏∏7 =
;
∏∏= >
await
ππ )
_buildingMaterialRepository
ππ 1
.
ππ1 2
UpdateAsync
ππ2 =
(
ππ= >
currentDetails
ππ> L
,
ππL M
token
ππN S
)
ππS T
.
ππT U
ConfigureAwait
ππU c
(
ππc d
false
ππd i
)
ππi j
;
ππj k
var
ªª 
basicDetails
ªª  
=
ªª! "
_mapper
ªª# *
.
ªª* +
Map
ªª+ .
<
ªª. /
TblIdmIrBldgMat
ªª/ >
>
ªª> ?
(
ªª? @"
bildMatInspectionDTO
ªª@ T
)
ªªT U
;
ªªU V
basicDetails
ºº 
.
ºº 
	IrbmRowId
ºº &
=
ºº' (
$num
ºº) *
;
ºº* +
basicDetails
ΩΩ 
.
ΩΩ 
IsActive
ΩΩ %
=
ΩΩ& '
true
ΩΩ( ,
;
ΩΩ, -
basicDetails
ææ 
.
ææ 
	IsDeleted
ææ &
=
ææ' (
false
ææ) .
;
ææ. /
basicDetails
øø 
.
øø 
	CreatedBy
øø &
=
øø' (
	_userInfo
øø) 2
.
øø2 3
Name
øø3 7
;
øø7 8
basicDetails
¿¿ 
.
¿¿ 
CreatedDate
¿¿ (
=
¿¿) *
DateTime
¿¿+ 3
.
¿¿3 4
UtcNow
¿¿4 :
;
¿¿: ;
var
¬¬ 
response
¬¬ 
=
¬¬ 
await
¬¬ $)
_buildingMaterialRepository
¬¬% @
.
¬¬@ A
AddAsync
¬¬A I
(
¬¬I J
basicDetails
¬¬J V
,
¬¬V W
token
¬¬X ]
)
¬¬] ^
.
¬¬^ _
ConfigureAwait
¬¬_ m
(
¬¬m n
false
¬¬n s
)
¬¬s t
;
¬¬t u
await
√√ 
_work
√√ 
.
√√ 
CommitAsync
√√ '
(
√√' (
token
√√( -
)
√√- .
.
√√. /
ConfigureAwait
√√/ =
(
√√= >
false
√√> C
)
√√C D
;
√√D E
if
ƒƒ 
(
ƒƒ 
response
ƒƒ 
!=
ƒƒ 
null
ƒƒ  $
)
ƒƒ$ %
{
≈≈ 
return
∆∆ 
true
∆∆ 
;
∆∆  
}
«« 
else
»» 
{
…… 
return
   
false
    
;
    !
}
ÀÀ 
}
ÃÃ 
return
ÕÕ 
false
ÕÕ 
;
ÕÕ 
}
ŒŒ 	
public
–– 
async
–– 
Task
–– 
<
–– 
bool
–– 
>
–– 1
#CreateBuildMatSiteInspectionDetails
––  C
(
––C D2
$IdmBuildingMaterialSiteInspectionDTO
––D h"
bildMatInspectionDTO
––i }
,
––} ~ 
CancellationToken–– ê
token––ë ñ
)––ñ ó
{
—— 	
var
““ 
basicDetails
““ 
=
““ 
_mapper
““ &
.
““& '
Map
““' *
<
““* +
TblIdmIrBldgMat
““+ :
>
““: ;
(
““; <"
bildMatInspectionDTO
““< P
)
““P Q
;
““Q R
basicDetails
”” 
.
”” 
IsActive
”” !
=
””" #
true
””$ (
;
””( )
basicDetails
‘‘ 
.
‘‘ 
	IsDeleted
‘‘ "
=
‘‘# $
false
‘‘% *
;
‘‘* +
basicDetails
’’ 
.
’’ 
	CreatedBy
’’ "
=
’’# $
	_userInfo
’’% .
.
’’. /
Name
’’/ 3
;
’’3 4
basicDetails
÷÷ 
.
÷÷ 
CreatedDate
÷÷ $
=
÷÷% &
DateTime
÷÷' /
.
÷÷/ 0
UtcNow
÷÷0 6
;
÷÷6 7
var
ÿÿ 
response
ÿÿ 
=
ÿÿ 
await
ÿÿ  )
_buildingMaterialRepository
ÿÿ! <
.
ÿÿ< =
AddAsync
ÿÿ= E
(
ÿÿE F
basicDetails
ÿÿF R
,
ÿÿR S
token
ÿÿT Y
)
ÿÿY Z
.
ÿÿZ [
ConfigureAwait
ÿÿ[ i
(
ÿÿi j
false
ÿÿj o
)
ÿÿo p
;
ÿÿp q
await
ŸŸ 
_work
ŸŸ 
.
ŸŸ 
CommitAsync
ŸŸ #
(
ŸŸ# $
token
ŸŸ$ )
)
ŸŸ) *
.
ŸŸ* +
ConfigureAwait
ŸŸ+ 9
(
ŸŸ9 :
false
ŸŸ: ?
)
ŸŸ? @
;
ŸŸ@ A
if
⁄⁄ 
(
⁄⁄ 
response
⁄⁄ 
!=
⁄⁄ 
null
⁄⁄  
)
⁄⁄  !
{
€€ 
return
‹‹ 
true
‹‹ 
;
‹‹ 
}
›› 
else
ﬁﬁ 
{
ﬂﬂ 
return
‡‡ 
false
‡‡ 
;
‡‡ 
}
·· 
}
‚‚ 	
public
ÂÂ 
async
ÂÂ 
Task
ÂÂ 
<
ÂÂ 
bool
ÂÂ 
>
ÂÂ 1
#DeleteBuildMatSiteInspectionDetails
ÂÂ  C
(
ÂÂC D2
$IdmBuildingMaterialSiteInspectionDTO
ÂÂD h"
bildMatInspectionDTO
ÂÂi }
,
ÂÂ} ~ 
CancellationTokenÂÂ ê
tokenÂÂë ñ
)ÂÂñ ó
{
ÊÊ 	
var
ÁÁ 
basicDetails
ÁÁ 
=
ÁÁ 
_mapper
ÁÁ &
.
ÁÁ& '
Map
ÁÁ' *
<
ÁÁ* +
TblIdmIrBldgMat
ÁÁ+ :
>
ÁÁ: ;
(
ÁÁ; <"
bildMatInspectionDTO
ÁÁ< P
)
ÁÁP Q
;
ÁÁQ R
basicDetails
ËË 
.
ËË 
IsActive
ËË !
=
ËË" #
false
ËË$ )
;
ËË) *
basicDetails
ÈÈ 
.
ÈÈ 
	IsDeleted
ÈÈ "
=
ÈÈ# $
true
ÈÈ% )
;
ÈÈ) *
basicDetails
ÍÍ 
.
ÍÍ 
ModifiedDate
ÍÍ %
=
ÍÍ& '
DateTime
ÍÍ( 0
.
ÍÍ0 1
UtcNow
ÍÍ1 7
;
ÍÍ7 8
basicDetails
ÎÎ 
.
ÎÎ 

ModifiedBy
ÎÎ #
=
ÎÎ$ %
	_userInfo
ÎÎ& /
.
ÎÎ/ 0
Name
ÎÎ0 4
;
ÎÎ4 5
var
ÏÏ 
response
ÏÏ 
=
ÏÏ 
await
ÏÏ  )
_buildingMaterialRepository
ÏÏ! <
.
ÏÏ< =
UpdateAsync
ÏÏ= H
(
ÏÏH I
basicDetails
ÏÏI U
,
ÏÏU V
token
ÏÏW \
)
ÏÏ\ ]
.
ÏÏ] ^
ConfigureAwait
ÏÏ^ l
(
ÏÏl m
false
ÏÏm r
)
ÏÏr s
;
ÏÏs t
await
ÌÌ 
_work
ÌÌ 
.
ÌÌ 
CommitAsync
ÌÌ #
(
ÌÌ# $
token
ÌÌ$ )
)
ÌÌ) *
.
ÌÌ* +
ConfigureAwait
ÌÌ+ 9
(
ÌÌ9 :
false
ÌÌ: ?
)
ÌÌ? @
;
ÌÌ@ A
if
ÓÓ 
(
ÓÓ 
response
ÓÓ 
!=
ÓÓ 
null
ÓÓ  
)
ÓÓ  !
{
ÔÔ 
return
 
true
 
;
 
}
ÒÒ 
else
ÚÚ 
{
ÛÛ 
return
ÙÙ 
false
ÙÙ 
;
ÙÙ 
}
ıı 
}
ˆˆ 	
public
˝˝ 
async
˝˝ 
Task
˝˝ 
<
˝˝ 
IEnumerable
˝˝ %
<
˝˝% &'
IdmDchgImportMachineryDTO
˝˝& ?
>
˝˝? @
>
˝˝@ A'
GetAllImportMachineryList
˝˝B [
(
˝˝[ \
long
˝˝\ `
accountNumber
˝˝a n
,
˝˝n o
long
˝˝p t
InspectionId˝˝u Å
,˝˝Å Ç!
CancellationToken˝˝É î
token˝˝ï ö
)˝˝ö õ
{
˛˛ 	
List
ˇˇ 
<
ˇˇ '
TblIdmDchgImportMachinery
ˇˇ *
>
ˇˇ* +!
importMachineryList
ˇˇ, ?
;
ˇˇ? @
if
ÄÄ 
(
ÄÄ 
InspectionId
ÄÄ 
!=
ÄÄ 
$num
ÄÄ  
)
ÄÄ  !
{
ÅÅ !
importMachineryList
ÇÇ #
=
ÇÇ$ %
await
ÇÇ& +(
_importMachineryRepository
ÇÇ, F
.
ÇÇF G#
FindByExpressionAsync
ÇÇG \
(
ÇÇ\ ]
x
ÇÇ] ^
=>
ÇÇ_ a
x
ÇÇb c
.
ÇÇc d
LoanAcc
ÇÇd k
==
ÇÇl n
accountNumber
ÇÇo |
&&
ÇÇ} 
xÇÇÄ Å
.ÇÇÅ Ç
DimcInoÇÇÇ â
==ÇÇä å
InspectionIdÇÇç ô
&&ÇÇö ú
xÇÇù û
.ÇÇû ü
IsActiveÇÇü ß
==ÇÇ® ™
trueÇÇ´ Ø
&&ÇÇ∞ ≤
xÇÇ≥ ¥
.ÇÇ¥ µ
	IsDeletedÇÇµ æ
==ÇÇø ¡
falseÇÇ¬ «
,ÇÇ« »
tokenÇÇ… Œ
)ÇÇŒ œ
;ÇÇœ –
}
ÑÑ 
else
ÖÖ 
{
ÜÜ !
importMachineryList
áá #
=
áá$ %
await
áá& +(
_importMachineryRepository
áá, F
.
ááF G#
FindByExpressionAsync
ááG \
(
áá\ ]
x
áá] ^
=>
áá_ a
x
ááb c
.
áác d
LoanAcc
áád k
==
áál n
accountNumber
ááo |
&&
áá} 
xááÄ Å
.ááÅ Ç
IsActiveááÇ ä
==ááã ç
trueááé í
&&ááì ï
xááñ ó
.ááó ò
	IsDeletedááò °
==áá¢ §
falseáá• ™
,áá™ ´
tokenáá¨ ±
)áá± ≤
;áá≤ ≥
}
ââ 
return
ää 
_mapper
ää 
.
ää 
Map
ää 
<
ää 
List
ää #
<
ää# $'
IdmDchgImportMachineryDTO
ää$ =
>
ää= >
>
ää> ?
(
ää? @!
importMachineryList
ää@ S
)
ääS T
;
ääT U
}
ãã 	
public
çç 
async
çç 
Task
çç 
<
çç 
bool
çç 
>
çç *
CreateImportMachineryDetails
çç  <
(
çç< ='
IdmDchgImportMachineryDTO
çç= V
importMachinery
ççW f
,
ççf g
CancellationToken
ççh y
token
ççz 
)çç Ä
{
éé 	
var
èè 
basicDetails
èè 
=
èè 
_mapper
èè &
.
èè& '
Map
èè' *
<
èè* +'
TblIdmDchgImportMachinery
èè+ D
>
èèD E
(
èèE F
importMachinery
èèF U
)
èèU V
;
èèV W
basicDetails
êê 
.
êê 
	CreatedBy
êê "
=
êê# $
	_userInfo
êê% .
.
êê. /
Name
êê/ 3
;
êê3 4
basicDetails
ëë 
.
ëë 
CreatedDate
ëë $
=
ëë% &
DateTime
ëë' /
.
ëë/ 0
UtcNow
ëë0 6
;
ëë6 7
var
ìì "
machineryAcquisition
ìì $
=
ìì% &
new
ìì' *
TblIdmIrPlmc
ìì+ 7
(
ìì7 8
)
ìì8 9
;
ìì9 :"
machineryAcquisition
îî  
.
îî  !
LoanAcc
îî! (
=
îî) *
basicDetails
îî+ 7
.
îî7 8
LoanAcc
îî8 ?
;
îî? @"
machineryAcquisition
ïï  
.
ïï  !
LoanSub
ïï! (
=
ïï) *
basicDetails
ïï+ 7
.
ïï7 8
LoanSub
ïï8 ?
;
ïï? @"
machineryAcquisition
ññ  
.
ññ  !
OffcCd
ññ! '
=
ññ( )
basicDetails
ññ* 6
.
ññ6 7
OffcCd
ññ7 =
;
ññ= >"
machineryAcquisition
óó  
.
óó  !

IrPlmcItem
óó! +
=
óó, -
basicDetails
óó. :
.
óó: ;
	DimcItmNo
óó; D
;
óóD E"
machineryAcquisition
òò  
.
òò  !
	IrPlmcIno
òò! *
=
òò+ ,
basicDetails
òò- 9
.
òò9 :
DimcIno
òò: A
;
òòA B"
machineryAcquisition
ôô  
.
ôô  !
	IrPlmcAmt
ôô! *
=
ôô+ ,
basicDetails
ôô- 9
.
ôô9 :
DimcActualCost
ôô: H
;
ôôH I"
machineryAcquisition
öö  
.
öö  !
IrPlmcItemDets
öö! /
=
öö0 1
basicDetails
öö2 >
.
öö> ?
DimcDets
öö? G
;
ööG H"
machineryAcquisition
õõ  
.
õõ  !
IrPlmcSupplier
õõ! /
=
õõ0 1
basicDetails
õõ2 >
.
õõ> ?
DimcSup
õõ? F
;
õõF G"
machineryAcquisition
úú  
.
úú  !
CreatedDate
úú! ,
=
úú- .
DateTime
úú/ 7
.
úú7 8
UtcNow
úú8 >
;
úú> ?"
machineryAcquisition
ùù  
.
ùù  !
	CreatedBy
ùù! *
=
ùù+ ,
	_userInfo
ùù- 6
.
ùù6 7
Name
ùù7 ;
;
ùù; <"
machineryAcquisition
ûû  
.
ûû  !
IsActive
ûû! )
=
ûû* +
true
ûû, 0
;
ûû0 1"
machineryAcquisition
üü  
.
üü  !
	IsDeleted
üü! *
=
üü+ ,
false
üü- 2
;
üü2 3
var
°° 
response
°° 
=
°° 
await
°°  (
_importMachineryRepository
°°! ;
.
°°; <
AddAsync
°°< D
(
°°D E
basicDetails
°°E Q
,
°°Q R
token
°°S X
)
°°X Y
.
°°Y Z
ConfigureAwait
°°Z h
(
°°h i
false
°°i n
)
°°n o
;
°°o p
await
¢¢ "
_machineryRepository
¢¢ &
.
¢¢& '
AddAsync
¢¢' /
(
¢¢/ 0"
machineryAcquisition
¢¢0 D
,
¢¢D E
token
¢¢F K
)
¢¢K L
.
¢¢L M
ConfigureAwait
¢¢M [
(
¢¢[ \
false
¢¢\ a
)
¢¢a b
;
¢¢b c
await
§§ 
_work
§§ 
.
§§ 
CommitAsync
§§ #
(
§§# $
token
§§$ )
)
§§) *
.
§§* +
ConfigureAwait
§§+ 9
(
§§9 :
false
§§: ?
)
§§? @
;
§§@ A
if
•• 
(
•• 
response
•• 
!=
•• 
null
••  
)
••  !
{
¶¶ 
return
ßß 
true
ßß 
;
ßß 
}
®® 
else
©© 
{
™™ 
return
´´ 
false
´´ 
;
´´ 
}
¨¨ 
}
≠≠ 	
public
ÆÆ 
async
ÆÆ 
Task
ÆÆ 
<
ÆÆ 
bool
ÆÆ 
>
ÆÆ *
UpdateImportMachineryDetails
ÆÆ  <
(
ÆÆ< ='
IdmDchgImportMachineryDTO
ÆÆ= V
importMachinery
ÆÆW f
,
ÆÆf g
CancellationToken
ÆÆh y
token
ÆÆz 
)ÆÆ Ä
{
ØØ 	
var
∞∞ 
currentDetails
∞∞ 
=
∞∞  
await
∞∞! &(
_importMachineryRepository
∞∞' A
.
∞∞A B-
FirstOrDefaultByExpressionAsync
∞∞B a
(
∞∞a b
x
∞∞b c
=>
∞∞d f
x
∞∞g h
.
∞∞h i
	DimcRowId
∞∞i r
==
∞∞s u
importMachinery∞∞v Ö
.∞∞Ö Ü
	DimcRowId∞∞Ü è
,∞∞è ê
token∞∞ë ñ
)∞∞ñ ó
;∞∞ó ò
if
±± 
(
±± 
currentDetails
±± 
!=
±± !
null
±±" &
)
±±& '
{
≤≤ 
currentDetails
≥≥ 
.
≥≥ 
	IsDeleted
≥≥ (
=
≥≥) *
true
≥≥+ /
;
≥≥/ 0
currentDetails
¥¥ 
.
¥¥ 
IsActive
¥¥ '
=
¥¥( )
false
¥¥* /
;
¥¥/ 0
currentDetails
µµ 
.
µµ 

ModifiedBy
µµ )
=
µµ* +
	_userInfo
µµ, 5
.
µµ5 6
Name
µµ6 :
;
µµ: ;
currentDetails
∂∂ 
.
∂∂ 
ModifiedDate
∂∂ +
=
∂∂, -
DateTime
∂∂. 6
.
∂∂6 7
UtcNow
∂∂7 =
;
∂∂= >
await
∑∑ (
_importMachineryRepository
∑∑ 0
.
∑∑0 1
UpdateAsync
∑∑1 <
(
∑∑< =
currentDetails
∑∑= K
,
∑∑K L
token
∑∑M R
)
∑∑R S
.
∑∑S T
ConfigureAwait
∑∑T b
(
∑∑b c
false
∑∑c h
)
∑∑h i
;
∑∑i j
var
ππ 
basicDetails
ππ  
=
ππ! "
_mapper
ππ# *
.
ππ* +
Map
ππ+ .
<
ππ. /'
TblIdmDchgImportMachinery
ππ/ H
>
ππH I
(
ππI J
importMachinery
ππJ Y
)
ππY Z
;
ππZ [
basicDetails
∫∫ 
.
∫∫ 
	DimcRowId
∫∫ &
=
∫∫' (
$num
∫∫) *
;
∫∫* +
basicDetails
ªª 
.
ªª 
IsActive
ªª %
=
ªª& '
true
ªª( ,
;
ªª, -
basicDetails
ºº 
.
ºº 
	IsDeleted
ºº &
=
ºº' (
false
ºº) .
;
ºº. /
basicDetails
ΩΩ 
.
ΩΩ 
	CreatedBy
ΩΩ &
=
ΩΩ' (
	_userInfo
ΩΩ) 2
.
ΩΩ2 3
Name
ΩΩ3 7
;
ΩΩ7 8
basicDetails
ææ 
.
ææ 
CreatedDate
ææ (
=
ææ) *
DateTime
ææ+ 3
.
ææ3 4
UtcNow
ææ4 :
;
ææ: ;
var
¿¿ 
response
¿¿ 
=
¿¿ 
await
¿¿ $(
_importMachineryRepository
¿¿% ?
.
¿¿? @
AddAsync
¿¿@ H
(
¿¿H I
basicDetails
¿¿I U
,
¿¿U V
token
¿¿W \
)
¿¿\ ]
.
¿¿] ^
ConfigureAwait
¿¿^ l
(
¿¿l m
false
¿¿m r
)
¿¿r s
;
¿¿s t
await
¡¡ 
_work
¡¡ 
.
¡¡ 
CommitAsync
¡¡ '
(
¡¡' (
token
¡¡( -
)
¡¡- .
.
¡¡. /
ConfigureAwait
¡¡/ =
(
¡¡= >
false
¡¡> C
)
¡¡C D
;
¡¡D E
if
¬¬ 
(
¬¬ 
response
¬¬ 
!=
¬¬ 
null
¬¬  $
)
¬¬$ %
{
√√ 
return
ƒƒ 
true
ƒƒ 
;
ƒƒ  
}
≈≈ 
else
∆∆ 
{
«« 
return
»» 
false
»»  
;
»»  !
}
…… 
}
   
return
ÀÀ 
false
ÀÀ 
;
ÀÀ 
}
ÕÕ 	
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
bool
œœ 
>
œœ *
DeleteImportMachineryDetails
œœ  <
(
œœ< ='
IdmDchgImportMachineryDTO
œœ= V
importMachinery
œœW f
,
œœf g
CancellationToken
œœh y
token
œœz 
)œœ Ä
{
–– 	
var
—— 
basicDetails
—— 
=
—— 
_mapper
—— &
.
——& '
Map
——' *
<
——* +'
TblIdmDchgImportMachinery
——+ D
>
——D E
(
——E F
importMachinery
——F U
)
——U V
;
——V W
basicDetails
““ 
.
““ 
IsActive
““ !
=
““" #
false
““$ )
;
““) *
basicDetails
”” 
.
”” 
	IsDeleted
”” "
=
””# $
true
””% )
;
””) *
basicDetails
‘‘ 
.
‘‘ 
ModifiedDate
‘‘ %
=
‘‘& '
DateTime
‘‘( 0
.
‘‘0 1
UtcNow
‘‘1 7
;
‘‘7 8
basicDetails
’’ 
.
’’ 

ModifiedBy
’’ #
=
’’$ %
	_userInfo
’’& /
.
’’/ 0
Name
’’0 4
;
’’4 5
var
÷÷ 
response
÷÷ 
=
÷÷ 
await
÷÷  (
_importMachineryRepository
÷÷! ;
.
÷÷; <
UpdateAsync
÷÷< G
(
÷÷G H
basicDetails
÷÷H T
,
÷÷T U
token
÷÷V [
)
÷÷[ \
.
÷÷\ ]
ConfigureAwait
÷÷] k
(
÷÷k l
false
÷÷l q
)
÷÷q r
;
÷÷r s
await
◊◊ 
_work
◊◊ 
.
◊◊ 
CommitAsync
◊◊ #
(
◊◊# $
token
◊◊$ )
)
◊◊) *
.
◊◊* +
ConfigureAwait
◊◊+ 9
(
◊◊9 :
false
◊◊: ?
)
◊◊? @
;
◊◊@ A
if
ÿÿ 
(
ÿÿ 
response
ÿÿ 
!=
ÿÿ 
null
ÿÿ  
)
ÿÿ  !
{
ŸŸ 
return
⁄⁄ 
true
⁄⁄ 
;
⁄⁄ 
}
€€ 
else
‹‹ 
{
›› 
return
ﬁﬁ 
false
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 
}
‡‡ 	
public
ÊÊ 
async
ÊÊ 
Task
ÊÊ 
<
ÊÊ 
IEnumerable
ÊÊ %
<
ÊÊ% &
IdmDChgFurnDTO
ÊÊ& 4
>
ÊÊ4 5
>
ÊÊ5 6+
GetAllFurnitureInspectionList
ÊÊ7 T
(
ÊÊT U
long
ÊÊU Y
accountNumber
ÊÊZ g
,
ÊÊg h
long
ÊÊi m
InspectionId
ÊÊn z
,
ÊÊz { 
CancellationTokenÊÊ| ç
tokenÊÊé ì
)ÊÊì î
{
ÁÁ 	
List
ËË 
<
ËË 
TblIdmDChgFurn
ËË 
>
ËË  
furnList
ËË! )
;
ËË) *
if
ÈÈ 
(
ÈÈ 
InspectionId
ÈÈ 
!=
ÈÈ 
$num
ÈÈ  !
)
ÈÈ! "
{
ÍÍ 
furnList
ÎÎ 
=
ÎÎ 
await
ÎÎ !2
$_furnitureInspectionDetailRepository
ÎÎ" F
.
ÎÎF G#
FindByExpressionAsync
ÎÎG \
(
ÎÎ\ ]
x
ÎÎ] ^
=>
ÎÎ_ a
x
ÎÎb c
.
ÎÎc d
LoanAcc
ÎÎd k
==
ÎÎl n
accountNumber
ÎÎo |
&&
ÎÎ} 
xÎÎÄ Å
.ÎÎÅ Ç
FurnInoÎÎÇ â
==ÎÎä å
InspectionIdÎÎç ô
&&ÎÎö ú
xÎÎù û
.ÎÎû ü
IsActiveÎÎü ß
==ÎÎ® ™
trueÎÎ´ Ø
&&ÎÎ∞ ≤
xÎÎ≥ ¥
.ÎÎ¥ µ
	IsDeletedÎÎµ æ
==ÎÎø ¡
falseÎÎ¬ «
,ÎÎ« »
tokenÎÎ… Œ
)ÎÎŒ œ
;ÎÎœ –
}
ÌÌ 
else
ÓÓ 
{
ÔÔ 
furnList
 
=
 
await
  2
$_furnitureInspectionDetailRepository
! E
.
E F#
FindByExpressionAsync
F [
(
[ \
x
\ ]
=>
^ `
x
a b
.
b c
LoanAcc
c j
==
k m
accountNumber
n {
&&
| ~
x Ä
.Ä Å
IsActiveÅ â
==ä å
trueç ë
&&í î
xï ñ
.ñ ó
	IsDeletedó †
==° £
false§ ©
,© ™
token´ ∞
)∞ ±
;± ≤
}
ÚÚ 
return
ÛÛ 
_mapper
ÛÛ 
.
ÛÛ 
Map
ÛÛ 
<
ÛÛ 
List
ÛÛ #
<
ÛÛ# $
IdmDChgFurnDTO
ÛÛ$ 2
>
ÛÛ2 3
>
ÛÛ3 4
(
ÛÛ4 5
furnList
ÛÛ5 =
)
ÛÛ= >
;
ÛÛ> ?
}
ÙÙ 	
public
ˆˆ 
async
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
bool
ˆˆ 
>
ˆˆ .
 CreateFurnitureInspectionDetails
ˆˆ  @
(
ˆˆ@ A
IdmDChgFurnDTO
ˆˆA O$
furnitureInspectionDTO
ˆˆP f
,
ˆˆf g
CancellationToken
ˆˆh y
token
ˆˆz 
)ˆˆ Ä
{
˜˜ 	
var
˘˘ 
basicDetails
˘˘ 
=
˘˘ 
_mapper
˘˘ &
.
˘˘& '
Map
˘˘' *
<
˘˘* +
TblIdmDChgFurn
˘˘+ 9
>
˘˘9 :
(
˘˘: ;$
furnitureInspectionDTO
˘˘; Q
)
˘˘Q R
;
˘˘R S
basicDetails
˙˙ 
.
˙˙ 
IsActive
˙˙ !
=
˙˙" #
true
˙˙$ (
;
˙˙( )
basicDetails
˚˚ 
.
˚˚ 
	IsDeleted
˚˚ "
=
˚˚# $
false
˚˚% *
;
˚˚* +
basicDetails
¸¸ 
.
¸¸ 
CreateBy
¸¸ !
=
¸¸" #
	_userInfo
¸¸$ -
.
¸¸- .
Name
¸¸. 2
;
¸¸2 3
basicDetails
˝˝ 
.
˝˝ 
CreatedDate
˝˝ $
=
˝˝% &
DateTime
˝˝' /
.
˝˝/ 0
UtcNow
˝˝0 6
;
˝˝6 7
var
ˇˇ "
furnitureAcquisition
ˇˇ $
=
ˇˇ% &
new
ˇˇ' *
TblIdmIrFurn
ˇˇ+ 7
(
ˇˇ7 8
)
ˇˇ8 9
;
ˇˇ9 :"
furnitureAcquisition
ÄÄ  
.
ÄÄ  !
LoanAcc
ÄÄ! (
=
ÄÄ) *
basicDetails
ÄÄ+ 7
.
ÄÄ7 8
LoanAcc
ÄÄ8 ?
;
ÄÄ? @"
furnitureAcquisition
ÅÅ  
.
ÅÅ  !
LoanSub
ÅÅ! (
=
ÅÅ) *
basicDetails
ÅÅ+ 7
.
ÅÅ7 8
LoanSub
ÅÅ8 ?
;
ÅÅ? @"
furnitureAcquisition
ÇÇ  
.
ÇÇ  !
OffcCd
ÇÇ! '
=
ÇÇ( )
basicDetails
ÇÇ* 6
.
ÇÇ6 7
OffcCd
ÇÇ7 =
;
ÇÇ= >"
furnitureAcquisition
ÉÉ  
.
ÉÉ  !
IrfItem
ÉÉ! (
=
ÉÉ) *
basicDetails
ÉÉ+ 7
.
ÉÉ7 8

FurnItemNo
ÉÉ8 B
;
ÉÉB C"
furnitureAcquisition
ÑÑ  
.
ÑÑ  !
IrfIno
ÑÑ! '
=
ÑÑ( )
basicDetails
ÑÑ* 6
.
ÑÑ6 7
FurnIno
ÑÑ7 >
;
ÑÑ> ?"
furnitureAcquisition
ÖÖ  
.
ÖÖ  !
IrfSupplier
ÖÖ! ,
=
ÖÖ- .
basicDetails
ÖÖ/ ;
.
ÖÖ; <
FurnSupp
ÖÖ< D
;
ÖÖD E"
furnitureAcquisition
ÜÜ  
.
ÜÜ  !
IrfItemDets
ÜÜ! ,
=
ÜÜ- .
basicDetails
ÜÜ/ ;
.
ÜÜ; <
FurnDetails
ÜÜ< G
;
ÜÜG H"
furnitureAcquisition
áá  
.
áá  !
IrfAmt
áá! '
=
áá( )
basicDetails
áá* 6
.
áá6 7
FurnActualCost
áá7 E
;
ááE F"
furnitureAcquisition
àà  
.
àà  !
	IsDeleted
àà! *
=
àà+ ,
false
àà- 2
;
àà2 3"
furnitureAcquisition
ââ  
.
ââ  !
IsActive
ââ! )
=
ââ* +
true
ââ, 0
;
ââ0 1"
furnitureAcquisition
ää  
.
ää  !
CreateBy
ää! )
=
ää* +
	_userInfo
ää, 5
.
ää5 6
Name
ää6 :
;
ää: ;"
furnitureAcquisition
ãã  
.
ãã  !
CreatedDate
ãã! ,
=
ãã- .
DateTime
ãã/ 7
.
ãã7 8
UtcNow
ãã8 >
;
ãã> ?
var
éé 
response
éé 
=
éé 
await
éé  2
$_furnitureInspectionDetailRepository
éé! E
.
ééE F
AddAsync
ééF N
(
ééN O
basicDetails
ééO [
,
éé[ \
token
éé] b
)
ééb c
.
ééc d
ConfigureAwait
ééd r
(
éér s
false
éés x
)
ééx y
;
ééy z
await
èè ,
_furnitureAcuisitionRepository
èè 0
.
èè0 1
AddAsync
èè1 9
(
èè9 :"
furnitureAcquisition
èè: N
,
èèN O
token
èèP U
)
èèU V
.
èèV W
ConfigureAwait
èèW e
(
èèe f
false
èèf k
)
èèk l
;
èèl m
await
ëë 
_work
ëë 
.
ëë 
CommitAsync
ëë #
(
ëë# $
token
ëë$ )
)
ëë) *
.
ëë* +
ConfigureAwait
ëë+ 9
(
ëë9 :
false
ëë: ?
)
ëë? @
;
ëë@ A
if
íí 
(
íí 
response
íí 
!=
íí 
null
íí  
)
íí  !
{
ìì 
return
îî 
true
îî 
;
îî 
}
ïï 
else
ññ 
{
óó 
return
òò 
false
òò 
;
òò 
}
ôô 
}
öö 	
public
úú 
async
úú 
Task
úú 
<
úú 
bool
úú 
>
úú .
 UpdateFurnitureInspectionDetails
úú  @
(
úú@ A
IdmDChgFurnDTO
úúA O$
furnitureInspectionDTO
úúP f
,
úúf g
CancellationToken
úúh y
token
úúz 
)úú Ä
{
ùù 	
var
ûû 
currentDetails
ûû 
=
ûû  
await
ûû! &2
$_furnitureInspectionDetailRepository
ûû' K
.
ûûK L-
FirstOrDefaultByExpressionAsync
ûûL k
(
ûûk l
x
ûûl m
=>
ûûn p
x
ûûq r
.
ûûr s
Id
ûûs u
==
ûûv x%
furnitureInspectionDTOûûy è
.ûûè ê
Idûûê í
,ûûí ì
tokenûûî ô
)ûûô ö
;ûûö õ
if
üü 
(
üü 
currentDetails
üü 
!=
üü !
null
üü" &
)
üü& '
{
†† 
currentDetails
°° 
.
°° 
	IsDeleted
°° (
=
°°) *
true
°°+ /
;
°°/ 0
currentDetails
¢¢ 
.
¢¢ 
IsActive
¢¢ '
=
¢¢( )
false
¢¢* /
;
¢¢/ 0
currentDetails
££ 
.
££ 

ModifiedBy
££ )
=
££* +
	_userInfo
££, 5
.
££5 6
Name
££6 :
;
££: ;
currentDetails
§§ 
.
§§ 
ModifiedDate
§§ +
=
§§, -
DateTime
§§. 6
.
§§6 7
UtcNow
§§7 =
;
§§= >
await
•• 2
$_furnitureInspectionDetailRepository
•• :
.
••: ;
UpdateAsync
••; F
(
••F G
currentDetails
••G U
,
••U V
token
••W \
)
••\ ]
.
••] ^
ConfigureAwait
••^ l
(
••l m
false
••m r
)
••r s
;
••s t
var
ßß 
basicDetails
ßß  
=
ßß! "
_mapper
ßß# *
.
ßß* +
Map
ßß+ .
<
ßß. /
TblIdmDChgFurn
ßß/ =
>
ßß= >
(
ßß> ?$
furnitureInspectionDTO
ßß? U
)
ßßU V
;
ßßV W
basicDetails
®® 
.
®® 
Id
®® 
=
®®  !
$num
®®" #
;
®®# $
basicDetails
©© 
.
©© 
IsActive
©© %
=
©©& '
true
©©( ,
;
©©, -
basicDetails
™™ 
.
™™ 
	IsDeleted
™™ &
=
™™' (
false
™™) .
;
™™. /
basicDetails
´´ 
.
´´ 
CreateBy
´´ %
=
´´& '
	_userInfo
´´( 1
.
´´1 2
Name
´´2 6
;
´´6 7
basicDetails
¨¨ 
.
¨¨ 
CreatedDate
¨¨ (
=
¨¨) *
DateTime
¨¨+ 3
.
¨¨3 4
UtcNow
¨¨4 :
;
¨¨: ;
var
ÆÆ 
response
ÆÆ 
=
ÆÆ 
await
ÆÆ $2
$_furnitureInspectionDetailRepository
ÆÆ% I
.
ÆÆI J
AddAsync
ÆÆJ R
(
ÆÆR S
basicDetails
ÆÆS _
,
ÆÆ_ `
token
ÆÆa f
)
ÆÆf g
.
ÆÆg h
ConfigureAwait
ÆÆh v
(
ÆÆv w
false
ÆÆw |
)
ÆÆ| }
;
ÆÆ} ~
await
ØØ 
_work
ØØ 
.
ØØ 
CommitAsync
ØØ '
(
ØØ' (
token
ØØ( -
)
ØØ- .
.
ØØ. /
ConfigureAwait
ØØ/ =
(
ØØ= >
false
ØØ> C
)
ØØC D
;
ØØD E
if
∞∞ 
(
∞∞ 
response
∞∞ 
!=
∞∞ 
null
∞∞  $
)
∞∞$ %
{
±± 
return
≤≤ 
true
≤≤ 
;
≤≤  
}
≥≥ 
else
¥¥ 
{
µµ 
return
∂∂ 
false
∂∂  
;
∂∂  !
}
∑∑ 
}
∏∏ 
return
ππ 
false
ππ 
;
ππ 
}
∫∫ 	
public
ºº 
async
ºº 
Task
ºº 
<
ºº 
bool
ºº 
>
ºº .
 DeleteFurnitureInspectionDetails
ºº  @
(
ºº@ A
IdmDChgFurnDTO
ººA O$
furnitureInspectionDTO
ººP f
,
ººf g
CancellationToken
ººh y
token
ººz 
)ºº Ä
{
ΩΩ 	
var
ææ 
basicDetails
ææ 
=
ææ 
_mapper
ææ &
.
ææ& '
Map
ææ' *
<
ææ* +
TblIdmDChgFurn
ææ+ 9
>
ææ9 :
(
ææ: ;$
furnitureInspectionDTO
ææ; Q
)
ææQ R
;
ææR S
basicDetails
øø 
.
øø 
IsActive
øø !
=
øø" #
false
øø$ )
;
øø) *
basicDetails
¿¿ 
.
¿¿ 
	IsDeleted
¿¿ "
=
¿¿# $
true
¿¿% )
;
¿¿) *
basicDetails
¡¡ 
.
¡¡ 
ModifiedDate
¡¡ %
=
¡¡& '
DateTime
¡¡( 0
.
¡¡0 1
UtcNow
¡¡1 7
;
¡¡7 8
basicDetails
¬¬ 
.
¬¬ 

ModifiedBy
¬¬ #
=
¬¬$ %
	_userInfo
¬¬& /
.
¬¬/ 0
Name
¬¬0 4
;
¬¬4 5
var
√√ 
response
√√ 
=
√√ 
await
√√  2
$_furnitureInspectionDetailRepository
√√! E
.
√√E F
UpdateAsync
√√F Q
(
√√Q R
basicDetails
√√R ^
,
√√^ _
token
√√` e
)
√√e f
.
√√f g
ConfigureAwait
√√g u
(
√√u v
false
√√v {
)
√√{ |
;
√√| }
await
ƒƒ 
_work
ƒƒ 
.
ƒƒ 
CommitAsync
ƒƒ #
(
ƒƒ# $
token
ƒƒ$ )
)
ƒƒ) *
.
ƒƒ* +
ConfigureAwait
ƒƒ+ 9
(
ƒƒ9 :
false
ƒƒ: ?
)
ƒƒ? @
;
ƒƒ@ A
if
≈≈ 
(
≈≈ 
response
≈≈ 
!=
≈≈ 
null
≈≈  
)
≈≈  !
{
∆∆ 
return
«« 
true
«« 
;
«« 
}
»» 
else
…… 
{
   
return
ÀÀ 
false
ÀÀ 
;
ÀÀ 
}
ÃÃ 
}
ÕÕ 	
public
”” 
async
”” 
Task
”” 
<
”” 
IEnumerable
”” %
<
””% &,
IdmDchgIndigenousInspectionDTO
””& D
>
””D E
>
””E F:
,GetAllIndigenousMachineryInspectionListAsync
””G s
(
””s t
long
””t x
accountNumber””y Ü
,””Ü á
int””à ã
InspectionId””å ò
,””ò ô!
CancellationToken””ö ´
token””¨ ±
)””± ≤
{
‘‘ 	
List
’’ 
<
’’ .
 TblIdmDchgIndigenousMachineryDet
’’ 1
>
’’1 2/
!indigenousMachineryInspectionList
’’3 T
;
’’T U
if
÷÷ 
(
÷÷ 
InspectionId
÷÷ 
!=
÷÷ 
$num
÷÷  
)
÷÷  !
{
◊◊ /
!indigenousMachineryInspectionList
ÿÿ 1
=
ÿÿ2 3
await
ÿÿ4 9,
_indigenousMachineryRepository
ÿÿ: X
.
ÿÿX Y#
FindByExpressionAsync
ÿÿY n
(
ÿÿn o
x
ÿÿo p
=>
ÿÿq s
x
ÿÿt u
.
ÿÿu v
LoanAcc
ÿÿv }
==ÿÿ~ Ä
accountNumberÿÿÅ é
&&ÿÿè ë
xÿÿí ì
.ÿÿì î
Inoÿÿî ó
==ÿÿò ö
InspectionIdÿÿõ ß
&&ÿÿ® ™
xÿÿ´ ¨
.ÿÿ¨ ≠
IsActiveÿÿ≠ µ
==ÿÿ∂ ∏
trueÿÿπ Ω
&&ÿÿæ ¿
xÿÿ¡ ¬
.ÿÿ¬ √
	IsDeletedÿÿ√ Ã
==ÿÿÕ œ
falseÿÿ– ’
,ÿÿ’ ÷
tokenÿÿ◊ ‹
)ÿÿ‹ ›
;ÿÿ› ﬁ
}
⁄⁄ 
else
€€ 
{
‹‹ /
!indigenousMachineryInspectionList
›› 1
=
››2 3
await
››4 9,
_indigenousMachineryRepository
››: X
.
››X Y#
FindByExpressionAsync
››Y n
(
››n o
x
››o p
=>
››q s
x
››t u
.
››u v
LoanAcc
››v }
==››~ Ä
accountNumber››Å é
&&››è ë
x››í ì
.››ì î
IsActive››î ú
==››ù ü
true››† §
&&››• ß
x››® ©
.››© ™
	IsDeleted››™ ≥
==››¥ ∂
false››∑ º
,››º Ω
token››æ √
)››√ ƒ
;››ƒ ≈
}
ﬂﬂ 
return
‡‡ 
_mapper
‡‡ 
.
‡‡ 
Map
‡‡ 
<
‡‡ 
List
‡‡ #
<
‡‡# $,
IdmDchgIndigenousInspectionDTO
‡‡$ B
>
‡‡B C
>
‡‡C D
(
‡‡D E/
!indigenousMachineryInspectionList
‡‡E f
)
‡‡f g
;
‡‡g h
}
·· 	
public
‚‚ 
async
‚‚ 
Task
‚‚ 
<
‚‚ 
IEnumerable
‚‚ %
<
‚‚% &#
TblMachineryStatusDto
‚‚& ;
>
‚‚; <
>
‚‚< ='
GetAllMachineryStatusList
‚‚> W
(
‚‚W X
CancellationToken
‚‚X i
token
‚‚j o
)
‚‚o p
{
„„ 	
var
‰‰ 
machinaryStatus
‰‰ 
=
‰‰  !
await
‰‰" '
_machinaryStatus
‰‰( 8
.
‰‰8 9#
FindByExpressionAsync
‰‰9 N
(
‰‰N O
x
‰‰O P
=>
‰‰Q S
x
‰‰T U
.
‰‰U V
	MacStatus
‰‰V _
!=
‰‰` b
null
‰‰c g
,
‰‰g h
token
‰‰i n
)
‰‰n o
;
‰‰o p
return
ÂÂ 
_mapper
ÂÂ 
.
ÂÂ 
Map
ÂÂ 
<
ÂÂ 
List
ÂÂ #
<
ÂÂ# $#
TblMachineryStatusDto
ÂÂ$ 9
>
ÂÂ9 :
>
ÂÂ: ;
(
ÂÂ; <
machinaryStatus
ÂÂ< K
)
ÂÂK L
;
ÂÂL M
}
ÊÊ 	
public
ËË 
async
ËË 
Task
ËË 
<
ËË 
IEnumerable
ËË %
<
ËË% &
TblProcureMastDto
ËË& 7
>
ËË7 8
>
ËË8 9
GetAllProcureList
ËË: K
(
ËËK L
CancellationToken
ËËL ]
token
ËË^ c
)
ËËc d
{
ÈÈ 	
var
ÍÍ 
procureStatus
ÍÍ 
=
ÍÍ 
await
ÍÍ  %
_procureStatus
ÍÍ& 4
.
ÍÍ4 5#
FindByExpressionAsync
ÍÍ5 J
(
ÍÍJ K
x
ÍÍK L
=>
ÍÍM O
x
ÍÍP Q
.
ÍÍQ R
	ProcureId
ÍÍR [
!=
ÍÍ\ ^
null
ÍÍ_ c
,
ÍÍc d
token
ÍÍe j
)
ÍÍj k
;
ÍÍk l
return
ÎÎ 
_mapper
ÎÎ 
.
ÎÎ 
Map
ÎÎ 
<
ÎÎ 
List
ÎÎ #
<
ÎÎ# $
TblProcureMastDto
ÎÎ$ 5
>
ÎÎ5 6
>
ÎÎ6 7
(
ÎÎ7 8
procureStatus
ÎÎ8 E
)
ÎÎE F
;
ÎÎF G
}
ÏÏ 	
public
 
async
 
Task
 
<
 
bool
 
>
 8
*DeleteIndigenousMachineryInspectionDetails
  J
(
J K,
IdmDchgIndigenousInspectionDTO
K i"
bildMatInspectionDTO
j ~
,
~ !
CancellationTokenÄ ë
tokení ó
)ó ò
{
ÒÒ 	
var
ÚÚ 
basicDetails
ÚÚ 
=
ÚÚ 
_mapper
ÚÚ &
.
ÚÚ& '
Map
ÚÚ' *
<
ÚÚ* +.
 TblIdmDchgIndigenousMachineryDet
ÚÚ+ K
>
ÚÚK L
(
ÚÚL M"
bildMatInspectionDTO
ÚÚM a
)
ÚÚa b
;
ÚÚb c
basicDetails
ÛÛ 
.
ÛÛ 
IsActive
ÛÛ !
=
ÛÛ" #
false
ÛÛ$ )
;
ÛÛ) *
basicDetails
ÙÙ 
.
ÙÙ 
	IsDeleted
ÙÙ "
=
ÙÙ# $
true
ÙÙ% )
;
ÙÙ) *
basicDetails
ıı 
.
ıı 
ModifiedDate
ıı %
=
ıı& '
DateTime
ıı( 0
.
ıı0 1
UtcNow
ıı1 7
;
ıı7 8
basicDetails
ˆˆ 
.
ˆˆ 

ModifiedBy
ˆˆ #
=
ˆˆ$ %
	_userInfo
ˆˆ& /
.
ˆˆ/ 0
Name
ˆˆ0 4
;
ˆˆ4 5
var
˜˜ 
response
˜˜ 
=
˜˜ 
await
˜˜  ,
_indigenousMachineryRepository
˜˜! ?
.
˜˜? @
UpdateAsync
˜˜@ K
(
˜˜K L
basicDetails
˜˜L X
,
˜˜X Y
token
˜˜Z _
)
˜˜_ `
.
˜˜` a
ConfigureAwait
˜˜a o
(
˜˜o p
false
˜˜p u
)
˜˜u v
;
˜˜v w
await
¯¯ 
_work
¯¯ 
.
¯¯ 
CommitAsync
¯¯ #
(
¯¯# $
token
¯¯$ )
)
¯¯) *
.
¯¯* +
ConfigureAwait
¯¯+ 9
(
¯¯9 :
false
¯¯: ?
)
¯¯? @
;
¯¯@ A
if
˘˘ 
(
˘˘ 
response
˘˘ 
!=
˘˘ 
null
˘˘  
)
˘˘  !
{
˙˙ 
return
˚˚ 
true
˚˚ 
;
˚˚ 
}
¸¸ 
else
˝˝ 
{
˛˛ 
return
ˇˇ 
false
ˇˇ 
;
ˇˇ 
}
ÄÄ 
}
ÅÅ 	
public
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
bool
ÉÉ 
>
ÉÉ 8
*UpdateIndigenousMachineryInspectionDetails
ÉÉ  J
(
ÉÉJ K,
IdmDchgIndigenousInspectionDTO
ÉÉK i"
bildMatInspectionDTO
ÉÉj ~
,
ÉÉ~ !
CancellationTokenÉÉÄ ë
tokenÉÉí ó
)ÉÉó ò
{
ÑÑ 	
var
ÖÖ 
currentDetails
ÖÖ 
=
ÖÖ  
await
ÖÖ! &,
_indigenousMachineryRepository
ÖÖ' E
.
ÖÖE F-
FirstOrDefaultByExpressionAsync
ÖÖF e
(
ÖÖe f
x
ÖÖf g
=>
ÖÖh j
x
ÖÖk l
.
ÖÖl m
Id
ÖÖm o
==
ÖÖp r#
bildMatInspectionDTOÖÖs á
.ÖÖá à
IdÖÖà ä
,ÖÖä ã
tokenÖÖå ë
)ÖÖë í
;ÖÖí ì
if
ÜÜ 
(
ÜÜ 
currentDetails
ÜÜ 
!=
ÜÜ !
null
ÜÜ" &
)
ÜÜ& '
{
áá 
currentDetails
àà 
.
àà 
	IsDeleted
àà (
=
àà) *
true
àà+ /
;
àà/ 0
currentDetails
ââ 
.
ââ 
IsActive
ââ '
=
ââ( )
false
ââ* /
;
ââ/ 0
currentDetails
ää 
.
ää 

ModifiedBy
ää )
=
ää* +
	_userInfo
ää, 5
.
ää5 6
Name
ää6 :
;
ää: ;
currentDetails
ãã 
.
ãã 
ModifiedDate
ãã +
=
ãã, -
DateTime
ãã. 6
.
ãã6 7
UtcNow
ãã7 =
;
ãã= >
await
åå ,
_indigenousMachineryRepository
åå 4
.
åå4 5
UpdateAsync
åå5 @
(
åå@ A
currentDetails
ååA O
,
ååO P
token
ååQ V
)
ååV W
.
ååW X
ConfigureAwait
ååX f
(
ååf g
false
ååg l
)
åål m
;
ååm n
var
èè 
basicDetails
èè  
=
èè! "
_mapper
èè# *
.
èè* +
Map
èè+ .
<
èè. /.
 TblIdmDchgIndigenousMachineryDet
èè/ O
>
èèO P
(
èèP Q"
bildMatInspectionDTO
èèQ e
)
èèe f
;
èèf g
basicDetails
êê 
.
êê 
Id
êê 
=
êê  !
$num
êê" #
;
êê# $
basicDetails
ëë 
.
ëë 
IsActive
ëë %
=
ëë& '
true
ëë( ,
;
ëë, -
basicDetails
íí 
.
íí 
	IsDeleted
íí &
=
íí' (
false
íí) .
;
íí. /
basicDetails
ìì 
.
ìì 
	CreatedBy
ìì &
=
ìì' (
	_userInfo
ìì) 2
.
ìì2 3
Name
ìì3 7
;
ìì7 8
basicDetails
îî 
.
îî 
CreatedDate
îî (
=
îî) *
DateTime
îî+ 3
.
îî3 4
UtcNow
îî4 :
;
îî: ;
var
ññ 
response
ññ 
=
ññ 
await
ññ $,
_indigenousMachineryRepository
ññ% C
.
ññC D
AddAsync
ññD L
(
ññL M
basicDetails
ññM Y
,
ññY Z
token
ññ[ `
)
ññ` a
.
ñña b
ConfigureAwait
ññb p
(
ññp q
false
ññq v
)
ññv w
;
ññw x
await
óó 
_work
óó 
.
óó 
CommitAsync
óó '
(
óó' (
token
óó( -
)
óó- .
.
óó. /
ConfigureAwait
óó/ =
(
óó= >
false
óó> C
)
óóC D
;
óóD E
if
òò 
(
òò 
response
òò 
!=
òò 
null
òò  $
)
òò$ %
{
ôô 
return
öö 
true
öö 
;
öö  
}
õõ 
else
úú 
{
ùù 
return
ûû 
false
ûû  
;
ûû  !
}
üü 
}
†† 
return
°° 
false
°° 
;
°° 
}
¢¢ 	
public
§§ 
async
§§ 
Task
§§ 
<
§§ 
bool
§§ 
>
§§ 8
*CreateIndigenousMachineryInspectionDetails
§§  J
(
§§J K,
IdmDchgIndigenousInspectionDTO
§§K i"
bildMatInspectionDTO
§§j ~
,
§§~ !
CancellationToken§§Ä ë
token§§í ó
)§§ó ò
{
•• 	
var
¶¶ 
basicDetails
¶¶ 
=
¶¶ 
_mapper
¶¶ &
.
¶¶& '
Map
¶¶' *
<
¶¶* +.
 TblIdmDchgIndigenousMachineryDet
¶¶+ K
>
¶¶K L
(
¶¶L M"
bildMatInspectionDTO
¶¶M a
)
¶¶a b
;
¶¶b c
basicDetails
ßß 
.
ßß 
IsActive
ßß !
=
ßß" #
true
ßß$ (
;
ßß( )
basicDetails
®® 
.
®® 
	IsDeleted
®® "
=
®®# $
false
®®% *
;
®®* +
basicDetails
©© 
.
©© 
	CreatedBy
©© "
=
©©# $
	_userInfo
©©% .
.
©©. /
Name
©©/ 3
;
©©3 4
basicDetails
™™ 
.
™™ 
CreatedDate
™™ $
=
™™% &
DateTime
™™' /
.
™™/ 0
UtcNow
™™0 6
;
™™6 7
var
¨¨ "
machineryAcquisition
¨¨ $
=
¨¨% &
new
¨¨' *
TblIdmIrPlmc
¨¨+ 7
{
≠≠ 
LoanAcc
ÆÆ 
=
ÆÆ 
basicDetails
ÆÆ &
.
ÆÆ& '
LoanAcc
ÆÆ' .
,
ÆÆ. /
LoanSub
ØØ 
=
ØØ 
basicDetails
ØØ &
.
ØØ& '
LoanSub
ØØ' .
,
ØØ. /
OffcCd
∞∞ 
=
∞∞ 
basicDetails
∞∞ %
.
∞∞% &
OffcCd
∞∞& ,
,
∞∞, -
	IrPlmcIno
±± 
=
±± 
basicDetails
±± (
.
±±( )
Ino
±±) ,
,
±±, -

IrPlmcItem
≤≤ 
=
≤≤ 
basicDetails
≤≤ )
.
≤≤) *
ItemNo
≤≤* 0
,
≤≤0 1
IrPlmcItemDets
≥≥ 
=
≥≥  
basicDetails
≥≥! -
.
≥≥- .
ItemDetails
≥≥. 9
,
≥≥9 :
IrPlmcSecAmt
¥¥ 
=
¥¥ 
basicDetails
¥¥ +
.
¥¥+ ,
SecurityCreated
¥¥, ;
,
¥¥; < 
IrPlmcTotalRelease
µµ "
=
µµ# $
Convert
µµ% ,
.
µµ, -
ToInt32
µµ- 4
(
µµ4 5
basicDetails
µµ5 A
.
µµA B
SecurityRelease
µµB Q
)
µµQ R
,
µµR S
IrPlmcSupplier
∂∂ 
=
∂∂  
basicDetails
∂∂! -
.
∂∂- .
SupplierName
∂∂. :
,
∂∂: ;

IrPlmcAamt
∑∑ 
=
∑∑ 
basicDetails
∑∑ )
.
∑∑) *

ActualCost
∑∑* 4
,
∑∑4 5
CreatedDate
∏∏ 
=
∏∏ 
DateTime
∏∏ &
.
∏∏& '
UtcNow
∏∏' -
,
∏∏- .
	CreatedBy
ππ 
=
ππ 
	_userInfo
ππ %
.
ππ% &
Name
ππ& *
,
ππ* +
IsActive
∫∫ 
=
∫∫ 
true
∫∫ 
,
∫∫  
	IsDeleted
ªª 
=
ªª 
false
ªª !
}
ºº 
;
ºº 
var
ææ 
response
ææ 
=
ææ 
await
ææ  ,
_indigenousMachineryRepository
ææ! ?
.
ææ? @
AddAsync
ææ@ H
(
ææH I
basicDetails
ææI U
,
ææU V
token
ææW \
)
ææ\ ]
.
ææ] ^
ConfigureAwait
ææ^ l
(
ææl m
false
ææm r
)
æær s
;
ææs t
await
øø "
_machineryRepository
øø &
.
øø& '
AddAsync
øø' /
(
øø/ 0"
machineryAcquisition
øø0 D
,
øøD E
token
øøF K
)
øøK L
.
øøL M
ConfigureAwait
øøM [
(
øø[ \
false
øø\ a
)
øøa b
;
øøb c
await
¡¡ 
_work
¡¡ 
.
¡¡ 
CommitAsync
¡¡ #
(
¡¡# $
token
¡¡$ )
)
¡¡) *
.
¡¡* +
ConfigureAwait
¡¡+ 9
(
¡¡9 :
false
¡¡: ?
)
¡¡? @
;
¡¡@ A
if
¬¬ 
(
¬¬ 
response
¬¬ 
!=
¬¬ 
null
¬¬  
)
¬¬  !
{
√√ 
return
ƒƒ 
true
ƒƒ 
;
ƒƒ 
}
≈≈ 
else
∆∆ 
{
«« 
return
»» 
false
»» 
;
»» 
}
…… 
}
   	
public
ŒŒ 
async
ŒŒ 
Task
ŒŒ 
<
ŒŒ 
IEnumerable
ŒŒ %
<
ŒŒ% &#
IdmDchgProjectCostDTO
ŒŒ& ;
>
ŒŒ; <
>
ŒŒ< =*
GetAllProjectCostDetailsList
ŒŒ> Z
(
ŒŒZ [
long
ŒŒ[ _
accountNumber
ŒŒ` m
,
ŒŒm n 
CancellationTokenŒŒo Ä
tokenŒŒÅ Ü
)ŒŒÜ á
{
œœ 	
var
–– 
ProjectCostList
–– 
=
––  !
await
––" '$
_projectCostRepository
––( >
.
––> ?#
FindByExpressionAsync
––? T
(
––T U
x
––U V
=>
––W Y
x
––Z [
.
––[ \
LoanAcc
––\ c
==
––d f
accountNumber
––g t
&&
––u w
x
––x y
.
––y z
IsActive––z Ç
==––É Ö
true––Ü ä
&&––ã ç
x––é è
.––è ê
	IsDeleted––ê ô
==––ö ú
false––ù ¢
,––¢ £
token––§ ©
)––© ™
;––™ ´
return
—— 
_mapper
—— 
.
—— 
Map
—— 
<
—— 
List
—— #
<
——# $#
IdmDchgProjectCostDTO
——$ 9
>
——9 :
>
——: ;
(
——; <
ProjectCostList
——< K
)
——K L
;
——L M
}
““ 	
public
”” 
async
”” 
Task
”” 
<
”” 
bool
”” 
>
”” &
UpdateProjectCostDetails
””  8
(
””8 9#
IdmDchgProjectCostDTO
””9 N

PrjCostDTO
””O Y
,
””Y Z
CancellationToken
””[ l
token
””m r
)
””r s
{
‘‘ 	
var
’’ 
currentDetails
’’ 
=
’’  
await
’’! &$
_projectCostRepository
’’' =
.
’’= >-
FirstOrDefaultByExpressionAsync
’’> ]
(
’’] ^
x
’’^ _
=>
’’` b
x
’’c d
.
’’d e
Id
’’e g
==
’’h j

PrjCostDTO
’’k u
.
’’u v
Id
’’v x
,
’’x y
token
’’z 
)’’ Ä
;’’Ä Å
if
÷÷ 
(
÷÷ 
currentDetails
÷÷ 
!=
÷÷ !
null
÷÷" &
)
÷÷& '
{
◊◊ 
currentDetails
ÿÿ 
.
ÿÿ 
	IsDeleted
ÿÿ (
=
ÿÿ) *
true
ÿÿ+ /
;
ÿÿ/ 0
currentDetails
ŸŸ 
.
ŸŸ 
IsActive
ŸŸ '
=
ŸŸ( )
false
ŸŸ* /
;
ŸŸ/ 0
currentDetails
⁄⁄ 
.
⁄⁄ 

ModifiedBy
⁄⁄ )
=
⁄⁄* +
	_userInfo
⁄⁄, 5
.
⁄⁄5 6
Name
⁄⁄6 :
;
⁄⁄: ;
currentDetails
€€ 
.
€€ 
ModifiedDate
€€ +
=
€€, -
DateTime
€€. 6
.
€€6 7
UtcNow
€€7 =
;
€€= >
await
‹‹ $
_projectCostRepository
‹‹ ,
.
‹‹, -
UpdateAsync
‹‹- 8
(
‹‹8 9
currentDetails
‹‹9 G
,
‹‹G H
token
‹‹I N
)
‹‹N O
.
‹‹O P
ConfigureAwait
‹‹P ^
(
‹‹^ _
false
‹‹_ d
)
‹‹d e
;
‹‹e f
var
ﬂﬂ 
basicDetails
ﬂﬂ  
=
ﬂﬂ! "
_mapper
ﬂﬂ# *
.
ﬂﬂ* +
Map
ﬂﬂ+ .
<
ﬂﬂ. /#
TblIdmDchgProjectCost
ﬂﬂ/ D
>
ﬂﬂD E
(
ﬂﬂE F

PrjCostDTO
ﬂﬂF P
)
ﬂﬂP Q
;
ﬂﬂQ R
basicDetails
‡‡ 
.
‡‡ 
Id
‡‡ 
=
‡‡  !
$num
‡‡" #
;
‡‡# $
basicDetails
·· 
.
·· 
IsActive
·· %
=
··& '
true
··( ,
;
··, -
basicDetails
‚‚ 
.
‚‚ 
	IsDeleted
‚‚ &
=
‚‚' (
false
‚‚) .
;
‚‚. /
basicDetails
„„ 
.
„„ 
	CreatedBy
„„ &
=
„„' (
	_userInfo
„„) 2
.
„„2 3
Name
„„3 7
;
„„7 8
basicDetails
‰‰ 
.
‰‰ 
CreatedDate
‰‰ (
=
‰‰) *
DateTime
‰‰+ 3
.
‰‰3 4
UtcNow
‰‰4 :
;
‰‰: ;
var
ÊÊ 
response
ÊÊ 
=
ÊÊ 
await
ÊÊ $$
_projectCostRepository
ÊÊ% ;
.
ÊÊ; <
AddAsync
ÊÊ< D
(
ÊÊD E
basicDetails
ÊÊE Q
,
ÊÊQ R
token
ÊÊS X
)
ÊÊX Y
.
ÊÊY Z
ConfigureAwait
ÊÊZ h
(
ÊÊh i
false
ÊÊi n
)
ÊÊn o
;
ÊÊo p
await
ÁÁ 
_work
ÁÁ 
.
ÁÁ 
CommitAsync
ÁÁ '
(
ÁÁ' (
token
ÁÁ( -
)
ÁÁ- .
.
ÁÁ. /
ConfigureAwait
ÁÁ/ =
(
ÁÁ= >
false
ÁÁ> C
)
ÁÁC D
;
ÁÁD E
if
ËË 
(
ËË 
response
ËË 
!=
ËË 
null
ËË  $
)
ËË$ %
{
ÈÈ 
return
ÍÍ 
true
ÍÍ 
;
ÍÍ  
}
ÎÎ 
else
ÏÏ 
{
ÌÌ 
return
ÓÓ 
false
ÓÓ  
;
ÓÓ  !
}
ÔÔ 
}
 
return
ÒÒ 
false
ÒÒ 
;
ÒÒ 
}
ÚÚ 	
public
ÙÙ 
async
ÙÙ 
Task
ÙÙ 
<
ÙÙ 
bool
ÙÙ 
>
ÙÙ &
CreateProjectCostDetails
ÙÙ  8
(
ÙÙ8 9#
IdmDchgProjectCostDTO
ÙÙ9 N

PrjCostDTO
ÙÙO Y
,
ÙÙY Z
CancellationToken
ÙÙ[ l
token
ÙÙm r
)
ÙÙr s
{
ıı 	
var
ˆˆ 
basicDetails
ˆˆ 
=
ˆˆ 
_mapper
ˆˆ &
.
ˆˆ& '
Map
ˆˆ' *
<
ˆˆ* +#
TblIdmDchgProjectCost
ˆˆ+ @
>
ˆˆ@ A
(
ˆˆA B

PrjCostDTO
ˆˆB L
)
ˆˆL M
;
ˆˆM N
basicDetails
˜˜ 
.
˜˜ 
IsActive
˜˜ !
=
˜˜" #
true
˜˜$ (
;
˜˜( )
basicDetails
¯¯ 
.
¯¯ 
	IsDeleted
¯¯ "
=
¯¯# $
false
¯¯% *
;
¯¯* +
basicDetails
˘˘ 
.
˘˘ 
	CreatedBy
˘˘ "
=
˘˘# $
	_userInfo
˘˘% .
.
˘˘. /
Name
˘˘/ 3
;
˘˘3 4
basicDetails
˙˙ 
.
˙˙ 
CreatedDate
˙˙ $
=
˙˙% &
DateTime
˙˙' /
.
˙˙/ 0
UtcNow
˙˙0 6
;
˙˙6 7
var
¸¸ 
response
¸¸ 
=
¸¸ 
await
¸¸  $
_projectCostRepository
¸¸! 7
.
¸¸7 8
AddAsync
¸¸8 @
(
¸¸@ A
basicDetails
¸¸A M
,
¸¸M N
token
¸¸O T
)
¸¸T U
.
¸¸U V
ConfigureAwait
¸¸V d
(
¸¸d e
false
¸¸e j
)
¸¸j k
;
¸¸k l
await
˝˝ 
_work
˝˝ 
.
˝˝ 
CommitAsync
˝˝ #
(
˝˝# $
token
˝˝$ )
)
˝˝) *
.
˝˝* +
ConfigureAwait
˝˝+ 9
(
˝˝9 :
false
˝˝: ?
)
˝˝? @
;
˝˝@ A
if
˛˛ 
(
˛˛ 
response
˛˛ 
!=
˛˛ 
null
˛˛  
)
˛˛  !
{
ˇˇ 
return
ÄÄ 
true
ÄÄ 
;
ÄÄ 
}
ÅÅ 
else
ÇÇ 
{
ÉÉ 
return
ÑÑ 
false
ÑÑ 
;
ÑÑ 
}
ÖÖ 
}
ÜÜ 	
public
áá 
async
áá 
Task
áá 
<
áá 
bool
áá 
>
áá &
DeleteProjectCostDetails
áá  8
(
áá8 9#
IdmDchgProjectCostDTO
áá9 N

PrjCostDTO
ááO Y
,
ááY Z
CancellationToken
áá[ l
token
áám r
)
áár s
{
àà 	
var
ââ 
basicDetails
ââ 
=
ââ 
_mapper
ââ &
.
ââ& '
Map
ââ' *
<
ââ* +#
TblIdmDchgProjectCost
ââ+ @
>
ââ@ A
(
ââA B

PrjCostDTO
ââB L
)
ââL M
;
ââM N
basicDetails
ää 
.
ää 
IsActive
ää !
=
ää" #
false
ää$ )
;
ää) *
basicDetails
ãã 
.
ãã 
	IsDeleted
ãã "
=
ãã# $
true
ãã% )
;
ãã) *
basicDetails
åå 
.
åå 
ModifiedDate
åå %
=
åå& '
DateTime
åå( 0
.
åå0 1
UtcNow
åå1 7
;
åå7 8
basicDetails
çç 
.
çç 

ModifiedBy
çç #
=
çç$ %
	_userInfo
çç& /
.
çç/ 0
Name
çç0 4
;
çç4 5
var
éé 
response
éé 
=
éé 
await
éé  $
_projectCostRepository
éé! 7
.
éé7 8
UpdateAsync
éé8 C
(
ééC D
basicDetails
ééD P
,
ééP Q
token
ééR W
)
ééW X
.
ééX Y
ConfigureAwait
ééY g
(
éég h
false
ééh m
)
éém n
;
één o
await
èè 
_work
èè 
.
èè 
CommitAsync
èè #
(
èè# $
token
èè$ )
)
èè) *
.
èè* +
ConfigureAwait
èè+ 9
(
èè9 :
false
èè: ?
)
èè? @
;
èè@ A
if
êê 
(
êê 
response
êê 
!=
êê 
null
êê  
)
êê  !
{
ëë 
return
íí 
true
íí 
;
íí 
}
ìì 
else
îî 
{
ïï 
return
ññ 
false
ññ 
;
ññ 
}
óó 
}
òò 	
public
ùù 
async
ùù 
Task
ùù 
<
ùù 
IEnumerable
ùù %
<
ùù% &%
IdmDsbLetterOfCreditDTO
ùù& =
>
ùù= >
>
ùù> ?1
#GetAllLetterOfCreditDetailListAsync
ùù@ c
(
ùùc d
long
ùùd h
accountNumber
ùùi v
,
ùùv w 
CancellationTokenùùx â
tokenùùä è
)ùùè ê
{
ûû 	
var
üü *
letterOfCreditInspectionList
üü ,
=
üü- .
await
üü/ 4'
_letterOfCreditRepository
üü5 N
.
üüN O#
FindByExpressionAsync
üüO d
(
üüd e
x
üüe f
=>
üüg i
x
üüj k
.
üük l
LoanAcc
üül s
==
üüt v
accountNumberüüw Ñ
&&üüÖ á
xüüà â
.üüâ ä
IsActiveüüä í
==üüì ï
trueüüñ ö
&&üüõ ù
xüüû ü
.üüü †
	IsDeletedüü† ©
==üü™ ¨
falseüü≠ ≤
,üü≤ ≥
tokenüü¥ π
)üüπ ∫
;üü∫ ª
return
†† 
_mapper
†† 
.
†† 
Map
†† 
<
†† 
List
†† #
<
††# $%
IdmDsbLetterOfCreditDTO
††$ ;
>
††; <
>
††< =
(
††= >*
letterOfCreditInspectionList
††> Z
)
††Z [
;
††[ \
}
°° 	
public
££ 
async
££ 
Task
££ 
<
££ 
bool
££ 
>
££ )
DeleteLetterOfCreditDetails
££  ;
(
££; <%
IdmDsbLetterOfCreditDTO
££< S&
letterOfCreditDetailsDTO
££T l
,
££l m
CancellationToken
££n 
token££Ä Ö
)££Ö Ü
{
§§ 	
var
•• 
basicDetails
•• 
=
•• 
_mapper
•• &
.
••& '
Map
••' *
<
••* +%
TblIdmDsbLetterOfCredit
••+ B
>
••B C
(
••C D&
letterOfCreditDetailsDTO
••D \
)
••\ ]
;
••] ^
basicDetails
¶¶ 
.
¶¶ 
IsActive
¶¶ !
=
¶¶" #
false
¶¶$ )
;
¶¶) *
basicDetails
ßß 
.
ßß 
	IsDeleted
ßß "
=
ßß# $
true
ßß% )
;
ßß) *
basicDetails
®® 
.
®® 
ModifiedDate
®® %
=
®®& '
DateTime
®®( 0
.
®®0 1
UtcNow
®®1 7
;
®®7 8
basicDetails
©© 
.
©© 

ModifiedBy
©© #
=
©©$ %
	_userInfo
©©& /
.
©©/ 0
Name
©©0 4
;
©©4 5
var
™™ 
response
™™ 
=
™™ 
await
™™  '
_letterOfCreditRepository
™™! :
.
™™: ;
UpdateAsync
™™; F
(
™™F G
basicDetails
™™G S
,
™™S T
token
™™U Z
)
™™Z [
.
™™[ \
ConfigureAwait
™™\ j
(
™™j k
false
™™k p
)
™™p q
;
™™q r
await
´´ 
_work
´´ 
.
´´ 
CommitAsync
´´ #
(
´´# $
token
´´$ )
)
´´) *
.
´´* +
ConfigureAwait
´´+ 9
(
´´9 :
false
´´: ?
)
´´? @
;
´´@ A
if
¨¨ 
(
¨¨ 
response
¨¨ 
!=
¨¨ 
null
¨¨  
)
¨¨  !
{
≠≠ 
return
ÆÆ 
true
ÆÆ 
;
ÆÆ 
}
ØØ 
else
∞∞ 
{
±± 
return
≤≤ 
false
≤≤ 
;
≤≤ 
}
≥≥ 
}
¥¥ 	
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
bool
∂∂ 
>
∂∂ )
UpdateLetterOfCreditDetails
∂∂  ;
(
∂∂; <%
IdmDsbLetterOfCreditDTO
∂∂< S&
letterOfCreditDetailsDTO
∂∂T l
,
∂∂l m
CancellationToken
∂∂n 
token∂∂Ä Ö
)∂∂Ö Ü
{
∑∑ 	
var
∏∏ 
currentDetails
∏∏ 
=
∏∏  
await
∏∏! &'
_letterOfCreditRepository
∏∏' @
.
∏∏@ A-
FirstOrDefaultByExpressionAsync
∏∏A `
(
∏∏` a
x
∏∏a b
=>
∏∏c e
x
∏∏f g
.
∏∏g h

DcLocRowId
∏∏h r
==
∏∏s u'
letterOfCreditDetailsDTO∏∏v é
.∏∏é è

DcLocRowId∏∏è ô
,∏∏ô ö
token∏∏õ †
)∏∏† °
;∏∏° ¢
if
ππ 
(
ππ 
currentDetails
ππ 
!=
ππ !
null
ππ" &
)
ππ& '
{
∫∫ 
currentDetails
ªª 
.
ªª 
	IsDeleted
ªª (
=
ªª) *
true
ªª+ /
;
ªª/ 0
currentDetails
ºº 
.
ºº 
IsActive
ºº '
=
ºº( )
false
ºº* /
;
ºº/ 0
currentDetails
ΩΩ 
.
ΩΩ 

ModifiedBy
ΩΩ )
=
ΩΩ* +
	_userInfo
ΩΩ, 5
.
ΩΩ5 6
Name
ΩΩ6 :
;
ΩΩ: ;
currentDetails
ææ 
.
ææ 
ModifiedDate
ææ +
=
ææ, -
DateTime
ææ. 6
.
ææ6 7
UtcNow
ææ7 =
;
ææ= >
await
øø '
_letterOfCreditRepository
øø /
.
øø/ 0
UpdateAsync
øø0 ;
(
øø; <
currentDetails
øø< J
,
øøJ K
token
øøL Q
)
øøQ R
.
øøR S
ConfigureAwait
øøS a
(
øøa b
false
øøb g
)
øøg h
;
øøh i
var
¡¡ 
basicDetails
¡¡  
=
¡¡! "
_mapper
¡¡# *
.
¡¡* +
Map
¡¡+ .
<
¡¡. /%
TblIdmDsbLetterOfCredit
¡¡/ F
>
¡¡F G
(
¡¡G H&
letterOfCreditDetailsDTO
¡¡H `
)
¡¡` a
;
¡¡a b
basicDetails
¬¬ 
.
¬¬ 

DcLocRowId
¬¬ '
=
¬¬( )
$num
¬¬* +
;
¬¬+ ,
basicDetails
√√ 
.
√√ 
IsActive
√√ %
=
√√& '
true
√√( ,
;
√√, -
basicDetails
ƒƒ 
.
ƒƒ 
	IsDeleted
ƒƒ &
=
ƒƒ' (
false
ƒƒ) .
;
ƒƒ. /
basicDetails
≈≈ 
.
≈≈ 
	CreatedBy
≈≈ &
=
≈≈' (
	_userInfo
≈≈) 2
.
≈≈2 3
Name
≈≈3 7
;
≈≈7 8
basicDetails
∆∆ 
.
∆∆ 
CreatedDate
∆∆ (
=
∆∆) *
DateTime
∆∆+ 3
.
∆∆3 4
UtcNow
∆∆4 :
;
∆∆: ;
var
»» 
response
»» 
=
»» 
await
»» $'
_letterOfCreditRepository
»»% >
.
»»> ?
AddAsync
»»? G
(
»»G H
basicDetails
»»H T
,
»»T U
token
»»V [
)
»»[ \
.
»»\ ]
ConfigureAwait
»»] k
(
»»k l
false
»»l q
)
»»q r
;
»»r s
await
…… 
_work
…… 
.
…… 
CommitAsync
…… '
(
……' (
token
……( -
)
……- .
.
……. /
ConfigureAwait
……/ =
(
……= >
false
……> C
)
……C D
;
……D E
if
   
(
   
response
   
!=
   
null
    $
)
  $ %
{
ÀÀ 
return
ÃÃ 
true
ÃÃ 
;
ÃÃ  
}
ÕÕ 
else
ŒŒ 
{
œœ 
return
–– 
false
––  
;
––  !
}
—— 
}
““ 
return
”” 
false
”” 
;
”” 
}
‘‘ 	
public
÷÷ 
async
÷÷ 
Task
÷÷ 
<
÷÷ 
bool
÷÷ 
>
÷÷ )
CreateLetterOfCreditDetails
÷÷  ;
(
÷÷; <%
IdmDsbLetterOfCreditDTO
÷÷< S&
letterOfCreditDetailsDTO
÷÷T l
,
÷÷l m
CancellationToken
÷÷n 
token÷÷Ä Ö
)÷÷Ö Ü
{
◊◊ 	
var
ÿÿ 
basicDetails
ÿÿ 
=
ÿÿ 
_mapper
ÿÿ &
.
ÿÿ& '
Map
ÿÿ' *
<
ÿÿ* +%
TblIdmDsbLetterOfCredit
ÿÿ+ B
>
ÿÿB C
(
ÿÿC D&
letterOfCreditDetailsDTO
ÿÿD \
)
ÿÿ\ ]
;
ÿÿ] ^
basicDetails
ŸŸ 
.
ŸŸ 
IsActive
ŸŸ !
=
ŸŸ" #
true
ŸŸ$ (
;
ŸŸ( )
basicDetails
⁄⁄ 
.
⁄⁄ 
	IsDeleted
⁄⁄ "
=
⁄⁄# $
false
⁄⁄% *
;
⁄⁄* +
basicDetails
€€ 
.
€€ 
	CreatedBy
€€ "
=
€€# $
	_userInfo
€€% .
.
€€. /
Name
€€/ 3
;
€€3 4
basicDetails
‹‹ 
.
‹‹ 
CreatedDate
‹‹ $
=
‹‹% &
DateTime
‹‹' /
.
‹‹/ 0
UtcNow
‹‹0 6
;
‹‹6 7
var
›› 
response
›› 
=
›› 
await
››  '
_letterOfCreditRepository
››! :
.
››: ;
AddAsync
››; C
(
››C D
basicDetails
››D P
,
››P Q
token
››R W
)
››W X
.
››X Y
ConfigureAwait
››Y g
(
››g h
false
››h m
)
››m n
;
››n o
await
ﬁﬁ 
_work
ﬁﬁ 
.
ﬁﬁ 
CommitAsync
ﬁﬁ #
(
ﬁﬁ# $
token
ﬁﬁ$ )
)
ﬁﬁ) *
.
ﬁﬁ* +
ConfigureAwait
ﬁﬁ+ 9
(
ﬁﬁ9 :
false
ﬁﬁ: ?
)
ﬁﬁ? @
;
ﬁﬁ@ A
if
ﬂﬂ 
(
ﬂﬂ 
response
ﬂﬂ 
!=
ﬂﬂ 
null
ﬂﬂ  
)
ﬂﬂ  !
{
‡‡ 
return
·· 
true
·· 
;
·· 
}
‚‚ 
else
„„ 
{
‰‰ 
return
ÂÂ 
false
ÂÂ 
;
ÂÂ 
}
ÊÊ 
}
ÁÁ 	
public
ÌÌ 
async
ÌÌ 
Task
ÌÌ 
<
ÌÌ 
IEnumerable
ÌÌ %
<
ÌÌ% &&
IdmDchgMeansOfFinanceDTO
ÌÌ& >
>
ÌÌ> ?
>
ÌÌ? @&
GetAllMeansOfFinanceList
ÌÌA Y
(
ÌÌY Z
long
ÌÌZ ^
accountNumber
ÌÌ_ l
,
ÌÌl m
CancellationToken
ÌÌn 
tokenÌÌÄ Ö
)ÌÌÖ Ü
{
ÓÓ 	
var
ÔÔ !
importMachineryList
ÔÔ #
=
ÔÔ$ %
await
ÔÔ& +'
_meansOfFinanceRepository
ÔÔ, E
.
ÔÔE F#
FindByExpressionAsync
ÔÔF [
(
ÔÔ[ \
x
ÔÔ\ ]
=>
ÔÔ^ `
x
ÔÔa b
.
ÔÔb c
LoanAcc
ÔÔc j
==
ÔÔk m
accountNumber
ÔÔn {
&&
ÔÔ| ~
xÔÔ Ä
.ÔÔÄ Å
IsActiveÔÔÅ â
==ÔÔä å
trueÔÔç ë
&&ÔÔí î
xÔÔï ñ
.ÔÔñ ó
	IsDeletedÔÔó †
==ÔÔ° £
falseÔÔ§ ©
,ÔÔ© ™
tokenÔÔ´ ∞
)ÔÔ∞ ±
;ÔÔ± ≤
return
 
_mapper
 
.
 
Map
 
<
 
List
 #
<
# $&
IdmDchgMeansOfFinanceDTO
$ <
>
< =
>
= >
(
> ?!
importMachineryList
? R
)
R S
;
S T
}
ÒÒ 	
public
ÛÛ 
async
ÛÛ 
Task
ÛÛ 
<
ÛÛ 
bool
ÛÛ 
>
ÛÛ )
CreateMeansOfFinanceDetails
ÛÛ  ;
(
ÛÛ; <&
IdmDchgMeansOfFinanceDTO
ÛÛ< T
meansOfFinance
ÛÛU c
,
ÛÛc d
CancellationToken
ÛÛe v
token
ÛÛw |
)
ÛÛ| }
{
ÙÙ 	
var
ıı 
basicDetails
ıı 
=
ıı 
_mapper
ıı &
.
ıı& '
Map
ıı' *
<
ıı* +&
TblIdmDchgMeansOfFinance
ıı+ C
>
ııC D
(
ııD E
meansOfFinance
ııE S
)
ııS T
;
ııT U
basicDetails
ˆˆ 
.
ˆˆ 
IsActive
ˆˆ !
=
ˆˆ" #
true
ˆˆ$ (
;
ˆˆ( )
basicDetails
˜˜ 
.
˜˜ 
	IsDeleted
˜˜ "
=
˜˜# $
false
˜˜% *
;
˜˜* +
basicDetails
¯¯ 
.
¯¯ 
	CreatedBy
¯¯ "
=
¯¯# $
	_userInfo
¯¯% .
.
¯¯. /
Name
¯¯/ 3
;
¯¯3 4
basicDetails
˘˘ 
.
˘˘ 
CreatedDate
˘˘ $
=
˘˘% &
DateTime
˘˘' /
.
˘˘/ 0
UtcNow
˘˘0 6
;
˘˘6 7
var
˚˚ 
response
˚˚ 
=
˚˚ 
await
˚˚  '
_meansOfFinanceRepository
˚˚! :
.
˚˚: ;
AddAsync
˚˚; C
(
˚˚C D
basicDetails
˚˚D P
,
˚˚P Q
token
˚˚R W
)
˚˚W X
.
˚˚X Y
ConfigureAwait
˚˚Y g
(
˚˚g h
false
˚˚h m
)
˚˚m n
;
˚˚n o
await
¸¸ 
_work
¸¸ 
.
¸¸ 
CommitAsync
¸¸ #
(
¸¸# $
token
¸¸$ )
)
¸¸) *
.
¸¸* +
ConfigureAwait
¸¸+ 9
(
¸¸9 :
false
¸¸: ?
)
¸¸? @
;
¸¸@ A
if
˝˝ 
(
˝˝ 
response
˝˝ 
!=
˝˝ 
null
˝˝  
)
˝˝  !
{
˛˛ 
return
ˇˇ 
true
ˇˇ 
;
ˇˇ 
}
ÄÄ 
else
ÅÅ 
{
ÇÇ 
return
ÉÉ 
false
ÉÉ 
;
ÉÉ 
}
ÑÑ 
}
ÖÖ 	
public
ÜÜ 
async
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
bool
ÜÜ 
>
ÜÜ )
UpdateMeansOfFinanceDetails
ÜÜ  ;
(
ÜÜ; <&
IdmDchgMeansOfFinanceDTO
ÜÜ< T
meansOfFinance
ÜÜU c
,
ÜÜc d
CancellationToken
ÜÜe v
token
ÜÜw |
)
ÜÜ| }
{
áá 	
var
àà 
currentDetails
àà 
=
àà  
await
àà! &'
_meansOfFinanceRepository
àà' @
.
àà@ A-
FirstOrDefaultByExpressionAsync
ààA `
(
àà` a
x
ààa b
=>
ààc e
x
ààf g
.
ààg h
	DcmfRowId
ààh q
==
ààr t
meansOfFinanceààu É
.ààÉ Ñ
	DcmfRowIdààÑ ç
,ààç é
tokenààè î
)ààî ï
;ààï ñ
if
ââ 
(
ââ 
currentDetails
ââ 
!=
ââ !
null
ââ" &
)
ââ& '
{
ää 
currentDetails
ãã 
.
ãã 
	IsDeleted
ãã (
=
ãã) *
true
ãã+ /
;
ãã/ 0
currentDetails
åå 
.
åå 
IsActive
åå '
=
åå( )
false
åå* /
;
åå/ 0
currentDetails
çç 
.
çç 

ModifiedBy
çç )
=
çç* +
	_userInfo
çç, 5
.
çç5 6
Name
çç6 :
;
çç: ;
currentDetails
éé 
.
éé 
ModifiedDate
éé +
=
éé, -
DateTime
éé. 6
.
éé6 7
UtcNow
éé7 =
;
éé= >
await
èè '
_meansOfFinanceRepository
èè /
.
èè/ 0
UpdateAsync
èè0 ;
(
èè; <
currentDetails
èè< J
,
èèJ K
token
èèL Q
)
èèQ R
.
èèR S
ConfigureAwait
èèS a
(
èèa b
false
èèb g
)
èèg h
;
èèh i
var
ëë 
basicDetails
ëë  
=
ëë! "
_mapper
ëë# *
.
ëë* +
Map
ëë+ .
<
ëë. /&
TblIdmDchgMeansOfFinance
ëë/ G
>
ëëG H
(
ëëH I
meansOfFinance
ëëI W
)
ëëW X
;
ëëX Y
basicDetails
íí 
.
íí 
	DcmfRowId
íí &
=
íí' (
$num
íí) *
;
íí* +
basicDetails
ìì 
.
ìì 
IsActive
ìì %
=
ìì& '
true
ìì( ,
;
ìì, -
basicDetails
îî 
.
îî 
	IsDeleted
îî &
=
îî' (
false
îî) .
;
îî. /
basicDetails
ïï 
.
ïï 
	CreatedBy
ïï &
=
ïï' (
	_userInfo
ïï) 2
.
ïï2 3
Name
ïï3 7
;
ïï7 8
basicDetails
ññ 
.
ññ 
CreatedDate
ññ (
=
ññ) *
DateTime
ññ+ 3
.
ññ3 4
UtcNow
ññ4 :
;
ññ: ;
var
òò 
response
òò 
=
òò 
await
òò $'
_meansOfFinanceRepository
òò% >
.
òò> ?
AddAsync
òò? G
(
òòG H
basicDetails
òòH T
,
òòT U
token
òòV [
)
òò[ \
.
òò\ ]
ConfigureAwait
òò] k
(
òòk l
false
òòl q
)
òòq r
;
òòr s
await
ôô 
_work
ôô 
.
ôô 
CommitAsync
ôô '
(
ôô' (
token
ôô( -
)
ôô- .
.
ôô. /
ConfigureAwait
ôô/ =
(
ôô= >
false
ôô> C
)
ôôC D
;
ôôD E
if
öö 
(
öö 
response
öö 
!=
öö 
null
öö  $
)
öö$ %
{
õõ 
return
úú 
true
úú 
;
úú  
}
ùù 
else
ûû 
{
üü 
return
†† 
false
††  
;
††  !
}
°° 
}
¢¢ 
return
££ 
false
££ 
;
££ 
}
§§ 	
public
¶¶ 
async
¶¶ 
Task
¶¶ 
<
¶¶ 
bool
¶¶ 
>
¶¶ )
DeleteMeansOfFinanceDetails
¶¶  ;
(
¶¶; <&
IdmDchgMeansOfFinanceDTO
¶¶< T
meansOfFinance
¶¶U c
,
¶¶c d
CancellationToken
¶¶e v
token
¶¶w |
)
¶¶| }
{
ßß 	
var
®® 
basicDetails
®® 
=
®® 
_mapper
®® &
.
®®& '
Map
®®' *
<
®®* +&
TblIdmDchgMeansOfFinance
®®+ C
>
®®C D
(
®®D E
meansOfFinance
®®E S
)
®®S T
;
®®T U
basicDetails
©© 
.
©© 
IsActive
©© !
=
©©" #
false
©©$ )
;
©©) *
basicDetails
™™ 
.
™™ 
	IsDeleted
™™ "
=
™™# $
true
™™% )
;
™™) *
basicDetails
´´ 
.
´´ 
ModifiedDate
´´ %
=
´´& '
DateTime
´´( 0
.
´´0 1
UtcNow
´´1 7
;
´´7 8
basicDetails
¨¨ 
.
¨¨ 

ModifiedBy
¨¨ #
=
¨¨$ %
	_userInfo
¨¨& /
.
¨¨/ 0
Name
¨¨0 4
;
¨¨4 5
var
≠≠ 
response
≠≠ 
=
≠≠ 
await
≠≠  '
_meansOfFinanceRepository
≠≠! :
.
≠≠: ;
UpdateAsync
≠≠; F
(
≠≠F G
basicDetails
≠≠G S
,
≠≠S T
token
≠≠U Z
)
≠≠Z [
.
≠≠[ \
ConfigureAwait
≠≠\ j
(
≠≠j k
false
≠≠k p
)
≠≠p q
;
≠≠q r
await
ÆÆ 
_work
ÆÆ 
.
ÆÆ 
CommitAsync
ÆÆ #
(
ÆÆ# $
token
ÆÆ$ )
)
ÆÆ) *
.
ÆÆ* +
ConfigureAwait
ÆÆ+ 9
(
ÆÆ9 :
false
ÆÆ: ?
)
ÆÆ? @
;
ÆÆ@ A
if
ØØ 
(
ØØ 
response
ØØ 
!=
ØØ 
null
ØØ  
)
ØØ  !
{
∞∞ 
return
±± 
true
±± 
;
±± 
}
≤≤ 
else
≥≥ 
{
¥¥ 
return
µµ 
false
µµ 
;
µµ 
}
∂∂ 
}
∑∑ 	
}
∫∫ 
}ªª ªä
zD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\LegalDocumentationModule\LegalDocumentationService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @$
LegalDocumentationModule@ X
{ 
public 

class %
LegalDocumentationService *
:+ ,&
ILegalDocumentationService- G
{ 
private 
readonly 
IEntityRepository *
<* +
TblIdmDeedDet+ 8
>8 9
_deedRepository: I
;I J
private 
readonly 
IEntityRepository *
<* +
TblIdmHypothDet+ :
>: ;
_hypothRepository< M
;M N
private 
readonly 
IEntityRepository *
<* +
TblIdmDsbCharge+ :
>: ;%
_securitychargeRepository< U
;U V
private 
readonly 
IEntityRepository *
<* +$
TblIdmCersaiRegistration+ C
>C D)
_cersairegistrationRepositoryE b
;b c
private 
readonly 
IEntityRepository *
<* +
TblIdmGuarDeedDet+ <
>< =$
_guarantorDeedRepository> V
;V W
private 
readonly 
IEntityRepository *
<* +
TblIdmCondDet+ 8
>8 9#
_idmConditionRepository: Q
;Q R
private 
readonly 
IEntityRepository *
<* +
TblAssetRefnoDet+ ;
>; <
_assetRefDet= I
;I J
private 
readonly 
IEntityRepository *
<* +
TblAssettypeCdtab+ <
>< =

_assetType> H
;H I
private 
readonly 
IEntityRepository *
<* + 
TblSecurityRefnoMast+ ?
>? @
_secruityrefNoA O
;O P
private 
readonly 
IUnitOfWork $
_work% *
;* +
private   
readonly   
IMapper    
_mapper  ! (
;  ( )
private!! 
readonly!! 
UserInfo!! !
	_userInfo!!" +
;!!+ ,
public## %
LegalDocumentationService## (
(##( )
IEntityRepository##) :
<##: ;
TblIdmDeedDet##; H
>##H I
deedRepository##J X
,##X Y
IEntityRepository$$ 
<$$ 
TblIdmHypothDet$$ -
>$$- .
hypothRepository$$/ ?
,$$? @
IEntityRepository$$A R
<$$R S
TblIdmDsbCharge$$S b
>$$b c$
securitychargeRepository$$d |
,$$| }
IEntityRepository%% 
<%% $
TblIdmCersaiRegistration%% 6
>%%6 7(
cersairegistrationRepository%%8 T
,%%T U
IEntityRepository%%V g
<%%g h
TblIdmGuarDeedDet%%h y
>%%y z$
guarantorDeedRepository	%%{ í
,
%%í ì
IEntityRepository&& 
<&& 
TblIdmCondDet&& +
>&&+ ,"
idmConditionRepository&&- C
,&&C D
IEntityRepository'' 
<'' 
TblAssetRefnoDet'' .
>''. /
assetRefDet''0 ;
,''; <
IEntityRepository''= N
<''N O
TblAssettypeCdtab''O `
>''` a
	assetType''b k
,''k l
IUnitOfWork(( 
work(( 
,(( 
IMapper(( $
mapper((% +
,((+ ,
UserInfo((- 5
userInfo((6 >
,((> ?
IEntityRepository((@ Q
<((Q R 
TblSecurityRefnoMast((R f
>((f g
secruityrefNo((h u
)((u v
{)) 	
_deedRepository** 
=** 
deedRepository** ,
;**, -
_hypothRepository++ 
=++ 
hypothRepository++  0
;++0 1%
_securitychargeRepository,, %
=,,& '$
securitychargeRepository,,( @
;,,@ A)
_cersairegistrationRepository-- )
=--* +(
cersairegistrationRepository--, H
;--H I$
_guarantorDeedRepository.. $
=..% &#
guarantorDeedRepository..' >
;..> ?#
_idmConditionRepository// #
=//$ %"
idmConditionRepository//& <
;//< =
_assetRefDet00 
=00 
assetRefDet00 &
;00& '

_assetType11 
=11 
	assetType11 "
;11" #
_work22 
=22 
work22 
;22 
_mapper33 
=33 
mapper33 
;33 
	_userInfo44 
=44 
userInfo44  
;44  !
_secruityrefNo55 
=55 
secruityrefNo55 *
;55* +
}66 	
public>> 
async>> 
Task>> 
<>> 
IEnumerable>> %
<>>% &!
IdmSecurityDetailsDTO>>& ;
>>>; <
>>>< =)
GetPrimaryCollateralListAsync>>> [
(>>[ \
long>>\ `
accountNumber>>a n
,>>n o
CancellationToken	>>p Å
token
>>Ç á
)
>>á à
{?? 	
var@@ 
data@@ 
=@@ 
await@@ 
_deedRepository@@ ,
.@@, -)
FindByMatchingPropertiesAsync@@- J
(@@J K
token@@K P
,@@P Q
x@@R S
=>@@T V
x@@W X
.@@X Y
LoanAcc@@Y `
==@@a c
accountNumber@@d q
&&@@r t
x@@u v
.@@v w
IsActive@@w 
==
@@Ä Ç
true
@@É á
&&
@@à ä
x
@@ã å
.
@@å ç
	IsDeleted
@@ç ñ
==
@@ó ô
false
@@ö ü
)
@@† °
.
@@° ¢
ConfigureAwait
@@¢ ∞
(
@@∞ ±
false
@@± ∂
)
@@∂ ∑
;
@@∑ ∏
varBB 
securityDataBB 
=BB 
awaitBB $
_secruityrefNoBB% 3
.BB3 4)
FindByMatchingPropertiesAsyncBB4 Q
(BBQ R
tokenBBR W
,BBW X
xBBY Z
=>BB[ ]
xBB^ _
.BB_ `
LoanAccBB` g
==BBh j
accountNumberBBk x
&&BBy {
xBB| }
.BB} ~
IsActive	BB~ Ü
==
BBá â
true
BBä é
&&
BBè ë
x
BBí ì
.
BBì î
	IsDeleted
BBî ù
==
BBû †
false
BB° ¶
)
BBß ®
.
BB® ©
ConfigureAwait
BB© ∑
(
BB∑ ∏
false
BB∏ Ω
)
BBΩ æ
;
BBæ ø
varDD 
resultDD 
=DD 
dataDD 
.DD 
JoinDD "
(DD" #
securityDataDD# /
,DD/ 0
dEE 
=>EE 
dEE 
.EE 

SecurityCdEE !
,EE! "
secFF 
=>FF 
secFF 
.FF 

SecurityCdFF %
,FF% &
(GG 
dGG 
,GG 
secGG 
)GG 
=>GG 
newGG !
IdmSecurityDetailsDTOGG  5
{HH  
TblSecurityRefnoMastII (
=II) *
_mapperII+ 2
.II2 3
MapII3 6
<II6 7
SecurityMasterDTOII7 H
>IIH I
(III J
secIIJ M
)IIM N
,IIN O
SecurityValueJJ !
=JJ! "
dJJ# $
.JJ$ %
SecurityValueJJ% 2
,JJ2 3
IdmDeedDetIdKK  
=KK  !
dKK! "
.KK" #
IdmDeedDetIdKK# /
,KK/ 0
DeedNoLL 
=LL 
dLL 
.LL 
DeedNoLL #
,LL# $
ExecutionDateMM !
=MM! "
dMM" #
.MM# $
ExecutionDateMM$ 1
,MM1 2
LoanAccNN 
=NN 
dNN 
.NN 
LoanAccNN %
,NN% &
LoanSubOO 
=OO 
dOO 
.OO 
LoanSubOO %
,OO% &
OffcCdPP 
=PP 
dPP 
.PP 
OffcCdPP #
,PP# $
DeedDescQQ 
=QQ 
dQQ 
.QQ 
DeedDescQQ '
,QQ' (

SecurityCdRR 
=RR 
dRR  
.RR  !

SecurityCdRR! +
,RR+ ,
SubregistrarCdSS "
=SS" #
dSS# $
.SS$ %
SubregistrarCdSS% 3
,SS3 4
IsActiveTT 
=TT 
dTT 
.TT 
IsActiveTT '
,TT' (
	IsDeletedUU 
=UU 
dUU 
.UU  
	IsDeletedUU  )
}VV 
)VV 
.VV 
ToListVV 
(VV 
)VV 
;VV 
returnXX 
_mapperXX 
.XX 
MapXX 
<XX 
ListXX #
<XX# $!
IdmSecurityDetailsDTOXX$ 9
>XX9 :
>XX: ;
(XX; <
resultXX< B
)XXB C
;XXC D
}YY 	
public[[ 
async[[ 
Task[[ 
<[[ 
bool[[ 
>[[ )
UpdatePrimaryCollateralDetail[[  =
([[= >!
IdmSecurityDetailsDTO[[> S 
lDSecurityDetailsDTO[[T h
,[[h i
CancellationToken[[j {
token	[[| Å
)
[[Å Ç
{\\ 	
var]] 
currentDetails]] 
=]]  
await]]! &
_deedRepository]]' 6
.]]6 7+
FirstOrDefaultByExpressionAsync]]7 V
(]]V W
x]]W X
=>]]Y [
x]]\ ]
.]]] ^
IdmDeedDetId]]^ j
==]]k m!
lDSecurityDetailsDTO	]]n Ç
.
]]Ç É
IdmDeedDetId
]]É è
&&
]]ê í
x
]]ì î
.
]]î ï
IsActive
]]ï ù
==
]]û †
true
]]° •
&&
]]¶ ®
x
]]© ™
.
]]™ ´
	IsDeleted
]]´ ¥
==
]]µ ∑
false
]]∏ Ω
,
]]Ω æ
token
]]ø ƒ
)
]]ƒ ≈
;
]]≈ ∆
if^^ 
(^^ 
currentDetails^^ 
!=^^ !
null^^" &
)^^& '
{__ 
currentDetails`` 
.`` 
	IsDeleted`` (
=``) *
true``+ /
;``/ 0
currentDetailsaa 
.aa 
IsActiveaa '
=aa( )
falseaa* /
;aa/ 0
awaitbb 
_deedRepositorybb %
.bb% &
UpdateAsyncbb& 1
(bb1 2
currentDetailsbb2 @
,bb@ A
tokenbbB G
)bbG H
.bbH I
ConfigureAwaitbbI W
(bbW X
falsebbX ]
)bb] ^
;bb^ _
}cc 
varee 
basicDetailsee 
=ee 
_mapperee &
.ee& '
Mapee' *
<ee* +
TblIdmDeedDetee+ 8
>ee8 9
(ee9 : 
lDSecurityDetailsDTOee: N
)eeN O
;eeO P
basicDetailsff 
.ff 
IdmDeedDetIdff %
=ff& '
$numff( )
;ff) *
basicDetailsgg 
.gg 
IsActivegg !
=gg" #
truegg$ (
;gg( )
basicDetailshh 
.hh 
	IsDeletedhh "
=hh# $
falsehh% *
;hh* +
basicDetailsii 
.ii 
CreatedDateii $
=ii% &
DateTimeii' /
.ii/ 0
UtcNowii0 6
;ii6 7
varkk 
responsekk 
=kk 
awaitkk  
_deedRepositorykk! 0
.kk0 1
AddAsynckk1 9
(kk9 :
basicDetailskk: F
,kkF G
tokenkkH M
)kkM N
.kkN O
ConfigureAwaitkkO ]
(kk] ^
falsekk^ c
)kkc d
;kkd e
awaitmm 
_workmm 
.mm 
CommitAsyncmm #
(mm# $
tokenmm$ )
)mm) *
.mm* +
ConfigureAwaitmm+ 9
(mm9 :
falsemm: ?
)mm? @
;mm@ A
ifnn 
(nn 
responsenn 
!=nn 
nullnn 
)nn 
{oo 
returnpp 
truepp 
;pp 
}qq 
elserr 
{ss 
returntt 
falsett 
;tt 
}uu 
}vv 	
public 
async 
Task 
< 
IEnumerable %
<% &
HypoAssetDetailDTO& 8
>8 9
>9 :$
GetAllHypothecationAsync; S
(S T
longT X
accountNumberY f
,f g
CancellationTokenh y
tokenz 
)	 Ä
{
ÄÄ 	
var
ÅÅ 
Hypo
ÅÅ 
=
ÅÅ 
await
ÅÅ 
_hypothRepository
ÅÅ .
.
ÅÅ. /#
FindByExpressionAsync
ÅÅ/ D
(
ÅÅD E
x
ÅÅE F
=>
ÅÅG I
x
ÅÅJ K
.
ÅÅK L
LoanAcc
ÅÅL S
==
ÅÅT V
accountNumber
ÅÅW d
&&
ÅÅe g
x
ÅÅh i
.
ÅÅi j
IsActive
ÅÅj r
==
ÅÅs u
true
ÅÅv z
&&
ÅÅ{ }
x
ÅÅ~ 
.ÅÅ Ä
	IsDeletedÅÅÄ â
==ÅÅä å
falseÅÅç í
,ÅÅí ì
tokenÅÅî ô
)ÅÅô ö
;ÅÅö õ
var
ÇÇ 
assetRef
ÇÇ 
=
ÇÇ 
await
ÇÇ  
_assetRefDet
ÇÇ! -
.
ÇÇ- .#
FindByExpressionAsync
ÇÇ. C
(
ÇÇC D
x
ÇÇD E
=>
ÇÇF H
x
ÇÇI J
.
ÇÇJ K
IsActive
ÇÇK S
==
ÇÇT V
true
ÇÇW [
&&
ÇÇ\ ^
x
ÇÇ_ `
.
ÇÇ` a
	IsDeleted
ÇÇa j
==
ÇÇk m
false
ÇÇn s
,
ÇÇs t
token
ÇÇu z
)
ÇÇz {
;
ÇÇ{ |
var
ÉÉ 
	assetType
ÉÉ 
=
ÉÉ 
await
ÉÉ !

_assetType
ÉÉ" ,
.
ÉÉ, -#
FindByExpressionAsync
ÉÉ- B
(
ÉÉB C
x
ÉÉC D
=>
ÉÉE G
x
ÉÉH I
.
ÉÉI J
IsActive
ÉÉJ R
==
ÉÉS U
true
ÉÉV Z
&&
ÉÉ[ ]
x
ÉÉ^ _
.
ÉÉ_ `
	IsDeleted
ÉÉ` i
==
ÉÉj l
false
ÉÉm r
,
ÉÉr s
token
ÉÉt y
)
ÉÉy z
;
ÉÉz {
var
ÖÖ 
data
ÖÖ 
=
ÖÖ 
Hypo
ÖÖ 
.
ÖÖ 
Join
ÖÖ  
(
ÖÖ  !
assetRef
ÖÖ! )
,
ÖÖ) *
hyp
ÜÜ 
=>
ÜÜ 
hyp
ÜÜ 
.
ÜÜ 
AssetCd
ÜÜ "
,
ÜÜ" #
asset
áá 
=>
áá 
asset
áá 
.
áá 
AssetCd
áá &
,
áá& '
(
àà 
hyp
àà 
,
àà 
asset
àà 
)
àà 
=>
àà 
new
àà  #
{
ââ 
IdmHypothDetId
ää "
=
ää# $
hyp
ää% (
.
ää( )
IdmHypothDetId
ää) 7
,
ää7 8
LoanSub
ãã 
=
ãã 
hyp
ãã !
.
ãã! "
LoanSub
ãã" )
,
ãã) *
AssetCd
åå 
=
åå 
hyp
åå !
.
åå! "
AssetCd
åå" )
,
åå) *
OffcCd
çç 
=
çç 
hyp
çç  
.
çç  !
OffcCd
çç! '
,
çç' (
AssetOthDetails
éé #
=
éé$ %
asset
éé& +
.
éé+ ,
AssetOthDetails
éé, ;
,
éé; <
AssetDetails
èè  
=
èè! "
asset
èè# (
.
èè( )
AssetDetails
èè) 5
,
èè5 6
AssetTypeCd
êê 
=
êê  !
asset
êê" '
.
êê' (

AssetypeCd
êê( 2
,
êê2 3
AssetValuehypo
ëë "
=
ëë# $
asset
ëë% *
.
ëë* +

AssetValue
ëë+ 5
,
ëë5 6
HypothNo
íí 
=
íí 
hyp
íí "
.
íí" #
HypothNo
íí# +
,
íí+ ,

HypothDesc
ìì 
=
ìì  
hyp
ìì! $
.
ìì$ %

HypothDesc
ìì% /
,
ìì/ 0

AssetValue
îî 
=
îî  
hyp
îî! $
.
îî$ %

AssetValue
îî% /
,
îî/ 0
ExecutionDate
ïï !
=
ïï" #
hyp
ïï$ '
.
ïï' (
ExecutionDate
ïï( 5
,
ïï5 6
LoanAcc
ññ 
=
ññ 
hyp
ññ !
.
ññ! "
LoanAcc
ññ" )
,
ññ) *
IsActive
óó 
=
óó 
hyp
óó "
.
óó" #
IsActive
óó# +
,
óó+ ,
	IsDeleted
òò 
=
òò 
hyp
òò  #
.
òò# $
	IsDeleted
òò$ -
,
òò- .
CreatedDate
ôô 
=
ôô  !
hyp
ôô" %
.
ôô% &
CreatedDate
ôô& 1
,
ôô1 2
ModifiedDate
öö  
=
öö! "
hyp
öö# &
.
öö& '
ModifiedDate
öö' 3
,
öö3 4
}
õõ 
)
õõ 
.
õõ 
Join
õõ 
(
õõ 
	assetType
õõ !
,
õõ! "
hypo
úú 
=>
úú 
hypo
úú 
.
úú 
AssetTypeCd
úú (
,
úú( )
asstType
ùù 
=>
ùù 
asstType
ùù $
.
ùù$ %
AssettypeCd
ùù% 0
,
ùù0 1
(
ûû 
hypo
ûû 
,
ûû 
asstType
ûû 
)
ûû  
=>
ûû! #
new
ûû$ '
{
üü 
IdmHypothDetId
†† "
=
††# $
hypo
††% )
.
††) *
IdmHypothDetId
††* 8
,
††8 9
AssetOthDetails
°° #
=
°°$ %
hypo
°°& *
.
°°* +
AssetOthDetails
°°+ :
,
°°: ;
AssetDetails
¢¢  
=
¢¢! "
hypo
¢¢# '
.
¢¢' (
AssetDetails
¢¢( 4
,
¢¢4 5
LoanSub
££ 
=
££ 
hypo
££ "
.
££" #
LoanSub
££# *
,
££* +
AssetCd
§§ 
=
§§ 
hypo
§§ "
.
§§" #
AssetCd
§§# *
,
§§* +
OffcCd
•• 
=
•• 
hypo
•• !
.
••! "
OffcCd
••" (
,
••( )
AssetTypeCd
¶¶ 
=
¶¶  !
asstType
¶¶" *
.
¶¶* +
AssettypeCd
¶¶+ 6
,
¶¶6 7
HypothNo
ßß 
=
ßß 
hypo
ßß #
.
ßß# $
HypothNo
ßß$ ,
,
ßß, -

HypothDesc
®® 
=
®®  
hypo
®®! %
.
®®% &

HypothDesc
®®& 0
,
®®0 1

AssetValue
©© 
=
©©  
hypo
©©! %
.
©©% &

AssetValue
©©& 0
,
©©0 1
AssetValuehypo
™™ "
=
™™# $
hypo
™™% )
.
™™) *
AssetValuehypo
™™* 8
,
™™8 9
ExecutionDate
´´ !
=
´´" #
hypo
´´$ (
.
´´( )
ExecutionDate
´´) 6
,
´´6 7
LoanAcc
¨¨ 
=
¨¨ 
hypo
¨¨ "
.
¨¨" #
LoanAcc
¨¨# *
,
¨¨* +
AssetTypeDets
≠≠ !
=
≠≠" #
asstType
≠≠$ ,
.
≠≠, -
AssettypeDets
≠≠- :
,
≠≠: ;
IsActive
ÆÆ 
=
ÆÆ 
hypo
ÆÆ #
.
ÆÆ# $
IsActive
ÆÆ$ ,
,
ÆÆ, -
	IsDeleted
ØØ 
=
ØØ 
hypo
ØØ  $
.
ØØ$ %
	IsDeleted
ØØ% .
,
ØØ. /
CreatedDate
∞∞ 
=
∞∞  !
hypo
∞∞" &
.
∞∞& '
CreatedDate
∞∞' 2
,
∞∞2 3
ModifiedDate
±±  
=
±±! "
hypo
±±# '
.
±±' (
ModifiedDate
±±( 4
,
±±4 5
}
≤≤ 
)
≤≤ 
.
≤≤ 
ToList
≤≤ 
(
≤≤ 
)
≤≤ 
;
≤≤ 
var
¥¥ 
result
¥¥ 
=
¥¥ 
new
¥¥ 
List
¥¥ !
<
¥¥! " 
HypoAssetDetailDTO
¥¥" 4
>
¥¥4 5
(
¥¥5 6
)
¥¥6 7
;
¥¥7 8
if
µµ 
(
µµ 
data
µµ 
.
µµ 
Count
µµ 
>
µµ 
$num
µµ 
)
µµ 
{
∂∂ 
foreach
∑∑ 
(
∑∑ 
var
∑∑ 
i
∑∑ 
in
∑∑ !
data
∑∑" &
)
∑∑& '
{
∏∏ 
result
ππ 
.
ππ 
Add
ππ 
(
ππ 
new
ππ " 
HypoAssetDetailDTO
ππ# 5
(
ππ5 6
)
ππ6 7
{
∫∫ 
IdmHypothDetId
ªª &
=
ªª' (
i
ªª) *
.
ªª* +
IdmHypothDetId
ªª+ 9
,
ªª9 :
LoanSub
ºº 
=
ºº  !
i
ºº" #
.
ºº# $
LoanSub
ºº$ +
,
ºº+ ,
AssetCd
ΩΩ 
=
ΩΩ  !
i
ΩΩ" #
.
ΩΩ# $
AssetCd
ΩΩ$ +
,
ΩΩ+ ,
OffcCd
ææ 
=
ææ  
i
ææ! "
.
ææ" #
OffcCd
ææ# )
,
ææ) *
AssetTypeCd
øø #
=
øø$ %
i
øø& '
.
øø' (
AssetTypeCd
øø( 3
,
øø3 4
HypothNo
¿¿  
=
¿¿! "
i
¿¿# $
.
¿¿$ %
HypothNo
¿¿% -
,
¿¿- .

HypothDesc
¡¡ "
=
¡¡# $
i
¡¡% &
.
¡¡& '

HypothDesc
¡¡' 1
,
¡¡1 2

AssetValue
¬¬ "
=
¬¬# $
i
¬¬% &
.
¬¬& '

AssetValue
¬¬' 1
,
¬¬1 2
ExecutionDate
√√ %
=
√√& '
i
√√( )
.
√√) *
ExecutionDate
√√* 7
,
√√7 8
LoanAcc
ƒƒ 
=
ƒƒ  !
i
ƒƒ" #
.
ƒƒ# $
LoanAcc
ƒƒ$ +
,
ƒƒ+ ,
AssetValuehypo
≈≈ &
=
≈≈' (
i
≈≈) *
.
≈≈* +
AssetValuehypo
≈≈+ 9
,
≈≈9 :
AssetOthDetails
∆∆ '
=
∆∆( )
i
∆∆* +
.
∆∆+ ,
AssetOthDetails
∆∆, ;
,
∆∆; <
AssetDetails
«« $
=
««% &
i
««' (
.
««( )
AssetDetails
««) 5
,
««5 6
AssetTypeDets
»» %
=
»»& '
i
»»( )
.
»») *
AssetTypeDets
»»* 7
,
»»7 8
IsActive
……  
=
……  !
i
……! "
.
……" #
IsActive
……# +
,
……+ ,
	IsDeleted
   !
=
  ! "
i
  # $
.
  $ %
	IsDeleted
  % .
,
  . /
CreatedDate
ÀÀ #
=
ÀÀ$ %
i
ÀÀ& '
.
ÀÀ' (
CreatedDate
ÀÀ( 3
,
ÀÀ3 4
ModifiedDate
ÃÃ $
=
ÃÃ% &
i
ÃÃ' (
.
ÃÃ( )
ModifiedDate
ÃÃ) 5
,
ÃÃ5 6
}
ÕÕ 
)
ÕÕ 
;
ÕÕ 
}
œœ 
}
–– 
return
—— 
result
—— 
;
—— 
}
““ 	
public
‘‘ 
async
‘‘ 
Task
‘‘ 
<
‘‘ 
IEnumerable
‘‘ %
<
‘‘% &"
AssetRefnoDetailsDTO
‘‘& :
>
‘‘: ;
>
‘‘; <%
GetAllAssetRefListAsync
‘‘= T
(
‘‘T U
long
‘‘U Y
accountNumber
‘‘Z g
,
‘‘g h
CancellationToken
‘‘i z
token‘‘{ Ä
)‘‘Ä Å
{
’’ 	
var
÷÷ 
assetRef
÷÷ 
=
÷÷ 
await
÷÷  
_assetRefDet
÷÷! -
.
÷÷- .+
FindByMatchingPropertiesAsync
÷÷. K
(
÷÷K L
token
÷÷L Q
,
÷÷Q R
x
÷÷R S
=>
÷÷T V
x
÷÷W X
.
÷÷X Y
LoanAcc
÷÷Y `
==
÷÷a c
accountNumber
÷÷d q
&&
÷÷r t
x
÷÷u v
.
÷÷v w
IsActive
÷÷w 
==÷÷Ä Ç
true÷÷É á
&&÷÷à ä
x÷÷ã å
.÷÷å ç
	IsDeleted÷÷ç ñ
==÷÷ó ô
false÷÷ö ü
,÷÷ü †
hypodet
◊◊ 
=>
◊◊ 
hypodet
◊◊ "
.
◊◊" #
TblIdmHypothDet
◊◊# 2
.
◊◊2 3
Where
◊◊3 8
(
◊◊8 9
x
◊◊9 :
=>
◊◊: <
x
◊◊< =
.
◊◊= >
IsActive
◊◊> F
==
◊◊F H
true
◊◊H L
&&
◊◊M O
x
◊◊P Q
.
◊◊Q R
	IsDeleted
◊◊R [
==
◊◊[ ]
false
◊◊] b
)
◊◊b c
)
ÿÿ 
.
ÿÿ 
ConfigureAwait
ÿÿ  
(
ÿÿ  !
false
ÿÿ! &
)
ÿÿ& '
;
ÿÿ' (
return
ŸŸ 
_mapper
ŸŸ 
.
ŸŸ 
Map
ŸŸ 
<
ŸŸ 
List
ŸŸ #
<
ŸŸ# $"
AssetRefnoDetailsDTO
ŸŸ$ 8
>
ŸŸ8 9
>
ŸŸ9 :
(
ŸŸ: ;
assetRef
ŸŸ; C
)
ŸŸC D
;
ŸŸD E
}
⁄⁄ 	
public
‹‹ 
async
‹‹ 
Task
‹‹ 
<
‹‹ 
bool
‹‹ 
>
‹‹ *
UpdateLDHypothecationDetails
‹‹  <
(
‹‹< ="
IdmHypotheDetailsDTO
‹‹= Q!
lDHypotheDetailsDTO
‹‹R e
,
‹‹e f
CancellationToken
‹‹g x
token
‹‹y ~
)
‹‹~ 
{
›› 	
var
ﬁﬁ 
currentDetails
ﬁﬁ 
=
ﬁﬁ  
await
ﬁﬁ! &
_hypothRepository
ﬁﬁ' 8
.
ﬁﬁ8 9-
FirstOrDefaultByExpressionAsync
ﬁﬁ9 X
(
ﬁﬁX Y
x
ﬁﬁY Z
=>
ﬁﬁ[ ]
x
ﬁﬁ^ _
.
ﬁﬁ_ `
IdmHypothDetId
ﬁﬁ` n
==
ﬁﬁo q"
lDHypotheDetailsDTOﬁﬁr Ö
.ﬁﬁÖ Ü
IdmHypothDetIdﬁﬁÜ î
&&ﬁﬁï ó
xﬁﬁò ô
.ﬁﬁô ö
IsActiveﬁﬁö ¢
==ﬁﬁ£ •
trueﬁﬁ¶ ™
,ﬁﬁ™ ´
tokenﬁﬁ¨ ±
)ﬁﬁ± ≤
;ﬁﬁ≤ ≥
if
ﬂﬂ 
(
ﬂﬂ 
currentDetails
ﬂﬂ 
!=
ﬂﬂ !
null
ﬂﬂ" &
)
ﬂﬂ& '
{
‡‡ 
currentDetails
·· 
.
·· 
	IsDeleted
·· (
=
··) *
true
··+ /
;
··/ 0
currentDetails
‚‚ 
.
‚‚ 
IsActive
‚‚ '
=
‚‚( )
false
‚‚* /
;
‚‚/ 0
currentDetails
„„ 
.
„„ 

ModifiedBy
„„ )
=
„„* +
	_userInfo
„„, 5
.
„„5 6
Name
„„6 :
;
„„: ;
currentDetails
‰‰ 
.
‰‰ 
ModifiedDate
‰‰ +
=
‰‰, -
DateTime
‰‰. 6
.
‰‰6 7
UtcNow
‰‰7 =
;
‰‰= >
await
ÂÂ 
_hypothRepository
ÂÂ '
.
ÂÂ' (
UpdateAsync
ÂÂ( 3
(
ÂÂ3 4
currentDetails
ÂÂ4 B
,
ÂÂB C
token
ÂÂD I
)
ÂÂI J
.
ÂÂJ K
ConfigureAwait
ÂÂK Y
(
ÂÂY Z
false
ÂÂZ _
)
ÂÂ_ `
;
ÂÂ` a
}
ÊÊ 
var
ËË 
basicDetails
ËË 
=
ËË 
_mapper
ËË &
.
ËË& '
Map
ËË' *
<
ËË* +
TblIdmHypothDet
ËË+ :
>
ËË: ;
(
ËË; <!
lDHypotheDetailsDTO
ËË< O
)
ËËO P
;
ËËP Q
basicDetails
ÍÍ 
.
ÍÍ 
IsActive
ÍÍ !
=
ÍÍ" #
true
ÍÍ$ (
;
ÍÍ( )
basicDetails
ÎÎ 
.
ÎÎ 
	IsDeleted
ÎÎ "
=
ÎÎ# $
false
ÎÎ% *
;
ÎÎ* +
basicDetails
ÏÏ 
.
ÏÏ 
CreateBy
ÏÏ !
=
ÏÏ" #
	_userInfo
ÏÏ$ -
.
ÏÏ- .
Name
ÏÏ. 2
;
ÏÏ2 3
basicDetails
ÌÌ 
.
ÌÌ 

ModifiedBy
ÌÌ #
=
ÌÌ$ %
	_userInfo
ÌÌ& /
.
ÌÌ/ 0
Name
ÌÌ0 4
;
ÌÌ4 5
basicDetails
ÓÓ 
.
ÓÓ 
CreatedDate
ÓÓ $
=
ÓÓ% &
DateTime
ÓÓ' /
.
ÓÓ/ 0
UtcNow
ÓÓ0 6
;
ÓÓ6 7
basicDetails
ÔÔ 
.
ÔÔ 
ModifiedDate
ÔÔ %
=
ÔÔ& '
DateTime
ÔÔ( 0
.
ÔÔ0 1
UtcNow
ÔÔ1 7
;
ÔÔ7 8
var
ÒÒ 
response
ÒÒ 
=
ÒÒ 
await
ÒÒ  
_hypothRepository
ÒÒ! 2
.
ÒÒ2 3
AddAsync
ÒÒ3 ;
(
ÒÒ; <
basicDetails
ÒÒ< H
,
ÒÒH I
token
ÒÒJ O
)
ÒÒO P
.
ÒÒP Q
ConfigureAwait
ÒÒQ _
(
ÒÒ_ `
false
ÒÒ` e
)
ÒÒe f
;
ÒÒf g
await
ÚÚ 
_work
ÚÚ 
.
ÚÚ 
CommitAsync
ÚÚ #
(
ÚÚ# $
token
ÚÚ$ )
)
ÚÚ) *
.
ÚÚ* +
ConfigureAwait
ÚÚ+ 9
(
ÚÚ9 :
false
ÚÚ: ?
)
ÚÚ? @
;
ÚÚ@ A
if
ÛÛ 
(
ÛÛ 
response
ÛÛ 
!=
ÛÛ 
null
ÛÛ  
)
ÛÛ  !
{
ÙÙ 
return
ıı 
true
ıı 
;
ıı 
}
ˆˆ 
else
˜˜ 
{
¯¯ 
return
˘˘ 
false
˘˘ 
;
˘˘ 
}
˙˙ 
}
˚˚ 	
public
˝˝ 
async
˝˝ 
Task
˝˝ 
<
˝˝ 
bool
˝˝ 
>
˝˝ (
DeleteHypothecationDetails
˝˝  :
(
˝˝: ;"
IdmHypotheDetailsDTO
˝˝; O!
lDHypotheDetailsDTO
˝˝P c
,
˝˝c d
CancellationToken
˝˝e v
token
˝˝w |
)
˝˝| }
{
˛˛ 	
var
ˇˇ 
basicDetails
ˇˇ 
=
ˇˇ 
_mapper
ˇˇ &
.
ˇˇ& '
Map
ˇˇ' *
<
ˇˇ* +
TblIdmHypothDet
ˇˇ+ :
>
ˇˇ: ;
(
ˇˇ; <!
lDHypotheDetailsDTO
ˇˇ< O
)
ˇˇO P
;
ˇˇP Q
basicDetails
ÄÄ 
.
ÄÄ 
IsActive
ÄÄ !
=
ÄÄ" #
false
ÄÄ$ )
;
ÄÄ) *
basicDetails
ÅÅ 
.
ÅÅ 
	IsDeleted
ÅÅ "
=
ÅÅ# $
true
ÅÅ% )
;
ÅÅ) *
basicDetails
ÇÇ 
.
ÇÇ 

ModifiedBy
ÇÇ #
=
ÇÇ$ %
	_userInfo
ÇÇ& /
.
ÇÇ/ 0
Name
ÇÇ0 4
;
ÇÇ4 5
basicDetails
ÉÉ 
.
ÉÉ 
ModifiedDate
ÉÉ %
=
ÉÉ& '
DateTime
ÉÉ( 0
.
ÉÉ0 1
UtcNow
ÉÉ1 7
;
ÉÉ7 8
var
ÑÑ 
result
ÑÑ 
=
ÑÑ 
await
ÑÑ 
_hypothRepository
ÑÑ 0
.
ÑÑ0 1
UpdateAsync
ÑÑ1 <
(
ÑÑ< =
basicDetails
ÑÑ= I
,
ÑÑI J
token
ÑÑK P
)
ÑÑP Q
.
ÑÑQ R
ConfigureAwait
ÑÑR `
(
ÑÑ` a
false
ÑÑa f
)
ÑÑf g
;
ÑÑg h
await
ÖÖ 
_work
ÖÖ 
.
ÖÖ 
CommitAsync
ÖÖ #
(
ÖÖ# $
token
ÖÖ$ )
)
ÖÖ) *
.
ÖÖ* +
ConfigureAwait
ÖÖ+ 9
(
ÖÖ9 :
false
ÖÖ: ?
)
ÖÖ? @
;
ÖÖ@ A
if
ÜÜ 
(
ÜÜ 
result
ÜÜ 
!=
ÜÜ 
null
ÜÜ 
)
ÜÜ 
{
áá 
return
àà 
true
àà 
;
àà 
}
ââ 
else
ää 
{
ãã 
return
åå 
false
åå 
;
åå 
}
çç 
}
éé 	
public
êê 
async
êê 
Task
êê 
<
êê 
bool
êê 
>
êê *
CreateLDHypothecationDetails
êê  <
(
êê< ="
IdmHypotheDetailsDTO
êê= Q!
lDHypotheDetailsDTO
êêR e
,
êêe f
CancellationToken
êêg x
token
êêy ~
)
êê~ 
{
ëë 	
var
íí 
currentDetails
íí 
=
íí  
await
íí! &
_hypothRepository
íí' 8
.
íí8 9-
FirstOrDefaultByExpressionAsync
íí9 X
(
ííX Y
x
ííY Z
=>
íí[ ]
x
íí^ _
.
íí_ `
AssetCd
íí` g
==
ííh j!
lDHypotheDetailsDTO
íík ~
.
íí~ 
AssetCdíí Ü
&&ííá â
xííä ã
.ííã å
IsActiveííå î
==ííï ó
trueííò ú
&&ííù ü
xíí† °
.íí° ¢
	IsDeletedíí¢ ´
==íí¨ Æ
falseííØ ¥
,íí¥ µ
tokeníí∂ ª
)ííª º
;ííº Ω
if
îî 
(
îî 
currentDetails
îî 
!=
îî !
null
îî" &
)
îî& '
{
ïï 
currentDetails
ññ 
.
ññ 
IsActive
ññ '
=
ññ( )
false
ññ* /
;
ññ/ 0
currentDetails
óó 
.
óó 
	IsDeleted
óó (
=
óó) *
true
óó+ /
;
óó/ 0
currentDetails
òò 
.
òò 

ModifiedBy
òò )
=
òò* +
	_userInfo
òò, 5
.
òò5 6
Name
òò6 :
;
òò: ;
currentDetails
ôô 
.
ôô 
ModifiedDate
ôô +
=
ôô, -
DateTime
ôô. 6
.
ôô6 7
UtcNow
ôô7 =
;
ôô= >
await
öö 
_hypothRepository
öö '
.
öö' (
UpdateAsync
öö( 3
(
öö3 4
currentDetails
öö4 B
,
ööB C
token
ööD I
)
ööI J
.
ööJ K
ConfigureAwait
ööK Y
(
ööY Z
false
ööZ _
)
öö_ `
;
öö` a
var
úú 
basicDetails1
úú !
=
úú" #
_mapper
úú$ +
.
úú+ ,
Map
úú, /
<
úú/ 0
TblIdmHypothDet
úú0 ?
>
úú? @
(
úú@ A!
lDHypotheDetailsDTO
úúA T
)
úúT U
;
úúU V
basicDetails1
ûû 
.
ûû 
IsActive
ûû &
=
ûû' (
true
ûû) -
;
ûû- .
basicDetails1
üü 
.
üü 
	IsDeleted
üü '
=
üü( )
false
üü* /
;
üü/ 0
basicDetails1
†† 
.
†† 
CreateBy
†† &
=
††' (
	_userInfo
††) 2
.
††2 3
Name
††3 7
;
††7 8
basicDetails1
°° 
.
°° 

ModifiedBy
°° (
=
°°) *
	_userInfo
°°+ 4
.
°°4 5
Name
°°5 9
;
°°9 :
basicDetails1
¢¢ 
.
¢¢ 
CreatedDate
¢¢ )
=
¢¢* +
DateTime
¢¢, 4
.
¢¢4 5
UtcNow
¢¢5 ;
;
¢¢; <
basicDetails1
££ 
.
££ 
ModifiedDate
££ *
=
££+ ,
DateTime
££- 5
.
££5 6
UtcNow
££6 <
;
££< =
var
•• 
	response1
•• 
=
•• 
await
••  %
_hypothRepository
••& 7
.
••7 8
AddAsync
••8 @
(
••@ A
basicDetails1
••A N
,
••N O
token
••P U
)
••U V
.
••V W
ConfigureAwait
••W e
(
••e f
false
••f k
)
••k l
;
••l m
await
¶¶ 
_work
¶¶ 
.
¶¶ 
CommitAsync
¶¶ '
(
¶¶' (
token
¶¶( -
)
¶¶- .
.
¶¶. /
ConfigureAwait
¶¶/ =
(
¶¶= >
false
¶¶> C
)
¶¶C D
;
¶¶D E
if
ßß 
(
ßß 
	response1
ßß 
!=
ßß  
null
ßß! %
)
ßß% &
{
®® 
return
©© 
true
©© 
;
©©  
}
™™ 
else
´´ 
{
¨¨ 
return
≠≠ 
false
≠≠  
;
≠≠  !
}
ÆÆ 
}
ØØ 
else
∞∞ 
{
±± 
var
≥≥ 
basicDetails
≥≥  
=
≥≥! "
_mapper
≥≥# *
.
≥≥* +
Map
≥≥+ .
<
≥≥. /
TblIdmHypothDet
≥≥/ >
>
≥≥> ?
(
≥≥? @!
lDHypotheDetailsDTO
≥≥@ S
)
≥≥S T
;
≥≥T U
basicDetails
¥¥ 
.
¥¥ 
IdmHypothDetId
¥¥ +
=
¥¥, -
$num
¥¥. /
;
¥¥/ 0
basicDetails
µµ 
.
µµ 
IsActive
µµ %
=
µµ& '
true
µµ( ,
;
µµ, -
basicDetails
∂∂ 
.
∂∂ 
	IsDeleted
∂∂ &
=
∂∂' (
false
∂∂) .
;
∂∂. /
basicDetails
∑∑ 
.
∑∑ 
CreateBy
∑∑ %
=
∑∑& '
	_userInfo
∑∑( 1
.
∑∑1 2
Name
∑∑2 6
;
∑∑6 7
basicDetails
∏∏ 
.
∏∏ 

ModifiedBy
∏∏ '
=
∏∏( )
	_userInfo
∏∏* 3
.
∏∏3 4
Name
∏∏4 8
;
∏∏8 9
basicDetails
ππ 
.
ππ 
CreatedDate
ππ (
=
ππ) *
DateTime
ππ+ 3
.
ππ3 4
UtcNow
ππ4 :
;
ππ: ;
basicDetails
∫∫ 
.
∫∫ 
ModifiedDate
∫∫ )
=
∫∫* +
DateTime
∫∫, 4
.
∫∫4 5
UtcNow
∫∫5 ;
;
∫∫; <
var
ºº 
response
ºº 
=
ºº 
await
ºº $
_hypothRepository
ºº% 6
.
ºº6 7
AddAsync
ºº7 ?
(
ºº? @
basicDetails
ºº@ L
,
ººL M
token
ººN S
)
ººS T
.
ººT U
ConfigureAwait
ººU c
(
ººc d
false
ººd i
)
ººi j
;
ººj k
await
ΩΩ 
_work
ΩΩ 
.
ΩΩ 
CommitAsync
ΩΩ '
(
ΩΩ' (
token
ΩΩ( -
)
ΩΩ- .
.
ΩΩ. /
ConfigureAwait
ΩΩ/ =
(
ΩΩ= >
false
ΩΩ> C
)
ΩΩC D
;
ΩΩD E
if
ææ 
(
ææ 
response
ææ 
!=
ææ 
null
ææ  $
)
ææ$ %
{
øø 
return
¿¿ 
true
¿¿ 
;
¿¿  
}
¡¡ 
else
¬¬ 
{
√√ 
return
ƒƒ 
false
ƒƒ  
;
ƒƒ  !
}
≈≈ 
}
∆∆ 
}
…… 	
public
““ 
async
““ 
Task
““ 
<
““ 
IEnumerable
““ %
<
““% &"
IdmSecurityChargeDTO
““& :
>
““: ;
>
““; <'
GetAllSecurityChargeAsync
““= V
(
““V W
long
““W [
accountNumber
““\ i
,
““i j
CancellationToken
““k |
token““} Ç
)““Ç É
{
”” 	
var
’’ 
data
’’ 
=
’’ 
await
’’ '
_securitychargeRepository
’’ 6
.
’’6 7+
FindByMatchingPropertiesAsync
’’7 T
(
’’T U
token
’’U Z
,
’’Z [
x
’’\ ]
=>
’’^ `
x
’’a b
.
’’b c
LoanAcc
’’c j
==
’’k m
accountNumber
’’n {
&&
’’| ~
x’’ Ä
.’’Ä Å
IsActive’’Å â
==’’ä å
true’’ç ë
&&’’í î
x’’ï ñ
.’’ñ ó
	IsDeleted’’ó †
==’’° £
false’’§ ©
&&’’™ ¨
x’’≠ Æ
.’’Æ Ø$
TblSecurityRefnoMast’’Ø √
.’’√ ƒ
WhCharge’’ƒ Ã
==’’Õ œ
true’’– ‘
,’’’ ÷

inSecRefno
÷÷ !
=>
÷÷" $

inSecRefno
÷÷% /
.
÷÷/ 0"
TblSecurityRefnoMast
÷÷0 D
,
÷÷D E
Securitytype
÷÷F R
=>
÷÷S U
Securitytype
÷÷V b
.
÷÷b c"
TblSecurityRefnoMast
÷÷c w
.
÷÷w x
TblSecCdtab÷÷x É
,÷÷É Ñ
secf÷÷Ö â
=>÷÷ä å
secf÷÷ç ë
.÷÷ë í$
TblSecurityRefnoMast÷÷í ¶
.÷÷¶ ß
TblPjsecCdtab÷÷ß ¥
,÷÷¥ µ
ifsc÷÷∂ ∫
=>÷÷ª Ω
ifsc÷÷æ ¬
.÷÷¬ √
TbIIfscMaster÷÷√ –
)÷÷– —
.÷÷— “
ConfigureAwait÷÷“ ‡
(÷÷‡ ·
false÷÷· Ê
)÷÷Ê Á
;÷÷Á Ë
return
◊◊ 
_mapper
◊◊ 
.
◊◊ 
Map
◊◊ 
<
◊◊ 
List
◊◊ #
<
◊◊# $"
IdmSecurityChargeDTO
◊◊$ 8
>
◊◊8 9
>
◊◊9 :
(
◊◊: ;
data
◊◊; ?
)
◊◊? @
;
◊◊@ A
}
ÿÿ 	
public
ŸŸ 
async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 
bool
ŸŸ 
>
ŸŸ )
UpdateSecurityChargeDetails
ŸŸ  ;
(
ŸŸ; <"
IdmSecurityChargeDTO
ŸŸ< P"
lDSecurityDetailsDTO
ŸŸQ e
,
ŸŸe f
CancellationToken
ŸŸg x
token
ŸŸy ~
)
ŸŸ~ 
{
⁄⁄ 	
var
€€ 
currentDetails
€€ 
=
€€  
await
€€! &'
_securitychargeRepository
€€' @
.
€€@ A-
FirstOrDefaultByExpressionAsync
€€A `
(
€€` a
x
€€a b
=>
€€c e
x
€€f g
.
€€g h
IdmDsbChargeId
€€h v
==
€€w y#
lDSecurityDetailsDTO€€z é
.€€é è
IdmDsbChargeId€€è ù
,€€ù û
token€€ü §
)€€§ •
;€€• ¶
currentDetails
‹‹ 
.
‹‹ 
	IsDeleted
‹‹ $
=
‹‹% &
true
‹‹' +
;
‹‹+ ,
currentDetails
›› 
.
›› 

ModifiedBy
›› %
=
››& '
	_userInfo
››( 1
.
››1 2
Name
››2 6
;
››6 7
currentDetails
ﬁﬁ 
.
ﬁﬁ 
ModifiedDate
ﬁﬁ '
=
ﬁﬁ( )
DateTime
ﬁﬁ* 2
.
ﬁﬁ2 3
UtcNow
ﬁﬁ3 9
;
ﬁﬁ9 :
currentDetails
ﬂﬂ 
.
ﬂﬂ 
IsActive
ﬂﬂ #
=
ﬂﬂ$ %
false
ﬂﬂ& +
;
ﬂﬂ+ ,
await
·· '
_securitychargeRepository
·· +
.
··+ ,
UpdateAsync
··, 7
(
··7 8
currentDetails
··8 F
,
··F G
token
··H M
)
··M N
.
··N O
ConfigureAwait
··O ]
(
··] ^
false
··^ c
)
··c d
;
··d e
var
‰‰ 
basicDetails
‰‰ 
=
‰‰ 
_mapper
‰‰ &
.
‰‰& '
Map
‰‰' *
<
‰‰* +
TblIdmDsbCharge
‰‰+ :
>
‰‰: ;
(
‰‰; <"
lDSecurityDetailsDTO
‰‰< P
)
‰‰P Q
;
‰‰Q R
basicDetails
ÂÂ 
.
ÂÂ 
IdmDsbChargeId
ÂÂ '
=
ÂÂ( )
$num
ÂÂ* +
;
ÂÂ+ ,
basicDetails
ÊÊ 
.
ÊÊ 
IsActive
ÊÊ !
=
ÊÊ" #
true
ÊÊ$ (
;
ÊÊ( )
basicDetails
ÁÁ 
.
ÁÁ 
	IsDeleted
ÁÁ "
=
ÁÁ# $
false
ÁÁ% *
;
ÁÁ* +
basicDetails
ËË 
.
ËË 
CreateBy
ËË !
=
ËË" #
	_userInfo
ËË$ -
.
ËË- .
Name
ËË. 2
;
ËË2 3
basicDetails
ÈÈ 
.
ÈÈ 
CreatedDate
ÈÈ $
=
ÈÈ% &
DateTime
ÈÈ' /
.
ÈÈ/ 0
UtcNow
ÈÈ0 6
;
ÈÈ6 7
var
ÎÎ 
response
ÎÎ 
=
ÎÎ 
await
ÎÎ  '
_securitychargeRepository
ÎÎ! :
.
ÎÎ: ;
AddAsync
ÎÎ; C
(
ÎÎC D
basicDetails
ÎÎD P
,
ÎÎP Q
token
ÎÎR W
)
ÎÎW X
.
ÎÎX Y
ConfigureAwait
ÎÎY g
(
ÎÎg h
false
ÎÎh m
)
ÎÎm n
;
ÎÎn o
await
ÏÏ 
_work
ÏÏ 
.
ÏÏ 
CommitAsync
ÏÏ #
(
ÏÏ# $
token
ÏÏ$ )
)
ÏÏ) *
.
ÏÏ* +
ConfigureAwait
ÏÏ+ 9
(
ÏÏ9 :
false
ÏÏ: ?
)
ÏÏ? @
;
ÏÏ@ A
if
ÌÌ 
(
ÌÌ 
response
ÌÌ 
!=
ÌÌ 
null
ÌÌ  
)
ÌÌ  !
{
ÓÓ 
return
ÔÔ 
true
ÔÔ 
;
ÔÔ 
}
 
else
ÒÒ 
{
ÚÚ 
return
ÛÛ 
false
ÛÛ 
;
ÛÛ 
}
ÙÙ 
}
ıı 	
public
˝˝ 
async
˝˝ 
Task
˝˝ 
<
˝˝ 
IEnumerable
˝˝ %
<
˝˝% &$
IdmCersaiRegDetailsDTO
˝˝& <
>
˝˝< =
>
˝˝= >+
GetAllCERSAIRegistrationAsync
˝˝? \
(
˝˝\ ]
long
˝˝] a
accountNumber
˝˝b o
,
˝˝o p 
CancellationToken˝˝q Ç
token˝˝É à
)˝˝à â
{
˛˛ 	
var
ˇˇ 
data
ˇˇ 
=
ˇˇ 
await
ˇˇ +
_cersairegistrationRepository
ˇˇ :
.
ˇˇ: ;+
FindByMatchingPropertiesAsync
ˇˇ; X
(
ˇˇX Y
token
ˇˇY ^
,
ˇˇ^ _
x
ˇˇ` a
=>
ˇˇb d
x
ˇˇe f
.
ˇˇf g
LoanAcc
ˇˇg n
==
ˇˇo q
accountNumber
ˇˇr 
&&ˇˇÄ Ç
xˇˇÉ Ñ
.ˇˇÑ Ö
IsActiveˇˇÖ ç
==ˇˇé ê
trueˇˇë ï
&&ˇˇñ ò
xˇˇô ö
.ˇˇö õ
	IsDeletedˇˇõ §
==ˇˇ• ß
falseˇˇ® ≠
,ˇˇ≠ Æ
inAssetRefno
ÄÄ 
=>
ÄÄ 
inAssetRefno
ÄÄ  ,
.
ÄÄ, -
TblAssetRefnoDet
ÄÄ- =
,
ÄÄ= >
	Assettype
ÄÄ? H
=>
ÄÄI K
	Assettype
ÄÄL U
.
ÄÄU V
TblAssetRefnoDet
ÄÄV f
.
ÄÄf g
TblAssettypeCdtab
ÄÄg x
,
ÄÄx y
AssetcategoryÄÄz á
=>ÄÄà ä
AssetcategoryÄÄã ò
.ÄÄò ô 
TblAssetRefnoDetÄÄô ©
.ÄÄ© ™ 
TblAssetcatCdtabÄÄ™ ∫
)ÄÄ∫ ª
.ÄÄª º
ConfigureAwaitÄÄº  
(ÄÄ  À
falseÄÄÀ –
)ÄÄ– —
;ÄÄ— “
return
ÅÅ 
_mapper
ÅÅ 
.
ÅÅ 
Map
ÅÅ 
<
ÅÅ 
List
ÅÅ #
<
ÅÅ# $$
IdmCersaiRegDetailsDTO
ÅÅ$ :
>
ÅÅ: ;
>
ÅÅ; <
(
ÅÅ< =
data
ÅÅ= A
)
ÅÅA B
;
ÅÅB C
}
ÇÇ 	
public
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
bool
ÑÑ 
>
ÑÑ &
UpdateLDCersaiRegDetails
ÑÑ  8
(
ÑÑ8 9$
IdmCersaiRegDetailsDTO
ÑÑ9 O
CersaiRegDTO
ÑÑP \
,
ÑÑ\ ]
CancellationToken
ÑÑ^ o
token
ÑÑp u
)
ÑÑu v
{
ÖÖ 	
var
ÜÜ 
currentDetails
ÜÜ 
=
ÜÜ  
await
ÜÜ! &+
_cersairegistrationRepository
ÜÜ' D
.
ÜÜD E-
FirstOrDefaultByExpressionAsync
ÜÜE d
(
ÜÜd e
x
ÜÜe f
=>
ÜÜg i
x
ÜÜj k
.
ÜÜk l
IdmDsbChargeId
ÜÜl z
==
ÜÜ{ }
CersaiRegDTOÜÜ~ ä
.ÜÜä ã
IdmDsbChargeIdÜÜã ô
,ÜÜô ö
tokenÜÜõ †
)ÜÜ† °
;ÜÜ° ¢
if
áá 
(
áá 
currentDetails
áá 
!=
áá !
null
áá" &
)
áá& '
{
àà 
currentDetails
ââ 
.
ââ 
	IsDeleted
ââ (
=
ââ) *
true
ââ+ /
;
ââ/ 0
currentDetails
ää 
.
ää 

ModifiedBy
ää )
=
ää* +
	_userInfo
ää, 5
.
ää5 6
Name
ää6 :
;
ää: ;
currentDetails
ãã 
.
ãã 
ModifiedDate
ãã +
=
ãã, -
DateTime
ãã. 6
.
ãã6 7
UtcNow
ãã7 =
;
ãã= >
currentDetails
åå 
.
åå 
IsActive
åå '
=
åå( )
false
åå* /
;
åå/ 0
await
éé +
_cersairegistrationRepository
éé 3
.
éé3 4
UpdateAsync
éé4 ?
(
éé? @
currentDetails
éé@ N
,
ééN O
token
ééP U
)
ééU V
.
ééV W
ConfigureAwait
ééW e
(
éée f
false
ééf k
)
éék l
;
éél m
}
èè 
var
ëë 
basicDetails
ëë 
=
ëë 
_mapper
ëë &
.
ëë& '
Map
ëë' *
<
ëë* +&
TblIdmCersaiRegistration
ëë+ C
>
ëëC D
(
ëëD E
CersaiRegDTO
ëëE Q
)
ëëQ R
;
ëëR S
basicDetails
íí 
.
íí 
IdmDsbChargeId
íí '
=
íí( )
$num
íí* +
;
íí+ ,
basicDetails
ìì 
.
ìì 
IsActive
ìì !
=
ìì" #
true
ìì$ (
;
ìì( )
basicDetails
îî 
.
îî 
	IsDeleted
îî "
=
îî# $
false
îî% *
;
îî* +
basicDetails
ïï 
.
ïï 
CreateBy
ïï !
=
ïï" #
	_userInfo
ïï$ -
.
ïï- .
Name
ïï. 2
;
ïï2 3
basicDetails
ññ 
.
ññ 
CreatedDate
ññ $
=
ññ% &
DateTime
ññ' /
.
ññ/ 0
UtcNow
ññ0 6
;
ññ6 7
var
òò 
response
òò 
=
òò 
await
òò  +
_cersairegistrationRepository
òò! >
.
òò> ?
AddAsync
òò? G
(
òòG H
basicDetails
òòH T
,
òòT U
token
òòV [
)
òò[ \
.
òò\ ]
ConfigureAwait
òò] k
(
òòk l
false
òòl q
)
òòq r
;
òòr s
await
ôô 
_work
ôô 
.
ôô 
CommitAsync
ôô #
(
ôô# $
token
ôô$ )
)
ôô) *
.
ôô* +
ConfigureAwait
ôô+ 9
(
ôô9 :
false
ôô: ?
)
ôô? @
;
ôô@ A
if
öö 
(
öö 
response
öö 
!=
öö 
null
öö  
)
öö  !
{
õõ 
return
úú 
true
úú 
;
úú 
}
ùù 
else
ûû 
{
üü 
return
†† 
false
†† 
;
†† 
}
°° 
}
¢¢ 	
public
´´ 
async
´´ 
Task
´´ 
<
´´ 
IEnumerable
´´ %
<
´´% &(
IdmGuarantorDeedDetailsDTO
´´& @
>
´´@ A
>
´´A B&
GetAllGuarantorListAsync
´´C [
(
´´[ \
long
´´\ `
accountNumber
´´a n
,
´´n o 
CancellationToken´´p Å
token´´Ç á
)´´á à
{
¨¨ 	
var
≠≠ 
data
≠≠ 
=
≠≠ 
await
≠≠ &
_guarantorDeedRepository
≠≠ 5
.
≠≠5 6+
FindByMatchingPropertiesAsync
≠≠6 S
(
≠≠S T
token
≠≠T Y
,
≠≠Y Z
x
≠≠[ \
=>
≠≠] _
x
≠≠` a
.
≠≠a b
LoanAcc
≠≠b i
==
≠≠j l
accountNumber
≠≠m z
&&
≠≠{ }
x
≠≠~ 
.≠≠ Ä
IsActive≠≠Ä à
==≠≠â ã
true≠≠å ê
&&≠≠ë ì
x≠≠î ï
.≠≠ï ñ
	IsDeleted≠≠ñ ü
==≠≠† ¢
false≠≠£ ®
,≠≠® ©
inGuar≠≠™ ∞
=>≠≠± ≥
inGuar≠≠¥ ∫
.≠≠∫ ª"
TblAppGuarAssetDet≠≠ª Õ
)≠≠Õ Œ
.≠≠Œ œ
ConfigureAwait≠≠œ ›
(≠≠› ﬁ
false≠≠ﬁ „
)≠≠„ ‰
;≠≠‰ Â
return
ÆÆ 
_mapper
ÆÆ 
.
ÆÆ 
Map
ÆÆ 
<
ÆÆ 
List
ÆÆ #
<
ÆÆ# $(
IdmGuarantorDeedDetailsDTO
ÆÆ$ >
>
ÆÆ> ?
>
ÆÆ? @
(
ÆÆ@ A
data
ÆÆA E
)
ÆÆE F
;
ÆÆF G
}
∞∞ 	
public
±± 
async
±± 
Task
±± 
<
±± 
bool
±± 
>
±± *
UpdateLDGuarantorDeedDetails
±±  <
(
±±< =(
IdmGuarantorDeedDetailsDTO
±±= W
GuarantorListDTO
±±X h
,
±±h i
CancellationToken
±±j {
token±±| Å
)±±Å Ç
{
≤≤ 	
var
≥≥ 
currentDetails
≥≥ 
=
≥≥  
await
≥≥! &&
_guarantorDeedRepository
≥≥' ?
.
≥≥? @-
FirstOrDefaultByExpressionAsync
≥≥@ _
(
≥≥_ `
x
≥≥` a
=>
≥≥b d
x
≥≥e f
.
≥≥f g
IdmGuarDeedId
≥≥g t
==
≥≥u w
GuarantorListDTO≥≥x à
.≥≥à â
IdmGuarDeedId≥≥â ñ
,≥≥ñ ó
token≥≥ò ù
)≥≥ù û
;≥≥û ü
if
¥¥ 
(
¥¥ 
currentDetails
¥¥ 
!=
¥¥ 
null
¥¥ #
)
¥¥# $
{
µµ 
currentDetails
∂∂ 
.
∂∂ 
	IsDeleted
∂∂ (
=
∂∂) *
true
∂∂+ /
;
∂∂/ 0
currentDetails
∑∑ 
.
∑∑ 

ModifiedBy
∑∑ )
=
∑∑* +
	_userInfo
∑∑, 5
.
∑∑5 6
Name
∑∑6 :
;
∑∑: ;
currentDetails
∏∏ 
.
∏∏ 
ModifiedDate
∏∏ +
=
∏∏, -
DateTime
∏∏. 6
.
∏∏6 7
UtcNow
∏∏7 =
;
∏∏= >
currentDetails
ππ 
.
ππ 
IsActive
ππ '
=
ππ( )
false
ππ* /
;
ππ/ 0
await
ªª &
_guarantorDeedRepository
ªª .
.
ªª. /
UpdateAsync
ªª/ :
(
ªª: ;
currentDetails
ªª; I
,
ªªI J
token
ªªK P
)
ªªP Q
.
ªªQ R
ConfigureAwait
ªªR `
(
ªª` a
false
ªªa f
)
ªªf g
;
ªªg h
var
ºº 
basicDetails
ºº  
=
ºº! "
new
ºº# &
TblIdmGuarDeedDet
ºº' 8
(
ºº8 9
)
ºº9 :
{
ΩΩ 
IsActive
ææ 
=
ææ 
true
ææ #
,
ææ# $
	IsDeleted
øø 
=
øø 
false
øø  %
,
øø% &
LoanAcc
¿¿ 
=
¿¿ 
currentDetails
¿¿ ,
.
¿¿, -
LoanAcc
¿¿- 4
,
¿¿4 5
LoanSub
¡¡ 
=
¡¡ 
currentDetails
¡¡ ,
.
¡¡, -
LoanSub
¡¡- 4
,
¡¡4 5
OffcCd
¬¬ 
=
¬¬ 
currentDetails
¬¬ +
.
¬¬+ ,
OffcCd
¬¬, 2
,
¬¬2 3
PromoterCode
√√  
=
√√! "
currentDetails
√√# 1
.
√√1 2
PromoterCode
√√2 >
,
√√> ?
AppGuarassetId
ƒƒ "
=
ƒƒ# $
currentDetails
ƒƒ% 3
.
ƒƒ3 4
AppGuarassetId
ƒƒ4 B
,
ƒƒB C

ValueAsset
≈≈ 
=
≈≈  
currentDetails
≈≈! /
.
≈≈/ 0

ValueAsset
≈≈0 :
,
≈≈: ;
	ValueLiab
∆∆ 
=
∆∆ 
currentDetails
∆∆  .
.
∆∆. /
	ValueLiab
∆∆/ 8
,
∆∆8 9
ValueNetWorth
«« !
=
««" #
currentDetails
««$ 2
.
««2 3
ValueNetWorth
««3 @
,
««@ A
DeedNo
»» 
=
»» 
GuarantorListDTO
»» -
.
»»- .
DeedNo
»». 4
,
»»4 5
DeedDesc
…… 
=
…… 
GuarantorListDTO
…… /
.
……/ 0
DeedDesc
……0 8
,
……8 9
ExcecutionDate
   "
=
  # $
GuarantorListDTO
  % 5
.
  5 6
ExcecutionDate
  6 D
,
  D E

DeedUpload
ÀÀ 
=
ÀÀ  
currentDetails
ÀÀ! /
.
ÀÀ/ 0

DeedUpload
ÀÀ0 :
,
ÀÀ: ;
ApprovedEmpId
ÃÃ !
=
ÃÃ" #
currentDetails
ÃÃ$ 2
.
ÃÃ2 3
ApprovedEmpId
ÃÃ3 @
,
ÃÃ@ A
CreateBy
ÕÕ 
=
ÕÕ 
	_userInfo
ÕÕ (
.
ÕÕ( )
Name
ÕÕ) -
,
ÕÕ- .
CreatedDate
ŒŒ 
=
ŒŒ  !
DateTime
ŒŒ" *
.
ŒŒ* +
UtcNow
ŒŒ+ 1
}
œœ 
;
œœ 
var
–– 
response
–– 
=
–– 
await
–– $&
_guarantorDeedRepository
––% =
.
––= >
AddAsync
––> F
(
––F G
basicDetails
––G S
,
––S T
token
––U Z
)
––Z [
.
––[ \
ConfigureAwait
––\ j
(
––j k
false
––k p
)
––p q
;
––q r
await
—— 
_work
—— 
.
—— 
CommitAsync
—— '
(
——' (
token
——( -
)
——- .
.
——. /
ConfigureAwait
——/ =
(
——= >
false
——> C
)
——C D
;
——D E
if
““ 
(
““ 
response
““ 
!=
““ 
null
““  $
)
““$ %
{
”” 
return
‘‘ 
true
‘‘ 
;
‘‘  
}
’’ 
else
÷÷ 
{
◊◊ 
return
ÿÿ 
false
ÿÿ  
;
ÿÿ  !
}
ŸŸ 
}
⁄⁄ 
else
€€ 
{
‹‹ 
return
›› 
false
›› 
;
›› 
}
ﬁﬁ 
}
‡‡ 	
public
ËË 
async
ËË 
Task
ËË 
<
ËË 
IEnumerable
ËË %
<
ËË% &#
LDConditionDetailsDTO
ËË& ;
>
ËË; <
>
ËË< =&
GetAllConditionListAsync
ËË> V
(
ËËV W
long
ËËW [
accountNumber
ËË\ i
,
ËËi j
CancellationToken
ËËk |
tokenËË} Ç
)ËËÇ É
{
ÈÈ 	
var
ÍÍ 
data
ÍÍ 
=
ÍÍ 
await
ÍÍ %
_idmConditionRepository
ÍÍ 4
.
ÍÍ4 5+
FindByMatchingPropertiesAsync
ÍÍ5 R
(
ÍÍR S
token
ÍÍS X
,
ÍÍX Y
x
ÍÍZ [
=>
ÍÍ\ ^
x
ÍÍ_ `
.
ÍÍ` a
LoanAcc
ÍÍa h
==
ÍÍi k
accountNumber
ÍÍl y
&&
ÍÍz |
x
ÍÍ} ~
.
ÍÍ~ 
IsActiveÍÍ á
==ÍÍà ä
trueÍÍã è
&&ÍÍê í
xÍÍì î
.ÍÍî ï
	IsDeletedÍÍï û
==ÍÍü °
falseÍÍ¢ ß
,ÍÍß ®
Condstg
ÎÎ 
=>
ÎÎ 
Condstg
ÎÎ "
.
ÎÎ" #
TblCondStgCdtab
ÎÎ# 2
,
ÎÎ2 3
Condtype
ÎÎ4 <
=>
ÎÎ= ?
Condtype
ÎÎ@ H
.
ÎÎH I
TblCondTypeCdtab
ÎÎI Y
)
ÎÎY Z
.
ÎÎZ [
ConfigureAwait
ÎÎ[ i
(
ÎÎi j
false
ÎÎj o
)
ÎÎo p
;
ÎÎp q
return
ÏÏ 
_mapper
ÏÏ 
.
ÏÏ 
Map
ÏÏ 
<
ÏÏ 
List
ÏÏ #
<
ÏÏ# $#
LDConditionDetailsDTO
ÏÏ$ 9
>
ÏÏ9 :
>
ÏÏ: ;
(
ÏÏ; <
data
ÏÏ< @
)
ÏÏ@ A
;
ÏÏA B
}
ÌÌ 	
public
ÔÔ 
async
ÔÔ 
Task
ÔÔ 
<
ÔÔ 
bool
ÔÔ 
>
ÔÔ &
UpdateLDConditionDetails
ÔÔ  8
(
ÔÔ8 9#
LDConditionDetailsDTO
ÔÔ9 N
CondtionDTO
ÔÔO Z
,
ÔÔZ [
CancellationToken
ÔÔ\ m
token
ÔÔn s
)
ÔÔs t
{
 	
var
ÒÒ 
currentDetails
ÒÒ 
=
ÒÒ  
await
ÒÒ! &%
_idmConditionRepository
ÒÒ' >
.
ÒÒ> ?-
FirstOrDefaultByExpressionAsync
ÒÒ? ^
(
ÒÒ^ _
x
ÒÒ_ `
=>
ÒÒa c
x
ÒÒd e
.
ÒÒe f
	CondDetId
ÒÒf o
==
ÒÒp r
CondtionDTO
ÒÒs ~
.
ÒÒ~ 
	CondDetIdÒÒ à
,ÒÒà â
tokenÒÒä è
)ÒÒè ê
;ÒÒê ë
if
ÚÚ 
(
ÚÚ 
currentDetails
ÚÚ 
!=
ÚÚ !
null
ÚÚ" &
)
ÚÚ& '
{
ÛÛ 
currentDetails
ÙÙ 
.
ÙÙ 
	IsDeleted
ÙÙ (
=
ÙÙ) *
true
ÙÙ+ /
;
ÙÙ/ 0
currentDetails
ıı 
.
ıı 

ModifiedBy
ıı )
=
ıı* +
	_userInfo
ıı, 5
.
ıı5 6
Name
ıı6 :
;
ıı: ;
currentDetails
ˆˆ 
.
ˆˆ 
ModifiedDate
ˆˆ +
=
ˆˆ, -
DateTime
ˆˆ. 6
.
ˆˆ6 7
UtcNow
ˆˆ7 =
;
ˆˆ= >
currentDetails
˜˜ 
.
˜˜ 
IsActive
˜˜ '
=
˜˜( )
false
˜˜* /
;
˜˜/ 0
await
¯¯ %
_idmConditionRepository
¯¯ -
.
¯¯- .
UpdateAsync
¯¯. 9
(
¯¯9 :
currentDetails
¯¯: H
,
¯¯H I
token
¯¯J O
)
¯¯O P
.
¯¯P Q
ConfigureAwait
¯¯Q _
(
¯¯_ `
false
¯¯` e
)
¯¯e f
;
¯¯f g
}
˘˘ 
var
˚˚ 
basicDetails
˚˚ 
=
˚˚ 
_mapper
˚˚ &
.
˚˚& '
Map
˚˚' *
<
˚˚* +
TblIdmCondDet
˚˚+ 8
>
˚˚8 9
(
˚˚9 :
CondtionDTO
˚˚: E
)
˚˚E F
;
˚˚F G
basicDetails
¸¸ 
.
¸¸ 
	CondDetId
¸¸ "
=
¸¸# $
$num
¸¸% &
;
¸¸& '
basicDetails
˝˝ 
.
˝˝ 
IsActive
˝˝ !
=
˝˝" #
true
˝˝$ (
;
˝˝( )
basicDetails
˛˛ 
.
˛˛ 
	IsDeleted
˛˛ "
=
˛˛# $
false
˛˛% *
;
˛˛* +
basicDetails
ˇˇ 
.
ˇˇ 
CreateBy
ˇˇ !
=
ˇˇ" #
	_userInfo
ˇˇ# ,
.
ˇˇ, -
Name
ˇˇ- 1
;
ˇˇ1 2
basicDetails
ÄÄ 
.
ÄÄ 
CreatedDate
ÄÄ $
=
ÄÄ% &
DateTime
ÄÄ' /
.
ÄÄ/ 0
UtcNow
ÄÄ0 6
;
ÄÄ6 7
var
ÇÇ 
response
ÇÇ 
=
ÇÇ 
await
ÇÇ  %
_idmConditionRepository
ÇÇ! 8
.
ÇÇ8 9
AddAsync
ÇÇ9 A
(
ÇÇA B
basicDetails
ÇÇB N
,
ÇÇN O
token
ÇÇP U
)
ÇÇU V
.
ÇÇV W
ConfigureAwait
ÇÇW e
(
ÇÇe f
false
ÇÇf k
)
ÇÇk l
;
ÇÇl m
await
ÉÉ 
_work
ÉÉ 
.
ÉÉ 
CommitAsync
ÉÉ #
(
ÉÉ# $
token
ÉÉ$ )
)
ÉÉ) *
.
ÉÉ* +
ConfigureAwait
ÉÉ+ 9
(
ÉÉ9 :
false
ÉÉ: ?
)
ÉÉ? @
;
ÉÉ@ A
if
ÑÑ 
(
ÑÑ 
response
ÑÑ 
!=
ÑÑ 
null
ÑÑ  
)
ÑÑ  !
{
ÖÖ 
return
ÜÜ 
true
ÜÜ 
;
ÜÜ 
}
áá 
else
àà 
{
ââ 
return
ää 
false
ää 
;
ää 
}
ãã 
}
åå 	
public
çç 
async
çç 
Task
çç 
<
çç 
bool
çç 
>
çç &
CreateLDConditionDetails
çç  8
(
çç8 9#
LDConditionDetailsDTO
çç9 N
CondtionDTO
ççO Z
,
ççZ [
CancellationToken
çç\ m
token
ççn s
)
ççs t
{
éé 	
var
èè 
basicDetails
èè 
=
èè 
_mapper
èè &
.
èè& '
Map
èè' *
<
èè* +
TblIdmCondDet
èè+ 8
>
èè8 9
(
èè9 :
CondtionDTO
èè: E
)
èèE F
;
èèF G
basicDetails
êê 
.
êê 
IsActive
êê !
=
êê" #
true
êê$ (
;
êê( )
basicDetails
ëë 
.
ëë 
CreateBy
ëë !
=
ëë" #
	_userInfo
ëë$ -
.
ëë- .
Name
ëë. 2
;
ëë2 3
basicDetails
íí 
.
íí 
	IsDeleted
íí "
=
íí# $
false
íí% *
;
íí* +
basicDetails
ìì 
.
ìì 
CreatedDate
ìì $
=
ìì% &
DateTime
ìì' /
.
ìì/ 0
UtcNow
ìì0 6
;
ìì6 7
var
ïï 
response
ïï 
=
ïï 
await
ïï  %
_idmConditionRepository
ïï! 8
.
ïï8 9
AddAsync
ïï9 A
(
ïïA B
basicDetails
ïïB N
,
ïïN O
token
ïïP U
)
ïïU V
.
ïïV W
ConfigureAwait
ïïW e
(
ïïe f
false
ïïf k
)
ïïk l
;
ïïl m
await
ññ 
_work
ññ 
.
ññ 
CommitAsync
ññ #
(
ññ# $
token
ññ$ )
)
ññ) *
.
ññ* +
ConfigureAwait
ññ+ 9
(
ññ9 :
false
ññ: ?
)
ññ? @
;
ññ@ A
if
óó 
(
óó 
response
óó 
!=
óó 
null
óó  
)
óó  !
{
òò 
return
ôô 
true
ôô 
;
ôô 
}
öö 
else
õõ 
{
úú 
return
ùù 
false
ùù 
;
ùù 
}
ûû 
}
üü 	
public
†† 
async
†† 
Task
†† 
<
†† 
bool
†† 
>
†† %
DeleteLDCondtionDetails
††  7
(
††7 8#
LDConditionDetailsDTO
††8 M
CondtionDTO
††N Y
,
††Y Z
CancellationToken
††[ l
token
††m r
)
††r s
{
°° 	
var
¢¢ 
basicDetails
¢¢ 
=
¢¢ 
_mapper
¢¢ &
.
¢¢& '
Map
¢¢' *
<
¢¢* +
TblIdmCondDet
¢¢+ 8
>
¢¢8 9
(
¢¢9 :
CondtionDTO
¢¢: E
)
¢¢E F
;
¢¢F G
basicDetails
££ 
.
££ 
IsActive
££ !
=
££" #
false
££$ )
;
££) *
basicDetails
§§ 
.
§§ 
ModifiedDate
§§ %
=
§§& '
DateTime
§§( 0
.
§§0 1
UtcNow
§§1 7
;
§§7 8
basicDetails
•• 
.
•• 

ModifiedBy
•• #
=
••$ %
	_userInfo
••& /
.
••/ 0
Name
••0 4
;
••5 6
basicDetails
¶¶ 
.
¶¶ 
	IsDeleted
¶¶ "
=
¶¶# $
true
¶¶% )
;
¶¶) *
var
ßß 
result
ßß 
=
ßß 
await
ßß %
_idmConditionRepository
ßß 6
.
ßß6 7
UpdateAsync
ßß7 B
(
ßßB C
basicDetails
ßßC O
,
ßßO P
token
ßßQ V
)
ßßV W
.
ßßW X
ConfigureAwait
ßßX f
(
ßßf g
false
ßßg l
)
ßßl m
;
ßßm n
await
®® 
_work
®® 
.
®® 
CommitAsync
®® #
(
®®# $
token
®®$ )
)
®®) *
.
®®* +
ConfigureAwait
®®+ 9
(
®®9 :
false
®®: ?
)
®®? @
;
®®@ A
if
©© 
(
©© 
result
©© 
!=
©© 
null
©© 
)
©© 
{
™™ 
return
´´ 
true
´´ 
;
´´ 
}
¨¨ 
else
≠≠ 
{
ÆÆ 
return
ØØ 
false
ØØ 
;
ØØ 
}
∞∞ 
}
±± 	
}
¥¥ 
}µµ ÀP
rD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\LoanAllocationModule\LoanAllocationService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @ 
LoanAllocationModule@ T
{ 
public 

class !
LoanAllocationService &
:' ("
ILoanAllocationService) ?
{ 
private 
readonly 
IEntityRepository *
<* +
TblIdmDhcgAllc+ 9
>9 :
_loanAllocation; J
;J K
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
public !
LoanAllocationService $
($ %
IEntityRepository% 6
<6 7
TblIdmDhcgAllc7 E
>E F
loanAllocationG U
,U V
IUnitOfWorkW b
workc g
,g h
IMapper "
mapper# )
,) *
UserInfo+ 3
userInfo4 <
)< =
{ 	
_loanAllocation 
= 
loanAllocation ,
;, -
_work 
= 
work 
; 
_mapper   
=   
mapper   
;   
	_userInfo!! 
=!! 
userInfo!!  
;!!  !
}"" 	
public## 
async## 
Task## 
<## 
IEnumerable## %
<##% &
TblIdmDhcgAllcDTO##& 7
>##7 8
>##8 9$
GetAllLoanAllocationList##: R
(##R S
long##S W
accountNumber##X e
,##e f
CancellationToken##g x
token##y ~
)##~ 
{$$ 	
var%% 
data%% 
=%% 
await%% 
_loanAllocation%% ,
.%%, -)
FindByMatchingPropertiesAsync%%- J
(%%J K
token%%K P
,%%P Q
x%%R S
=>%%T V
x%%W X
.%%X Y
LoanAcc%%Y `
==%%a c
accountNumber%%d q
&&%%r t
x%%u v
.%%v w
IsActive%%w 
==
%%Ä Ç
true
%%É á
&&
%%à ä
x
%%ã å
.
%%å ç
	IsDeleted
%%ç ñ
==
%%ó ô
false
%%ö ü
)
%%ü †
.
%%† °
ConfigureAwait
%%° Ø
(
%%Ø ∞
false
%%∞ µ
)
%%µ ∂
;
%%∂ ∑
return&& 
_mapper&& 
.&& 
Map&& 
<&& 
List&& #
<&&# $
TblIdmDhcgAllcDTO&&$ 5
>&&5 6
>&&6 7
(&&7 8
data&&8 <
)&&< =
;&&= >
}'' 	
public(( 
async(( 
Task(( 
<(( 
bool(( 
>(( '
UpdateLoanAllocationDetails((  ;
(((; <
TblIdmDhcgAllcDTO((< M
AllocationDTO((N [
,(([ \
CancellationToken((] n
token((o t
)((t u
{)) 	
var** 
currentDetails** 
=**  
await**! &
_loanAllocation**' 6
.**6 7+
FirstOrDefaultByExpressionAsync**7 V
(**V W
x**W X
=>**Y [
x**\ ]
.**] ^
DcalcId**^ e
==**f h
AllocationDTO**i v
.**v w
DcalcId**w ~
,**~ 
token
**Ä Ö
)
**Ö Ü
;
**Ü á
currentDetails++ 
.++ 
	IsDeleted++ $
=++% &
true++' +
;+++ ,
currentDetails,, 
.,, 
IsActive,, #
=,,$ %
false,,& +
;,,+ ,
currentDetails-- 
.-- 

ModifiedBy-- %
=--& '
	_userInfo--( 1
.--1 2
Name--2 6
;--6 7
currentDetails.. 
... 
ModifiedDate.. '
=..( )
DateTime..* 2
...2 3
UtcNow..3 9
;..9 :
await// 
_loanAllocation// !
.//! "
UpdateAsync//" -
(//- .
currentDetails//. <
,//< =
token//> C
)//C D
.//D E
ConfigureAwait//E S
(//S T
false//T Y
)//Y Z
;//Z [
var22 
basicDetails22 
=22 
_mapper22 &
.22& '
Map22' *
<22* +
TblIdmDhcgAllc22+ 9
>229 :
(22: ;
AllocationDTO22; H
)22H I
;22I J
basicDetails33 
.33 
DcalcId33  
=33! "
$num33# $
;33$ %
basicDetails44 
.44 
IsActive44 !
=44" #
true44$ (
;44( )
basicDetails55 
.55 
	IsDeleted55 "
=55# $
false55% *
;55* +
basicDetails66 
.66 
CreateBy66 !
=66" #
	_userInfo66$ -
.66- .
Name66. 2
;662 3
basicDetails77 
.77 
CreatedDate77 $
=77% &
DateTime77' /
.77/ 0
UtcNow770 6
;776 7
var99 
response99 
=99 
await99  
_loanAllocation99! 0
.990 1
AddAsync991 9
(999 :
basicDetails99: F
,99F G
token99H M
)99M N
.99N O
ConfigureAwait99O ]
(99] ^
false99^ c
)99c d
;99d e
await:: 
_work:: 
.:: 
CommitAsync:: #
(::# $
token::$ )
)::) *
.::* +
ConfigureAwait::+ 9
(::9 :
false::: ?
)::? @
;::@ A
if;; 
(;; 
response;; 
!=;; 
null;;  
);;  !
{<< 
return== 
true== 
;== 
}>> 
else?? 
{@@ 
returnAA 
falseAA 
;AA 
}BB 
}CC 	
publicDD 
asyncDD 
TaskDD 
<DD 
boolDD 
>DD '
CreateLoanAllocationDetailsDD  ;
(DD; <
TblIdmDhcgAllcDTODD< M
AllocationDTODDN [
,DD[ \
CancellationTokenDD] n
tokenDDo t
)DDt u
{EE 	
varFF 
basicDetailsFF 
=FF 
_mapperFF &
.FF& '
MapFF' *
<FF* +
TblIdmDhcgAllcFF+ 9
>FF9 :
(FF: ;
AllocationDTOFF; H
)FFH I
;FFI J
basicDetailsGG 
.GG 
IsActiveGG !
=GG" #
trueGG$ (
;GG( )
basicDetailsHH 
.HH 
	IsDeletedHH "
=HH# $
falseHH% *
;HH* +
basicDetailsII 
.II 
CreateByII !
=II" #
	_userInfoII$ -
.II- .
NameII. 2
;II2 3
basicDetailsJJ 
.JJ 
CreatedDateJJ $
=JJ% &
DateTimeJJ' /
.JJ/ 0
UtcNowJJ0 6
;JJ6 7
varLL 
responseLL 
=LL 
awaitLL  
_loanAllocationLL! 0
.LL0 1
AddAsyncLL1 9
(LL9 :
basicDetailsLL: F
,LLF G
tokenLLH M
)LLM N
.LLN O
ConfigureAwaitLLO ]
(LL] ^
falseLL^ c
)LLc d
;LLd e
awaitMM 
_workMM 
.MM 
CommitAsyncMM #
(MM# $
tokenMM$ )
)MM) *
.MM* +
ConfigureAwaitMM+ 9
(MM9 :
falseMM: ?
)MM? @
;MM@ A
ifNN 
(NN 
responseNN 
!=NN 
nullNN  
)NN  !
{OO 
returnPP 
truePP 
;PP 
}QQ 
elseRR 
{SS 
returnTT 
falseTT 
;TT 
}UU 
}VV 	
publicWW 
asyncWW 
TaskWW 
<WW 
boolWW 
>WW '
DeleteLoanAllocationDetailsWW  ;
(WW; <
TblIdmDhcgAllcDTOWW< M
AllocationDTOWWN [
,WW[ \
CancellationTokenWW] n
tokenWWo t
)WWt u
{XX 	
varYY 
basicDetailsYY 
=YY 
_mapperYY &
.YY& '
MapYY' *
<YY* +
TblIdmDhcgAllcYY+ 9
>YY9 :
(YY: ;
AllocationDTOYY; H
)YYH I
;YYI J
basicDetailsZZ 
.ZZ 
IsActiveZZ !
=ZZ" #
falseZZ$ )
;ZZ) *
basicDetails[[ 
.[[ 
ModifiedDate[[ %
=[[& '
DateTime[[( 0
.[[0 1
UtcNow[[1 7
;[[7 8
basicDetails\\ 
.\\ 

ModifiedBy\\ #
=\\$ %
	_userInfo\\& /
.\\/ 0
Name\\0 4
;\\4 5
basicDetails]] 
.]] 
	IsDeleted]] "
=]]# $
true]]% )
;]]) *
var^^ 
response^^ 
=^^ 
await^^  
_loanAllocation^^! 0
.^^0 1
UpdateAsync^^1 <
(^^< =
basicDetails^^= I
,^^I J
token^^K P
)^^P Q
.^^Q R
ConfigureAwait^^R `
(^^` a
false^^a f
)^^f g
;^^g h
await__ 
_work__ 
.__ 
CommitAsync__ #
(__# $
token__$ )
)__) *
.__* +
ConfigureAwait__+ 9
(__9 :
false__: ?
)__? @
;__@ A
if`` 
(`` 
response`` 
!=`` 
null``  
)``  !
{aa 
returnbb 
truebb 
;bb 
}cc 
elsedd 
{ee 
returnff 
falseff 
;ff 
}gg 
}hh 	
}ii 
}jj ›ä
lD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\IDMModule\UnitDetailsModule\UnitDetailsService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
	IDMModule6 ?
.? @
UnitDetailsModule@ Q
{ 
public 

class 
UnitDetailsService #
:# $
IUnitDetailsService% 8
{ 
private 
readonly 
IEntityRepository *
<* +
TblIdmUnitDetails+ <
>< =%
_idmUnitDetailsRepository> W
;W X
private 
readonly 
IEntityRepository *
<* +
TblUnitMast+ 6
>6 7!
_UnitMasterRepository8 M
;M N
private 
readonly 
IEntityRepository *
<* +
TblIdmUnitAddress+ <
>< =%
_idmUnitAddressRepository> W
;W X
private 
readonly 
IEntityRepository *
<* +
IdmPromoter+ 6
>6 7
_promoterRepository8 K
;K L
private 
readonly 
IEntityRepository *
<* +
TblIdmPromAddress+ <
>< =&
_promoterAddressRepository> X
;X Y
private 
readonly 
IEntityRepository *
<* +"
IdmPromoterBankDetails+ A
>A B#
_promoterBankRepositoryC Z
;Z [
private 
readonly 
IEntityRepository *
<* +
IdmUnitProducts+ :
>: ;%
_appUnitDetailsRepository< U
;U V
private 
readonly 
IEntityRepository *
<* +
TblIdmUnitBank+ 9
>9 :(
_changeBankDetailsRepository; W
;W X
private 
readonly 
IEntityRepository *
<* +
TbIIfscMaster+ 8
>8 9&
_ifscBankDetailsRepository: T
;T U
private 
readonly 
IEntityRepository *
<* +
TblPromterLiabDet+ <
>< =,
 _promoterLiabilityInfoRepository> ^
;^ _
private 
readonly 
IEntityRepository *
<* +!
TblIdmPromoterNetWork+ @
>@ A'
_promoterNetWorthRepositoryB ]
;] ^
private   
readonly   
IEntityRepository   *
<  * +
TblPromCdtab  + 7
>  7 8"
_masterPromoterDetails  9 O
;  O P
private!! 
readonly!! 
IEntityRepository!! *
<!!* +
TblPincodeMaster!!+ ;
>!!; <!
_masterPincodeDetails!!= R
;!!R S
private"" 
readonly"" 
IEntityRepository"" *
<""* +
TlqCdtab""+ 3
>""3 4
_masterTalukDetails""5 H
;""H I
private## 
readonly## 
IEntityRepository## *
<##* +
HobCdtab##+ 3
>##3 4
_masterHobliDetails##5 H
;##H I
private$$ 
readonly$$ 
IEntityRepository$$ *
<$$* +
VilCdtab$$+ 3
>$$3 4!
_masterVillageDetails$$5 J
;$$J K
private%% 
readonly%% 
IEntityRepository%% *
<%%* +#
TblPincodeDistrictCdtab%%+ B
>%%B C"
_pincodeDistictDetails%%D Z
;%%Z [
private&& 
readonly&& 
IEntityRepository&& *
<&&* +
IdmPromAssetDet&&+ :
>&&: ;+
_promoterAssetDetailsRepository&&< [
;&&[ \
private'' 
readonly'' 
IEntityRepository'' *
<''* +
TblProdCdtab''+ 7
>''7 8
_productList''9 E
;''E F
private(( 
readonly(( 
UserInfo(( !
	_userInfo((" +
;((+ ,
private)) 
readonly)) 
IUnitOfWork)) $
_work))% *
;))* +
private** 
readonly** 
IMapper**  
_mapper**! (
;**( )
public-- 
UnitDetailsService-- !
(--! "
IEntityRepository--" 3
<--3 4
TblAppLoanMast--4 B
>--B C
loanRepository--D R
,--R S
IEntityRepository--T e
<--e f
TblIdmUnitDetails--f w
>--w x
idmUnitDetails	--y á
,
--á à
IUnitOfWork..# .
work../ 3
,..3 4
IMapper..5 <
mapper..= C
,..C D
IEntityRepository..E V
<..V W
TblUnitMast..W b
>..b c 
unitMasterRepository..d x
,..x y
IEntityRepository	..z ã
<
..ã å
TblIdmUnitAddress
..å ù
>
..ù û
idmUnitAddress
..ü ≠
,
..≠ Æ
IEntityRepository//# 4
<//4 5
IdmPromoter//5 @
>//@ A
promoterRepository//B T
,//T U
IEntityRepository//V g
<//g h
TblIdmPromAddress//h y
>//y z&
promoterAddressRepository	//{ î
,
//î ï
IEntityRepository00# 4
<004 5"
IdmPromoterBankDetails005 K
>00K L"
promoterBankRepository00M c
,00c d
IEntityRepository00e v
<00v w
TblPclasCdtab	00w Ñ
>
00Ñ Ö%
promoterClassRepository
00Ü ù
,
00ù û
IEntityRepository11# 4
<114 5
TblPsubclasCdtab115 E
>11E F&
promoterSubClassRepository11G a
,11a b
IEntityRepository11c t
<11t u
TblPqualCdtab	11u Ç
>
11Ç É-
promoterQualificationRepository
11Ñ £
,
11£ §
IEntityRepository22# 4
<224 5
TblDomiCdtab225 A
>22A B
domicileRepository22C U
,22U V
UserInfo22W _
userInfo22` h
,22h i
IEntityRepository22j {
<22{ |
IdmUnitProducts	22| ã
>
22ã å
appUnitDetails
22ç õ
,
22õ ú
IEntityRepository33# 4
<334 5
TblIdmUnitBank335 C
>33C D'
changeBankDetailsRepository33E `
,33` a
IEntityRepository33b s
<33s t
TbIIfscMaster	33t Å
>
33Å Ç'
ifscBankDetailsRepository
33É ú
,
33ú ù
IEntityRepository
33û Ø
<
33Ø ∞
IdmPromAssetDet
33∞ ø
>
33ø ¿,
promoterAssetDetailsRepository
33¡ ﬂ
,
33ﬂ ‡
IEntityRepository44# 4
<444 5
TblPromterLiabDet445 F
>44F G+
promoterLiabilityInfoRepository44H g
,44g h
IEntityRepository44i z
<44z {"
TblIdmPromoterNetWork	44{ ê
>
44ê ë(
promoterNetWorthRepository
44í ¨
,
44¨ ≠
IEntityRepository55# 4
<554 5
TblPromCdtab555 A
>55A B!
masterPromoterDetails55C X
,55X Y
IEntityRepository55Z k
<55k l
TblPincodeMaster55l |
>55| }!
masterPincodeDetails	55~ í
,
55í ì
IEntityRepository66# 4
<664 5
TblProdCdtab665 A
>66A B
productList66C N
,66N O
IEntityRepository66P a
<66a b#
TblPincodeDistrictCdtab66b y
>66y z"
pincodeDistictDetails	66{ ê
,
66ê ë
IEntityRepository
66í £
<
66£ §
TlqCdtab
66§ ¨
>
66¨ ≠ 
masterTalukDetails
66Æ ¿
,
66¿ ¡
IEntityRepository
66¬ ”
<
66” ‘
HobCdtab
66‘ ‹
>
66‹ › 
masterHobliDetails
66ﬁ 
,
66 Ò
IEntityRepository
66Ú É
<
66É Ñ
VilCdtab
66Ñ å
>
66å ç"
masterVillageDetails
66é ¢
)
66¢ £
{88 	
_work:: 
=:: 
work:: 
;:: 
_mapper;; 
=;; 
mapper;; 
;;; %
_idmUnitDetailsRepository<< %
=<<& '
idmUnitDetails<<( 6
;<<6 7!
_UnitMasterRepository== !
===" # 
unitMasterRepository==$ 8
;==8 9%
_idmUnitAddressRepository>> %
=>>& '
idmUnitAddress>>( 6
;>>6 7
_promoterRepository?? 
=??  !
promoterRepository??" 4
;??4 5&
_promoterAddressRepository@@ &
=@@' (%
promoterAddressRepository@@) B
;@@B C#
_promoterBankRepositoryAA #
=AA$ %"
promoterBankRepositoryAA& <
;AA< =%
_appUnitDetailsRepositoryBB %
=BB& '
appUnitDetailsBB( 6
;BB6 7+
_promoterAssetDetailsRepositoryCC +
=CC, -*
promoterAssetDetailsRepositoryCC. L
;CCL M
	_userInfoDD 
=DD 
userInfoDD  
;DD  !(
_changeBankDetailsRepositoryEE (
=EE) *'
changeBankDetailsRepositoryEE+ F
;EEF G&
_ifscBankDetailsRepositoryFF &
=FF' (%
ifscBankDetailsRepositoryFF) B
;FFB C,
 _promoterLiabilityInfoRepositoryGG ,
=GG- .+
promoterLiabilityInfoRepositoryGG/ N
;GGN O'
_promoterNetWorthRepositoryHH '
=HH( )&
promoterNetWorthRepositoryHH* D
;HHD E"
_masterPromoterDetailsII "
=II# $!
masterPromoterDetailsII% :
;II: ;!
_masterPincodeDetailsJJ !
=JJ" # 
masterPincodeDetailsJJ$ 8
;JJ8 9
_productListKK 
=KK 
productListKK &
;KK& '"
_pincodeDistictDetailsLL "
=LL# $!
pincodeDistictDetailsLL% :
;LL: ;
_masterTalukDetailsMM 
=MM  !
masterTalukDetailsMM" 4
;MM4 5
_masterHobliDetailsNN 
=NN  !
masterHobliDetailsNN" 4
;NN4 5!
_masterVillageDetailsOO !
=OO" # 
masterVillageDetailsOO$ 8
;OO8 9
}PP 	
publicVV 
asyncVV 
TaskVV 
<VV 
IdmUnitDetailDTOVV *
>VV* +
GetNameOfUnitVV, 9
(VV9 :
longVV: >
accountNumberVV? L
,VVL M
CancellationTokenVVN _
tokenVV` e
)VVe f
{WW 	
varXX 
dataXX 
=XX 
awaitXX %
_idmUnitDetailsRepositoryXX 6
.XX6 7)
FindByMatchingPropertiesAsyncXX7 T
(XXT U
tokenXXU Z
,XXZ [
xYY 
=>YY 
xYY 
.YY 
LoanAccYY 
==YY !
accountNumberYY" /
,YY0 1

unitmasterYY2 <
=>YY< >

unitmasterYY? I
.YYI J
TblUnitMastYYJ U
)YYU V
.YYV W
ConfigureAwaitYYW e
(YYe f
falseYYf k
)YYk l
;YYl m
varZZ 
resZZ 
=ZZ 
dataZZ 
.ZZ 
FirstOrDefaultZZ )
(ZZ) *
)ZZ* +
;ZZ+ ,
if[[ 
([[ 
res[[ 
!=[[ 
null[[ 
)[[ 
{\\ 
return]] 
_mapper]] 
.]] 
Map]] "
<]]" #
IdmUnitDetailDTO]]# 3
>]]3 4
(]]4 5
res]]5 8
)]]8 9
;]]9 :
}^^ 
else__ 
{`` 
resaa 
=aa 
newaa 
TblIdmUnitDetailsaa +
(aa+ ,
)aa, -
;aa- .
returnbb 
_mapperbb 
.bb 
Mapbb "
<bb" #
IdmUnitDetailDTObb# 3
>bb3 4
(bb4 5
resbb5 8
)bb8 9
;bb9 :
}cc 
}dd 	
publicee 
asyncee 
Taskee 
<ee 
IdmUnitDetailDTOee *
>ee* +
UpdateNameOfUnitee, <
(ee< =
IdmUnitDetailDTOee= M
idmUnitDetaileeN [
,ee[ \
CancellationTokenee] n
tokeneeo t
)eet u
{ff 	
vargg 
basicDetailsgg 
=gg 
_mappergg &
.gg& '
Mapgg' *
<gg* +
TblUnitMastgg+ 6
>gg6 7
(gg7 8
idmUnitDetailgg8 E
.ggE F
TblUnitMastggF Q
)ggQ R
;ggR S
awaithh !
_UnitMasterRepositoryhh '
.hh' (
UpdateAsynchh( 3
(hh3 4
basicDetailshh4 @
,hh@ A
tokenhhB G
)hhG H
.hhH I
ConfigureAwaithhI W
(hhW X
falsehhX ]
)hh] ^
;hh^ _
awaitii 
_workii 
.ii 
CommitAsyncii #
(ii# $
tokenii$ )
)ii) *
.ii* +
ConfigureAwaitii+ 9
(ii9 :
falseii: ?
)ii? @
;ii@ A
returnjj 
_mapperjj 
.jj 
Mapjj 
<jj 
IdmUnitDetailDTOjj /
>jj/ 0
(jj0 1
idmUnitDetailjj1 >
)jj> ?
;jj? @
}kk 	
publicrr 
asyncrr 
Taskrr 
<rr 
IEnumerablerr %
<rr% &
IdmUnitAddressDTOrr& 7
>rr7 8
>rr8 9 
GetAllAddressDetailsrr: N
(rrN O
longrrO S
accountNumberrrT a
,rra b
CancellationTokenrrc t
tokenrru z
)rrz {
{ss 	
vartt 
datatt 
=tt 
awaittt %
_idmUnitAddressRepositorytt 6
.tt6 7)
FindByMatchingPropertiesAsynctt7 T
(ttT U
tokenttU Z
,ttZ [
xtt\ ]
=>tt^ `
xtta b
.ttb c
LoanAccttc j
==ttk m
accountNumberttn {
&&tt| ~
x	tt Ä
.
ttÄ Å
IsActive
ttÅ â
==
ttä å
true
ttç ë
&&
ttí î
x
ttï ñ
.
ttñ ó
	IsDeleted
ttó †
==
tt° £
false
tt§ ©
,
tt© ™
address
tt´ ≤
=>
tt≥ µ
address
tt∂ Ω
.
ttΩ æ
TblAddressCdtab
ttæ Õ
)
ttÕ Œ
.
ttŒ œ
ConfigureAwait
ttœ ›
(
tt› ﬁ
false
ttﬁ „
)
tt„ ‰
;
tt‰ Â
returnuu 
_mapperuu 
.uu 
Mapuu 
<uu 
Listuu #
<uu# $
IdmUnitAddressDTOuu$ 5
>uu5 6
>uu6 7
(uu7 8
datauu8 <
)uu< =
;uu= >
}vv 	
publicww 
asyncww 
Taskww 
<ww 
IEnumerableww %
<ww% &
TblPincodeMasterDTOww& 9
>ww9 :
>ww: ;&
GetAllMasterPinCodeDetailsww< V
(wwV W
CancellationTokenwwX i
tokenwwj o
)wwo p
{xx 	
varyy 
datayy 
=yy 
awaityy !
_masterPincodeDetailsyy 2
.yy2 3)
FindByMatchingPropertiesAsyncyy3 P
(yyP Q
tokenyyQ V
,yyV W
xyyX Y
=>yyZ \
xyy^ _
.yy_ `
IsActiveyy` h
==yyi k
trueyyl p
&&yyq s
xyyt u
.yyu v
	IsDeletedyyv 
==
yyÄ Ç
false
yyÉ à
)
yyà â
.
yyâ ä
ConfigureAwait
yyä ò
(
yyò ô
false
yyô û
)
yyû ü
;
yyü †
returnzz 
_mapperzz 
.zz 
Mapzz 
<zz 
Listzz #
<zz# $
TblPincodeMasterDTOzz$ 7
>zz7 8
>zz8 9
(zz9 :
datazz: >
)zz> ?
;zz? @
}{{ 	
public}} 
async}} 
Task}} 
<}} 
IEnumerable}} %
<}}% &#
PincodeDistrictCdtabDTO}}& =
>}}= >
>}}> ?(
GetAllPinCodeDistrictDetails}}@ \
(}}\ ]
CancellationToken}}] n
token}}o t
)}}t u
{~~ 	
var 
data 
= 
await "
_pincodeDistictDetails 3
.3 4)
FindByMatchingPropertiesAsync4 Q
(Q R
tokenR W
,W X
xY Z
=>[ ]
x^ _
._ `
IsActive` h
==i k
truel p
&&q s
xt u
.u v
	IsDeletedv 
==
Ä Ç
false
É à
)
à â
.
â ä
ConfigureAwait
ä ò
(
ò ô
false
ô û
)
û ü
;
ü †
return
ÄÄ 
_mapper
ÄÄ 
.
ÄÄ 
Map
ÄÄ 
<
ÄÄ 
List
ÄÄ #
<
ÄÄ# $%
PincodeDistrictCdtabDTO
ÄÄ$ ;
>
ÄÄ; <
>
ÄÄ< =
(
ÄÄ= >
data
ÄÄ> B
)
ÄÄB C
;
ÄÄC D
}
ÅÅ 	
public
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
IEnumerable
ÉÉ %
<
ÉÉ% &
TlqCdTabDTO
ÉÉ& 1
>
ÉÉ1 2
>
ÉÉ2 3 
GetAllTalukDetails
ÉÉ4 F
(
ÉÉF G
CancellationToken
ÉÉG X
token
ÉÉY ^
)
ÉÉ^ _
{
ÑÑ 	
var
ÖÖ 
data
ÖÖ 
=
ÖÖ 
await
ÖÖ !
_masterTalukDetails
ÖÖ 0
.
ÖÖ0 1+
FindByMatchingPropertiesAsync
ÖÖ1 N
(
ÖÖN O
token
ÖÖO T
,
ÖÖT U
x
ÖÖV W
=>
ÖÖX Z
x
ÖÖ[ \
.
ÖÖ\ ]
IsActive
ÖÖ] e
==
ÖÖf h
true
ÖÖi m
&&
ÖÖn p
x
ÖÖq r
.
ÖÖr s
	IsDeleted
ÖÖs |
==
ÖÖ} 
falseÖÖÄ Ö
)ÖÖÖ Ü
.ÖÖÜ á
ConfigureAwaitÖÖá ï
(ÖÖï ñ
falseÖÖñ õ
)ÖÖõ ú
;ÖÖú ù
return
ÜÜ 
_mapper
ÜÜ 
.
ÜÜ 
Map
ÜÜ 
<
ÜÜ 
List
ÜÜ #
<
ÜÜ# $
TlqCdTabDTO
ÜÜ$ /
>
ÜÜ/ 0
>
ÜÜ0 1
(
ÜÜ1 2
data
ÜÜ2 6
)
ÜÜ6 7
;
ÜÜ7 8
}
áá 	
public
àà 
async
àà 
Task
àà 
<
àà 
IEnumerable
àà %
<
àà% &
HobCdtabDTO
àà& 1
>
àà1 2
>
àà2 3 
GetAllHobliDetails
àà4 F
(
ààF G
CancellationToken
ààG X
token
ààY ^
)
àà^ _
{
ââ 	
var
ää 
data
ää 
=
ää 
await
ää !
_masterHobliDetails
ää 0
.
ää0 1+
FindByMatchingPropertiesAsync
ää1 N
(
ääN O
token
ääO T
,
ääT U
x
ääV W
=>
ääX Z
x
ää[ \
.
ää\ ]
IsActive
ää] e
==
ääf h
true
ääi m
&&
ään p
x
ääq r
.
äär s
	IsDeleted
ääs |
==
ää} 
falseääÄ Ö
)ääÖ Ü
.ääÜ á
ConfigureAwaitääá ï
(ääï ñ
falseääñ õ
)ääõ ú
;ääú ù
return
ãã 
_mapper
ãã 
.
ãã 
Map
ãã 
<
ãã 
List
ãã #
<
ãã# $
HobCdtabDTO
ãã$ /
>
ãã/ 0
>
ãã0 1
(
ãã1 2
data
ãã2 6
)
ãã6 7
;
ãã7 8
}
åå 	
public
çç 
async
çç 
Task
çç 
<
çç 
IEnumerable
çç %
<
çç% &
VilCdTabDTO
çç& 1
>
çç1 2
>
çç2 3"
GetAllVillageDetails
çç4 H
(
ççH I
CancellationToken
ççI Z
token
çç[ `
)
çç` a
{
éé 	
var
èè 
data
èè 
=
èè 
await
èè #
_masterVillageDetails
èè 2
.
èè2 3+
FindByMatchingPropertiesAsync
èè3 P
(
èèP Q
token
èèQ V
,
èèV W
x
èèX Y
=>
èèZ \
x
èè] ^
.
èè^ _
IsActive
èè_ g
==
èèh j
true
èèk o
&&
èèp r
x
èès t
.
èèt u
	IsDeleted
èèu ~
==èè Å
falseèèÇ á
)èèá à
.èèà â
ConfigureAwaitèèâ ó
(èèó ò
falseèèò ù
)èèù û
;èèû ü
return
êê 
_mapper
êê 
.
êê 
Map
êê 
<
êê 
List
êê #
<
êê# $
VilCdTabDTO
êê$ /
>
êê/ 0
>
êê0 1
(
êê1 2
data
êê2 6
)
êê6 7
;
êê7 8
}
ëë 	
public
íí 
async
íí 
Task
íí 
<
íí 
bool
íí 
>
íí "
UpdateAddressDetails
íí  4
(
íí4 5
IdmUnitAddressDTO
íí5 F
PromAddressDto
ííG U
,
ííU V
CancellationToken
ííW h
token
ííi n
)
íín o
{
ìì 	
var
îî 
currentDetails
îî 
=
îî  
await
îî! &'
_idmUnitAddressRepository
îî' @
.
îî@ A-
FirstOrDefaultByExpressionAsync
îîA `
(
îî` a
x
îîa b
=>
îîc e
x
îîf g
.
îîg h
IdmUtAddressRowid
îîh y
==
îîz |
PromAddressDtoîî} ã
.îîã å!
IdmUtAddressRowidîîå ù
,îîù û
tokenîîü §
)îî§ •
;îî• ¶
if
ïï 
(
ïï 
currentDetails
ïï 
!=
ïï !
null
ïï" &
)
ïï& '
{
ññ 
currentDetails
óó 
.
óó 
	IsDeleted
óó (
=
óó) *
true
óó+ /
;
óó/ 0
currentDetails
òò 
.
òò 
IsActive
òò '
=
òò( )
false
òò* /
;
òò/ 0
currentDetails
ôô 
.
ôô 

ModifiedBy
ôô )
=
ôô* +
	_userInfo
ôô, 5
.
ôô5 6
Name
ôô6 :
;
ôô: ;
currentDetails
öö 
.
öö 
ModifiedDate
öö +
=
öö, -
DateTime
öö. 6
.
öö6 7
UtcNow
öö7 =
;
öö= >
await
õõ '
_idmUnitAddressRepository
õõ /
.
õõ/ 0
UpdateAsync
õõ0 ;
(
õõ; <
currentDetails
õõ< J
,
õõJ K
token
õõL Q
)
õõQ R
.
õõR S
ConfigureAwait
õõS a
(
õõa b
false
õõb g
)
õõg h
;
õõh i
var
ùù 
basicDetails
ùù  
=
ùù! "
_mapper
ùù# *
.
ùù* +
Map
ùù+ .
<
ùù. /
TblIdmUnitAddress
ùù/ @
>
ùù@ A
(
ùùA B
PromAddressDto
ùùB P
)
ùùP Q
;
ùùQ R
basicDetails
ûû 
.
ûû 
IdmUtAddressRowid
ûû .
=
ûû/ 0
$num
ûû1 2
;
ûû2 3
basicDetails
üü 
.
üü 
IsActive
üü %
=
üü& '
true
üü( ,
;
üü, -
basicDetails
†† 
.
†† 
	IsDeleted
†† &
=
††' (
false
††) .
;
††. /
basicDetails
°° 
.
°° 
	CreatedBy
°° &
=
°°' (
	_userInfo
°°) 2
.
°°2 3
Name
°°3 7
;
°°7 8
basicDetails
¢¢ 
.
¢¢ 
CreatedDate
¢¢ (
=
¢¢) *
DateTime
¢¢+ 3
.
¢¢3 4
UtcNow
¢¢4 :
;
¢¢: ;
var
§§ 
response
§§ 
=
§§ 
await
§§ $'
_idmUnitAddressRepository
§§% >
.
§§> ?
AddAsync
§§? G
(
§§G H
basicDetails
§§H T
,
§§T U
token
§§V [
)
§§[ \
.
§§\ ]
ConfigureAwait
§§] k
(
§§k l
false
§§l q
)
§§q r
;
§§r s
await
•• 
_work
•• 
.
•• 
CommitAsync
•• '
(
••' (
token
••( -
)
••- .
.
••. /
ConfigureAwait
••/ =
(
••= >
false
••> C
)
••C D
;
••D E
if
¶¶ 
(
¶¶ 
response
¶¶ 
!=
¶¶ 
null
¶¶  $
)
¶¶$ %
{
ßß 
return
®® 
true
®® 
;
®®  
}
©© 
else
™™ 
{
´´ 
return
¨¨ 
false
¨¨  
;
¨¨  !
}
≠≠ 
}
ÆÆ 
return
ØØ 
false
ØØ 
;
ØØ 
}
∞∞ 	
public
ππ 
async
ππ 
Task
ππ 
<
ππ 
IEnumerable
ππ %
<
ππ% &
TblPromcdtabDTO
ππ& 5
>
ππ5 6
>
ππ6 70
"GetAllMasterPromoterProfileDetails
ππ8 Z
(
ππZ [
CancellationToken
ππ[ l
token
ππm r
)
ππr s
{
∫∫ 	
var
ªª 
data
ªª 
=
ªª 
await
ªª $
_masterPromoterDetails
ªª 3
.
ªª3 4+
FindByMatchingPropertiesAsync
ªª4 Q
(
ªªQ R
token
ªªR W
,
ªªW X
x
ªªY Z
=>
ªª[ ]
x
ªª^ _
.
ªª_ `
IsActive
ªª` h
==
ªªi k
true
ªªl p
&&
ªªq s
x
ªªt u
.
ªªu v
	IsDeleted
ªªv 
==ªªÄ Ç
falseªªÉ à
)ªªà â
.ªªâ ä
ConfigureAwaitªªä ò
(ªªò ô
falseªªô û
)ªªû ü
;ªªü †
return
ºº 
_mapper
ºº 
.
ºº 
Map
ºº 
<
ºº 
List
ºº #
<
ºº# $
TblPromcdtabDTO
ºº$ 3
>
ºº3 4
>
ºº4 5
(
ºº5 6
data
ºº6 :
)
ºº: ;
;
ºº; <
}
ΩΩ 	
public
ææ 
async
ææ 
Task
ææ 
<
ææ 
IEnumerable
ææ %
<
ææ% &
IdmPromoterDTO
ææ& 4
>
ææ4 5
>
ææ5 6*
GetAllPromoterProfileDetails
ææ7 S
(
ææS T
long
ææT X
?
ææX Y
accountNumber
ææZ g
,
ææg h
CancellationToken
ææi z
tokenææ{ Ä
)ææÄ Å
{
øø 	
var
¿¿ 
data
¿¿ 
=
¿¿ 
await
¿¿ !
_promoterRepository
¿¿ 0
.
¿¿0 1+
FindByMatchingPropertiesAsync
¿¿1 N
(
¿¿N O
token
¿¿O T
,
¿¿T U
x
¿¿V W
=>
¿¿X Z
x
¿¿[ \
.
¿¿\ ]
LoanAcc
¿¿] d
==
¿¿e g
accountNumber
¿¿h u
&&
¿¿v x
x
¿¿y z
.
¿¿z {
IsActive¿¿{ É
==¿¿Ñ Ü
true¿¿á ã
&&¿¿å é
x¿¿è ê
.¿¿ê ë
	IsDeleted¿¿ë ö
==¿¿õ ù
false¿¿û £
)¿¿£ §
.¿¿§ •
ConfigureAwait¿¿• ≥
(¿¿≥ ¥
false¿¿¥ π
)¿¿π ∫
;¿¿∫ ª
return
¡¡ 
_mapper
¡¡ 
.
¡¡ 
Map
¡¡ 
<
¡¡ 
List
¡¡ #
<
¡¡# $
IdmPromoterDTO
¡¡$ 2
>
¡¡2 3
>
¡¡3 4
(
¡¡4 5
data
¡¡5 9
)
¡¡9 :
;
¡¡: ;
}
¬¬ 	
public
ƒƒ 
async
ƒƒ 
Task
ƒƒ 
<
ƒƒ 
bool
ƒƒ 
>
ƒƒ *
CreatePromoterProfileDetails
ƒƒ  <
(
ƒƒ< =
IdmPromoterDTO
ƒƒ= K
PromprofileDto
ƒƒL Z
,
ƒƒZ [
CancellationToken
ƒƒ\ m
token
ƒƒn s
)
ƒƒs t
{
≈≈ 	
var
∆∆ 
basicDetails
∆∆ 
=
∆∆ 
_mapper
∆∆ &
.
∆∆& '
Map
∆∆' *
<
∆∆* +
IdmPromoter
∆∆+ 6
>
∆∆6 7
(
∆∆7 8
PromprofileDto
∆∆8 F
)
∆∆F G
;
∆∆G H
basicDetails
«« 
.
«« 
IsActive
«« !
=
««" #
true
««$ (
;
««( )
basicDetails
»» 
.
»» 
	IsDeleted
»» "
=
»»# $
false
»»% *
;
»»* +
basicDetails
…… 
.
…… 
	CreatedBy
…… "
=
……# $
	_userInfo
……% .
.
……. /
Name
……/ 3
;
……3 4
basicDetails
   
.
   
CreatedDate
   $
=
  % &
DateTime
  ' /
.
  / 0
UtcNow
  0 6
;
  6 7
var
ÃÃ 
response
ÃÃ 
=
ÃÃ 
await
ÃÃ  !
_promoterRepository
ÃÃ! 4
.
ÃÃ4 5
AddAsync
ÃÃ5 =
(
ÃÃ= >
basicDetails
ÃÃ> J
,
ÃÃJ K
token
ÃÃL Q
)
ÃÃQ R
.
ÃÃR S
ConfigureAwait
ÃÃS a
(
ÃÃa b
false
ÃÃb g
)
ÃÃg h
;
ÃÃh i
await
ÕÕ 
_work
ÕÕ 
.
ÕÕ 
CommitAsync
ÕÕ #
(
ÕÕ# $
token
ÕÕ$ )
)
ÕÕ) *
.
ÕÕ* +
ConfigureAwait
ÕÕ+ 9
(
ÕÕ9 :
false
ÕÕ: ?
)
ÕÕ? @
;
ÕÕ@ A
if
ŒŒ 
(
ŒŒ 
response
ŒŒ 
!=
ŒŒ 
null
ŒŒ 
)
ŒŒ  
{
œœ 
return
–– 
true
–– 
;
–– 
}
—— 
else
““ 
{
”” 
return
‘‘ 
false
‘‘ 
;
‘‘ 
}
’’ 
}
÷÷ 	
public
◊◊ 
async
◊◊ 
Task
◊◊ 
<
◊◊ 
bool
◊◊ 
>
◊◊ *
UpdatePromoterProfileDetails
◊◊  <
(
◊◊< =
IdmPromoterDTO
◊◊= K
PromprofileDto
◊◊L Z
,
◊◊Z [
CancellationToken
◊◊\ m
token
◊◊n s
)
◊◊s t
{
ÿÿ 	
var
ŸŸ 
currentDetails
ŸŸ 
=
ŸŸ  
await
ŸŸ! &!
_promoterRepository
ŸŸ' :
.
ŸŸ: ;-
FirstOrDefaultByExpressionAsync
ŸŸ; Z
(
ŸŸZ [
x
ŸŸ[ \
=>
ŸŸ] _
x
ŸŸ` a
.
ŸŸa b
	IdmPromId
ŸŸb k
==
ŸŸl n
PromprofileDto
ŸŸo }
.
ŸŸ} ~
	IdmPromIdŸŸ~ á
,ŸŸá à
tokenŸŸâ é
)ŸŸé è
;ŸŸè ê
if
⁄⁄ 
(
⁄⁄ 
currentDetails
⁄⁄ 
!=
⁄⁄ !
null
⁄⁄" &
)
⁄⁄& '
{
€€ 
currentDetails
‹‹ 
.
‹‹ 
	IsDeleted
‹‹ (
=
‹‹) *
true
‹‹+ /
;
‹‹/ 0
currentDetails
›› 
.
›› 
IsActive
›› '
=
››( )
false
››* /
;
››/ 0
currentDetails
ﬁﬁ 
.
ﬁﬁ 

ModifiedBy
ﬁﬁ )
=
ﬁﬁ* +
	_userInfo
ﬁﬁ, 5
.
ﬁﬁ5 6
Name
ﬁﬁ6 :
;
ﬁﬁ: ;
currentDetails
ﬂﬂ 
.
ﬂﬂ 
ModifiedDate
ﬂﬂ +
=
ﬂﬂ, -
DateTime
ﬂﬂ. 6
.
ﬂﬂ6 7
UtcNow
ﬂﬂ7 =
;
ﬂﬂ= >
await
‡‡ !
_promoterRepository
‡‡ )
.
‡‡) *
UpdateAsync
‡‡* 5
(
‡‡5 6
currentDetails
‡‡6 D
,
‡‡D E
token
‡‡F K
)
‡‡K L
.
‡‡L M
ConfigureAwait
‡‡M [
(
‡‡[ \
false
‡‡\ a
)
‡‡a b
;
‡‡b c
var
‚‚ 
basicDetails
‚‚  
=
‚‚! "
_mapper
‚‚# *
.
‚‚* +
Map
‚‚+ .
<
‚‚. /
IdmPromoter
‚‚/ :
>
‚‚: ;
(
‚‚; <
PromprofileDto
‚‚< J
)
‚‚J K
;
‚‚K L
basicDetails
„„ 
.
„„ 
	IdmPromId
„„ &
=
„„' (
$num
„„) *
;
„„* +
basicDetails
‰‰ 
.
‰‰ 
IsActive
‰‰ %
=
‰‰& '
true
‰‰( ,
;
‰‰, -
basicDetails
ÂÂ 
.
ÂÂ 
	IsDeleted
ÂÂ &
=
ÂÂ' (
false
ÂÂ) .
;
ÂÂ. /
basicDetails
ÊÊ 
.
ÊÊ 
	CreatedBy
ÊÊ &
=
ÊÊ' (
	_userInfo
ÊÊ) 2
.
ÊÊ2 3
Name
ÊÊ3 7
;
ÊÊ7 8
basicDetails
ÁÁ 
.
ÁÁ 
CreatedDate
ÁÁ (
=
ÁÁ) *
DateTime
ÁÁ+ 3
.
ÁÁ3 4
UtcNow
ÁÁ4 :
;
ÁÁ: ;
var
ÈÈ 
response
ÈÈ 
=
ÈÈ 
await
ÈÈ $!
_promoterRepository
ÈÈ% 8
.
ÈÈ8 9
AddAsync
ÈÈ9 A
(
ÈÈA B
basicDetails
ÈÈB N
,
ÈÈN O
token
ÈÈP U
)
ÈÈU V
.
ÈÈV W
ConfigureAwait
ÈÈW e
(
ÈÈe f
false
ÈÈf k
)
ÈÈk l
;
ÈÈl m
await
ÍÍ 
_work
ÍÍ 
.
ÍÍ 
CommitAsync
ÍÍ '
(
ÍÍ' (
token
ÍÍ( -
)
ÍÍ- .
.
ÍÍ. /
ConfigureAwait
ÍÍ/ =
(
ÍÍ= >
false
ÍÍ> C
)
ÍÍC D
;
ÍÍD E
if
ÎÎ 
(
ÎÎ 
response
ÎÎ 
!=
ÎÎ 
null
ÎÎ  $
)
ÎÎ$ %
{
ÏÏ 
return
ÌÌ 
true
ÌÌ 
;
ÌÌ  
}
ÓÓ 
else
ÔÔ 
{
 
return
ÒÒ 
false
ÒÒ  
;
ÒÒ  !
}
ÚÚ 
}
ÛÛ 
return
ÙÙ 
false
ÙÙ 
;
ÙÙ 
}
ıı 	
public
ˆˆ 
async
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
bool
ˆˆ 
>
ˆˆ *
DeletePromoterProfileDetails
ˆˆ  <
(
ˆˆ< =
IdmPromoterDTO
ˆˆ= K
PromprofileDto
ˆˆL Z
,
ˆˆZ [
CancellationToken
ˆˆ\ m
token
ˆˆn s
)
ˆˆs t
{
˜˜ 	
var
¯¯ 
basicDetails
¯¯ 
=
¯¯ 
_mapper
¯¯ &
.
¯¯& '
Map
¯¯' *
<
¯¯* +
IdmPromoter
¯¯+ 6
>
¯¯6 7
(
¯¯7 8
PromprofileDto
¯¯8 F
)
¯¯F G
;
¯¯G H
basicDetails
˘˘ 
.
˘˘ 
IsActive
˘˘ !
=
˘˘" #
false
˘˘$ )
;
˘˘) *
basicDetails
˙˙ 
.
˙˙ 
	IsDeleted
˙˙ "
=
˙˙# $
true
˙˙% )
;
˙˙) *
basicDetails
˚˚ 
.
˚˚ 
ModifiedDate
˚˚ %
=
˚˚& '
DateTime
˚˚( 0
.
˚˚0 1
UtcNow
˚˚1 7
;
˚˚7 8
basicDetails
¸¸ 
.
¸¸ 

ModifiedBy
¸¸ #
=
¸¸$ %
	_userInfo
¸¸& /
.
¸¸/ 0
Name
¸¸0 4
;
¸¸4 5
var
˝˝ 
response
˝˝ 
=
˝˝ 
await
˝˝  !
_promoterRepository
˝˝! 4
.
˝˝4 5
UpdateAsync
˝˝5 @
(
˝˝@ A
basicDetails
˝˝A M
,
˝˝M N
token
˝˝O T
)
˝˝T U
.
˝˝U V
ConfigureAwait
˝˝V d
(
˝˝d e
false
˝˝e j
)
˝˝j k
;
˝˝k l
await
˛˛ 
_work
˛˛ 
.
˛˛ 
CommitAsync
˛˛ #
(
˛˛# $
token
˛˛$ )
)
˛˛) *
.
˛˛* +
ConfigureAwait
˛˛+ 9
(
˛˛9 :
false
˛˛: ?
)
˛˛? @
;
˛˛@ A
if
ˇˇ 
(
ˇˇ 
response
ˇˇ 
!=
ˇˇ 
null
ˇˇ  
)
ˇˇ  !
{
ÄÄ 
return
ÅÅ 
true
ÅÅ 
;
ÅÅ 
}
ÇÇ 
else
ÉÉ 
{
ÑÑ 
return
ÖÖ 
false
ÖÖ 
;
ÖÖ 
}
ÜÜ 
}
áá 	
public
ãã 
async
ãã 
Task
ãã 
<
ãã 
IEnumerable
ãã %
<
ãã% &'
IdmPromoterBankDetailsDTO
ãã& ?
>
ãã? @
>
ãã@ A$
GetAllPromoterBankInfo
ããB X
(
ããX Y
long
ããY ]
?
ãã] ^
accountNumber
ãã_ l
,
ããl m
CancellationToken
ããn 
tokenããÄ Ö
)ããÖ Ü
{
åå 	
var
çç 
data
çç 
=
çç 
await
çç %
_promoterBankRepository
çç 4
.
çç4 5+
FindByMatchingPropertiesAsync
çç5 R
(
ççR S
token
ççS X
,
ççX Y
x
ççZ [
=>
çç\ ^
x
çç_ `
.
çç` a
LoanAcc
çça h
==
ççi k
accountNumber
ççl y
&&
ççz |
x
çç} ~
.
çç~ 
IsActiveçç á
==ççà ä
trueççã è
&&ççê í
xççì î
.ççî ï
	IsDeletedççï û
==ççü °
falseçç¢ ß
,ççß ®
tblpriçç© Ø
=>çç∞ ≤
tblpriçç≥ π
.ççπ ∫
TbIIfscMasterçç∫ «
)çç« »
.çç» …
ConfigureAwaitçç… ◊
(çç◊ ÿ
falseççÿ ›
)çç› ﬁ
;ççﬁ ﬂ
return
éé 
_mapper
éé 
.
éé 
Map
éé 
<
éé  
List
éé  $
<
éé$ %'
IdmPromoterBankDetailsDTO
éé% >
>
éé> ?
>
éé? @
(
éé@ A
data
ééA E
)
ééE F
;
ééF G
}
èè 	
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
bool
ëë 
>
ëë $
CreatePromoterBankInfo
ëë  6
(
ëë6 7'
IdmPromoterBankDetailsDTO
ëë7 P&
changePromoterBankDetail
ëëQ i
,
ëëi j
CancellationToken
ëëk |
tokenëë} Ç
)ëëÇ É
{
íí 	
if
ìì 
(
ìì &
changePromoterBankDetail
ìì (
.
ìì( )
PrmPrimaryBank
ìì) 7
)
ìì7 8
{
îî 
IEnumerable
ïï 
<
ïï $
IdmPromoterBankDetails
ïï 2
>
ïï2 3!
AllPromoterBankList
ïï4 G
=
ïïH I
await
ïïJ O%
_promoterBankRepository
ïïP g
.
ïïg h,
FindByMatchingPropertiesAsyncïïh Ö
(ïïÖ Ü
tokenïïÜ ã
,ïïã å
xïïç é
=>ïïè ë
xïïí ì
.ïïì î
PromoterCodeïïî †
==ïï° £(
changePromoterBankDetailïï§ º
.ïïº Ω
PromoterCodeïïΩ …
&&ïï  Ã
xïïÕ Œ
.ïïŒ œ
IsActiveïïœ ◊
==ïïÿ ⁄
trueïï€ ﬂ
&&ïï‡ ‚
xïï„ ‰
.ïï‰ Â
	IsDeletedïïÂ Ó
==ïïÔ Ò
falseïïÚ ˜
)ïï¯ ˘
.ïï˘ ˙
ConfigureAwaitïï˙ à
(ïïà â
falseïïâ é
)ïïé è
;ïïè ê
if
ññ 
(
ññ !
AllPromoterBankList
ññ '
!=
ññ( *
null
ññ+ /
)
ññ/ 0
{
óó 
foreach
òò 
(
òò $
IdmPromoterBankDetails
òò 3 
promoterBankDetail
òò4 F
in
òòG I!
AllPromoterBankList
òòJ ]
)
òò] ^
{
ôô  
promoterBankDetail
öö *
.
öö* +
PrmPrimaryBank
öö+ 9
=
öö: ;
false
öö< A
;
ööA B
await
õõ %
_promoterBankRepository
õõ 5
.
õõ5 6
UpdateAsync
õõ6 A
(
õõA B 
promoterBankDetail
õõB T
,
õõT U
token
õõV [
)
õõ[ \
.
õõ\ ]
ConfigureAwait
õõ] k
(
õõk l
false
õõl q
)
õõq r
;
õõr s
}
úú 
}
ùù 
}
ûû 
var
†† 
basicDetails
†† 
=
†† 
_mapper
†† &
.
††& '
Map
††' *
<
††* +$
IdmPromoterBankDetails
††+ A
>
††A B
(
††B C&
changePromoterBankDetail
††C [
)
††[ \
;
††\ ]
basicDetails
°° 
.
°° 
IsActive
°° !
=
°°" #
true
°°$ (
;
°°( )
basicDetails
¢¢ 
.
¢¢ 
	IsDeleted
¢¢ "
=
¢¢# $
false
¢¢% *
;
¢¢* +
basicDetails
££ 
.
££ 
	CreatedBy
££ "
=
££# $
	_userInfo
££% .
.
££. /
Name
££/ 3
;
££3 4
basicDetails
§§ 
.
§§ 
CreatedDate
§§ $
=
§§% &
DateTime
§§' /
.
§§/ 0
UtcNow
§§0 6
;
§§6 7
var
¶¶ 
response
¶¶ 
=
¶¶ 
await
¶¶  %
_promoterBankRepository
¶¶! 8
.
¶¶8 9
AddAsync
¶¶9 A
(
¶¶A B
basicDetails
¶¶B N
,
¶¶N O
token
¶¶P U
)
¶¶U V
.
¶¶V W
ConfigureAwait
¶¶W e
(
¶¶e f
false
¶¶f k
)
¶¶k l
;
¶¶l m
await
ßß 
_work
ßß 
.
ßß 
CommitAsync
ßß #
(
ßß# $
token
ßß$ )
)
ßß) *
.
ßß* +
ConfigureAwait
ßß+ 9
(
ßß9 :
false
ßß: ?
)
ßß? @
;
ßß@ A
if
®® 
(
®® 
response
®® 
!=
®® 
null
®®  
)
®®  !
{
©© 
return
™™ 
true
™™ 
;
™™ 
}
´´ 
else
¨¨ 
{
≠≠ 
return
ÆÆ 
false
ÆÆ 
;
ÆÆ 
}
ØØ 
}
∞∞ 	
public
≤≤ 
async
≤≤ 
Task
≤≤ 
<
≤≤ 
bool
≤≤ 
>
≤≤ $
UpdatePromoterBankInfo
≤≤  6
(
≤≤6 7'
IdmPromoterBankDetailsDTO
≤≤7 P&
changePromoterBankDetail
≤≤Q i
,
≤≤i j
CancellationToken
≤≤k |
token≤≤} Ç
)≤≤Ç É
{
≥≥ 	
if
µµ 
(
µµ &
changePromoterBankDetail
µµ '
.
µµ' (
PrmPrimaryBank
µµ( 6
)
µµ6 7
{
∂∂ 
IEnumerable
∑∑ 
<
∑∑ $
IdmPromoterBankDetails
∑∑ 2
>
∑∑2 3!
AllPromoterBankList
∑∑4 G
=
∑∑H I
await
∑∑J O%
_promoterBankRepository
∑∑P g
.
∑∑g h,
FindByMatchingPropertiesAsync∑∑h Ö
(∑∑Ö Ü
token∑∑Ü ã
,∑∑ã å
x∑∑ç é
=>∑∑è ë
x∑∑í ì
.∑∑ì î
PromoterCode∑∑î †
==∑∑° £(
changePromoterBankDetail∑∑§ º
.∑∑º Ω
PromoterCode∑∑Ω …
&&∑∑  Ã
x∑∑Õ Œ
.∑∑Œ œ
IsActive∑∑œ ◊
==∑∑ÿ ⁄
true∑∑€ ﬂ
&&∑∑‡ ‚
x∑∑„ ‰
.∑∑‰ Â
	IsDeleted∑∑Â Ó
==∑∑Ô Ò
false∑∑Ú ˜
&&∑∑¯ ˙
x∑∑˚ ¸
.∑∑¸ ˝
	PrmIfscId∑∑˝ Ü
!=∑∑á â(
changePromoterBankDetail∑∑ä ¢
.∑∑¢ £
	PrmIfscId∑∑£ ¨
)∑∑¨ ≠
.∑∑≠ Æ
ConfigureAwait∑∑Æ º
(∑∑º Ω
false∑∑Ω ¬
)∑∑¬ √
;∑∑√ ƒ
if
∏∏ 
(
∏∏ !
AllPromoterBankList
∏∏ '
!=
∏∏( *
null
∏∏+ /
)
∏∏/ 0
{
ππ 
foreach
∫∫ 
(
∫∫ $
IdmPromoterBankDetails
∫∫ 3 
promoterBankDetail
∫∫4 F
in
∫∫G I!
AllPromoterBankList
∫∫J ]
)
∫∫] ^
{
ªª  
promoterBankDetail
ºº *
.
ºº* +
PrmPrimaryBank
ºº+ 9
=
ºº: ;
false
ºº< A
;
ººA B
await
ΩΩ %
_promoterBankRepository
ΩΩ 5
.
ΩΩ5 6
UpdateAsync
ΩΩ6 A
(
ΩΩA B 
promoterBankDetail
ΩΩB T
,
ΩΩT U
token
ΩΩV [
)
ΩΩ[ \
.
ΩΩ\ ]
ConfigureAwait
ΩΩ] k
(
ΩΩk l
false
ΩΩl q
)
ΩΩq r
;
ΩΩr s
}
ææ 
}
øø 
}
¿¿ 
var
√√ 
currentDetails
√√ 
=
√√  
await
√√! &%
_promoterBankRepository
√√' >
.
√√> ?-
FirstOrDefaultByExpressionAsync
√√? ^
(
√√^ _
x
√√_ `
=>
√√a c
x
√√d e
.
√√e f
IdmPromBankId
√√f s
==
√√t v'
changePromoterBankDetail√√w è
.√√è ê
IdmPromBankId√√ê ù
,√√ù û
token√√ü §
)√√§ •
;√√• ¶
if
ƒƒ 
(
ƒƒ 
currentDetails
ƒƒ 
!=
ƒƒ !
null
ƒƒ" &
)
ƒƒ& '
{
≈≈ 
currentDetails
∆∆ 
.
∆∆ 
	IsDeleted
∆∆ (
=
∆∆) *
true
∆∆+ /
;
∆∆/ 0
currentDetails
«« 
.
«« 
IsActive
«« '
=
««( )
false
««* /
;
««/ 0
currentDetails
»» 
.
»» 

ModifiedBy
»» )
=
»»* +
	_userInfo
»», 5
.
»»5 6
Name
»»6 :
;
»»: ;
currentDetails
…… 
.
…… 
ModifiedDate
…… +
=
……, -
DateTime
……. 6
.
……6 7
UtcNow
……7 =
;
……= >
await
   %
_promoterBankRepository
   -
.
  - .
UpdateAsync
  . 9
(
  9 :
currentDetails
  : H
,
  H I
token
  J O
)
  O P
.
  P Q
ConfigureAwait
  Q _
(
  _ `
false
  ` e
)
  e f
;
  f g
var
ÃÃ 
basicDetails
ÃÃ  
=
ÃÃ! "
_mapper
ÃÃ# *
.
ÃÃ* +
Map
ÃÃ+ .
<
ÃÃ. /$
IdmPromoterBankDetails
ÃÃ/ E
>
ÃÃE F
(
ÃÃF G&
changePromoterBankDetail
ÃÃG _
)
ÃÃ_ `
;
ÃÃ` a
basicDetails
ÕÕ 
.
ÕÕ 
IdmPromBankId
ÕÕ *
=
ÕÕ+ ,
$num
ÕÕ- .
;
ÕÕ. /
basicDetails
ŒŒ 
.
ŒŒ 
IsActive
ŒŒ %
=
ŒŒ& '
true
ŒŒ( ,
;
ŒŒ, -
basicDetails
œœ 
.
œœ 
	IsDeleted
œœ &
=
œœ' (
false
œœ) .
;
œœ. /
basicDetails
–– 
.
–– 
	CreatedBy
–– &
=
––' (
	_userInfo
––) 2
.
––2 3
Name
––3 7
;
––7 8
basicDetails
—— 
.
—— 
CreatedDate
—— (
=
——) *
DateTime
——+ 3
.
——3 4
UtcNow
——4 :
;
——: ;
var
”” 
response
”” 
=
”” 
await
”” $%
_promoterBankRepository
””% <
.
””< =
AddAsync
””= E
(
””E F
basicDetails
””F R
,
””R S
token
””T Y
)
””Y Z
.
””Z [
ConfigureAwait
””[ i
(
””i j
false
””j o
)
””o p
;
””p q
await
‘‘ 
_work
‘‘ 
.
‘‘ 
CommitAsync
‘‘ '
(
‘‘' (
token
‘‘( -
)
‘‘- .
.
‘‘. /
ConfigureAwait
‘‘/ =
(
‘‘= >
false
‘‘> C
)
‘‘C D
;
‘‘D E
if
’’ 
(
’’ 
response
’’ 
!=
’’ 
null
’’  $
)
’’$ %
{
÷÷ 
return
◊◊ 
true
◊◊ 
;
◊◊  
}
ÿÿ 
else
ŸŸ 
{
⁄⁄ 
return
€€ 
false
€€  
;
€€  !
}
‹‹ 
}
›› 
return
ﬁﬁ 
false
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 	
public
·· 
async
·· 
Task
·· 
<
·· 
bool
·· 
>
·· $
DeletePromoterBankInfo
··  6
(
··6 7'
IdmPromoterBankDetailsDTO
··7 P&
changePromoterBankDetail
··Q i
,
··i j
CancellationToken
··k |
token··} Ç
)··Ç É
{
‚‚ 	
var
„„ 
basicDetails
„„ 
=
„„ 
_mapper
„„ &
.
„„& '
Map
„„' *
<
„„* +$
IdmPromoterBankDetails
„„+ A
>
„„A B
(
„„B C&
changePromoterBankDetail
„„C [
)
„„[ \
;
„„\ ]
basicDetails
‰‰ 
.
‰‰ 
IsActive
‰‰ !
=
‰‰" #
false
‰‰$ )
;
‰‰) *
basicDetails
ÂÂ 
.
ÂÂ 
ModifiedDate
ÂÂ %
=
ÂÂ& '
DateTime
ÂÂ( 0
.
ÂÂ0 1
UtcNow
ÂÂ1 7
;
ÂÂ7 8
basicDetails
ÊÊ 
.
ÊÊ 

ModifiedBy
ÊÊ #
=
ÊÊ$ %
	_userInfo
ÊÊ& /
.
ÊÊ/ 0
Name
ÊÊ0 4
;
ÊÊ4 5
basicDetails
ÁÁ 
.
ÁÁ 
	IsDeleted
ÁÁ "
=
ÁÁ# $
true
ÁÁ% )
;
ÁÁ) *
var
ËË 
response
ËË 
=
ËË 
await
ËË  %
_promoterBankRepository
ËË! 8
.
ËË8 9
UpdateAsync
ËË9 D
(
ËËD E
basicDetails
ËËE Q
,
ËËQ R
token
ËËS X
)
ËËX Y
.
ËËY Z
ConfigureAwait
ËËZ h
(
ËËh i
false
ËËi n
)
ËËn o
;
ËËo p
await
ÈÈ 
_work
ÈÈ 
.
ÈÈ 
CommitAsync
ÈÈ #
(
ÈÈ# $
token
ÈÈ$ )
)
ÈÈ) *
.
ÈÈ* +
ConfigureAwait
ÈÈ+ 9
(
ÈÈ9 :
false
ÈÈ: ?
)
ÈÈ? @
;
ÈÈ@ A
if
ÍÍ 
(
ÍÍ 
response
ÍÍ 
!=
ÍÍ 
null
ÍÍ  
)
ÍÍ  !
{
ÎÎ 
return
ÏÏ 
true
ÏÏ 
;
ÏÏ 
}
ÌÌ 
else
ÓÓ 
{
ÔÔ 
return
 
false
 
;
 
}
ÒÒ 
}
ÚÚ 	
public
˘˘ 
async
˘˘ 
Task
˘˘ 
<
˘˘ 
IEnumerable
˘˘ %
<
˘˘% &
IdmPromAddressDTO
˘˘& 7
>
˘˘7 8
>
˘˘8 9*
GetAllPromoterAddressDetails
˘˘: V
(
˘˘V W
long
˘˘W [
?
˘˘[ \
accountNumber
˘˘] j
,
˘˘j k
CancellationToken
˘˘l }
token˘˘~ É
)˘˘É Ñ
{
˙˙ 	
var
˚˚ 
data
˚˚ 
=
˚˚ 
await
˚˚ (
_promoterAddressRepository
˚˚ 7
.
˚˚7 8+
FindByMatchingPropertiesAsync
˚˚8 U
(
˚˚U V
token
˚˚V [
,
˚˚[ \
x
˚˚] ^
=>
˚˚_ a
x
˚˚b c
.
˚˚c d
LoanAcc
˚˚d k
==
˚˚l n
accountNumber
˚˚o |
&&
˚˚} 
x˚˚Ä Å
.˚˚Å Ç
IsActive˚˚Ç ä
==˚˚ã ç
true˚˚é í
&&˚˚ì ï
x˚˚ñ ó
.˚˚ó ò
	IsDeleted˚˚ò °
==˚˚¢ §
false˚˚• ™
,˚˚™ ´
dis˚˚¨ Ø
=>˚˚∞ ≤
dis˚˚≥ ∂
.˚˚∂ ∑'
TblPincodeDistrictCdtab˚˚∑ Œ
,˚˚Œ œ
stateD˚˚– ÷
=>˚˚◊ Ÿ
stateD˚˚⁄ ‡
.˚˚‡ ·$
TblPincodeStateCdtab˚˚· ı
)˚˚ı ˆ
.˚˚ˆ ˜
ConfigureAwait˚˚˜ Ö
(˚˚Ö Ü
false˚˚Ü ã
)˚˚ã å
;˚˚å ç
return
¸¸ 
_mapper
¸¸ 
.
¸¸ 
Map
¸¸ 
<
¸¸ 
List
¸¸ #
<
¸¸# $
IdmPromAddressDTO
¸¸$ 5
>
¸¸5 6
>
¸¸6 7
(
¸¸7 8
data
¸¸8 <
)
¸¸< =
;
¸¸= >
}
˝˝ 	
public
˛˛ 
async
˛˛ 
Task
˛˛ 
<
˛˛ 
bool
˛˛ 
>
˛˛ &
UpdatePromAddressDetails
˛˛  8
(
˛˛8 9
IdmPromAddressDTO
˛˛9 J
PromAddressDto
˛˛K Y
,
˛˛Y Z
CancellationToken
˛˛[ l
token
˛˛m r
)
˛˛r s
{
ˇˇ 	
var
ÄÄ 
currentDetails
ÄÄ 
=
ÄÄ  
await
ÄÄ! &(
_promoterAddressRepository
ÄÄ' A
.
ÄÄA B-
FirstOrDefaultByExpressionAsync
ÄÄB a
(
ÄÄa b
x
ÄÄb c
=>
ÄÄd f
x
ÄÄg h
.
ÄÄh i
IdmPromadrId
ÄÄi u
==
ÄÄv x
PromAddressDtoÄÄy á
.ÄÄá à
IdmPromadrIdÄÄà î
,ÄÄî ï
tokenÄÄñ õ
)ÄÄõ ú
;ÄÄú ù
if
ÅÅ 
(
ÅÅ 
currentDetails
ÅÅ 
!=
ÅÅ !
null
ÅÅ" &
)
ÅÅ& '
{
ÇÇ 
currentDetails
ÉÉ 
.
ÉÉ 
	IsDeleted
ÉÉ (
=
ÉÉ) *
true
ÉÉ+ /
;
ÉÉ/ 0
currentDetails
ÑÑ 
.
ÑÑ 
IsActive
ÑÑ '
=
ÑÑ( )
false
ÑÑ* /
;
ÑÑ/ 0
currentDetails
ÖÖ 
.
ÖÖ 

ModifiedBy
ÖÖ )
=
ÖÖ* +
	_userInfo
ÖÖ, 5
.
ÖÖ5 6
Name
ÖÖ6 :
;
ÖÖ: ;
currentDetails
ÜÜ 
.
ÜÜ 
ModifiedDate
ÜÜ +
=
ÜÜ, -
DateTime
ÜÜ. 6
.
ÜÜ6 7
UtcNow
ÜÜ7 =
;
ÜÜ= >
await
áá (
_promoterAddressRepository
áá 0
.
áá0 1
UpdateAsync
áá1 <
(
áá< =
currentDetails
áá= K
,
ááK L
token
ááM R
)
ááR S
.
ááS T
ConfigureAwait
ááT b
(
ááb c
false
áác h
)
ááh i
;
áái j
var
ââ 
basicDetails
ââ  
=
ââ! "
_mapper
ââ# *
.
ââ* +
Map
ââ+ .
<
ââ. /
TblIdmPromAddress
ââ/ @
>
ââ@ A
(
ââA B
PromAddressDto
ââB P
)
ââP Q
;
ââQ R
basicDetails
ää 
.
ää 
IdmPromadrId
ää )
=
ää* +
$num
ää, -
;
ää- .
basicDetails
ãã 
.
ãã 
IsActive
ãã %
=
ãã& '
true
ãã( ,
;
ãã, -
basicDetails
åå 
.
åå 
	IsDeleted
åå &
=
åå' (
false
åå) .
;
åå. /
basicDetails
çç 
.
çç 

ModifiedBy
çç '
=
çç( )
	_userInfo
çç* 3
.
çç3 4
Name
çç4 8
;
çç8 9
basicDetails
éé 
.
éé 
ModifiedDate
éé )
=
éé* +
DateTime
éé, 4
.
éé4 5
UtcNow
éé5 ;
;
éé; <
var
êê 
response
êê 
=
êê 
await
êê $(
_promoterAddressRepository
êê% ?
.
êê? @
AddAsync
êê@ H
(
êêH I
basicDetails
êêI U
,
êêU V
token
êêW \
)
êê\ ]
.
êê] ^
ConfigureAwait
êê^ l
(
êêl m
false
êêm r
)
êêr s
;
êês t
await
ëë 
_work
ëë 
.
ëë 
CommitAsync
ëë '
(
ëë' (
token
ëë( -
)
ëë- .
.
ëë. /
ConfigureAwait
ëë/ =
(
ëë= >
false
ëë> C
)
ëëC D
;
ëëD E
if
íí 
(
íí 
response
íí 
!=
íí 
null
íí  $
)
íí$ %
{
ìì 
return
îî 
true
îî 
;
îî  
}
ïï 
else
ññ 
{
óó 
return
òò 
false
òò  
;
òò  !
}
ôô 
}
öö 
return
õõ 
false
õõ 
;
õõ 
}
úú 	
public
ûû 
async
ûû 
Task
ûû 
<
ûû 
bool
ûû 
>
ûû &
CreatePromAddressDetails
ûû  8
(
ûû8 9
IdmPromAddressDTO
ûû9 J
PromAddressDto
ûûK Y
,
ûûY Z
CancellationToken
ûû[ l
token
ûûm r
)
ûûr s
{
üü 	
var
†† 
basicDetails
†† 
=
†† 
_mapper
†† &
.
††& '
Map
††' *
<
††* +
TblIdmPromAddress
††+ <
>
††< =
(
††= >
PromAddressDto
††> L
)
††L M
;
††M N
basicDetails
°° 
.
°° 
IsActive
°° !
=
°°" #
true
°°$ (
;
°°( )
basicDetails
¢¢ 
.
¢¢ 
	IsDeleted
¢¢ "
=
¢¢# $
false
¢¢% *
;
¢¢* +
basicDetails
££ 
.
££ 
	CreatedBy
££ "
=
££# $
	_userInfo
££% .
.
££. /
Name
££/ 3
;
££3 4
basicDetails
§§ 
.
§§ 
CreatedDate
§§ $
=
§§% &
DateTime
§§' /
.
§§/ 0
UtcNow
§§0 6
;
§§6 7
var
¶¶ 
response
¶¶ 
=
¶¶ 
await
¶¶  (
_promoterAddressRepository
¶¶! ;
.
¶¶; <
AddAsync
¶¶< D
(
¶¶D E
basicDetails
¶¶E Q
,
¶¶Q R
token
¶¶S X
)
¶¶X Y
.
¶¶Y Z
ConfigureAwait
¶¶Z h
(
¶¶h i
false
¶¶i n
)
¶¶n o
;
¶¶o p
await
ßß 
_work
ßß 
.
ßß 
CommitAsync
ßß #
(
ßß# $
token
ßß$ )
)
ßß) *
.
ßß* +
ConfigureAwait
ßß+ 9
(
ßß9 :
false
ßß: ?
)
ßß? @
;
ßß@ A
if
®® 
(
®® 
response
®® 
!=
®® 
null
®®  
)
®®  !
{
©© 
return
™™ 
true
™™ 
;
™™ 
}
´´ 
else
¨¨ 
{
≠≠ 
return
ÆÆ 
false
ÆÆ 
;
ÆÆ 
}
ØØ 
}
∞∞ 	
public
≤≤ 
async
≤≤ 
Task
≤≤ 
<
≤≤ 
bool
≤≤ 
>
≤≤ &
DeletePromAddressDetails
≤≤  8
(
≤≤8 9
IdmPromAddressDTO
≤≤9 J
PromAddressDto
≤≤K Y
,
≤≤Y Z
CancellationToken
≤≤[ l
token
≤≤m r
)
≤≤r s
{
≥≥ 	
var
¥¥ 
basicDetails
¥¥ 
=
¥¥ 
_mapper
¥¥ &
.
¥¥& '
Map
¥¥' *
<
¥¥* +
TblIdmPromAddress
¥¥+ <
>
¥¥< =
(
¥¥= >
PromAddressDto
¥¥> L
)
¥¥L M
;
¥¥M N
basicDetails
µµ 
.
µµ 
IsActive
µµ !
=
µµ" #
false
µµ$ )
;
µµ) *
basicDetails
∂∂ 
.
∂∂ 
ModifiedDate
∂∂ %
=
∂∂& '
DateTime
∂∂( 0
.
∂∂0 1
UtcNow
∂∂1 7
;
∂∂7 8
basicDetails
∑∑ 
.
∑∑ 

ModifiedBy
∑∑ #
=
∑∑$ %
	_userInfo
∑∑& /
.
∑∑/ 0
Name
∑∑0 4
;
∑∑4 5
basicDetails
∏∏ 
.
∏∏ 
	IsDeleted
∏∏ "
=
∏∏# $
true
∏∏% )
;
∏∏) *
var
ππ 
response
ππ 
=
ππ 
await
ππ  (
_promoterAddressRepository
ππ! ;
.
ππ; <
UpdateAsync
ππ< G
(
ππG H
basicDetails
ππH T
,
ππT U
token
ππV [
)
ππ[ \
.
ππ\ ]
ConfigureAwait
ππ] k
(
ππk l
false
ππl q
)
ππq r
;
ππr s
await
∫∫ 
_work
∫∫ 
.
∫∫ 
CommitAsync
∫∫ #
(
∫∫# $
token
∫∫$ )
)
∫∫) *
.
∫∫* +
ConfigureAwait
∫∫+ 9
(
∫∫9 :
false
∫∫: ?
)
∫∫? @
;
∫∫@ A
if
ªª 
(
ªª 
response
ªª 
!=
ªª 
null
ªª  
)
ªª  !
{
ºº 
return
ΩΩ 
true
ΩΩ 
;
ΩΩ 
}
ææ 
else
øø 
{
¿¿ 
return
¡¡ 
false
¡¡ 
;
¡¡ 
}
¬¬ 
}
√√ 	
public
«« 
async
«« 
Task
«« 
<
«« 
IEnumerable
«« %
<
««% & 
IdmUnitProductsDTO
««& 8
>
««8 9
>
««9 :"
GetAllProductDetails
««; O
(
««O P
long
««P T
accountNumber
««U b
,
««b c
CancellationToken
««d u
token
««v {
)
««{ |
{
»» 	
var
…… 
data
…… 
=
…… 
await
…… '
_appUnitDetailsRepository
…… 6
.
……6 7+
FindByMatchingPropertiesAsync
……7 T
(
……T U
token
……U Z
,
……Z [
x
……[ \
=>
……] _
x
……` a
.
……a b
LoanAcc
……b i
==
……j l
accountNumber
……m z
&&
……{ }
x
……~ 
.…… Ä
IsActive……Ä à
==……â ã
true……å ê
&&……ë ì
x……î ï
.……ï ñ
	IsDeleted……ñ ü
==……† ¢
false……£ ®
)……® ©
.……© ™
ConfigureAwait……™ ∏
(……∏ π
false……π æ
)……æ ø
;……ø ¿
return
   
_mapper
   
.
   
Map
   
<
   
List
   #
<
  # $ 
IdmUnitProductsDTO
  $ 6
>
  6 7
>
  7 8
(
  8 9
data
  9 =
)
  = >
;
  > ?
}
ÀÀ 	
public
ÕÕ 
async
ÕÕ 
Task
ÕÕ 
<
ÕÕ 
IEnumerable
ÕÕ %
<
ÕÕ% &
TblProdCdtabDTO
ÕÕ& 5
>
ÕÕ5 6
>
ÕÕ6 7
GetAllProductList
ÕÕ8 I
(
ÕÕI J
CancellationToken
ÕÕJ [
token
ÕÕ\ a
)
ÕÕa b
{
ŒŒ 	
var
œœ 
data
œœ 
=
œœ 
await
œœ 
_productList
œœ )
.
œœ) *#
FindByExpressionAsync
œœ* ?
(
œœ? @
x
œœ@ A
=>
œœA C
x
œœD E
.
œœE F
IsActive
œœF N
==
œœO Q
true
œœR V
&&
œœW Y
x
œœZ [
.
œœ[ \
	IsDeleted
œœ\ e
==
œœf h
false
œœi n
,
œœo p
token
œœp u
)
œœu v
.
œœv w
ConfigureAwaitœœw Ö
(œœÖ Ü
falseœœÜ ã
)œœã å
;œœå ç
return
–– 
_mapper
–– 
.
–– 
Map
–– 
<
–– 
List
–– #
<
––# $
TblProdCdtabDTO
––$ 3
>
––3 4
>
––4 5
(
––5 6
data
––6 :
)
––: ;
;
––; <
}
—— 	
public
““ 
async
““ 
Task
““ 
<
““ 
bool
““ 
>
““ "
CreateProductDetails
““  4
(
““4 5 
IdmUnitProductsDTO
““5 G

ProductDTO
““H R
,
““R S
CancellationToken
““T e
token
““f k
)
““k l
{
”” 	
var
‘‘ 
basicDetails
‘‘ 
=
‘‘ 
_mapper
‘‘ &
.
‘‘& '
Map
‘‘' *
<
‘‘* +
IdmUnitProducts
‘‘+ :
>
‘‘: ;
(
‘‘; <

ProductDTO
‘‘< F
)
‘‘F G
;
‘‘G H
basicDetails
’’ 
.
’’ 
IsActive
’’ !
=
’’" #
true
’’$ (
;
’’( )
basicDetails
÷÷ 
.
÷÷ 
	IsDeleted
÷÷ "
=
÷÷# $
false
÷÷% *
;
÷÷* +
basicDetails
◊◊ 
.
◊◊ 
CreatedDate
◊◊ $
=
◊◊% &
DateTime
◊◊' /
.
◊◊/ 0
UtcNow
◊◊0 6
;
◊◊6 7
var
ŸŸ 
response
ŸŸ 
=
ŸŸ 
await
ŸŸ  '
_appUnitDetailsRepository
ŸŸ! :
.
ŸŸ: ;
AddAsync
ŸŸ; C
(
ŸŸC D
basicDetails
ŸŸD P
,
ŸŸP Q
token
ŸŸR W
)
ŸŸW X
.
ŸŸX Y
ConfigureAwait
ŸŸY g
(
ŸŸg h
false
ŸŸh m
)
ŸŸm n
;
ŸŸn o
await
⁄⁄ 
_work
⁄⁄ 
.
⁄⁄ 
CommitAsync
⁄⁄ #
(
⁄⁄# $
token
⁄⁄$ )
)
⁄⁄) *
.
⁄⁄* +
ConfigureAwait
⁄⁄+ 9
(
⁄⁄9 :
false
⁄⁄: ?
)
⁄⁄? @
;
⁄⁄@ A
if
€€ 
(
€€ 
response
€€ 
!=
€€ 
null
€€  
)
€€  !
{
‹‹ 
return
›› 
true
›› 
;
›› 
}
ﬁﬁ 
else
ﬂﬂ 
{
‡‡ 
return
·· 
false
·· 
;
·· 
}
‚‚ 
}
„„ 	
public
ÂÂ 
async
ÂÂ 
Task
ÂÂ 
<
ÂÂ 
bool
ÂÂ 
>
ÂÂ "
UpdateProductDetails
ÂÂ  4
(
ÂÂ4 5 
IdmUnitProductsDTO
ÂÂ5 G

ProductDTO
ÂÂH R
,
ÂÂR S
CancellationToken
ÂÂT e
token
ÂÂf k
)
ÂÂk l
{
ÊÊ 	
var
ÁÁ 
currentDetails
ÁÁ 
=
ÁÁ  
await
ÁÁ! &'
_appUnitDetailsRepository
ÁÁ' @
.
ÁÁ@ A-
FirstOrDefaultByExpressionAsync
ÁÁA `
(
ÁÁ` a
x
ÁÁa b
=>
ÁÁc e
x
ÁÁf g
.
ÁÁg h
IdmUtproductRowid
ÁÁh y
==
ÁÁz |

ProductDTOÁÁ} á
.ÁÁá à!
IdmUtproductRowidÁÁà ô
,ÁÁô ö
tokenÁÁõ †
)ÁÁ† °
;ÁÁ° ¢
if
ËË 
(
ËË 
currentDetails
ËË 
!=
ËË !
null
ËË" &
)
ËË& '
{
ÈÈ 
currentDetails
ÍÍ 
.
ÍÍ 
	IsDeleted
ÍÍ (
=
ÍÍ) *
true
ÍÍ+ /
;
ÍÍ/ 0
currentDetails
ÎÎ 
.
ÎÎ 
IsActive
ÎÎ '
=
ÎÎ( )
false
ÎÎ* /
;
ÎÎ/ 0
currentDetails
ÏÏ 
.
ÏÏ 

ModifiedBy
ÏÏ )
=
ÏÏ* +
	_userInfo
ÏÏ, 5
.
ÏÏ5 6
Name
ÏÏ6 :
;
ÏÏ: ;
currentDetails
ÌÌ 
.
ÌÌ 
ModifiedDate
ÌÌ +
=
ÌÌ, -
DateTime
ÌÌ. 6
.
ÌÌ6 7
UtcNow
ÌÌ7 =
;
ÌÌ= >
await
ÓÓ '
_appUnitDetailsRepository
ÓÓ /
.
ÓÓ/ 0
UpdateAsync
ÓÓ0 ;
(
ÓÓ; <
currentDetails
ÓÓ< J
,
ÓÓJ K
token
ÓÓL Q
)
ÓÓQ R
.
ÓÓR S
ConfigureAwait
ÓÓS a
(
ÓÓa b
false
ÓÓb g
)
ÓÓg h
;
ÓÓh i
var
 
basicDetails
  
=
! "
_mapper
# *
.
* +
Map
+ .
<
. /
IdmUnitProducts
/ >
>
> ?
(
? @

ProductDTO
@ J
)
J K
;
K L
basicDetails
ÒÒ 
.
ÒÒ 
IdmUtproductRowid
ÒÒ .
=
ÒÒ/ 0
$num
ÒÒ1 2
;
ÒÒ2 3
basicDetails
ÚÚ 
.
ÚÚ 
IsActive
ÚÚ %
=
ÚÚ& '
true
ÚÚ( ,
;
ÚÚ, -
basicDetails
ÛÛ 
.
ÛÛ 
	IsDeleted
ÛÛ &
=
ÛÛ' (
false
ÛÛ) .
;
ÛÛ. /
basicDetails
ÙÙ 
.
ÙÙ 
	CreatedBy
ÙÙ &
=
ÙÙ' (
	_userInfo
ÙÙ) 2
.
ÙÙ2 3
Name
ÙÙ3 7
;
ÙÙ7 8
basicDetails
ıı 
.
ıı 
CreatedDate
ıı (
=
ıı) *
DateTime
ıı+ 3
.
ıı3 4
UtcNow
ıı4 :
;
ıı: ;
var
˜˜ 
response
˜˜ 
=
˜˜ 
await
˜˜ $'
_appUnitDetailsRepository
˜˜% >
.
˜˜> ?
AddAsync
˜˜? G
(
˜˜G H
basicDetails
˜˜H T
,
˜˜T U
token
˜˜V [
)
˜˜[ \
.
˜˜\ ]
ConfigureAwait
˜˜] k
(
˜˜k l
false
˜˜l q
)
˜˜q r
;
˜˜r s
await
¯¯ 
_work
¯¯ 
.
¯¯ 
CommitAsync
¯¯ '
(
¯¯' (
token
¯¯( -
)
¯¯- .
.
¯¯. /
ConfigureAwait
¯¯/ =
(
¯¯= >
false
¯¯> C
)
¯¯C D
;
¯¯D E
if
˘˘ 
(
˘˘ 
response
˘˘ 
!=
˘˘ 
null
˘˘  $
)
˘˘$ %
{
˙˙ 
return
˚˚ 
true
˚˚ 
;
˚˚  
}
¸¸ 
else
˝˝ 
{
˛˛ 
return
ˇˇ 
false
ˇˇ  
;
ˇˇ  !
}
ÄÄ 
}
ÅÅ 
return
ÇÇ 
false
ÇÇ 
;
ÇÇ 
}
ÉÉ 	
public
ÖÖ 
async
ÖÖ 
Task
ÖÖ 
<
ÖÖ 
bool
ÖÖ 
>
ÖÖ "
DeleteProductDetails
ÖÖ  4
(
ÖÖ4 5 
IdmUnitProductsDTO
ÖÖ5 G
ProDetailsDto
ÖÖH U
,
ÖÖU V
CancellationToken
ÖÖW h
token
ÖÖi n
)
ÖÖn o
{
ÜÜ 	
var
áá 
basicDetails
áá 
=
áá 
_mapper
áá &
.
áá& '
Map
áá' *
<
áá* +
IdmUnitProducts
áá+ :
>
áá: ;
(
áá; <
ProDetailsDto
áá< I
)
ááI J
;
ááJ K
basicDetails
àà 
.
àà 
IsActive
àà !
=
àà" #
false
àà$ )
;
àà) *
basicDetails
ââ 
.
ââ 
ModifiedDate
ââ %
=
ââ& '
DateTime
ââ( 0
.
ââ0 1
UtcNow
ââ1 7
;
ââ7 8
basicDetails
ää 
.
ää 

ModifiedBy
ää #
=
ää$ %
	_userInfo
ää& /
.
ää/ 0
Name
ää0 4
;
ää4 5
basicDetails
ãã 
.
ãã 
	IsDeleted
ãã "
=
ãã# $
true
ãã% )
;
ãã) *
var
åå 
response
åå 
=
åå 
await
åå  '
_appUnitDetailsRepository
åå! :
.
åå: ;
UpdateAsync
åå; F
(
ååF G
basicDetails
ååG S
,
ååS T
token
ååU Z
)
ååZ [
.
åå[ \
ConfigureAwait
åå\ j
(
ååj k
false
ååk p
)
ååp q
;
ååq r
await
çç 
_work
çç 
.
çç 
CommitAsync
çç #
(
çç# $
token
çç$ )
)
çç) *
.
çç* +
ConfigureAwait
çç+ 9
(
çç9 :
false
çç: ?
)
çç? @
;
çç@ A
if
éé 
(
éé 
response
éé 
!=
éé 
null
éé  
)
éé  !
{
èè 
return
êê 
true
êê 
;
êê 
}
ëë 
else
íí 
{
ìì 
return
îî 
false
îî 
;
îî 
}
ïï 
}
ññ 	
public
öö 
async
öö 
Task
öö 
<
öö 
IEnumerable
öö %
<
öö% & 
IdmPromAssetDetDTO
öö& 8
>
öö8 9
>
öö9 :(
GetAllPromoterAssetDetails
öö; U
(
ööU V
long
ööV Z
accountNumber
öö[ h
,
ööh i
CancellationToken
ööj {
tokenöö| Å
)ööÅ Ç
{
õõ 	
var
úú 
data
úú 
=
úú 
await
úú -
_promoterAssetDetailsRepository
úú <
.
úú< =+
FindByMatchingPropertiesAsync
úú= Z
(
úúZ [
token
úú[ `
,
úú` a
x
úúa b
=>
úúc e
x
úúf g
.
úúg h
LoanAcc
úúh o
==
úúp r
accountNumberúús Ä
&&úúÅ É
xúúÑ Ö
.úúÖ Ü
IsActiveúúÜ é
==úúè ë
trueúúí ñ
&&úúó ô
xúúö õ
.úúõ ú
	IsDeletedúúú •
==úú¶ ®
falseúú© Æ
)úúÆ Ø
.úúØ ∞
ConfigureAwaitúú∞ æ
(úúæ ø
falseúúø ƒ
)úúƒ ≈
;úú≈ ∆
return
ùù 
_mapper
ùù 
.
ùù 
Map
ùù 
<
ùù 
List
ùù #
<
ùù# $ 
IdmPromAssetDetDTO
ùù$ 6
>
ùù6 7
>
ùù7 8
(
ùù8 9
data
ùù9 =
)
ùù= >
;
ùù> ?
}
ûû 	
public
†† 
async
†† 
Task
†† 
<
†† 
bool
†† 
>
††  
CreateAssetDetails
††  2
(
††2 3 
IdmPromAssetDetDTO
††3 E
AssetDTO
††F N
,
††N O
CancellationToken
††P a
token
††b g
)
††g h
{
°° 	
var
¢¢ 
basicDetails
¢¢ 
=
¢¢ 
_mapper
¢¢ &
.
¢¢& '
Map
¢¢' *
<
¢¢* +
IdmPromAssetDet
¢¢+ :
>
¢¢: ;
(
¢¢; <
AssetDTO
¢¢< D
)
¢¢D E
;
¢¢E F
basicDetails
££ 
.
££ 
IsActive
££ !
=
££" #
true
££$ (
;
££( )
basicDetails
§§ 
.
§§ 
	IsDeleted
§§ "
=
§§# $
false
§§% *
;
§§* +
basicDetails
•• 
.
•• 
CreatedDate
•• $
=
••% &
DateTime
••' /
.
••/ 0
UtcNow
••0 6
;
••6 7
var
ßß 
response
ßß 
=
ßß 
await
ßß  -
_promoterAssetDetailsRepository
ßß! @
.
ßß@ A
AddAsync
ßßA I
(
ßßI J
basicDetails
ßßJ V
,
ßßV W
token
ßßX ]
)
ßß] ^
.
ßß^ _
ConfigureAwait
ßß_ m
(
ßßm n
false
ßßn s
)
ßßs t
;
ßßt u
await
®® 
_work
®® 
.
®® 
CommitAsync
®® #
(
®®# $
token
®®$ )
)
®®) *
.
®®* +
ConfigureAwait
®®+ 9
(
®®9 :
false
®®: ?
)
®®? @
;
®®@ A
if
©© 
(
©© 
response
©© 
!=
©© 
null
©©  
)
©©  !
{
™™ 
return
´´ 
true
´´ 
;
´´ 
}
¨¨ 
else
≠≠ 
{
ÆÆ 
return
ØØ 
false
ØØ 
;
ØØ 
}
∞∞ 
}
±± 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
bool
≥≥ 
>
≥≥  
UpdateAssetDetails
≥≥  2
(
≥≥2 3 
IdmPromAssetDetDTO
≥≥3 E
AssetDTO
≥≥F N
,
≥≥N O
CancellationToken
≥≥P a
token
≥≥b g
)
≥≥g h
{
¥¥ 	
var
µµ 
currentDetails
µµ 
=
µµ  
await
µµ! &-
_promoterAssetDetailsRepository
µµ' F
.
µµF G-
FirstOrDefaultByExpressionAsync
µµG f
(
µµf g
x
µµg h
=>
µµi k
x
µµl m
.
µµm n
IdmPromassetId
µµn |
==
µµ} 
AssetDTOµµÄ à
.µµà â
IdmPromassetIdµµâ ó
,µµó ò
tokenµµô û
)µµû ü
;µµü †
if
∂∂ 
(
∂∂ 
currentDetails
∂∂ 
!=
∂∂ !
null
∂∂" &
)
∂∂& '
{
∑∑ 
currentDetails
∏∏ 
.
∏∏ 
	IsDeleted
∏∏ (
=
∏∏) *
true
∏∏+ /
;
∏∏/ 0
currentDetails
ππ 
.
ππ 
IsActive
ππ '
=
ππ( )
false
ππ* /
;
ππ/ 0
currentDetails
∫∫ 
.
∫∫ 

ModifiedBy
∫∫ )
=
∫∫* +
	_userInfo
∫∫, 5
.
∫∫5 6
Name
∫∫6 :
;
∫∫: ;
currentDetails
ªª 
.
ªª 
ModifiedDate
ªª +
=
ªª, -
DateTime
ªª. 6
.
ªª6 7
UtcNow
ªª7 =
;
ªª= >
await
ºº -
_promoterAssetDetailsRepository
ºº 5
.
ºº5 6
UpdateAsync
ºº6 A
(
ººA B
currentDetails
ººB P
,
ººP Q
token
ººR W
)
ººW X
.
ººX Y
ConfigureAwait
ººY g
(
ººg h
false
ººh m
)
ººm n
;
ººn o
var
ææ 
basicDetails
ææ  
=
ææ! "
_mapper
ææ# *
.
ææ* +
Map
ææ+ .
<
ææ. /
IdmPromAssetDet
ææ/ >
>
ææ> ?
(
ææ? @
AssetDTO
ææ@ H
)
ææH I
;
ææI J
basicDetails
øø 
.
øø 
IdmPromassetId
øø +
=
øø, -
$num
øø. /
;
øø/ 0
basicDetails
¿¿ 
.
¿¿ 
IsActive
¿¿ %
=
¿¿& '
true
¿¿( ,
;
¿¿, -
basicDetails
¡¡ 
.
¡¡ 
	IsDeleted
¡¡ &
=
¡¡' (
false
¡¡) .
;
¡¡. /
basicDetails
¬¬ 
.
¬¬ 
	CreatedBy
¬¬ &
=
¬¬' (
	_userInfo
¬¬) 2
.
¬¬2 3
Name
¬¬3 7
;
¬¬7 8
basicDetails
√√ 
.
√√ 
CreatedDate
√√ (
=
√√) *
DateTime
√√+ 3
.
√√3 4
UtcNow
√√4 :
;
√√: ;
var
≈≈ 
response
≈≈ 
=
≈≈ 
await
≈≈ $-
_promoterAssetDetailsRepository
≈≈% D
.
≈≈D E
AddAsync
≈≈E M
(
≈≈M N
basicDetails
≈≈N Z
,
≈≈Z [
token
≈≈\ a
)
≈≈a b
.
≈≈b c
ConfigureAwait
≈≈c q
(
≈≈q r
false
≈≈r w
)
≈≈w x
;
≈≈x y
await
∆∆ 
_work
∆∆ 
.
∆∆ 
CommitAsync
∆∆ '
(
∆∆' (
token
∆∆( -
)
∆∆- .
.
∆∆. /
ConfigureAwait
∆∆/ =
(
∆∆= >
false
∆∆> C
)
∆∆C D
;
∆∆D E
if
«« 
(
«« 
response
«« 
!=
«« 
null
««  $
)
««$ %
{
»» 
return
…… 
true
…… 
;
……  
}
   
else
ÀÀ 
{
ÃÃ 
return
ÕÕ 
false
ÕÕ  
;
ÕÕ  !
}
ŒŒ 
}
œœ 
return
–– 
false
–– 
;
–– 
}
—— 	
public
”” 
async
”” 
Task
”” 
<
”” 
bool
”” 
>
””  
DeleteAssetDetails
””  2
(
””2 3 
IdmPromAssetDetDTO
””3 E
AssetdetailsDTO
””F U
,
””U V
CancellationToken
””W h
token
””i n
)
””n o
{
‘‘ 	
var
’’ 
basicDetails
’’ 
=
’’ 
_mapper
’’ &
.
’’& '
Map
’’' *
<
’’* +
IdmPromAssetDet
’’+ :
>
’’: ;
(
’’; <
AssetdetailsDTO
’’< K
)
’’K L
;
’’L M
basicDetails
÷÷ 
.
÷÷ 
IsActive
÷÷ !
=
÷÷" #
false
÷÷$ )
;
÷÷) *
basicDetails
◊◊ 
.
◊◊ 
ModifiedDate
◊◊ %
=
◊◊& '
DateTime
◊◊( 0
.
◊◊0 1
UtcNow
◊◊1 7
;
◊◊7 8
basicDetails
ÿÿ 
.
ÿÿ 

ModifiedBy
ÿÿ #
=
ÿÿ$ %
	_userInfo
ÿÿ& /
.
ÿÿ/ 0
Name
ÿÿ0 4
;
ÿÿ4 5
basicDetails
ŸŸ 
.
ŸŸ 
	IsDeleted
ŸŸ "
=
ŸŸ# $
true
ŸŸ% )
;
ŸŸ) *
var
⁄⁄ 
response
⁄⁄ 
=
⁄⁄ 
await
⁄⁄  -
_promoterAssetDetailsRepository
⁄⁄! @
.
⁄⁄@ A
UpdateAsync
⁄⁄A L
(
⁄⁄L M
basicDetails
⁄⁄M Y
,
⁄⁄Y Z
token
⁄⁄[ `
)
⁄⁄` a
.
⁄⁄a b
ConfigureAwait
⁄⁄b p
(
⁄⁄p q
false
⁄⁄q v
)
⁄⁄v w
;
⁄⁄w x
await
€€ 
_work
€€ 
.
€€ 
CommitAsync
€€ #
(
€€# $
token
€€$ )
)
€€) *
.
€€* +
ConfigureAwait
€€+ 9
(
€€9 :
false
€€: ?
)
€€? @
;
€€@ A
if
‹‹ 
(
‹‹ 
response
‹‹ 
!=
‹‹ 
null
‹‹  
)
‹‹  !
{
›› 
return
ﬁﬁ 
true
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 
else
‡‡ 
{
·· 
return
‚‚ 
false
‚‚ 
;
‚‚ 
}
„„ 
}
‰‰ 	
public
ÈÈ 
async
ÈÈ 
Task
ÈÈ 
<
ÈÈ 
IEnumerable
ÈÈ %
<
ÈÈ% &%
IdmChangeBankDetailsDTO
ÈÈ& =
>
ÈÈ= >
>
ÈÈ> ?)
GetAllChangeBankDetailsList
ÈÈ@ [
(
ÈÈ[ \
long
ÈÈ\ `
?
ÈÈ` a
accountNumber
ÈÈb o
,
ÈÈo p 
CancellationTokenÈÈq Ç
tokenÈÈÉ à
)ÈÈà â
{
ÍÍ 	
var
ÎÎ 
data
ÎÎ 
=
ÎÎ 
await
ÎÎ *
_changeBankDetailsRepository
ÎÎ 9
.
ÎÎ9 :+
FindByMatchingPropertiesAsync
ÎÎ: W
(
ÎÎW X
token
ÎÎX ]
,
ÎÎ] ^
x
ÎÎ_ `
=>
ÎÎa c
x
ÎÎd e
.
ÎÎe f
LoanAcc
ÎÎf m
==
ÎÎn p
accountNumber
ÎÎq ~
&&ÎÎ Å
xÎÎÇ É
.ÎÎÉ Ñ
IsActiveÎÎÑ å
==ÎÎç è
trueÎÎê î
&&ÎÎï ó
xÎÎò ô
.ÎÎô ö
	IsDeletedÎÎö £
==ÎÎ§ ¶
falseÎÎß ¨
)ÎÎ¨ ≠
.ÎÎ≠ Æ
ConfigureAwaitÎÎÆ º
(ÎÎº Ω
falseÎÎΩ ¬
)ÎÎ¬ √
;ÎÎ√ ƒ
return
ÏÏ 
_mapper
ÏÏ 
.
ÏÏ 
Map
ÏÏ 
<
ÏÏ 
List
ÏÏ #
<
ÏÏ# $%
IdmChangeBankDetailsDTO
ÏÏ$ ;
>
ÏÏ; <
>
ÏÏ< =
(
ÏÏ= >
data
ÏÏ> B
)
ÏÏB C
;
ÏÏC D
}
ÌÌ 	
public
ÓÓ 
async
ÓÓ 
Task
ÓÓ 
<
ÓÓ 
IEnumerable
ÓÓ %
<
ÓÓ% &
IfscMasterDTO
ÓÓ& 3
>
ÓÓ3 4
>
ÓÓ4 5#
GetAllIfscBankDetails
ÓÓ6 K
(
ÓÓK L
CancellationToken
ÓÓL ]
token
ÓÓ^ c
)
ÓÓc d
{
ÔÔ 	
var
 
data
 
=
 
await
 (
_ifscBankDetailsRepository
 7
.
7 8#
FindByExpressionAsync
8 M
(
M N
x
N O
=>
P R
x
S T
.
T U
IsActive
U ]
==
^ `
true
a e
,
e f
token
f k
)
k l
.
l m
ConfigureAwait
m {
(
{ |
false| Å
)Å Ç
;Ç É
return
ÒÒ 
_mapper
ÒÒ 
.
ÒÒ 
Map
ÒÒ 
<
ÒÒ 
List
ÒÒ #
<
ÒÒ# $
IfscMasterDTO
ÒÒ$ 1
>
ÒÒ1 2
>
ÒÒ2 3
(
ÒÒ3 4
data
ÒÒ4 8
)
ÒÒ8 9
;
ÒÒ9 :
}
ÚÚ 	
public
ÙÙ 
async
ÙÙ 
Task
ÙÙ 
<
ÙÙ 
bool
ÙÙ 
>
ÙÙ %
CreateChangeBankDetails
ÙÙ  7
(
ÙÙ7 8%
IdmChangeBankDetailsDTO
ÙÙ8 O
changeBankDetail
ÙÙP `
,
ÙÙ` a
CancellationToken
ÙÙb s
token
ÙÙt y
)
ÙÙy z
{
ıı 	
if
ˆˆ 
(
ˆˆ 
changeBankDetail
ˆˆ  
.
ˆˆ  !
UtBankPrimary
ˆˆ! .
)
ˆˆ. /
{
˜˜ 
var
¯¯ 
data
¯¯ 
=
¯¯ 
await
¯¯  *
_changeBankDetailsRepository
¯¯! =
.
¯¯= >+
FindByMatchingPropertiesAsync
¯¯> [
(
¯¯[ \
token
¯¯\ a
,
¯¯a b
x
¯¯c d
=>
¯¯e g
x
¯¯h i
.
¯¯i j
LoanAcc
¯¯j q
==
¯¯r t
changeBankDetail¯¯u Ö
.¯¯Ö Ü
LoanAcc¯¯Ü ç
&&¯¯é ê
x¯¯ë í
.¯¯í ì
UtBankPrimary¯¯ì †
==¯¯° £
true¯¯§ ®
&&¯¯© ´
x¯¯¨ ≠
.¯¯≠ Æ
IsActive¯¯Æ ∂
==¯¯∑ π
true¯¯∫ æ
&&¯¯ø ¡
x¯¯¬ √
.¯¯√ ƒ
	IsDeleted¯¯ƒ Õ
==¯¯Œ –
false¯¯— ÷
)¯¯÷ ◊
.¯¯◊ ÿ
ConfigureAwait¯¯ÿ Ê
(¯¯Ê Á
false¯¯Á Ï
)¯¯Ï Ì
;¯¯Ì Ó
foreach
˘˘ 
(
˘˘ 
var
˘˘ 
bankdetails
˘˘ '
in
˘˘( *
data
˘˘+ /
)
˘˘/ 0
{
˙˙ 
bankdetails
˚˚ 
.
˚˚  
UtBankPrimary
˚˚  -
=
˚˚. /
false
˚˚0 5
;
˚˚5 6
await
¸¸ *
_changeBankDetailsRepository
¸¸ 6
.
¸¸6 7
UpdateAsync
¸¸7 B
(
¸¸B C
bankdetails
¸¸C N
,
¸¸N O
token
¸¸O T
)
¸¸T U
.
¸¸U V
ConfigureAwait
¸¸V d
(
¸¸d e
false
¸¸e j
)
¸¸j k
;
¸¸k l
}
˝˝ 
}
˛˛ 
var
ˇˇ 
basicDetails
ˇˇ 
=
ˇˇ 
_mapper
ˇˇ &
.
ˇˇ& '
Map
ˇˇ' *
<
ˇˇ* +
TblIdmUnitBank
ˇˇ+ 9
>
ˇˇ9 :
(
ˇˇ: ;
changeBankDetail
ˇˇ; K
)
ˇˇK L
;
ˇˇL M
basicDetails
ÄÄ 
.
ÄÄ 
IsActive
ÄÄ !
=
ÄÄ" #
true
ÄÄ$ (
;
ÄÄ( )
basicDetails
ÅÅ 
.
ÅÅ 
	IsDeleted
ÅÅ "
=
ÅÅ# $
false
ÅÅ% *
;
ÅÅ* +
basicDetails
ÇÇ 
.
ÇÇ 
	CreatedBy
ÇÇ "
=
ÇÇ# $
	_userInfo
ÇÇ% .
.
ÇÇ. /
Name
ÇÇ/ 3
;
ÇÇ3 4
basicDetails
ÉÉ 
.
ÉÉ 
CreatedDate
ÉÉ $
=
ÉÉ% &
DateTime
ÉÉ' /
.
ÉÉ/ 0
UtcNow
ÉÉ0 6
;
ÉÉ6 7
var
ÖÖ 
response
ÖÖ 
=
ÖÖ 
await
ÖÖ  *
_changeBankDetailsRepository
ÖÖ! =
.
ÖÖ= >
AddAsync
ÖÖ> F
(
ÖÖF G
basicDetails
ÖÖG S
,
ÖÖS T
token
ÖÖU Z
)
ÖÖZ [
.
ÖÖ[ \
ConfigureAwait
ÖÖ\ j
(
ÖÖj k
false
ÖÖk p
)
ÖÖp q
;
ÖÖq r
await
ÜÜ 
_work
ÜÜ 
.
ÜÜ 
CommitAsync
ÜÜ #
(
ÜÜ# $
token
ÜÜ$ )
)
ÜÜ) *
.
ÜÜ* +
ConfigureAwait
ÜÜ+ 9
(
ÜÜ9 :
false
ÜÜ: ?
)
ÜÜ? @
;
ÜÜ@ A
if
áá 
(
áá 
response
áá 
!=
áá 
null
áá  
)
áá  !
{
àà 
return
ââ 
true
ââ 
;
ââ 
}
ää 
else
ãã 
{
åå 
return
çç 
false
çç 
;
çç 
}
éé 
}
èè 	
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
bool
ëë 
>
ëë %
UpdateChangeBankDetails
ëë  7
(
ëë7 8%
IdmChangeBankDetailsDTO
ëë8 O
changeBankDetail
ëëP `
,
ëë` a
CancellationToken
ëëb s
token
ëët y
)
ëëy z
{
íí 	
if
ìì 
(
ìì 
changeBankDetail
ìì  
.
ìì  !
UtBankPrimary
ìì! .
)
ìì. /
{
îî 
var
ïï 
data
ïï 
=
ïï 
await
ïï  *
_changeBankDetailsRepository
ïï! =
.
ïï= >+
FindByMatchingPropertiesAsync
ïï> [
(
ïï[ \
token
ïï\ a
,
ïïa b
x
ïïc d
=>
ïïe g
x
ïïh i
.
ïïi j
LoanAcc
ïïj q
==
ïïr t
changeBankDetailïïu Ö
.ïïÖ Ü
LoanAccïïÜ ç
&&ïïé ê
xïïë í
.ïïí ì
UtBankPrimaryïïì †
==ïï° £
trueïï§ ®
&&ïï© ´
xïï¨ ≠
.ïï≠ Æ
IsActiveïïÆ ∂
==ïï∑ π
trueïï∫ æ
&&ïïø ¡
xïï¬ √
.ïï√ ƒ
	IsDeletedïïƒ Õ
==ïïŒ –
falseïï— ÷
)ïï÷ ◊
.ïï◊ ÿ
ConfigureAwaitïïÿ Ê
(ïïÊ Á
falseïïÁ Ï
)ïïÏ Ì
;ïïÌ Ó
foreach
ññ 
(
ññ 
var
ññ 
bankdetails
ññ (
in
ññ) +
data
ññ, 0
)
ññ0 1
{
óó 
bankdetails
òò 
.
òò  
UtBankPrimary
òò  -
=
òò. /
false
òò0 5
;
òò5 6
await
ôô *
_changeBankDetailsRepository
ôô 6
.
ôô6 7
UpdateAsync
ôô7 B
(
ôôB C
bankdetails
ôôC N
,
ôôN O
token
ôôP U
)
ôôU V
.
ôôV W
ConfigureAwait
ôôW e
(
ôôe f
false
ôôf k
)
ôôk l
;
ôôl m
}
öö 
}
õõ 
var
ùù 
currentDetails
ùù 
=
ùù  
await
ùù! &*
_changeBankDetailsRepository
ùù' C
.
ùùC D-
FirstOrDefaultByExpressionAsync
ùùD c
(
ùùc d
x
ùùd e
=>
ùùf h
x
ùùi j
.
ùùj k
IdmUtBankRowId
ùùk y
==
ùùz |
changeBankDetailùù} ç
.ùùç é
IdmUtBankRowIdùùé ú
,ùùú ù
tokenùùû £
)ùù£ §
;ùù§ •
if
üü 
(
üü 
currentDetails
üü 
!=
üü  
null
üü! %
)
üü% &
{
†† 
currentDetails
¢¢ 
.
¢¢ 
	IsDeleted
¢¢ (
=
¢¢) *
true
¢¢+ /
;
¢¢/ 0
currentDetails
££ 
.
££ 
IsActive
££ '
=
££( )
false
££* /
;
££/ 0
currentDetails
§§ 
.
§§ 

ModifiedBy
§§ )
=
§§* +
	_userInfo
§§, 5
.
§§5 6
Name
§§6 :
;
§§: ;
currentDetails
•• 
.
•• 
ModifiedDate
•• +
=
••, -
DateTime
••. 6
.
••6 7
UtcNow
••7 =
;
••= >
await
¶¶ *
_changeBankDetailsRepository
¶¶ 2
.
¶¶2 3
UpdateAsync
¶¶3 >
(
¶¶> ?
currentDetails
¶¶? M
,
¶¶M N
token
¶¶O T
)
¶¶T U
.
¶¶U V
ConfigureAwait
¶¶V d
(
¶¶d e
false
¶¶e j
)
¶¶j k
;
¶¶k l
var
®® 
basicDetails
®®  
=
®®! "
_mapper
®®# *
.
®®* +
Map
®®+ .
<
®®. /
TblIdmUnitBank
®®/ =
>
®®= >
(
®®> ?
changeBankDetail
®®? O
)
®®O P
;
®®P Q
basicDetails
©© 
.
©© 
IdmUtBankRowId
©© +
=
©©, -
$num
©©. /
;
©©/ 0
basicDetails
™™ 
.
™™ 
IsActive
™™ %
=
™™& '
true
™™( ,
;
™™, -
basicDetails
´´ 
.
´´ 
	IsDeleted
´´ &
=
´´' (
false
´´) .
;
´´. /
basicDetails
¨¨ 
.
¨¨ 
	CreatedBy
¨¨ &
=
¨¨' (
	_userInfo
¨¨) 2
.
¨¨2 3
Name
¨¨3 7
;
¨¨7 8
basicDetails
≠≠ 
.
≠≠ 
CreatedDate
≠≠ (
=
≠≠) *
DateTime
≠≠+ 3
.
≠≠3 4
UtcNow
≠≠4 :
;
≠≠: ;
var
ØØ 
response
ØØ 
=
ØØ 
await
ØØ $*
_changeBankDetailsRepository
ØØ% A
.
ØØA B
AddAsync
ØØB J
(
ØØJ K
basicDetails
ØØK W
,
ØØW X
token
ØØY ^
)
ØØ^ _
.
ØØ_ `
ConfigureAwait
ØØ` n
(
ØØn o
false
ØØo t
)
ØØt u
;
ØØu v
await
∞∞ 
_work
∞∞ 
.
∞∞ 
CommitAsync
∞∞ '
(
∞∞' (
token
∞∞( -
)
∞∞- .
.
∞∞. /
ConfigureAwait
∞∞/ =
(
∞∞= >
false
∞∞> C
)
∞∞C D
;
∞∞D E
if
±± 
(
±± 
response
±± 
!=
±± 
null
±±  $
)
±±$ %
{
≤≤ 
return
≥≥ 
true
≥≥ 
;
≥≥  
}
¥¥ 
else
µµ 
{
∂∂ 
return
∑∑ 
false
∑∑  
;
∑∑  !
}
∏∏ 
}
ππ 
return
∫∫ 
false
∫∫ 
;
∫∫ 
}
ªª 	
public
ΩΩ 
async
ΩΩ 
Task
ΩΩ 
<
ΩΩ 
bool
ΩΩ 
>
ΩΩ %
DeleteChangeBankDetails
ΩΩ  7
(
ΩΩ7 8%
IdmChangeBankDetailsDTO
ΩΩ8 O
changeBankDetail
ΩΩP `
,
ΩΩ` a
CancellationToken
ΩΩb s
token
ΩΩt y
)
ΩΩy z
{
ææ 	
var
øø 
basicDetails
øø 
=
øø 
_mapper
øø &
.
øø& '
Map
øø' *
<
øø* +
TblIdmUnitBank
øø+ 9
>
øø9 :
(
øø: ;
changeBankDetail
øø; K
)
øøK L
;
øøL M
basicDetails
¿¿ 
.
¿¿ 
IsActive
¿¿ !
=
¿¿" #
false
¿¿$ )
;
¿¿) *
basicDetails
¡¡ 
.
¡¡ 
ModifiedDate
¡¡ %
=
¡¡& '
DateTime
¡¡( 0
.
¡¡0 1
UtcNow
¡¡1 7
;
¡¡7 8
basicDetails
¬¬ 
.
¬¬ 

ModifiedBy
¬¬ #
=
¬¬$ %
	_userInfo
¬¬& /
.
¬¬/ 0
Name
¬¬0 4
;
¬¬4 5
basicDetails
√√ 
.
√√ 
	IsDeleted
√√ "
=
√√# $
true
√√% )
;
√√) *
var
ƒƒ 
response
ƒƒ 
=
ƒƒ 
await
ƒƒ  *
_changeBankDetailsRepository
ƒƒ! =
.
ƒƒ= >
UpdateAsync
ƒƒ> I
(
ƒƒI J
basicDetails
ƒƒJ V
,
ƒƒV W
token
ƒƒX ]
)
ƒƒ] ^
.
ƒƒ^ _
ConfigureAwait
ƒƒ_ m
(
ƒƒm n
false
ƒƒn s
)
ƒƒs t
;
ƒƒt u
await
≈≈ 
_work
≈≈ 
.
≈≈ 
CommitAsync
≈≈ #
(
≈≈# $
token
≈≈$ )
)
≈≈) *
.
≈≈* +
ConfigureAwait
≈≈+ 9
(
≈≈9 :
false
≈≈: ?
)
≈≈? @
;
≈≈@ A
if
∆∆ 
(
∆∆ 
response
∆∆ 
!=
∆∆ 
null
∆∆  
)
∆∆  !
{
«« 
return
»» 
true
»» 
;
»» 
}
…… 
else
   
{
ÀÀ 
return
ÃÃ 
false
ÃÃ 
;
ÃÃ 
}
ÕÕ 
}
ŒŒ 	
public
““ 
async
““ 
Task
““ 
<
““ 
IEnumerable
““ %
<
““% &#
TblPromoterLiabDetDTO
““& ;
>
““; <
>
““< =(
GetAllPromoterLiabiltyInfo
““> X
(
““X Y
long
““Y ]
?
““] ^
accountNumber
““_ l
,
““l m
CancellationToken
““n 
token““Ä Ö
)““Ö Ü
{
”” 	
var
‘‘ 
data
‘‘ 
=
‘‘ 
await
‘‘ .
 _promoterLiabilityInfoRepository
‘‘ =
.
‘‘= >+
FindByMatchingPropertiesAsync
‘‘> [
(
‘‘[ \
token
‘‘\ a
,
‘‘a b
x
‘‘c d
=>
‘‘e g
x
‘‘h i
.
‘‘i j
LoanAcc
‘‘j q
==
‘‘r t
accountNumber‘‘u Ç
&&‘‘É Ö
x‘‘Ü á
.‘‘á à
IsActive‘‘à ê
==‘‘ë ì
true‘‘î ò
&&‘‘ô õ
x‘‘ú ù
.‘‘ù û
	IsDeleted‘‘û ß
==‘‘® ™
false‘‘´ ∞
)‘‘∞ ±
.‘‘± ≤
ConfigureAwait‘‘≤ ¿
(‘‘¿ ¡
false‘‘¡ ∆
)‘‘∆ «
;‘‘« »
return
÷÷ 
_mapper
÷÷ 
.
÷÷ 
Map
÷÷ 
<
÷÷ 
List
÷÷ #
<
÷÷# $#
TblPromoterLiabDetDTO
÷÷$ 9
>
÷÷9 :
>
÷÷: ;
(
÷÷; <
data
÷÷< @
)
÷÷@ A
;
÷÷A B
}
◊◊ 	
public
ŸŸ 
async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 
bool
ŸŸ 
>
ŸŸ (
CreatePromoterLiabiltyInfo
ŸŸ  :
(
ŸŸ: ;#
TblPromoterLiabDetDTO
ŸŸ; P
PromLiabDto
ŸŸQ \
,
ŸŸ\ ]
CancellationToken
ŸŸ^ o
token
ŸŸp u
)
ŸŸu v
{
⁄⁄ 	
var
€€ 
basicDetails
€€ 
=
€€ 
_mapper
€€ &
.
€€& '
Map
€€' *
<
€€* +
TblPromterLiabDet
€€+ <
>
€€< =
(
€€= >
PromLiabDto
€€> I
)
€€I J
;
€€J K
basicDetails
‹‹ 
.
‹‹ 
IsActive
‹‹ !
=
‹‹" #
true
‹‹$ (
;
‹‹( )
basicDetails
›› 
.
›› 
	IsDeleted
›› "
=
››# $
false
››% *
;
››* +
basicDetails
ﬁﬁ 
.
ﬁﬁ 
CreateBy
ﬁﬁ !
=
ﬁﬁ" #
	_userInfo
ﬁﬁ$ -
.
ﬁﬁ- .
Name
ﬁﬁ. 2
;
ﬁﬁ2 3
basicDetails
ﬂﬂ 
.
ﬂﬂ 
CreatedDate
ﬂﬂ $
=
ﬂﬂ% &
DateTime
ﬂﬂ' /
.
ﬂﬂ/ 0
UtcNow
ﬂﬂ0 6
;
ﬂﬂ6 7
var
·· 
response
·· 
=
·· 
await
··  .
 _promoterLiabilityInfoRepository
··! A
.
··A B
AddAsync
··B J
(
··J K
basicDetails
··K W
,
··W X
token
··Y ^
)
··^ _
.
··_ `
ConfigureAwait
··` n
(
··n o
false
··o t
)
··t u
;
··u v
await
‚‚ 
_work
‚‚ 
.
‚‚ 
CommitAsync
‚‚ #
(
‚‚# $
token
‚‚$ )
)
‚‚) *
.
‚‚* +
ConfigureAwait
‚‚+ 9
(
‚‚9 :
false
‚‚: ?
)
‚‚? @
;
‚‚@ A
if
„„ 
(
„„ 
response
„„ 
!=
„„ 
null
„„  
)
„„  !
{
‰‰ 
return
ÂÂ 
true
ÂÂ 
;
ÂÂ 
}
ÊÊ 
else
ÁÁ 
{
ËË 
return
ÈÈ 
false
ÈÈ 
;
ÈÈ 
}
ÍÍ 
}
ÎÎ 	
public
ÌÌ 
async
ÌÌ 
Task
ÌÌ 
<
ÌÌ 
bool
ÌÌ 
>
ÌÌ (
UpdatePromoterLiabiltyInfo
ÌÌ  :
(
ÌÌ: ;#
TblPromoterLiabDetDTO
ÌÌ; P
PromLiabDto
ÌÌQ \
,
ÌÌ\ ]
CancellationToken
ÌÌ^ o
token
ÌÌp u
)
ÌÌu v
{
ÓÓ 	
var
ÔÔ 
currentDetails
ÔÔ 
=
ÔÔ  
await
ÔÔ! &.
 _promoterLiabilityInfoRepository
ÔÔ' G
.
ÔÔG H-
FirstOrDefaultByExpressionAsync
ÔÔH g
(
ÔÔg h
x
ÔÔh i
=>
ÔÔj l
x
ÔÔm n
.
ÔÔn o

PromLiabId
ÔÔo y
==
ÔÔz |
PromLiabDtoÔÔ} à
.ÔÔà â

PromLiabIdÔÔâ ì
,ÔÔì î
tokenÔÔï ö
)ÔÔö õ
;ÔÔõ ú
if
 
(
 
currentDetails
 
!=
 !
null
" &
)
& '
{
ÒÒ 
currentDetails
ÚÚ 
.
ÚÚ 
	IsDeleted
ÚÚ (
=
ÚÚ) *
true
ÚÚ+ /
;
ÚÚ/ 0
currentDetails
ÛÛ 
.
ÛÛ 
IsActive
ÛÛ '
=
ÛÛ( )
false
ÛÛ* /
;
ÛÛ/ 0
currentDetails
ÙÙ 
.
ÙÙ 

ModifiedBy
ÙÙ )
=
ÙÙ* +
	_userInfo
ÙÙ, 5
.
ÙÙ5 6
Name
ÙÙ6 :
;
ÙÙ: ;
currentDetails
ıı 
.
ıı 
ModifiedDate
ıı +
=
ıı, -
DateTime
ıı. 6
.
ıı6 7
UtcNow
ıı7 =
;
ıı= >
await
ˆˆ .
 _promoterLiabilityInfoRepository
ˆˆ 6
.
ˆˆ6 7
UpdateAsync
ˆˆ7 B
(
ˆˆB C
currentDetails
ˆˆC Q
,
ˆˆQ R
token
ˆˆS X
)
ˆˆX Y
.
ˆˆY Z
ConfigureAwait
ˆˆZ h
(
ˆˆh i
false
ˆˆi n
)
ˆˆn o
;
ˆˆo p
var
¯¯ 
basicDetails
¯¯  
=
¯¯! "
_mapper
¯¯# *
.
¯¯* +
Map
¯¯+ .
<
¯¯. /
TblPromterLiabDet
¯¯/ @
>
¯¯@ A
(
¯¯A B
PromLiabDto
¯¯B M
)
¯¯M N
;
¯¯N O
basicDetails
˘˘ 
.
˘˘ 

PromLiabId
˘˘ '
=
˘˘( )
$num
˘˘* +
;
˘˘+ ,
basicDetails
˙˙ 
.
˙˙ 
IsActive
˙˙ %
=
˙˙& '
true
˙˙( ,
;
˙˙, -
basicDetails
˚˚ 
.
˚˚ 
	IsDeleted
˚˚ &
=
˚˚' (
false
˚˚) .
;
˚˚. /
basicDetails
¸¸ 
.
¸¸ 
CreateBy
¸¸ %
=
¸¸& '
	_userInfo
¸¸( 1
.
¸¸1 2
Name
¸¸2 6
;
¸¸6 7
basicDetails
˝˝ 
.
˝˝ 
CreatedDate
˝˝ (
=
˝˝) *
DateTime
˝˝+ 3
.
˝˝3 4
UtcNow
˝˝4 :
;
˝˝: ;
var
ˇˇ 
response
ˇˇ 
=
ˇˇ 
await
ˇˇ $.
 _promoterLiabilityInfoRepository
ˇˇ% E
.
ˇˇE F
AddAsync
ˇˇF N
(
ˇˇN O
basicDetails
ˇˇO [
,
ˇˇ[ \
token
ˇˇ] b
)
ˇˇb c
.
ˇˇc d
ConfigureAwait
ˇˇd r
(
ˇˇr s
false
ˇˇs x
)
ˇˇx y
;
ˇˇy z
await
ÄÄ 
_work
ÄÄ 
.
ÄÄ 
CommitAsync
ÄÄ '
(
ÄÄ' (
token
ÄÄ( -
)
ÄÄ- .
.
ÄÄ. /
ConfigureAwait
ÄÄ/ =
(
ÄÄ= >
false
ÄÄ> C
)
ÄÄC D
;
ÄÄD E
if
ÅÅ 
(
ÅÅ 
response
ÅÅ 
!=
ÅÅ 
null
ÅÅ  $
)
ÅÅ$ %
{
ÇÇ 
return
ÉÉ 
true
ÉÉ 
;
ÉÉ  
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
return
áá 
false
áá  
;
áá  !
}
àà 
}
ââ 
return
ää 
false
ää 
;
ää 
}
ãã 	
public
çç 
async
çç 
Task
çç 
<
çç 
bool
çç 
>
çç (
DeletePromoterLiabiltyInfo
çç  :
(
çç: ;#
TblPromoterLiabDetDTO
çç; P
PromLiabDto
ççQ \
,
çç\ ]
CancellationToken
çç^ o
token
ççp u
)
ççu v
{
éé 	
var
èè 
basicDetails
èè 
=
èè 
_mapper
èè &
.
èè& '
Map
èè' *
<
èè* +
TblPromterLiabDet
èè+ <
>
èè< =
(
èè= >
PromLiabDto
èè> I
)
èèI J
;
èèJ K
basicDetails
êê 
.
êê 
IsActive
êê !
=
êê" #
false
êê$ )
;
êê) *
basicDetails
ëë 
.
ëë 
ModifiedDate
ëë %
=
ëë& '
DateTime
ëë( 0
.
ëë0 1
UtcNow
ëë1 7
;
ëë7 8
basicDetails
íí 
.
íí 

ModifiedBy
íí #
=
íí$ %
	_userInfo
íí& /
.
íí/ 0
Name
íí0 4
;
íí4 5
basicDetails
ìì 
.
ìì 
	IsDeleted
ìì "
=
ìì# $
true
ìì% )
;
ìì) *
var
îî 
response
îî 
=
îî 
await
îî  .
 _promoterLiabilityInfoRepository
îî! A
.
îîA B
UpdateAsync
îîB M
(
îîM N
basicDetails
îîN Z
,
îîZ [
token
îî\ a
)
îîa b
.
îîb c
ConfigureAwait
îîc q
(
îîq r
false
îîr w
)
îîw x
;
îîx y
await
ïï 
_work
ïï 
.
ïï 
CommitAsync
ïï #
(
ïï# $
token
ïï$ )
)
ïï) *
.
ïï* +
ConfigureAwait
ïï+ 9
(
ïï9 :
false
ïï: ?
)
ïï? @
;
ïï@ A
if
ññ 
(
ññ 
response
ññ 
!=
ññ 
null
ññ  
)
ññ  !
{
óó 
return
òò 
true
òò 
;
òò 
}
ôô 
else
öö 
{
õõ 
return
úú 
false
úú 
;
úú 
}
ùù 
}
ûû 	
public
¢¢ 
async
¢¢ 
Task
¢¢ 
<
¢¢ 
IEnumerable
¢¢ %
<
¢¢% &#
TblPromoterNetWortDTO
¢¢& ;
>
¢¢; <
>
¢¢< =$
GetAllPromoterNetWorth
¢¢> T
(
¢¢T U
long
¢¢U Y
?
¢¢Y Z
accountNumber
¢¢[ h
,
¢¢h i
CancellationToken
¢¢j {
token¢¢| Å
)¢¢Å Ç
{
££ 	
var
§§ 
data
§§ 
=
§§ 
await
§§ )
_promoterNetWorthRepository
§§ 8
.
§§8 9+
FindByMatchingPropertiesAsync
§§9 V
(
§§V W
token
§§W \
,
§§\ ]
x
§§^ _
=>
§§` b
x
§§c d
.
§§d e
LoanAcc
§§e l
==
§§m o
accountNumber
§§p }
&&§§~ Ä
x§§Å Ç
.§§Ç É
IsActive§§É ã
==§§å é
true§§è ì
&&§§î ñ
x§§ó ò
.§§ò ô
	IsDeleted§§ô ¢
==§§£ •
false§§¶ ´
)§§´ ¨
.§§¨ ≠
ConfigureAwait§§≠ ª
(§§ª º
false§§º ¡
)§§¡ ¬
;§§¬ √
return
•• 
_mapper
•• 
.
•• 
Map
•• 
<
•• 
List
•• #
<
••# $#
TblPromoterNetWortDTO
••$ 9
>
••9 :
>
••: ;
(
••; <
data
••< @
)
••@ A
;
••A B
}
¶¶ 	
public
®® 
async
®® 
Task
®® 
<
®® 
bool
®® 
>
®® &
SaveAssetNetworthDetails
®®  8
(
®®8 9#
TblPromoterNetWortDTO
®®9 N
PromoterNWDetail
®®O _
,
®®_ `
CancellationToken
®®a r
token
®®s x
)
®®x y
{
©© 	
var
™™ 
currentDetails
™™ 
=
™™  
await
™™! &)
_promoterNetWorthRepository
™™' B
.
™™B C-
FirstOrDefaultByExpressionAsync
™™C b
(
™™b c
x
™™c d
=>
™™e g
x
™™h i
.
™™i j
PromoterCode
™™j v
==
™™w y
PromoterNWDetail™™z ä
.™™ä ã
PromoterCode™™ã ó
,™™ó ò
token™™ô û
)™™û ü
;™™ü †
if
´´ 
(
´´ 
currentDetails
´´ 
!=
´´ !
null
´´" &
)
´´& '
{
¨¨ 
currentDetails
≠≠ 
.
≠≠ 
IdmMov
≠≠ %
=
≠≠& '
PromoterNWDetail
≠≠( 8
.
≠≠8 9
IdmMov
≠≠9 ?
;
≠≠? @
currentDetails
ÆÆ 
.
ÆÆ 
IdmNetworth
ÆÆ *
=
ÆÆ+ ,
PromoterNWDetail
ÆÆ- =
.
ÆÆ= >
IdmMov
ÆÆ> D
-
ÆÆE F
currentDetails
ÆÆG U
.
ÆÆU V
IdmLiab
ÆÆV ]
;
ÆÆ] ^
currentDetails
ØØ 
.
ØØ 

ModifiedBy
ØØ )
=
ØØ* +
	_userInfo
ØØ, 5
.
ØØ5 6
Name
ØØ6 :
;
ØØ: ;
currentDetails
∞∞ 
.
∞∞ 
ModifiedDate
∞∞ +
=
∞∞, -
DateTime
∞∞. 6
.
∞∞6 7
UtcNow
∞∞7 =
;
∞∞= >
var
±± 
response
±± 
=
±± 
await
±± $)
_promoterNetWorthRepository
±±% @
.
±±@ A
UpdateAsync
±±A L
(
±±L M
currentDetails
±±M [
,
±±[ \
token
±±] b
)
±±b c
.
±±c d
ConfigureAwait
±±d r
(
±±r s
false
±±s x
)
±±x y
;
±±y z
await
≤≤ 
_work
≤≤ 
.
≤≤ 
CommitAsync
≤≤ '
(
≤≤' (
token
≤≤( -
)
≤≤- .
.
≤≤. /
ConfigureAwait
≤≤/ =
(
≤≤= >
false
≤≤> C
)
≤≤C D
;
≤≤D E
if
≥≥ 
(
≥≥ 
response
≥≥ 
!=
≥≥ 
null
≥≥  $
)
≥≥$ %
{
¥¥ 
return
µµ 
true
µµ 
;
µµ  
}
∂∂ 
else
∑∑ 
{
∏∏ 
return
ππ 
false
ππ  
;
ππ  !
}
∫∫ 
}
ªª 
else
ºº 
{
ΩΩ 
var
ææ 
basicDetails
ææ  
=
ææ! "
_mapper
ææ# *
.
ææ* +
Map
ææ+ .
<
ææ. /#
TblIdmPromoterNetWork
ææ/ D
>
ææD E
(
ææE F
PromoterNWDetail
ææF V
)
ææV W
;
ææW X
basicDetails
øø 
.
øø 
IdmMov
øø #
=
øø$ %
PromoterNWDetail
øø& 6
.
øø6 7
IdmMov
øø7 =
;
øø= >
basicDetails
¿¿ 
.
¿¿ 
IdmNetworth
¿¿ (
=
¿¿) *
PromoterNWDetail
¿¿+ ;
.
¿¿; <
IdmMov
¿¿< B
;
¿¿B C
basicDetails
¡¡ 
.
¡¡ 
IsActive
¡¡ %
=
¡¡& '
true
¡¡( ,
;
¡¡, -
basicDetails
¬¬ 
.
¬¬ 
	IsDeleted
¬¬ &
=
¬¬' (
false
¬¬) .
;
¬¬. /
basicDetails
√√ 
.
√√ 
CreateBy
√√ %
=
√√& '
	_userInfo
√√( 1
.
√√1 2
Name
√√2 6
;
√√6 7
basicDetails
ƒƒ 
.
ƒƒ 
CreatedDate
ƒƒ (
=
ƒƒ) *
DateTime
ƒƒ+ 3
.
ƒƒ3 4
UtcNow
ƒƒ4 :
;
ƒƒ: ;
var
∆∆ 
response
∆∆ 
=
∆∆ 
await
∆∆ $)
_promoterNetWorthRepository
∆∆% @
.
∆∆@ A
AddAsync
∆∆A I
(
∆∆I J
basicDetails
∆∆J V
,
∆∆V W
token
∆∆X ]
)
∆∆] ^
.
∆∆^ _
ConfigureAwait
∆∆_ m
(
∆∆m n
false
∆∆n s
)
∆∆s t
;
∆∆t u
await
«« 
_work
«« 
.
«« 
CommitAsync
«« '
(
««' (
token
««( -
)
««- .
.
««. /
ConfigureAwait
««/ =
(
««= >
false
««> C
)
««C D
;
««D E
if
»» 
(
»» 
response
»» 
!=
»» 
null
»»  $
)
»»$ %
{
…… 
return
   
true
   
;
    
}
ÀÀ 
else
ÃÃ 
{
ÕÕ 
return
ŒŒ 
false
ŒŒ  
;
ŒŒ  !
}
œœ 
}
–– 
}
—— 	
public
”” 
async
”” 
Task
”” 
<
”” 
bool
”” 
>
”” *
SaveLiabilityNetworthDetails
””  <
(
””< =#
TblPromoterNetWortDTO
””= R
PromoterNWDetail
””S c
,
””c d
CancellationToken
””e v
token
””w |
)
””| }
{
‘‘ 	
var
’’ 
currentDetails
’’ 
=
’’  
await
’’! &)
_promoterNetWorthRepository
’’' B
.
’’B C-
FirstOrDefaultByExpressionAsync
’’C b
(
’’b c
x
’’c d
=>
’’e g
x
’’h i
.
’’i j
PromoterCode
’’j v
==
’’w y
PromoterNWDetail’’z ä
.’’ä ã
PromoterCode’’ã ó
,’’ó ò
token’’ô û
)’’û ü
;’’ü †
if
÷÷ 
(
÷÷ 
currentDetails
÷÷ 
!=
÷÷ !
null
÷÷" &
)
÷÷& '
{
◊◊ 
currentDetails
ÿÿ 
.
ÿÿ 
IdmLiab
ÿÿ &
=
ÿÿ' (
PromoterNWDetail
ÿÿ) 9
.
ÿÿ9 :
IdmLiab
ÿÿ: A
;
ÿÿA B
currentDetails
ŸŸ 
.
ŸŸ 
IdmNetworth
ŸŸ *
=
ŸŸ+ ,
currentDetails
ŸŸ- ;
.
ŸŸ; <
IdmMov
ŸŸ< B
-
ŸŸC D
PromoterNWDetail
ŸŸE U
.
ŸŸU V
IdmLiab
ŸŸV ]
;
ŸŸ] ^
currentDetails
⁄⁄ 
.
⁄⁄ 

ModifiedBy
⁄⁄ )
=
⁄⁄* +
	_userInfo
⁄⁄, 5
.
⁄⁄5 6
Name
⁄⁄6 :
;
⁄⁄: ;
currentDetails
€€ 
.
€€ 
ModifiedDate
€€ +
=
€€, -
DateTime
€€. 6
.
€€6 7
UtcNow
€€7 =
;
€€= >
var
‹‹ 
response
‹‹ 
=
‹‹ 
await
‹‹ $)
_promoterNetWorthRepository
‹‹% @
.
‹‹@ A
UpdateAsync
‹‹A L
(
‹‹L M
currentDetails
‹‹M [
,
‹‹[ \
token
‹‹] b
)
‹‹b c
.
‹‹c d
ConfigureAwait
‹‹d r
(
‹‹r s
false
‹‹s x
)
‹‹x y
;
‹‹y z
await
›› 
_work
›› 
.
›› 
CommitAsync
›› '
(
››' (
token
››( -
)
››- .
.
››. /
ConfigureAwait
››/ =
(
››= >
false
››> C
)
››C D
;
››D E
if
ﬁﬁ 
(
ﬁﬁ 
response
ﬁﬁ 
!=
ﬁﬁ 
null
ﬁﬁ  $
)
ﬁﬁ$ %
{
ﬂﬂ 
return
‡‡ 
true
‡‡ 
;
‡‡  
}
·· 
else
‚‚ 
{
„„ 
return
‰‰ 
false
‰‰  
;
‰‰  !
}
ÂÂ 
}
ÊÊ 
else
ÁÁ 
{
ËË 
var
ÈÈ 
basicDetails
ÈÈ  
=
ÈÈ! "
_mapper
ÈÈ# *
.
ÈÈ* +
Map
ÈÈ+ .
<
ÈÈ. /#
TblIdmPromoterNetWork
ÈÈ/ D
>
ÈÈD E
(
ÈÈE F
PromoterNWDetail
ÈÈF V
)
ÈÈV W
;
ÈÈW X
basicDetails
ÍÍ 
.
ÍÍ 
IdmLiab
ÍÍ $
=
ÍÍ% &
PromoterNWDetail
ÍÍ' 7
.
ÍÍ7 8
IdmLiab
ÍÍ8 ?
;
ÍÍ? @
basicDetails
ÎÎ 
.
ÎÎ 
IdmNetworth
ÎÎ (
=
ÎÎ) *
PromoterNWDetail
ÎÎ+ ;
.
ÎÎ; <
IdmLiab
ÎÎ< C
;
ÎÎC D
basicDetails
ÏÏ 
.
ÏÏ 
IsActive
ÏÏ %
=
ÏÏ& '
true
ÏÏ( ,
;
ÏÏ, -
basicDetails
ÌÌ 
.
ÌÌ 
	IsDeleted
ÌÌ &
=
ÌÌ' (
false
ÌÌ) .
;
ÌÌ. /
basicDetails
ÓÓ 
.
ÓÓ 
CreateBy
ÓÓ %
=
ÓÓ& '
	_userInfo
ÓÓ( 1
.
ÓÓ1 2
Name
ÓÓ2 6
;
ÓÓ6 7
basicDetails
ÔÔ 
.
ÔÔ 
CreatedDate
ÔÔ (
=
ÔÔ) *
DateTime
ÔÔ+ 3
.
ÔÔ3 4
UtcNow
ÔÔ4 :
;
ÔÔ: ;
var
ÒÒ 
response
ÒÒ 
=
ÒÒ 
await
ÒÒ $)
_promoterNetWorthRepository
ÒÒ% @
.
ÒÒ@ A
AddAsync
ÒÒA I
(
ÒÒI J
basicDetails
ÒÒJ V
,
ÒÒV W
token
ÒÒX ]
)
ÒÒ] ^
.
ÒÒ^ _
ConfigureAwait
ÒÒ_ m
(
ÒÒm n
false
ÒÒn s
)
ÒÒs t
;
ÒÒt u
await
ÚÚ 
_work
ÚÚ 
.
ÚÚ 
CommitAsync
ÚÚ '
(
ÚÚ' (
token
ÚÚ( -
)
ÚÚ- .
.
ÚÚ. /
ConfigureAwait
ÚÚ/ =
(
ÚÚ= >
false
ÚÚ> C
)
ÚÚC D
;
ÚÚD E
if
ÛÛ 
(
ÛÛ 
response
ÛÛ 
!=
ÛÛ 
null
ÛÛ  $
)
ÛÛ$ %
{
ÙÙ 
return
ıı 
true
ıı 
;
ıı  
}
ˆˆ 
else
˜˜ 
{
¯¯ 
return
˘˘ 
false
˘˘  
;
˘˘  !
}
˙˙ 
}
˚˚ 
}
¸¸ 	
}
˛˛ 
}ˇˇ ˆ<
rD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\LoanAccountingPromoter\LoanAccountingPromoterService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6"
LoanAccountingPromoter6 L
{ 
public 

class )
LoanAccountingPromoterService .
:/ 0*
ILoanAccountingPromoterService1 O
{ 
private 
readonly 
IEntityRepository *
<* +
TblAppLoanMast+ 9
>9 :
_loanRepository; J
;J K
private 
readonly 
IEntityRepository *
<* +
TblEmpchairDet+ 9
>9 :
_empChairDet; G
;G H
private 
readonly 
IEntityRepository *
<* +
TblIdmLegalWorkflow+ >
>> ?
_legalWokFlow@ M
;M N
public )
LoanAccountingPromoterService ,
(, -
IEntityRepository- >
<> ?
TblAppLoanMast? M
>M N
loanRepositoryO ]
,] ^
IEntityRepository_ p
<p q
TblEmpchairDetq 
>	 Ä
empChairDet
Å å
,
å ç
IEntityRepository
é ü
<
ü †!
TblIdmLegalWorkflow
† ≥
>
≥ ¥
legalWokFlow
µ ¡
)
¡ ¬
{ 	
_loanRepository 
= 
loanRepository ,
;, -
_empChairDet 
= 
empChairDet &
;& '
_legalWokFlow 
= 
legalWokFlow (
;( )
} 	
public 
async 
Task 
< 
IEnumerable %
<% & 
LoanAccountNumberDTO& :
>: ;
>; <
GetAccountNumber= M
(M N
CancellationTokenN _
token` e
,e f
stringg m
EmpIdn s
)s t
{ 	
var 
OffcUnit 
= 
await  
_loanRepository! 0
.0 1)
FindByMatchingPropertiesAsync1 N
(N O
tokenO T
,T U
xV W
=>X Z
x[ \
.\ ]
IsActive] e
==f h
truei m
&&n p
xq r
.r s
	IsDeleteds |
==} 
false
Ä Ö
,
Ö Ü
incOff 
=> 
incOff  
.  !
	OffcCdtab! *
,* +
incUnit   
=>   
incUnit   "
.  " #
TblUnitMast  # .
,  . /
workflow!! 
=>!! 
workflow!! $
.!!$ %
TblIdmLegalWorkflow!!% 8
)"" 
."" 
ConfigureAwait"" !
(""! "
false""" '
)""' (
;""( )
var$$ 
EmpChair$$ 
=$$ 
await$$  
_empChairDet$$! -
.$$- .)
FindByMatchingPropertiesAsync$$. K
($$K L
token$$L Q
,$$Q R
x$$S T
=>$$U W
x$$X Y
.$$Y Z
IsActive$$Z b
==$$c e
true$$f j
&&$$k m
x$$n o
.$$o p
	IsDeleted$$p y
==$$z |
false	$$} Ç
&&
$$É Ö
x
$$Ü á
.
$$á à
EmpId
$$à ç
==
$$é ê
EmpId
$$ë ñ
,
$$ñ ó
incEmp%% 
=>%% 
incEmp%% 
.%% 
ChairCodeNavigation%% 2
)&& 
.&& 
ConfigureAwait&& 
(&& 
false&& $
)&&$ %
;&&% &
var(( 
workFlow(( 
=(( 
await((  
_legalWokFlow((! .
.((. /)
FindByMatchingPropertiesAsync((/ L
(((L M
token((M R
,((R S
x((T U
=>((V X
x((Y Z
.((Z [
IsActive(([ c
==((d f
true((g k
&&((l n
x((o p
.((p q
	IsDeleted((q z
==(({ }
false	((~ É
))) 
.)) 
ConfigureAwait)) 
())  
false))  %
)))% &
;))& '
var++ 
LoanList++ 
=++ 
OffcUnit++ #
.++# $
Join++$ (
(++( )
EmpChair++) 1
,++1 2
loanmast,, 
=>,, 
loanmast,,  
.,,  !
InOffc,,! '
,,,' (
chair-- 
=>-- 
chair-- 
.-- 
OffcCd-- !
,--! "
(.. 
loanmast.. 
,.. 
chair.. 
).. 
=>..  
new..! $
{// 

LoanMastID00 
=00 
loanmast00 %
.00% &
InMastId00& .
,00. /

LoanOffice11 
=11 
loanmast11 %
.11% &
	OffcCdtab11& /
.11/ 0
OffcNam110 7
,117 8
LoanUnit22 
=22 
loanmast22 #
.22# $
TblUnitMast22$ /
.22/ 0
UtName220 6
,226 7
LoanAcc33 
=33 
loanmast33 "
.33" #
InNo33# '
,33' (
LoanSub44 
=44 
loanmast44 "
.44" #
InSub44# (
,44( )
InOffc55 
=55 
loanmast55 !
.55! "
InOffc55" (
,55( )
InUnit66 
=66 
loanmast66 !
.66! "
InUnit66" (
}77 
)77 
.77 
ToList77 
(77 
)77 
;77 
var88 
LoanAccounts88 
=88 
LoanList88 '
.88' (
Where88( -
(88- .
x88. /
=>880 2
workFlow883 ;
.88; <
Any88< ?
(88? @
y88@ A
=>88B D
y88E F
.88F G
LoanAcc88G N
==88O Q
x88R S
.88S T
LoanAcc88T [
)88[ \
)88\ ]
.88] ^
ToList88^ d
(88d e
)88e f
;88f g
var;; 
result;; 
=;; 
new;; 
List;; !
<;;! " 
LoanAccountNumberDTO;;" 6
>;;6 7
(;;7 8
);;8 9
;;;9 :
if<< 
(<< 
LoanList<< 
.<< 
Count<< 
><<  
$num<<! "
)<<" #
{== 
foreach>> 
(>> 
var>> 
i>> 
in>> !
LoanAccounts>>" .
)>>. /
{?? 
result@@ 
.@@ 
Add@@ 
(@@ 
new@@ " 
LoanAccountNumberDTO@@# 7
(@@7 8
)@@8 9
{AA 

LoanOfficeBB "
=BB# $
iBB% &
.BB& '

LoanOfficeBB' 1
,BB1 2
LoanUnitCC  
=CC! "
iCC# $
.CC$ %
LoanUnitCC% -
,CC- .
LoanAccDD 
=DD  !
iDD" #
.DD# $
LoanAccDD$ +
,DD+ ,
LoanSubEE 
=EE  !
iEE" #
.EE# $
LoanSubEE$ +
,EE+ ,
InOffcFF 
=FF  
iFF! "
.FF" #
InOffcFF# )
,FF) *
InUnitGG 
=GG  
iGG! "
.GG" #
InUnitGG# )
}HH 
)HH 
;HH 
}II 
}JJ 
returnKK 
resultKK 
;KK 
}LL 	
}NN 
}PP Ù•
âD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\LoanAccountingPromoter\LoanRelatedReceiptProm\LoanRelatedReceiptPromService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6"
LoanAccountingPromoter6 L
.L M"
LoanRelatedReceiptPromM c
{ 
public 
class )
LoanRelatedReceiptPromService /
:0 1*
ILoanRelatedReceiptPromService2 P
{ 
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IEntityRepository *
<* +
TblLaReceiptDet+ :
>: ;&
_generateReceiptRepository< V
;V W
private 
readonly 
IEntityRepository *
<* +
TblLaPaymentDet+ :
>: ;&
_generatePaymentRepository< V
;V W
private 
readonly 
IEntityRepository *
<* +"
TblLaReceiptPaymentDet+ A
>A B%
_receiptPaymentRepositoryC \
;\ ]
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
public )
LoanRelatedReceiptPromService ,
(, -
IUnitOfWork- 8
work9 =
,= >
IMapper "
mapper# )
,) *
IEntityRepository+ <
<< =
TblLaReceiptDet= L
>L M%
generateReceiptRepositoryN g
,g h
UserInfoi q
userInfor z
,z {
IEntityRepository	| ç
<
ç é$
TblLaReceiptPaymentDet
é §
>
§ •&
receiptPaymentRepository
¶ æ
,
æ ø
IEntityRepository
¿ —
<
— “
TblLaPaymentDet
“ ·
>
· ‚'
generatePaymentRepository
„ ¸
)
¸ ˝
{ 	
_work 
= 
work 
; 
_mapper 
= 
mapper 
; &
_generateReceiptRepository &
=' (%
generateReceiptRepository) B
;B C
	_userInfo   
=   
userInfo    
;    !%
_receiptPaymentRepository!! %
=!!& '$
receiptPaymentRepository!!( @
;!!@ A&
_generatePaymentRepository"" &
=""' (%
generatePaymentRepository"") B
;""B C
}## 	
public&& 
async&& 
Task&& 
<&& 
IEnumerable&& %
<&&% &%
TblLaReceiptPaymentDetDTO&&& ?
>&&? @
>&&@ A,
 GetAllGenerateReceiptPaymentList&&B b
(&&b c
long&&c g
accountNumber&&h u
,&&u v
CancellationToken	&&w à
token
&&â é
)
&&é è
{'' 	
var(( 
data(( 
=(( 
await(( %
_receiptPaymentRepository(( 6
.((6 7)
FindByMatchingPropertiesAsync((7 T
(((T U
token((U Z
,((Z [
x((\ ]
=>((^ `
x((a b
.((b c
TblLaReceiptDet((c r
.((r s
LoanNo((s y
==((z |
accountNumber	((} ä
&&
((ã ç
x
((é è
.
((è ê
IsActive
((ê ò
==
((ô õ
true
((ú †
&&
((° £
x
((§ •
.
((• ¶
	IsDeleted
((¶ Ø
==
((∞ ≤
false
((≥ ∏
,
((∏ π

Receiptdet)) 
=>)) 

Receiptdet)) $
.))$ %
TblLaReceiptDet))% 4
,))4 5

PaymentDet** 
=>** 

PaymentDet** $
.**$ %
TblLaPaymentDet**% 4
)**4 5
.**5 6
ConfigureAwait**6 D
(**D E
false**E J
)**J K
;**K L
return++ 
_mapper++ 
.++ 
Map++ 
<++ 
List++ #
<++# $%
TblLaReceiptPaymentDetDTO++$ =
>++= >
>++> ?
(++? @
data++@ D
)++D E
;++E F
},, 	
public.. 
async.. 
Task.. 
<.. 
bool.. 
>.. *
UpdateCreatePromPaymentDetails..  >
(..> ?
List..? C
<..C D%
TblLaReceiptPaymentDetDTO..D ]
>..] ^
ReceiptPaymentDto.._ p
,..p q
CancellationToken	..r É
token
..Ñ â
)
..â ä
{// 	
foreach11 
(11 
var11 
receiptPaymentDto11 *
in11+ -
ReceiptPaymentDto11. ?
)11? @
{22 
var33 
currentDetails33 "
=33# $
await33% *%
_receiptPaymentRepository33+ D
.33D E!
FindByExpressionAsync33E Z
(33Z [
x33[ \
=>33] _
x33` a
.33a b
ReceiptPaymentId33b r
==33s u
receiptPaymentDto	33v á
.
33á à
ReceiptPaymentId
33à ò
,
33ò ô
token
33ö ü
)
33ü †
;
33† °
currentDetails44 
.44 
FirstOrDefault44 -
(44- .
)44. /
.44/ 0
	IsDeleted440 9
=44: ;
true44< @
;44@ A
currentDetails55 
.55 
FirstOrDefault55 -
(55- .
)55. /
.55/ 0
IsActive550 8
=559 :
false55; @
;55@ A
currentDetails66 
.66 
FirstOrDefault66 -
(66- .
)66. /
.66/ 0

ModifiedBy660 :
=66; <
	_userInfo66= F
.66F G
Name66G K
;66K L
currentDetails77 
.77 
FirstOrDefault77 -
(77- .
)77. /
.77/ 0
ModifiedDate770 <
=77= >
DateTime77? G
.77G H
UtcNow77H N
;77N O
await88 %
_receiptPaymentRepository88 /
.88/ 0
UpdateAsync880 ;
(88; <
currentDetails88< J
,88J K
token88L Q
)88Q R
.88R S
ConfigureAwait88S a
(88a b
false88b g
)88g h
;88h i
}99 
foreach;; 
(;; 
var;; 
receiptPaymentDto;; *
in;;+ -
ReceiptPaymentDto;;. ?
);;? @
{<< 
var== !
currentReceiptDetails== )
===* +
await==, 1&
_generateReceiptRepository==2 L
.==L M!
FindByExpressionAsync==M b
(==b c
x==c d
=>==e g
x==h i
.==i j
Id==j l
====m o
receiptPaymentDto	==p Å
.
==Å Ç
	ReceiptId
==Ç ã
,
==ã å
token
==ç í
)
==í ì
;
==ì î!
currentReceiptDetails>> %
.>>% &
FirstOrDefault>>& 4
(>>4 5
)>>5 6
.>>6 7
Id>>7 9
=>>: ;
receiptPaymentDto>>< M
.>>M N
TblLaReceiptDet>>N ]
.>>] ^
Id>>^ `
;>>` a!
currentReceiptDetails?? %
.??% &
FirstOrDefault??& 4
(??4 5
)??5 6
.??6 7
ReceiptRefNo??7 C
=??D E
receiptPaymentDto??F W
.??W X
TblLaReceiptDet??X g
.??g h
ReceiptRefNo??h t
;??t u!
currentReceiptDetails@@ %
.@@% &
FirstOrDefault@@& 4
(@@4 5
)@@5 6
.@@6 7
ReceiptStatus@@7 D
=@@E F
receiptPaymentDto@@G X
.@@X Y
TblLaReceiptDet@@Y h
.@@h i
ReceiptStatus@@i v
;@@v w!
currentReceiptDetailsAA %
.AA% &
FirstOrDefaultAA& 4
(AA4 5
)AA5 6
.AA6 7
DateOfGenerationAA7 G
=AAH I
receiptPaymentDtoAAJ [
.AA[ \
TblLaReceiptDetAA\ k
.AAk l
DateOfGenerationAAl |
;AA| }!
currentReceiptDetailsBB %
.BB% &
FirstOrDefaultBB& 4
(BB4 5
)BB5 6
.BB6 7
	AmountDueBB7 @
=BBA B
receiptPaymentDtoBBC T
.BBT U
TblLaReceiptDetBBU d
.BBd e
	AmountDueBBe n
;BBn o!
currentReceiptDetailsCC %
.CC% &
FirstOrDefaultCC& 4
(CC4 5
)CC5 6
.CC6 7
DueDatePaymentCC7 E
=CCF G
receiptPaymentDtoCCH Y
.CCY Z
TblLaReceiptDetCCZ i
.CCi j
DueDatePaymentCCj x
;CCx y!
currentReceiptDetailsDD %
.DD% &
FirstOrDefaultDD& 4
(DD4 5
)DD5 6
.DD6 7
TransTypeIdDD7 B
=DDC D
receiptPaymentDtoDDE V
.DDV W
TblLaReceiptDetDDW f
.DDf g
TransTypeIdDDg r
;DDr s!
currentReceiptDetailsEE %
.EE% &
FirstOrDefaultEE& 4
(EE4 5
)EE5 6
.EE6 7
LoanNoEE7 =
=EE> ?
receiptPaymentDtoEE@ Q
.EEQ R
TblLaReceiptDetEER a
.EEa b
LoanNoEEb h
;EEh i!
currentReceiptDetailsFF %
.FF% &
FirstOrDefaultFF& 4
(FF4 5
)FF5 6
.FF6 7
RemarksFF7 >
=FF? @
receiptPaymentDtoFFA R
.FFR S
TblLaReceiptDetFFS b
.FFb c
RemarksFFc j
;FFj k!
currentReceiptDetailsGG %
.GG% &
FirstOrDefaultGG& 4
(GG4 5
)GG5 6
.GG6 7
IsActiveGG7 ?
=GG@ A
trueGGB F
;GGF G!
currentReceiptDetailsHH %
.HH% &
FirstOrDefaultHH& 4
(HH4 5
)HH5 6
.HH6 7
	IsDeletedHH7 @
=HHA B
falseHHC H
;HHH I!
currentReceiptDetailsII %
.II% &
FirstOrDefaultII& 4
(II4 5
)II5 6
.II6 7
	CreatedByII7 @
=IIA B
	_userInfoIIC L
.IIL M
NameIIM Q
;IIQ R!
currentReceiptDetailsJJ %
.JJ% &
FirstOrDefaultJJ& 4
(JJ4 5
)JJ5 6
.JJ6 7
CreatedDateJJ7 B
=JJC D
DateTimeJJE M
.JJM N
UtcNowJJN T
;JJT U
awaitKK &
_generateReceiptRepositoryKK 0
.KK0 1
UpdateAsyncKK1 <
(KK< =!
currentReceiptDetailsKK= R
,KKR S
tokenKKT Y
)KKY Z
.KKZ [
ConfigureAwaitKK[ i
(KKi j
falseKKj o
)KKo p
;KKp q
}MM 
foreachOO 
(OO 
varOO 
receiptPaymentDtoOO *
inOO+ -
ReceiptPaymentDtoOO. ?
)OO? @
{PP 
varQQ !
currentPaymentDetailsQQ )
=QQ* +
awaitQQ, 1&
_generatePaymentRepositoryQQ2 L
.QQL M!
FindByExpressionAsyncQQM b
(QQb c
xQQc d
=>QQe g
xQQh i
.QQi j
IdQQj l
==QQm o
receiptPaymentDto	QQp Å
.
QQÅ Ç
	PaymentId
QQÇ ã
,
QQã å
token
QQç í
)
QQí ì
;
QQì î!
currentPaymentDetailsRR %
.RR% &
FirstOrDefaultRR& 4
(RR4 5
)RR5 6
.RR6 7
IdRR7 9
=RR: ;
receiptPaymentDtoRR< M
.RRM N
TblLaPaymentDetRRN ]
.RR] ^
IdRR^ `
;RR` a!
currentPaymentDetailsSS %
.SS% &
FirstOrDefaultSS& 4
(SS4 5
)SS5 6
.SS6 7
LoanNoSS7 =
=SS> ?
receiptPaymentDtoSS@ Q
.SSQ R
TblLaPaymentDetSSR a
.SSa b
LoanNoSSb h
;SSh i!
currentPaymentDetailsTT %
.TT% &
FirstOrDefaultTT& 4
(TT4 5
)TT5 6
.TT6 7
PaymentRefNoTT7 C
=TTD E
receiptPaymentDtoTTF W
.TTW X
TblLaPaymentDetTTX g
.TTg h
PaymentRefNoTTh t
;TTt u!
currentPaymentDetailsUU %
.UU% &
FirstOrDefaultUU& 4
(UU4 5
)UU5 6
.UU6 7
	ActualAmtUU7 @
=UUA B
receiptPaymentDtoUUC T
.UUT U
TblLaPaymentDetUUU d
.UUd e
	ActualAmtUUe n
;UUn o!
currentPaymentDetailsVV %
.VV% &
FirstOrDefaultVV& 4
(VV4 5
)VV5 6
.VV6 7
DateOfInitiationVV7 G
=VVH I
receiptPaymentDtoVVJ [
.VV[ \
TblLaPaymentDetVV\ k
.VVk l
DateOfInitiationVVl |
;VV| }!
currentPaymentDetailsWW %
.WW% &
FirstOrDefaultWW& 4
(WW4 5
)WW5 6
.WW6 7
PromoterNameWW7 C
=WWD E
receiptPaymentDtoWWF W
.WWW X
TblLaPaymentDetWWX g
.WWg h
PromoterNameWWh t
;WWt u!
currentPaymentDetailsXX %
.XX% &
FirstOrDefaultXX& 4
(XX4 5
)XX5 6
.XX6 7
ChequeNoXX7 ?
=XX@ A
receiptPaymentDtoXXB S
.XXS T
TblLaPaymentDetXXT c
.XXc d
ChequeNoXXd l
;XXl m!
currentPaymentDetailsYY %
.YY% &
FirstOrDefaultYY& 4
(YY4 5
)YY5 6
.YY6 7

ChequeDateYY7 A
=YYB C
receiptPaymentDtoYYD U
.YYU V
TblLaPaymentDetYYV e
.YYe f

ChequeDateYYf p
;YYp q!
currentPaymentDetailsZZ %
.ZZ% &
FirstOrDefaultZZ& 4
(ZZ4 5
)ZZ5 6
.ZZ6 7
IfscCodeZZ7 ?
=ZZ@ A
receiptPaymentDtoZZB S
.ZZS T
TblLaPaymentDetZZT c
.ZZc d
IfscCodeZZd l
;ZZl m!
currentPaymentDetails[[ %
.[[% &
FirstOrDefault[[& 4
([[4 5
)[[5 6
.[[6 7

BranchCode[[7 A
=[[B C
receiptPaymentDto[[D U
.[[U V
TblLaPaymentDet[[V e
.[[e f

BranchCode[[f p
;[[p q!
currentPaymentDetails\\ %
.\\% &
FirstOrDefault\\& 4
(\\4 5
)\\5 6
.\\6 7#
DateOfChequeRealization\\7 N
=\\O P
receiptPaymentDto\\Q b
.\\b c
TblLaPaymentDet\\c r
.\\r s$
DateOfChequeRealization	\\s ä
;
\\ä ã!
currentPaymentDetails]] %
.]]% &
FirstOrDefault]]& 4
(]]4 5
)]]5 6
.]]6 7
UtrNo]]7 <
=]]= >
receiptPaymentDto]]? P
.]]P Q
TblLaPaymentDet]]Q `
.]]` a
UtrNo]]a f
;]]f g!
currentPaymentDetails^^ %
.^^% &
FirstOrDefault^^& 4
(^^4 5
)^^5 6
.^^6 7
PaidDate^^7 ?
=^^@ A
receiptPaymentDto^^B S
.^^S T
TblLaPaymentDet^^T c
.^^c d
PaidDate^^d l
;^^l m!
currentPaymentDetails__ %
.__% &
FirstOrDefault__& 4
(__4 5
)__5 6
.__6 7
PaymentMode__7 B
=__C D
receiptPaymentDto__E V
.__V W
TblLaPaymentDet__W f
.__f g
PaymentMode__g r
;__r s!
currentPaymentDetails`` %
.``% &
FirstOrDefault``& 4
(``4 5
)``5 6
.``6 7
PaymentStatus``7 D
=``E F
ReceiptPaymentDto``G X
.``X Y
FirstOrDefault``Y g
(``g h
)``h i
.``i j
TblLaPaymentDet``j y
.``y z
PaymentStatus	``z á
;
``á à!
currentPaymentDetailsaa %
.aa% &
FirstOrDefaultaa& 4
(aa4 5
)aa5 6
.aa6 7
IsActiveaa7 ?
=aa@ A
trueaaB F
;aaF G!
currentPaymentDetailsbb %
.bb% &
FirstOrDefaultbb& 4
(bb4 5
)bb5 6
.bb6 7
	IsDeletedbb7 @
=bbA B
falsebbC H
;bbH I!
currentPaymentDetailscc %
.cc% &
FirstOrDefaultcc& 4
(cc4 5
)cc5 6
.cc6 7
CreateBycc7 ?
=cc@ A
	_userInfoccB K
.ccK L
NameccL P
;ccP Q!
currentPaymentDetailsdd %
.dd% &
FirstOrDefaultdd& 4
(dd4 5
)dd5 6
.dd6 7
CreatedDatedd7 B
=ddC D
DateTimeddE M
.ddM N
UtcNowddN T
;ddT U
awaitee &
_generatePaymentRepositoryee 0
.ee0 1
UpdateAsyncee1 <
(ee< =!
currentPaymentDetailsee= R
,eeR S
tokeneeT Y
)eeY Z
.eeZ [
ConfigureAwaitee[ i
(eei j
falseeej o
)eeo p
;eep q
}gg 
varjj 
basicDetailsjj 
=jj 
_mapperjj &
.jj& '
Mapjj' *
<jj* +
Listjj+ /
<jj/ 0"
TblLaReceiptPaymentDetjj0 F
>jjF G
>jjG H
(jjH I
ReceiptPaymentDtojjI Z
)jjZ [
;jj[ \%
TblLaReceiptPaymentDetDTOll %
paymentsll& .
=ll/ 0
newll1 4
(ll4 5
)ll5 6
;ll6 7
foreachnn 
(nn 
varnn 
basicnn 
innn !
basicDetailsnn" .
)nn. /
{oo 
basicpp 
.pp 
ReceiptPaymentIdpp &
=pp' (
$numpp) *
;pp* +
basicqq 
.qq 
IsActiveqq 
=qq  
trueqq! %
;qq% &
basicrr 
.rr 
	IsDeletedrr 
=rr  !
falserr" '
;rr' (
basicss 
.ss 
CreateByss 
=ss  
	_userInfoss! *
.ss* +
Namess+ /
;ss/ 0
basictt 
.tt 
CreatedDatett !
=tt" #
DateTimett$ ,
.tt, -
UtcNowtt- 3
;tt3 4
varuu 
responseuu 
=uu 
awaituu $%
_receiptPaymentRepositoryuu% >
.uu> ?
AddAsyncuu? G
(uuG H
basicuuH M
,uuM N
tokenuuO T
)uuT U
.uuU V
ConfigureAwaituuV d
(uud e
falseuue j
)uuj k
;uuk l
paymentsvv 
=vv 
_mappervv "
.vv" #
Mapvv# &
<vv& '%
TblLaReceiptPaymentDetDTOvv' @
>vv@ A
(vvA B
responsevvB J
)vvJ K
;vvK L
}ww 
awaitzz 
_workzz 
.zz 
CommitAsynczz #
(zz# $
tokenzz$ )
)zz) *
.zz* +
ConfigureAwaitzz+ 9
(zz9 :
falsezz: ?
)zz? @
;zz@ A
if{{ 
({{ 
payments{{ 
!={{ 
null{{  
){{  !
{|| 
return}} 
true}} 
;}} 
}~~ 
else 
{
ÄÄ 
return
ÅÅ 
false
ÅÅ 
;
ÅÅ 
}
ÇÇ 
}
ÜÜ 	
public
ää 
async
ää 
Task
ää 
<
ää 
IEnumerable
ää %
<
ää% &'
TblLaReceiptPaymentDetDTO
ää& ?
>
ää? @
>
ää@ A&
GetAllRecipetsForPayment
ääB Z
(
ääZ [
int
ää[ ^
	PaymnetId
ää_ h
,
ääh i
CancellationToken
ääj {
tokenää| Å
)ääÅ Ç
{
ãã 	
var
åå 
data
åå 
=
åå 
await
åå '
_receiptPaymentRepository
åå 6
.
åå6 7+
FindByMatchingPropertiesAsync
åå7 T
(
ååT U
token
ååU Z
,
ååZ [
x
åå\ ]
=>
åå^ `
x
ååa b
.
ååb c
	PaymentId
ååc l
==
ååm o
	PaymnetId
ååp y
&&
ååz |
x
åå} ~
.
åå~ 
IsActiveåå á
==ååà ä
trueååã è
&&ååê í
xååì î
.ååî ï
	IsDeletedååï û
==ååü °
falseåå¢ ß
,ååß ®

Receiptdet
çç 
=>
çç 

Receiptdet
çç %
.
çç% &
TblLaReceiptDet
çç& 5
,
çç5 6

PaymentDet
éé 
=>
éé 

PaymentDet
éé $
.
éé$ %
TblLaPaymentDet
éé% 4
)
éé4 5
.
éé5 6
ConfigureAwait
éé6 D
(
ééD E
false
ééE J
)
ééJ K
;
ééK L
return
êê 
_mapper
êê 
.
êê 
Map
êê 
<
êê 
List
êê #
<
êê# $'
TblLaReceiptPaymentDetDTO
êê$ =
>
êê= >
>
êê> ?
(
êê? @
data
êê@ D
)
êêD E
;
êêE F
}
íí 	
}
îî 
}ïï ÎH
bD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\LoanAccounting\LoanAccountingService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
LoanAccounting6 D
{ 
public 

class !
LoanAccountingService &
:' ("
ILoanAccountingService) ?
{ 
private 
readonly 
IEntityRepository *
<* +
TblAppLoanMast+ 9
>9 :
_loanRepository; J
;J K
private 
readonly 
IEntityRepository *
<* +
TblEmpchairDet+ 9
>9 :
_empChairDet; G
;G H
private 
readonly 
IEntityRepository *
<* +
TblIdmLegalWorkflow+ >
>> ?
_legalWokFlow@ M
;M N
private 
readonly 
IEntityRepository *
<* +
	CodeTable+ 4
>4 5

_codetable6 @
;@ A
private 
readonly 
IMapper  
_mapper! (
;( )
public !
LoanAccountingService $
($ %
IEntityRepository% 6
<6 7
TblAppLoanMast7 E
>E F
loanRepositoryG U
,U V
IEntityRepositoryW h
<h i
TblEmpchairDeti w
>w x
empChairDet	y Ñ
,
Ñ Ö
IEntityRepository
Ü ó
<
ó ò
	CodeTable
ò °
>
° ¢
	codetable
£ ¨
,
¨ ≠
IMapper 
mapper 
, 
IEntityRepository -
<- .
TblIdmLegalWorkflow. A
>A B
legalWokFlowC O
)O P
{ 	
_loanRepository 
= 
loanRepository ,
;, -
_empChairDet 
= 
empChairDet &
;& '

_codetable 
= 
	codetable "
;" #
_mapper   
=   
mapper   
;   
_legalWokFlow!! 
=!! 
legalWokFlow!! (
;!!( )
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
IEnumerable$$ %
<$$% & 
LoanAccountNumberDTO$$& :
>$$: ;
>$$; <
GetAccountNumber$$= M
($$M N
CancellationToken$$N _
token$$` e
,$$e f
string$$g m
EmpId$$n s
)$$s t
{%% 	
var&& 
OffcUnit&& 
=&& 
await&&  
_loanRepository&&! 0
.&&0 1)
FindByMatchingPropertiesAsync&&1 N
(&&N O
token&&O T
,&&T U
x&&V W
=>&&X Z
x&&[ \
.&&\ ]
IsActive&&] e
==&&f h
true&&i m
&&&&n p
x&&q r
.&&r s
	IsDeleted&&s |
==&&} 
false
&&Ä Ö
,
&&Ö Ü
incOff'' 
=>'' 
incOff''  
.''  !
	OffcCdtab''! *
,''* +
incUnit(( 
=>(( 
incUnit(( "
.((" #
TblUnitMast((# .
,((. /
workflow)) 
=>)) 
workflow)) $
.))$ %
TblIdmLegalWorkflow))% 8
)** 
.** 
ConfigureAwait** !
(**! "
false**" '
)**' (
;**( )
var,, 
EmpChair,, 
=,, 
await,,  
_empChairDet,,! -
.,,- .)
FindByMatchingPropertiesAsync,,. K
(,,K L
token,,L Q
,,,Q R
x,,S T
=>,,U W
x,,X Y
.,,Y Z
IsActive,,Z b
==,,c e
true,,f j
&&,,k m
x,,n o
.,,o p
	IsDeleted,,p y
==,,z |
false	,,} Ç
&&
,,É Ö
x
,,Ü á
.
,,á à
EmpId
,,à ç
==
,,é ê
EmpId
,,ë ñ
,
,,ñ ó
incEmp-- 
=>-- 
incEmp-- 
.-- 
ChairCodeNavigation-- 2
).. 
... 
ConfigureAwait.. 
(.. 
false.. $
)..$ %
;..% &
var00 
workFlow00 
=00 
await00  
_legalWokFlow00! .
.00. /)
FindByMatchingPropertiesAsync00/ L
(00L M
token00M R
,00R S
x00T U
=>00V X
x00Y Z
.00Z [
IsActive00[ c
==00d f
true00g k
&&00l n
x00o p
.00p q
	IsDeleted00q z
==00{ }
false	00~ É
)11 
.11 
ConfigureAwait11 
(11  
false11  %
)11% &
;11& '
var33 
LoanList33 
=33 
OffcUnit33 #
.33# $
Join33$ (
(33( )
EmpChair33) 1
,331 2
loanmast44 
=>44 
loanmast44  
.44  !
InOffc44! '
,44' (
chair55 
=>55 
chair55 
.55 
OffcCd55 !
,55! "
(66 
loanmast66 
,66 
chair66 
)66 
=>66  
new66! $
{77 

LoanMastID88 
=88 
loanmast88 %
.88% &
InMastId88& .
,88. /

LoanOffice99 
=99 
loanmast99 %
.99% &
	OffcCdtab99& /
.99/ 0
OffcNam990 7
,997 8
LoanUnit:: 
=:: 
loanmast:: #
.::# $
TblUnitMast::$ /
.::/ 0
UtName::0 6
,::6 7
LoanAcc;; 
=;; 
loanmast;; "
.;;" #
InNo;;# '
,;;' (
LoanSub<< 
=<< 
loanmast<< "
.<<" #
InSub<<# (
,<<( )
InOffc== 
=== 
loanmast== !
.==! "
InOffc==" (
,==( )
InUnit>> 
=>> 
loanmast>> !
.>>! "
InUnit>>" (
}?? 
)?? 
.?? 
ToList?? 
(?? 
)?? 
;?? 
var@@ 
LoanAccounts@@ 
=@@ 
LoanList@@ '
.@@' (
Where@@( -
(@@- .
x@@. /
=>@@0 2
workFlow@@3 ;
.@@; <
Any@@< ?
(@@? @
y@@@ A
=>@@B D
y@@E F
.@@F G
LoanAcc@@G N
==@@O Q
x@@R S
.@@S T
LoanAcc@@T [
)@@[ \
)@@\ ]
.@@] ^
ToList@@^ d
(@@d e
)@@e f
;@@f g
varCC 
resultCC 
=CC 
newCC 
ListCC !
<CC! " 
LoanAccountNumberDTOCC" 6
>CC6 7
(CC7 8
)CC8 9
;CC9 :
ifDD 
(DD 
LoanListDD 
.DD 
CountDD 
>DD  
$numDD! "
)DD" #
{EE 
foreachFF 
(FF 
varFF 
iFF 
inFF !
LoanAccountsFF" .
)FF. /
{GG 
resultHH 
.HH 
AddHH 
(HH 
newHH " 
LoanAccountNumberDTOHH# 7
(HH7 8
)HH8 9
{II 

LoanOfficeJJ "
=JJ# $
iJJ% &
.JJ& '

LoanOfficeJJ' 1
,JJ1 2
LoanUnitKK  
=KK! "
iKK# $
.KK$ %
LoanUnitKK% -
,KK- .
LoanAccLL 
=LL  !
iLL" #
.LL# $
LoanAccLL$ +
,LL+ ,
LoanSubMM 
=MM  !
iMM" #
.MM# $
LoanSubMM$ +
,MM+ ,
InOffcNN 
=NN  
iNN! "
.NN" #
InOffcNN# )
,NN) *
InUnitOO 
=OO  
iOO! "
.OO" #
InUnitOO# )
}PP 
)PP 
;PP 
}QQ 
}RR 
returnSS 
resultSS 
;SS 
}TT 	
publicVV 
asyncVV 
TaskVV 
<VV 
IEnumerableVV %
<VV% &
CodeTableDTOVV& 2
>VV2 3
>VV3 4
GetCodetableVV5 A
(VVA B
CancellationTokenVVB S
tokenVVT Y
)VVY Z
{WW 	
varXX 
dataXX 
=XX 
awaitXX 

_codetableXX '
.XX' ()
FindByMatchingPropertiesAsyncXX( E
(XXE F
tokenXXF K
,XXK L
xXXM N
=>XXO Q
xXXR S
.XXS T
IsActiveXXT \
==XX] _
trueXX` d
)XXe f
.XXf g
ConfigureAwaitXXg u
(XXu v
falseXXv {
)XX{ |
;XX| }
returnYY 
_mapperYY 
.YY 
MapYY 
<YY 
ListYY #
<YY# $
CodeTableDTOYY$ 0
>YY0 1
>YY1 2
(YY2 3
dataYY3 7
)YY7 8
;YY8 9
}ZZ 	
}\\ 
}^^ óÏ
yD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\LoanAccounting\LoanRelatedReceipt\LoanRelatedReceiptService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
.5 6
LoanAccounting6 D
.D E
LoanRelatedReceiptE W
{ 
public 

class %
LoanRelatedReceiptService *
:+ ,&
ILoanRelatedReceiptService- G
{ 
private 
readonly 
IUnitOfWork $
_work% *
;* +
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
IEntityRepository *
<* +
TblLaReceiptDet+ :
>: ;&
_generateReceiptRepository< V
;V W
private 
readonly 
IEntityRepository *
<* +
TblLaPaymentDet+ :
>: ;&
_generatePaymentRepository< V
;V W
private 
readonly 
IEntityRepository *
<* +"
TblLaReceiptPaymentDet+ A
>A B#
_savedReceiptRepositoryC Z
;Z [
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
public %
LoanRelatedReceiptService (
(( )
IUnitOfWork) 4
work5 9
,9 :
IMapper   "
mapper  # )
,  ) *
IEntityRepository  + <
<  < =
TblLaReceiptDet  = L
>  L M%
generateReceiptRepository  N g
,  g h
IEntityRepository  i z
<  z {
TblLaPaymentDet	  { ä
>
  ä ã'
generatePaymentRepository
  å •
,
  • ¶
IEntityRepository
  ß ∏
<
  ∏ π$
TblLaReceiptPaymentDet
  π œ
>
  œ –$
savedReceiptRepository
  — Á
,
  Á Ë
UserInfo
  È Ò
userInfo
  Ú ˙
)
  ˙ ˚
{!! 	
_work"" 
="" 
work"" 
;"" 
_mapper## 
=## 
mapper## 
;## &
_generateReceiptRepository$$ &
=$$' (%
generateReceiptRepository$$) B
;$$B C&
_generatePaymentRepository%% &
=%%' (%
generatePaymentRepository%%) B
;%%B C#
_savedReceiptRepository&& #
=&&$ %"
savedReceiptRepository&&& <
;&&< =
	_userInfo'' 
='' 
userInfo''  
;''  !
}(( 	
public++ 
async++ 
Task++ 
<++ 
IEnumerable++ %
<++% &%
TblLaReceiptPaymentDetDTO++& ?
>++? @
>++@ A$
GetAllReceiptPaymentList++B Z
(++Z [
long++[ _
accountNumber++` m
,++m n
CancellationToken	++o Ä
token
++Å Ü
)
++Ü á
{,, 	
var-- 
data-- 
=-- 
await-- #
_savedReceiptRepository-- 4
.--4 5)
FindByMatchingPropertiesAsync--5 R
(--R S
token--S X
,--X Y
x--Z [
=>--\ ^
x--_ `
.--` a
TblLaReceiptDet--a p
.--p q
LoanNo--q w
==--x z
accountNumber	--{ à
&&.. 
x.. 
... 
IsActive.. 
==.. 
true.. !
&&.." $
x..% &
...& '
	IsDeleted..' 0
==..1 3
false..4 9
,..9 :

Receiptdet// 
=>// 

Receiptdet// $
.//$ %
TblLaReceiptDet//% 4
,//4 5

PaymentDet00 
=>00 

PaymentDet00 $
.00$ %
TblLaPaymentDet00% 4
)004 5
.005 6
ConfigureAwait006 D
(00D E
false00E J
)00J K
;00K L
return11 
_mapper11 
.11 
Map11 
<11 
List11 #
<11# $%
TblLaReceiptPaymentDetDTO11$ =
>11= >
>11> ?
(11? @
data11@ D
)11D E
;11E F
}22 	
public44 
async44 
Task44 
<44 
bool44 
>44 '
UpdateReceiptPaymentDetails44  ;
(44; <%
TblLaReceiptPaymentDetDTO44< U
ReceiptPaymentDto44V g
,44g h
CancellationToken44i z
token	44{ Ä
)
44Ä Å
{55 	
var66 
currentDetails66 
=66  
await66! &#
_savedReceiptRepository66' >
.66> ?!
FindByExpressionAsync66? T
(66T U
x66U V
=>66W Y
x66Z [
.66[ \
ReceiptPaymentId66\ l
==66m o
ReceiptPaymentDto	66p Å
.
66Å Ç
ReceiptPaymentId
66Ç í
,
66í ì
token
66î ô
)
66ô ö
;
66ö õ
currentDetails77 
.77 
FirstOrDefault77 )
(77) *
)77* +
.77+ ,
	IsDeleted77, 5
=776 7
true778 <
;77< =
currentDetails88 
.88 
FirstOrDefault88 )
(88) *
)88* +
.88+ ,
IsActive88, 4
=885 6
false887 <
;88< =
currentDetails99 
.99 
FirstOrDefault99 )
(99) *
)99* +
.99+ ,

ModifiedBy99, 6
=997 8
	_userInfo999 B
.99B C
Name99C G
;99G H
currentDetails:: 
.:: 
FirstOrDefault:: )
(::) *
)::* +
.::+ ,
ModifiedDate::, 8
=::9 :
DateTime::; C
.::C D
UtcNow::D J
;::J K
await<< #
_savedReceiptRepository<< )
.<<) *
UpdateAsync<<* 5
(<<5 6
currentDetails<<6 D
,<<D E
token<<F K
)<<K L
.<<L M
ConfigureAwait<<M [
(<<[ \
false<<\ a
)<<a b
;<<b c
var>> !
currentReceiptDetails>> %
=>>& '
await>>( -&
_generateReceiptRepository>>. H
.>>H I!
FindByExpressionAsync>>I ^
(>>^ _
x>>_ `
=>>>a c
x>>d e
.>>e f
Id>>f h
==>>i k
ReceiptPaymentDto>>l }
.>>} ~
	ReceiptId	>>~ á
,
>>á à
token
>>â é
)
>>é è
;
>>è ê!
currentReceiptDetails?? !
.??! "
FirstOrDefault??" 0
(??0 1
)??1 2
.??2 3
Id??3 5
=??6 7
ReceiptPaymentDto??8 I
.??I J
TblLaReceiptDet??J Y
.??Y Z
Id??Z \
;??\ ]!
currentReceiptDetails@@ !
.@@! "
FirstOrDefault@@" 0
(@@0 1
)@@1 2
.@@2 3
ReceiptRefNo@@3 ?
=@@@ A
ReceiptPaymentDto@@B S
.@@S T
TblLaReceiptDet@@T c
.@@c d
ReceiptRefNo@@d p
;@@p q!
currentReceiptDetailsAA !
.AA! "
FirstOrDefaultAA" 0
(AA0 1
)AA1 2
.AA2 3
ReceiptStatusAA3 @
=AAA B
ReceiptPaymentDtoAAC T
.AAT U
TblLaReceiptDetAAU d
.AAd e
ReceiptStatusAAe r
;AAr s!
currentReceiptDetailsBB !
.BB! "
FirstOrDefaultBB" 0
(BB0 1
)BB1 2
.BB2 3
DateOfGenerationBB3 C
=BBD E
ReceiptPaymentDtoBBF W
.BBW X
TblLaReceiptDetBBX g
.BBg h
DateOfGenerationBBh x
;BBx y!
currentReceiptDetailsCC !
.CC! "
FirstOrDefaultCC" 0
(CC0 1
)CC1 2
.CC2 3
	AmountDueCC3 <
=CC= >
ReceiptPaymentDtoCC? P
.CCP Q
TblLaReceiptDetCCQ `
.CC` a
	AmountDueCCa j
;CCj k!
currentReceiptDetailsDD !
.DD! "
FirstOrDefaultDD" 0
(DD0 1
)DD1 2
.DD2 3
DueDatePaymentDD3 A
=DDB C
ReceiptPaymentDtoDDD U
.DDU V
TblLaReceiptDetDDV e
.DDe f
DueDatePaymentDDf t
;DDt u!
currentReceiptDetailsEE !
.EE! "
FirstOrDefaultEE" 0
(EE0 1
)EE1 2
.EE2 3
TransTypeIdEE3 >
=EE? @
ReceiptPaymentDtoEEA R
.EER S
TblLaReceiptDetEES b
.EEb c
TransTypeIdEEc n
;EEn o!
currentReceiptDetailsFF !
.FF! "
FirstOrDefaultFF" 0
(FF0 1
)FF1 2
.FF2 3
LoanNoFF3 9
=FF: ;
ReceiptPaymentDtoFF< M
.FFM N
TblLaReceiptDetFFN ]
.FF] ^
LoanNoFF^ d
;FFd e!
currentReceiptDetailsGG !
.GG! "
FirstOrDefaultGG" 0
(GG0 1
)GG1 2
.GG2 3
RemarksGG3 :
=GG; <
ReceiptPaymentDtoGG= N
.GGN O
TblLaReceiptDetGGO ^
.GG^ _
RemarksGG_ f
;GGf g!
currentReceiptDetailsHH !
.HH! "
FirstOrDefaultHH" 0
(HH0 1
)HH1 2
.HH2 3
IsActiveHH3 ;
=HH< =
trueHH> B
;HHB C!
currentReceiptDetailsII !
.II! "
FirstOrDefaultII" 0
(II0 1
)II1 2
.II2 3
	IsDeletedII3 <
=II= >
falseII? D
;IID E!
currentReceiptDetailsJJ !
.JJ! "
FirstOrDefaultJJ" 0
(JJ0 1
)JJ1 2
.JJ2 3
	CreatedByJJ3 <
=JJ= >
	_userInfoJJ? H
.JJH I
NameJJI M
;JJM N!
currentReceiptDetailsKK !
.KK! "
FirstOrDefaultKK" 0
(KK0 1
)KK1 2
.KK2 3
CreatedDateKK3 >
=KK? @
DateTimeKKA I
.KKI J
UtcNowKKJ P
;KKP Q
awaitLL &
_generateReceiptRepositoryLL ,
.LL, -
UpdateAsyncLL- 8
(LL8 9!
currentReceiptDetailsLL9 N
,LLN O
tokenLLP U
)LLU V
.LLV W
ConfigureAwaitLLW e
(LLe f
falseLLf k
)LLk l
;LLl m
varOO 
basicDetailsOO 
=OO 
_mapperOO &
.OO& '
MapOO' *
<OO* +"
TblLaReceiptPaymentDetOO+ A
>OOA B
(OOB C
ReceiptPaymentDtoOOC T
)OOT U
;OOU V
basicDetailsPP 
.PP 
ReceiptPaymentIdPP )
=PP* +
$numPP, -
;PP- .
basicDetailsQQ 
.QQ 
IsActiveQQ !
=QQ" #
trueQQ$ (
;QQ( )
basicDetailsRR 
.RR 
	IsDeletedRR "
=RR# $
falseRR% *
;RR* +
basicDetailsSS 
.SS 
CreateBySS !
=SS" #
	_userInfoSS$ -
.SS- .
NameSS. 2
;SS2 3
basicDetailsTT 
.TT 
CreatedDateTT $
=TT% &
DateTimeTT' /
.TT/ 0
UtcNowTT0 6
;TT6 7
varVV 
paymentDetailsVV 
=VV 
_mapperVV  '
.VV' (
MapVV( +
<VV+ ,
TblLaPaymentDetVV, ;
>VV; <
(VV< =
ReceiptPaymentDtoVV= N
.VVN O
TblLaPaymentDetVVO ^
)VV^ _
;VV_ `
varXX 
responseXX 
=XX 
awaitXX  #
_savedReceiptRepositoryXX! 8
.XX8 9
AddAsyncXX9 A
(XXA B
basicDetailsXXB N
,XXN O
tokenXXP U
)XXU V
.XXV W
ConfigureAwaitXXW e
(XXe f
falseXXf k
)XXk l
;XXl m
varYY 
payresponseYY 
=YY 
awaitYY #&
_generatePaymentRepositoryYY$ >
.YY> ?
UpdateAsyncYY? J
(YYJ K
paymentDetailsYYK Y
,YYY Z
tokenYY[ `
)YY` a
.YYa b
ConfigureAwaitYYb p
(YYp q
falseYYq v
)YYv w
;YYw x
awaitZZ 
_workZZ 
.ZZ 
CommitAsyncZZ #
(ZZ# $
tokenZZ$ )
)ZZ) *
.ZZ* +
ConfigureAwaitZZ+ 9
(ZZ9 :
falseZZ: ?
)ZZ? @
;ZZ@ A
if[[ 
([[ 
response[[ 
!=[[ 
null[[  
)[[  !
{\\ 
return]] 
true]] 
;]] 
}^^ 
else__ 
{`` 
returnaa 
falseaa 
;aa 
}bb 
}cc 	
publicee 
asyncee 
Taskee 
<ee 
boolee 
>ee &
UpdateCreatePaymentDetailsee  :
(ee: ;
Listee; ?
<ee? @%
TblLaReceiptPaymentDetDTOee@ Y
>eeY Z
ReceiptPaymentDtoee[ l
,eel m
CancellationTokeneen 
token
eeÄ Ö
)
eeÖ Ü
{ff 	
foreachhh 
(hh 
varhh 
receiptPaymentDtohh *
inhh+ -
ReceiptPaymentDtohh. ?
)hh? @
{ii 
varjj 
currentDetailsjj "
=jj# $
awaitjj% *#
_savedReceiptRepositoryjj+ B
.jjB C!
FindByExpressionAsyncjjC X
(jjX Y
xjjY Z
=>jj[ ]
xjj^ _
.jj_ `
ReceiptPaymentIdjj` p
==jjq s
receiptPaymentDto	jjt Ö
.
jjÖ Ü
ReceiptPaymentId
jjÜ ñ
,
jjñ ó
token
jjò ù
)
jjù û
;
jjû ü
currentDetailsll 
.ll 
FirstOrDefaultll -
(ll- .
)ll. /
.ll/ 0

ModifiedByll0 :
=ll; <
	_userInfoll= F
.llF G
NamellG K
;llK L
currentDetailsmm 
.mm 
FirstOrDefaultmm -
(mm- .
)mm. /
.mm/ 0
ModifiedDatemm0 <
=mm= >
DateTimemm? G
.mmG H
UtcNowmmH N
;mmN O
awaitnn #
_savedReceiptRepositorynn -
.nn- .
UpdateAsyncnn. 9
(nn9 :
currentDetailsnn: H
,nnH I
tokennnJ O
)nnO P
.nnP Q
ConfigureAwaitnnQ _
(nn_ `
falsenn` e
)nne f
;nnf g
}oo 
vartt 
basicDetailstt 
=tt 
_mappertt &
.tt& '
Maptt' *
<tt* +
Listtt+ /
<tt/ 0"
TblLaReceiptPaymentDettt0 F
>ttF G
>ttG H
(ttH I
ReceiptPaymentDtottI Z
)ttZ [
;tt[ \%
TblLaReceiptPaymentDetDTOvv %
paymentsvv& .
=vv/ 0
newvv1 4
(vv4 5
)vv5 6
;vv6 7
foreachxx 
(xx 
varxx 
basicxx 
inxx !
basicDetailsxx" .
)xx. /
{yy 
basiczz 
.zz 
ReceiptPaymentIdzz &
=zz' (
$numzz) *
;zz* +
basic{{ 
.{{ 
IsActive{{ 
={{  
true{{! %
;{{% &
basic|| 
.|| 
	IsDeleted|| 
=||  !
false||" '
;||' (
basic}} 
.}} 
CreateBy}} 
=}}  
	_userInfo}}! *
.}}* +
Name}}+ /
;}}/ 0
basic~~ 
.~~ 
CreatedDate~~ !
=~~" #
DateTime~~$ ,
.~~, -
UtcNow~~- 3
;~~3 4
var 
response 
= 
await $#
_savedReceiptRepository% <
.< =
AddAsync= E
(E F
basicF K
,K L
tokenM R
)R S
.S T
ConfigureAwaitT b
(b c
falsec h
)h i
;i j
payments
ÄÄ 
=
ÄÄ 
_mapper
ÄÄ "
.
ÄÄ" #
Map
ÄÄ# &
<
ÄÄ& ''
TblLaReceiptPaymentDetDTO
ÄÄ' @
>
ÄÄ@ A
(
ÄÄA B
response
ÄÄB J
)
ÄÄJ K
;
ÄÄK L
}
ÅÅ 
await
ÑÑ 
_work
ÑÑ 
.
ÑÑ 
CommitAsync
ÑÑ #
(
ÑÑ# $
token
ÑÑ$ )
)
ÑÑ) *
.
ÑÑ* +
ConfigureAwait
ÑÑ+ 9
(
ÑÑ9 :
false
ÑÑ: ?
)
ÑÑ? @
;
ÑÑ@ A
if
ÜÜ 
(
ÜÜ 
payments
ÜÜ 
!=
ÜÜ 
null
ÜÜ  
)
ÜÜ  !
{
áá 
return
àà 
true
àà 
;
àà 
}
ââ 
else
ää 
{
ãã 
return
åå 
false
åå 
;
åå 
}
çç 
}
èè 	
public
íí 
async
íí 
Task
íí 
<
íí 
bool
íí 
>
íí )
DeleteReceiptPaymentDetails
íí  ;
(
íí; <'
TblLaReceiptPaymentDetDTO
íí< U
ReceiptPaymentDto
ííV g
,
ííg h
CancellationToken
ííi z
tokeníí{ Ä
)ííÄ Å
{
ìì 	
var
îî 
basicDetails
îî 
=
îî 
_mapper
îî &
.
îî& '
Map
îî' *
<
îî* +$
TblLaReceiptPaymentDet
îî+ A
>
îîA B
(
îîB C
ReceiptPaymentDto
îîC T
)
îîT U
;
îîU V
basicDetails
ïï 
.
ïï 
IsActive
ïï !
=
ïï" #
false
ïï$ )
;
ïï) *
basicDetails
ññ 
.
ññ 
ModifiedDate
ññ %
=
ññ& '
DateTime
ññ( 0
.
ññ0 1
UtcNow
ññ1 7
;
ññ7 8
basicDetails
óó 
.
óó 

ModifiedBy
óó #
=
óó$ %
	_userInfo
óó& /
.
óó/ 0
Name
óó0 4
;
óó4 5
basicDetails
òò 
.
òò 
	IsDeleted
òò "
=
òò# $
true
òò% )
;
òò) *
var
ôô 
response
ôô 
=
ôô 
await
ôô  %
_savedReceiptRepository
ôô! 8
.
ôô8 9
UpdateAsync
ôô9 D
(
ôôD E
basicDetails
ôôE Q
,
ôôQ R
token
ôôS X
)
ôôX Y
.
ôôY Z
ConfigureAwait
ôôZ h
(
ôôh i
false
ôôi n
)
ôôn o
;
ôôo p
await
öö 
_work
öö 
.
öö 
CommitAsync
öö #
(
öö# $
token
öö$ )
)
öö) *
.
öö* +
ConfigureAwait
öö+ 9
(
öö9 :
false
öö: ?
)
öö? @
;
öö@ A
if
õõ 
(
õõ 
response
õõ 
!=
õõ 
null
õõ  
)
õõ  !
{
úú 
return
ùù 
true
ùù 
;
ùù 
}
ûû 
else
üü 
{
†† 
return
°° 
false
°° 
;
°° 
}
¢¢ 
}
§§ 	
public
¶¶ 
async
¶¶ 
Task
¶¶ 
<
¶¶ 
bool
¶¶ 
>
¶¶ *
ApproveReceiptPaymentDetails
¶¶  <
(
¶¶< ='
TblLaReceiptPaymentDetDTO
¶¶= V
ReceiptPaymentDto
¶¶W h
,
¶¶h i
CancellationToken
¶¶j {
token¶¶| Å
)¶¶Å Ç
{
ßß 	
var
®® 
currentDetails
®® 
=
®®  
await
®®! &%
_savedReceiptRepository
®®' >
.
®®> ?#
FindByExpressionAsync
®®? T
(
®®T U
x
®®U V
=>
®®W Y
x
®®Z [
.
®®[ \
ReceiptPaymentId
®®\ l
==
®®m o 
ReceiptPaymentDto®®p Å
.®®Å Ç 
ReceiptPaymentId®®Ç í
,®®í ì
token®®î ô
)®®ô ö
;®®ö õ
currentDetails
©© 
.
©© 
FirstOrDefault
©© )
(
©©) *
)
©©* +
.
©©+ ,
ReceiptPaymentId
©©, <
=
©©= >
ReceiptPaymentDto
©©? P
.
©©P Q
ReceiptPaymentId
©©Q a
;
©©a b
currentDetails
™™ 
.
™™ 
FirstOrDefault
™™ )
(
™™) *
)
™™* +
.
™™+ ,
IsActive
™™, 4
=
™™5 6
false
™™7 <
;
™™< =
currentDetails
´´ 
.
´´ 
FirstOrDefault
´´ )
(
´´) *
)
´´* +
.
´´+ ,
	IsDeleted
´´, 5
=
´´6 7
true
´´8 <
;
´´< =
await
¨¨ %
_savedReceiptRepository
¨¨ )
.
¨¨) *
UpdateAsync
¨¨* 5
(
¨¨5 6
currentDetails
¨¨6 D
,
¨¨D E
token
¨¨F K
)
¨¨K L
.
¨¨L M
ConfigureAwait
¨¨M [
(
¨¨[ \
false
¨¨\ a
)
¨¨a b
;
¨¨b c
if
ÆÆ 
(
ÆÆ 
ReceiptPaymentDto
ÆÆ !
.
ÆÆ! "
	PaymentId
ÆÆ" +
!=
ÆÆ, .
null
ÆÆ/ 3
)
ÆÆ3 4
{
ØØ 
var
∞∞ #
currentPaymentDetails
∞∞ )
=
∞∞* +
await
∞∞, 1(
_generatePaymentRepository
∞∞2 L
.
∞∞L M#
FindByExpressionAsync
∞∞M b
(
∞∞b c
x
∞∞c d
=>
∞∞e g
x
∞∞h i
.
∞∞i j
Id
∞∞j l
==
∞∞m o 
ReceiptPaymentDto∞∞p Å
.∞∞Å Ç
	PaymentId∞∞Ç ã
,∞∞ã å
token∞∞ç í
)∞∞í ì
;∞∞ì î#
currentPaymentDetails
±± %
.
±±% &
FirstOrDefault
±±& 4
(
±±4 5
)
±±5 6
.
±±6 7
Id
±±7 9
=
±±: ;
ReceiptPaymentDto
±±< M
.
±±M N
TblLaPaymentDet
±±N ]
.
±±] ^
Id
±±^ `
;
±±` a#
currentPaymentDetails
≤≤ %
.
≤≤% &
FirstOrDefault
≤≤& 4
(
≤≤4 5
)
≤≤5 6
.
≤≤6 7
PaymentStatus
≤≤7 D
=
≤≤E F
ReceiptPaymentDto
≤≤G X
.
≤≤X Y
TblLaPaymentDet
≤≤Y h
.
≤≤h i
PaymentStatus
≤≤i v
;
≤≤v w#
currentPaymentDetails
≥≥ %
.
≥≥% &
FirstOrDefault
≥≥& 4
(
≥≥4 5
)
≥≥5 6
.
≥≥6 7
IsActive
≥≥7 ?
=
≥≥@ A
true
≥≥B F
;
≥≥F G#
currentPaymentDetails
¥¥ %
.
¥¥% &
FirstOrDefault
¥¥& 4
(
¥¥4 5
)
¥¥5 6
.
¥¥6 7
	IsDeleted
¥¥7 @
=
¥¥A B
false
¥¥C H
;
¥¥H I
await
µµ (
_generatePaymentRepository
µµ 0
.
µµ0 1
UpdateAsync
µµ1 <
(
µµ< =#
currentPaymentDetails
µµ= R
,
µµR S
token
µµT Y
)
µµY Z
.
µµZ [
ConfigureAwait
µµ[ i
(
µµi j
false
µµj o
)
µµo p
;
µµp q
}
∂∂ 
var
∏∏ #
currentReceiptDetails
∏∏ %
=
∏∏& '
await
∏∏( -(
_generateReceiptRepository
∏∏. H
.
∏∏H I#
FindByExpressionAsync
∏∏I ^
(
∏∏^ _
x
∏∏_ `
=>
∏∏a c
x
∏∏d e
.
∏∏e f
Id
∏∏f h
==
∏∏i k
ReceiptPaymentDto
∏∏l }
.
∏∏} ~
	ReceiptId∏∏~ á
,∏∏á à
token∏∏â é
)∏∏é è
;∏∏è ê#
currentReceiptDetails
ππ !
.
ππ! "
FirstOrDefault
ππ" 0
(
ππ0 1
)
ππ1 2
.
ππ2 3
ReceiptStatus
ππ3 @
=
ππA B
ReceiptPaymentDto
ππC T
.
ππT U
TblLaReceiptDet
ππU d
.
ππd e
ReceiptStatus
ππe r
;
ππr s#
currentReceiptDetails
∫∫ !
.
∫∫! "
FirstOrDefault
∫∫" 0
(
∫∫0 1
)
∫∫1 2
.
∫∫2 3
	CreatedBy
∫∫3 <
=
∫∫= >
	_userInfo
∫∫? H
.
∫∫H I
Name
∫∫I M
;
∫∫M N#
currentReceiptDetails
ªª !
.
ªª! "
FirstOrDefault
ªª" 0
(
ªª0 1
)
ªª1 2
.
ªª2 3
CreatedDate
ªª3 >
=
ªª? @
DateTime
ªªA I
.
ªªI J
UtcNow
ªªJ P
;
ªªP Q
await
ºº (
_generateReceiptRepository
ºº ,
.
ºº, -
UpdateAsync
ºº- 8
(
ºº8 9#
currentReceiptDetails
ºº9 N
,
ººN O
token
ººP U
)
ººU V
.
ººV W
ConfigureAwait
ººW e
(
ººe f
false
ººf k
)
ººk l
;
ººl m
var
ææ 
basicDetails
ææ 
=
ææ 
_mapper
ææ &
.
ææ& '
Map
ææ' *
<
ææ* +$
TblLaReceiptPaymentDet
ææ+ A
>
ææA B
(
ææB C
ReceiptPaymentDto
ææC T
)
ææT U
;
ææU V
basicDetails
øø 
.
øø 
ReceiptPaymentId
øø )
=
øø* +
$num
øø, -
;
øø- .
basicDetails
¿¿ 
.
¿¿ 
IsActive
¿¿ !
=
¿¿" #
true
¿¿$ (
;
¿¿( )
basicDetails
¡¡ 
.
¡¡ 
	IsDeleted
¡¡ "
=
¡¡# $
false
¡¡% *
;
¡¡* +
basicDetails
¬¬ 
.
¬¬ 
CreateBy
¬¬ !
=
¬¬" #
	_userInfo
¬¬$ -
.
¬¬- .
Name
¬¬. 2
;
¬¬2 3
basicDetails
√√ 
.
√√ 
CreatedDate
√√ $
=
√√% &
DateTime
√√' /
.
√√/ 0
UtcNow
√√0 6
;
√√6 7
var
≈≈ 
response
≈≈ 
=
≈≈ 
await
≈≈  %
_savedReceiptRepository
≈≈! 8
.
≈≈8 9
AddAsync
≈≈9 A
(
≈≈A B
basicDetails
≈≈B N
,
≈≈N O
token
≈≈P U
)
≈≈U V
.
≈≈V W
ConfigureAwait
≈≈W e
(
≈≈e f
false
≈≈f k
)
≈≈k l
;
≈≈l m
await
∆∆ 
_work
∆∆ 
.
∆∆ 
CommitAsync
∆∆ #
(
∆∆# $
token
∆∆$ )
)
∆∆) *
.
∆∆* +
ConfigureAwait
∆∆+ 9
(
∆∆9 :
false
∆∆: ?
)
∆∆? @
;
∆∆@ A
if
»» 
(
»» 
response
»» 
!=
»» 
null
»»  
)
»»  !
{
…… 
return
   
true
   
;
   
}
ÀÀ 
else
ÃÃ 
{
ÕÕ 
return
ŒŒ 
false
ŒŒ 
;
ŒŒ 
}
œœ 
}
—— 	
public
”” 
async
”” 
Task
”” 
<
”” 
bool
”” 
>
”” )
RejectReceiptPaymentDetails
””  ;
(
””; <'
TblLaReceiptPaymentDetDTO
””< U
ReceiptPaymentDto
””V g
,
””g h
CancellationToken
””i z
token””{ Ä
)””Ä Å
{
‘‘ 	
var
’’ 
currentDetails
’’ 
=
’’  
await
’’! &%
_savedReceiptRepository
’’' >
.
’’> ?#
FindByExpressionAsync
’’? T
(
’’T U
x
’’U V
=>
’’W Y
x
’’Z [
.
’’[ \
ReceiptPaymentId
’’\ l
==
’’m o 
ReceiptPaymentDto’’p Å
.’’Å Ç 
ReceiptPaymentId’’Ç í
,’’í ì
token’’î ô
)’’ô ö
;’’ö õ
currentDetails
÷÷ 
.
÷÷ 
FirstOrDefault
÷÷ )
(
÷÷) *
)
÷÷* +
.
÷÷+ ,
ReceiptPaymentId
÷÷, <
=
÷÷= >
ReceiptPaymentDto
÷÷? P
.
÷÷P Q
ReceiptPaymentId
÷÷Q a
;
÷÷a b
currentDetails
◊◊ 
.
◊◊ 
FirstOrDefault
◊◊ )
(
◊◊) *
)
◊◊* +
.
◊◊+ ,
IsActive
◊◊, 4
=
◊◊5 6
false
◊◊7 <
;
◊◊< =
currentDetails
ÿÿ 
.
ÿÿ 
FirstOrDefault
ÿÿ )
(
ÿÿ) *
)
ÿÿ* +
.
ÿÿ+ ,
	IsDeleted
ÿÿ, 5
=
ÿÿ6 7
true
ÿÿ8 <
;
ÿÿ< =
await
ŸŸ %
_savedReceiptRepository
ŸŸ )
.
ŸŸ) *
UpdateAsync
ŸŸ* 5
(
ŸŸ5 6
currentDetails
ŸŸ6 D
,
ŸŸD E
token
ŸŸF K
)
ŸŸK L
.
ŸŸL M
ConfigureAwait
ŸŸM [
(
ŸŸ[ \
false
ŸŸ\ a
)
ŸŸa b
;
ŸŸb c
var
€€ #
currentPaymentDetails
€€ %
=
€€& '
await
€€( -(
_generatePaymentRepository
€€. H
.
€€H I#
FindByExpressionAsync
€€I ^
(
€€^ _
x
€€_ `
=>
€€a c
x
€€d e
.
€€e f
Id
€€f h
==
€€i k
ReceiptPaymentDto
€€l }
.
€€} ~
	PaymentId€€~ á
,€€á à
token€€â é
)€€é è
;€€è ê#
currentPaymentDetails
‹‹ !
.
‹‹! "
FirstOrDefault
‹‹" 0
(
‹‹0 1
)
‹‹1 2
.
‹‹2 3
Id
‹‹3 5
=
‹‹6 7
ReceiptPaymentDto
‹‹8 I
.
‹‹I J
TblLaPaymentDet
‹‹J Y
.
‹‹Y Z
Id
‹‹Z \
;
‹‹\ ]#
currentPaymentDetails
›› !
.
››! "
FirstOrDefault
››" 0
(
››0 1
)
››1 2
.
››2 3
PaymentStatus
››3 @
=
››A B
ReceiptPaymentDto
››C T
.
››T U
TblLaPaymentDet
››U d
.
››d e
PaymentStatus
››e r
;
››r s#
currentPaymentDetails
ﬁﬁ !
.
ﬁﬁ! "
FirstOrDefault
ﬁﬁ" 0
(
ﬁﬁ0 1
)
ﬁﬁ1 2
.
ﬁﬁ2 3
IsActive
ﬁﬁ3 ;
=
ﬁﬁ< =
true
ﬁﬁ> B
;
ﬁﬁB C#
currentPaymentDetails
ﬂﬂ !
.
ﬂﬂ! "
FirstOrDefault
ﬂﬂ" 0
(
ﬂﬂ0 1
)
ﬂﬂ1 2
.
ﬂﬂ2 3
	IsDeleted
ﬂﬂ3 <
=
ﬂﬂ= >
false
ﬂﬂ? D
;
ﬂﬂD E
await
‡‡ (
_generatePaymentRepository
‡‡ ,
.
‡‡, -
UpdateAsync
‡‡- 8
(
‡‡8 9#
currentPaymentDetails
‡‡9 N
,
‡‡N O
token
‡‡P U
)
‡‡U V
.
‡‡V W
ConfigureAwait
‡‡W e
(
‡‡e f
false
‡‡f k
)
‡‡k l
;
‡‡l m
var
‚‚ 
basicDetails
‚‚ 
=
‚‚ 
_mapper
‚‚ &
.
‚‚& '
Map
‚‚' *
<
‚‚* +$
TblLaReceiptPaymentDet
‚‚+ A
>
‚‚A B
(
‚‚B C
ReceiptPaymentDto
‚‚C T
)
‚‚T U
;
‚‚U V
basicDetails
„„ 
.
„„ 
ReceiptPaymentId
„„ )
=
„„* +
$num
„„, -
;
„„- .
basicDetails
‰‰ 
.
‰‰ 
IsActive
‰‰ !
=
‰‰" #
true
‰‰$ (
;
‰‰( )
basicDetails
ÂÂ 
.
ÂÂ 
	IsDeleted
ÂÂ "
=
ÂÂ# $
false
ÂÂ% *
;
ÂÂ* +
basicDetails
ÊÊ 
.
ÊÊ 
CreateBy
ÊÊ !
=
ÊÊ" #
	_userInfo
ÊÊ$ -
.
ÊÊ- .
Name
ÊÊ. 2
;
ÊÊ2 3
basicDetails
ÁÁ 
.
ÁÁ 
CreatedDate
ÁÁ $
=
ÁÁ% &
DateTime
ÁÁ' /
.
ÁÁ/ 0
UtcNow
ÁÁ0 6
;
ÁÁ6 7
var
ÈÈ 
response
ÈÈ 
=
ÈÈ 
await
ÈÈ  %
_savedReceiptRepository
ÈÈ! 8
.
ÈÈ8 9
AddAsync
ÈÈ9 A
(
ÈÈA B
basicDetails
ÈÈB N
,
ÈÈN O
token
ÈÈP U
)
ÈÈU V
.
ÈÈV W
ConfigureAwait
ÈÈW e
(
ÈÈe f
false
ÈÈf k
)
ÈÈk l
;
ÈÈl m
await
ÍÍ 
_work
ÍÍ 
.
ÍÍ 
CommitAsync
ÍÍ #
(
ÍÍ# $
token
ÍÍ$ )
)
ÍÍ) *
.
ÍÍ* +
ConfigureAwait
ÍÍ+ 9
(
ÍÍ9 :
false
ÍÍ: ?
)
ÍÍ? @
;
ÍÍ@ A
if
ÎÎ 
(
ÎÎ 
response
ÎÎ 
!=
ÎÎ 
null
ÎÎ  
)
ÎÎ  !
{
ÏÏ 
return
ÌÌ 
true
ÌÌ 
;
ÌÌ 
}
ÓÓ 
else
ÔÔ 
{
 
return
ÒÒ 
false
ÒÒ 
;
ÒÒ 
}
ÚÚ 
}
ÙÙ 	
public
ˆˆ 
async
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
IEnumerable
ˆˆ %
<
ˆˆ% & 
TblLaReceiptDetDTO
ˆˆ& 8
>
ˆˆ8 9
>
ˆˆ9 :!
GetAllReceiptRefNum
ˆˆ; N
(
ˆˆN O
CancellationToken
ˆˆO `
token
ˆˆa f
)
ˆˆf g
{
˜˜ 	
var
¯¯ 
data
¯¯ 
=
¯¯ 
await
¯¯ (
_generateReceiptRepository
¯¯ 7
.
¯¯7 8#
FindByExpressionAsync
¯¯8 M
(
¯¯M N
x
¯¯N O
=>
¯¯P R
x
¯¯S T
.
¯¯T U
IsActive
¯¯U ]
==
¯¯^ `
true
¯¯a e
,
¯¯e f
token
¯¯g l
)
¯¯l m
.
¯¯m n
ConfigureAwait
¯¯n |
(
¯¯| }
false¯¯} Ç
)¯¯Ç É
;¯¯É Ñ
return
˘˘ 
_mapper
˘˘ 
.
˘˘ 
Map
˘˘ 
<
˘˘ 
List
˘˘ #
<
˘˘# $ 
TblLaReceiptDetDTO
˘˘$ 6
>
˘˘6 7
>
˘˘7 8
(
˘˘8 9
data
˘˘9 =
)
˘˘= >
;
˘˘> ?
}
˙˙ 	
public
¸¸ 
async
¸¸ 
Task
¸¸ 
<
¸¸ 
IEnumerable
¸¸ %
<
¸¸% & 
TblLaPaymentDetDTO
¸¸& 8
>
¸¸8 9
>
¸¸9 :!
GetAllPaymentRefNum
¸¸; N
(
¸¸N O
CancellationToken
¸¸O `
token
¸¸a f
)
¸¸f g
{
˝˝ 	
var
˛˛ 
data
˛˛ 
=
˛˛ 
await
˛˛ (
_generatePaymentRepository
˛˛ 7
.
˛˛7 8#
FindByExpressionAsync
˛˛8 M
(
˛˛M N
x
˛˛N O
=>
˛˛P R
x
˛˛S T
.
˛˛T U
IsActive
˛˛U ]
==
˛˛^ `
true
˛˛a e
&&
˛˛f h
x
˛˛i j
.
˛˛j k
PaymentRefNo
˛˛k w
!=
˛˛x z
null
˛˛{ 
,˛˛ Ä
token˛˛Å Ü
)˛˛Ü á
.˛˛á à
ConfigureAwait˛˛à ñ
(˛˛ñ ó
false˛˛ó ú
)˛˛ú ù
;˛˛ù û
return
ˇˇ 
_mapper
ˇˇ 
.
ˇˇ 
Map
ˇˇ 
<
ˇˇ 
List
ˇˇ #
<
ˇˇ# $ 
TblLaPaymentDetDTO
ˇˇ$ 6
>
ˇˇ6 7
>
ˇˇ7 8
(
ˇˇ8 9
data
ˇˇ9 =
)
ˇˇ= >
;
ˇˇ> ?
}
ÄÄ 	
public
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 
bool
ÇÇ 
>
ÇÇ )
CreateReceiptPaymentDetails
ÇÇ  ;
(
ÇÇ; <'
TblLaReceiptPaymentDetDTO
ÇÇ< U
ReceiptPaymentDto
ÇÇV g
,
ÇÇg h
CancellationToken
ÇÇi z
tokenÇÇ{ Ä
)ÇÇÄ Å
{
ÉÉ 	
var
ÑÑ 
basicDetails
ÑÑ 
=
ÑÑ 
_mapper
ÑÑ &
.
ÑÑ& '
Map
ÑÑ' *
<
ÑÑ* +$
TblLaReceiptPaymentDet
ÑÑ+ A
>
ÑÑA B
(
ÑÑB C
ReceiptPaymentDto
ÑÑC T
)
ÑÑT U
;
ÑÑU V
TblLaReceiptDet
ÜÜ 
Receiptlist
ÜÜ '
=
ÜÜ( )
new
ÜÜ* -
TblLaReceiptDet
ÜÜ. =
(
ÜÜ= >
)
ÜÜ> ?
;
ÜÜ? @
Receiptlist
áá 
=
áá 
basicDetails
áá &
.
áá& '
TblLaReceiptDet
áá' 6
;
áá6 7
Receiptlist
àà 
.
àà 
IsActive
àà  
=
àà! "
true
àà# '
;
àà' (
Receiptlist
ââ 
.
ââ 
	IsDeleted
ââ !
=
ââ" #
false
ââ$ )
;
ââ) *
Receiptlist
ää 
.
ää 
	CreatedBy
ää !
=
ää" #
	_userInfo
ää$ -
.
ää- .
Name
ää. 2
;
ää2 3
Receiptlist
ãã 
.
ãã 
CreatedDate
ãã #
=
ãã$ %
DateTime
ãã& .
.
ãã. /
UtcNow
ãã/ 5
;
ãã5 6
var
åå 
Receiptresponse
åå 
=
åå  !
await
åå" '(
_generateReceiptRepository
åå( B
.
ååB C
AddAsync
ååC K
(
ååK L
Receiptlist
ååL W
,
ååW X
token
ååY ^
)
åå^ _
.
åå_ `
ConfigureAwait
åå` n
(
åån o
false
ååo t
)
ååt u
;
ååu v
await
çç 
_work
çç 
.
çç 
CommitAsync
çç #
(
çç# $
token
çç$ )
)
çç) *
.
çç* +
ConfigureAwait
çç+ 9
(
çç9 :
false
çç: ?
)
çç? @
;
çç@ A
int
éé 
	receiptid
éé 
=
éé 
Receiptresponse
éé +
.
éé+ ,
Id
éé, .
;
éé. /
if
íí 
(
íí 
	receiptid
íí 
!=
íí 
$num
íí 
)
íí 
{
ìì 
basicDetails
îî 
.
îî 
ReceiptPaymentId
îî -
=
îî. /
$num
îî0 1
;
îî1 2
basicDetails
ññ 
.
ññ 
	ReceiptId
ññ &
=
ññ' (
	receiptid
ññ) 2
;
ññ2 3
basicDetails
óó 
.
óó 
IsActive
óó %
=
óó& '
true
óó( ,
;
óó, -
basicDetails
òò 
.
òò 
	IsDeleted
òò &
=
òò' (
false
òò) .
;
òò. /
basicDetails
ôô 
.
ôô 
CreateBy
ôô %
=
ôô& '
	_userInfo
ôô( 1
.
ôô1 2
Name
ôô2 6
;
ôô6 7
basicDetails
öö 
.
öö 
CreatedDate
öö (
=
öö) *
DateTime
öö+ 3
.
öö3 4
UtcNow
öö4 :
;
öö: ;
}
ùù 
var
üü 
response
üü 
=
üü 
await
üü  %
_savedReceiptRepository
üü! 8
.
üü8 9
AddAsync
üü9 A
(
üüA B
basicDetails
üüB N
,
üüN O
token
üüP U
)
üüU V
.
üüV W
ConfigureAwait
üüW e
(
üüe f
false
üüf k
)
üük l
;
üül m
await
†† 
_work
†† 
.
†† 
CommitAsync
†† #
(
††# $
token
††$ )
)
††) *
.
††* +
ConfigureAwait
††+ 9
(
††9 :
false
††: ?
)
††? @
;
††@ A
if
°° 
(
°° 
response
°° 
!=
°° 
null
°°  
)
°°  !
{
¢¢ 
return
££ 
true
££ 
;
££ 
}
§§ 
else
•• 
{
¶¶ 
return
ßß 
false
ßß 
;
ßß 
}
®® 
}
™™ 	
public
¨¨ 
async
¨¨ 
Task
¨¨ 
<
¨¨ 
bool
¨¨ 
>
¨¨ "
CreatePaymentDetails
¨¨  4
(
¨¨4 5 
TblLaPaymentDetDTO
¨¨5 G

PaymentDto
¨¨H R
,
¨¨R S
CancellationToken
¨¨T e
token
¨¨f k
)
¨¨k l
{
≠≠ 	
var
ØØ 
basicDetails
ØØ 
=
ØØ 
_mapper
ØØ &
.
ØØ& '
Map
ØØ' *
<
ØØ* +
TblLaPaymentDet
ØØ+ :
>
ØØ: ;
(
ØØ; <

PaymentDto
ØØ< F
)
ØØF G
;
ØØG H
basicDetails
±± 
.
±± 
DateOfInitiation
±± )
=
±±* +
DateTime
±±, 4
.
±±4 5
UtcNow
±±5 ;
;
±±; <
basicDetails
≤≤ 
.
≤≤ 
PaidDate
≤≤ !
=
≤≤! "
DateTime
≤≤# +
.
≤≤+ ,
UtcNow
≤≤, 2
;
≤≤2 3
basicDetails
≥≥ 
.
≥≥ 
IsActive
≥≥ !
=
≥≥" #
true
≥≥$ (
;
≥≥( )
basicDetails
¥¥ 
.
¥¥ 
	IsDeleted
¥¥ "
=
¥¥# $
false
¥¥% *
;
¥¥* +
basicDetails
µµ 
.
µµ 
CreateBy
µµ !
=
µµ" #
	_userInfo
µµ$ -
.
µµ- .
Name
µµ. 2
;
µµ2 3
basicDetails
∂∂ 
.
∂∂ 
CreatedDate
∂∂ $
=
∂∂% &
DateTime
∂∂' /
.
∂∂/ 0
UtcNow
∂∂0 6
;
∂∂6 7
var
∑∑ 
Paymentresponse
∑∑ 
=
∑∑  !
await
∑∑" '(
_generatePaymentRepository
∑∑( B
.
∑∑B C
AddAsync
∑∑C K
(
∑∑K L
basicDetails
∑∑L X
,
∑∑X Y
token
∑∑Z _
)
∑∑_ `
.
∑∑` a
ConfigureAwait
∑∑a o
(
∑∑o p
false
∑∑p u
)
∑∑u v
;
∑∑v w
await
∏∏ 
_work
∏∏ 
.
∏∏ 
CommitAsync
∏∏ #
(
∏∏# $
token
∏∏$ )
)
∏∏) *
.
∏∏* +
ConfigureAwait
∏∏+ 9
(
∏∏9 :
false
∏∏: ?
)
∏∏? @
;
∏∏@ A
int
ππ 
	paymentid
ππ 
=
ππ 
Paymentresponse
ππ +
.
ππ+ ,
Id
ππ, .
;
ππ. /
foreach
ºº 
(
ºº 
var
ºº 
rid
ºº 
in
ºº 

PaymentDto
ºº  *
.
ºº* +
	ReceiptId
ºº+ 4
)
ºº4 5
{
ΩΩ 
var
ææ 
recieptDetails
ææ "
=
ææ# $
await
ææ% *(
_generateReceiptRepository
ææ+ E
.
ææE F#
FindByExpressionAsync
ææF [
(
ææ[ \
x
ææ\ ]
=>
ææ^ `
x
ææa b
.
ææb c
Id
ææc e
==
ææf h
rid
ææi l
&&
ææm o
x
ææp q
.
ææq r
IsActive
æær z
==
ææ{ }
trueææ~ Ç
,ææÇ É
tokenææÑ â
)ææâ ä
;ææä ã
if
øø 
(
øø 
recieptDetails
øø "
!=
øø# %
null
øø& *
)
øø* +
{
¿¿ 
recieptDetails
¡¡ "
.
¡¡" #
FirstOrDefault
¡¡# 1
(
¡¡1 2
)
¡¡2 3
.
¡¡3 4
ReceiptStatus
¡¡4 A
=
¡¡B C

PaymentDto
¡¡D N
.
¡¡N O
PaymentStatus
¡¡O \
;
¡¡\ ]
recieptDetails
¬¬ "
.
¬¬" #
FirstOrDefault
¬¬# 1
(
¬¬1 2
)
¬¬2 3
.
¬¬3 4

ModifiedBy
¬¬4 >
=
¬¬? @
	_userInfo
¬¬A J
.
¬¬J K
Name
¬¬K O
;
¬¬O P
recieptDetails
√√ "
.
√√" #
FirstOrDefault
√√# 1
(
√√1 2
)
√√2 3
.
√√3 4
ModifiedDate
√√4 @
=
√√A B
DateTime
√√C K
.
√√K L
UtcNow
√√L R
;
√√R S
await
ƒƒ (
_generateReceiptRepository
ƒƒ 4
.
ƒƒ4 5
UpdateAsync
ƒƒ5 @
(
ƒƒ@ A
recieptDetails
ƒƒA O
,
ƒƒO P
token
ƒƒQ V
)
ƒƒV W
.
ƒƒW X
ConfigureAwait
ƒƒX f
(
ƒƒf g
false
ƒƒg l
)
ƒƒl m
;
ƒƒm n
await
≈≈ 
_work
≈≈ 
.
≈≈  
CommitAsync
≈≈  +
(
≈≈+ ,
token
≈≈, 1
)
≈≈1 2
.
≈≈2 3
ConfigureAwait
≈≈3 A
(
≈≈A B
false
≈≈B G
)
≈≈G H
;
≈≈H I
}
∆∆ 
}
«« 
foreach
   
(
   
var
   
rpid
   !
in
  " $

PaymentDto
  % /
.
  / 0
PaymentReceiptId
  0 @
)
  @ A
{
ÀÀ 
foreach
ÃÃ 
(
ÃÃ 
var
ÃÃ 
rid
ÃÃ  
in
ÃÃ! #

PaymentDto
ÃÃ$ .
.
ÃÃ. /
	ReceiptId
ÃÃ/ 8
)
ÃÃ8 9
{
ÕÕ 
var
ŒŒ #
recepitpaymentdetails
ŒŒ -
=
ŒŒ. /
await
ŒŒ0 5%
_savedReceiptRepository
ŒŒ6 M
.
ŒŒM N#
FindByExpressionAsync
ŒŒN c
(
ŒŒc d
x
ŒŒd e
=>
ŒŒf h
x
ŒŒi j
.
ŒŒj k
IsActive
ŒŒk s
==
ŒŒt v
true
ŒŒw {
&&
ŒŒ| ~
xŒŒ Ä
.ŒŒÄ Å 
ReceiptPaymentIdŒŒÅ ë
==ŒŒí î
rpidŒŒñ ö
&&ŒŒõ ù
xŒŒû ü
.ŒŒü †
	ReceiptIdŒŒ† ©
==ŒŒ™ ¨
ridŒŒ≠ ∞
,ŒŒ∞ ±
tokenŒŒ≤ ∑
)ŒŒ∑ ∏
.ŒŒ∏ π
ConfigureAwaitŒŒπ «
(ŒŒ« »
falseŒŒ» Õ
)ŒŒÕ Œ
;ŒŒŒ œ
var
œœ 
result
œœ 
=
œœ  #
recepitpaymentdetails
œœ! 6
.
œœ6 7
FirstOrDefault
œœ7 E
(
œœE F
)
œœF G
;
œœG H
if
–– 
(
–– 
result
–– 
!=
–– !
null
––" &
)
––& '
{
—— 
result
““ 
.
““ 
	PaymentId
““ (
=
““) *
	paymentid
““+ 4
;
““4 5
result
”” 
.
”” 

ModifiedBy
”” )
=
””* +
	_userInfo
””, 5
.
””5 6
Name
””6 :
;
””: ;
result
‘‘ 
.
‘‘ 
ModifiedDate
‘‘ +
=
‘‘, -
DateTime
‘‘. 6
.
‘‘6 7
UtcNow
‘‘7 =
;
‘‘= >
await
÷÷ %
_savedReceiptRepository
÷÷ 5
.
÷÷5 6
UpdateAsync
÷÷6 A
(
÷÷A B
result
÷÷B H
,
÷÷H I
token
÷÷J O
)
÷÷O P
.
÷÷P Q
ConfigureAwait
÷÷Q _
(
÷÷_ `
false
÷÷` e
)
÷÷e f
;
÷÷f g
await
◊◊ 
_work
◊◊ #
.
◊◊# $
CommitAsync
◊◊$ /
(
◊◊/ 0
token
◊◊0 5
)
◊◊5 6
.
◊◊6 7
ConfigureAwait
◊◊7 E
(
◊◊E F
false
◊◊F K
)
◊◊K L
;
◊◊L M
}
ÿÿ 
}
⁄⁄ 
}
€€ 
if
‹‹ 
(
‹‹ 
Paymentresponse
‹‹ 
!=
‹‹  "
null
‹‹# '
)
‹‹' (
{
›› 
return
ﬁﬁ 
true
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 
else
‡‡ 
{
·· 
return
‚‚ 
false
‚‚ 
;
‚‚ 
}
„„ 
}
ÊÊ 	
}
ÈÈ 
}ÍÍ æx
KD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\MobileService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
{ 
public 

class 
MobileService 
:  
IMobileService! /
{ 
private 
readonly 
IEntityRepository *
<* +
RegduserTab+ 6
>6 7
_userRepository8 G
;G H
private 
readonly 
IEntityRepository *
<* +
OtpTab+ 1
>1 2
_smsTrackRepository3 F
;F G
private 
readonly 
IEntityRepository *
<* +
Promoter+ 3
>3 4
_promotorRepository5 H
;H I
private 
readonly 
IConfiguration '

_configure( 2
;2 3
private 
readonly 
IMapper  
_mapper! (
;( )
private 
readonly 
UserInfo !
	_userInfo" +
;+ ,
private 
readonly 
IUnitOfWork $
_work% *
;* +
public 
MobileService 
( 
IEntityRepository .
<. /
RegduserTab/ :
>: ;
userRepository< J
,J K
IEntityRepository 
< 
OtpTab $
>$ %
smsTrackRepository& 8
,8 9
IEntityRepository 
< 
Promoter &
>& '
promotorRepository( :
,: ;
IConfiguration 
	configure $
,$ %
UserInfo 
userInfo 
, 
IMapper 
mapper 
= 
null !
,! "
IUnitOfWork# .
work/ 3
=4 5
null6 :
): ;
{   	
_userRepository!! 
=!! 
userRepository!! ,
;!!, -
_promotorRepository"" 
=""  !
promotorRepository""" 4
;""4 5
_smsTrackRepository## 
=##  !
smsTrackRepository##" 4
;##4 5
	_userInfo$$ 
=$$ 
userInfo$$  
;$$  !

_configure%% 
=%% 
	configure%% "
;%%" #
_mapper&& 
=&& 
mapper&& 
;&& 
_work'' 
='' 
work'' 
;'' 
}(( 	
public** 
async** 
Task** 
<** 
RegdUserDTO** %
>**% &&
IsMobileNumberAlreadyExist**' A
(**A B
string**B H
	mobileNum**I R
,**R S
CancellationToken**T e
token**f k
)**k l
{++ 	
var,, 
user,, 
=,, 
await,, 
_userRepository,, ,
.,,, -+
FirstOrDefaultByExpressionAsync,,- L
(,,L M
x,,M N
=>,,O Q
x,,R S
.,,S T
UserMobileno,,T `
==,,a c
	mobileNum,,d m
&&,,n p
x,,q r
.,,r s
IsActive,,s {
==,,| ~
true	,, É
&&
,,Ñ Ü
x
,,á à
.
,,à â
	IsDeleted
,,â í
==
,,ì ï
false
,,ñ õ
,
,,õ ú
token
,,ù ¢
)
,,¢ £
.
,,£ §
ConfigureAwait
,,§ ≤
(
,,≤ ≥
false
,,≥ ∏
)
,,∏ π
;
,,π ∫
var-- 
promotor-- 
=-- 
await--  
_promotorRepository--! 4
.--4 5+
FirstOrDefaultByExpressionAsync--5 T
(--T U
x--U V
=>--W Y
x--Z [
.--[ \

PromMobile--\ f
==--g i
	mobileNum--j s
&&--t v
x--w x
.--x y
IsActive	--y Å
==
--Ç Ñ
true
--Ö â
&&
--ä å
x
--ç é
.
--é è
	IsDeleted
--è ò
==
--ô õ
false
--ú °
,
--° ¢
token
--£ ®
)
--® ©
.
--© ™
ConfigureAwait
--™ ∏
(
--∏ π
false
--π æ
)
--æ ø
;
--ø ¿
if// 
(// 
user// 
==// 
null// 
&&// 
promotor//  (
==//) +
null//, 0
)//0 1
{00 
return11 
null11 
;11 
}22 
if44 
(44 
user44 
!=44 
null44 
)44 
{55 
var66 
user_details66  
=66! "
await66# (
_userRepository66) 8
.668 9+
FirstOrDefaultByExpressionAsync669 X
(66X Y
x66Y Z
=>66[ ]
x66^ _
.66_ `
UserPan66` g
==66h j
user66k o
.66o p
UserPan66p w
&&66x z
x66{ |
.66| }
UserMobileno	66} â
==
66ä å
user
66ç ë
.
66ë í
UserMobileno
66í û
&&
66ü °
x
66¢ £
.
66£ §
IsActive
66§ ¨
==
66≠ Ø
true
66∞ ¥
&&
66µ ∑
x
66∏ π
.
66π ∫
	IsDeleted
66∫ √
==
66ƒ ∆
false
66« Ã
,
66Ã Õ
token
66Œ ”
)
66” ‘
.
66‘ ’
ConfigureAwait
66’ „
(
66„ ‰
false
66‰ È
)
66È Í
;
66Í Î
return77 
_mapper77 
.77 
Map77 "
<77" #
RegdUserDTO77# .
>77. /
(77/ 0
user_details770 <
)77< =
;77= >
}88 
var:: 
Prom_Details:: 
=:: 
_mapper:: &
.::& '
Map::' *
<::* +
RegdUserDTO::+ 6
>::6 7
(::7 8
promotor::8 @
)::@ A
;::A B
var;; 

pm_details;; 
=;; 
_promotorRepository;; 0
.;;0 1+
FirstOrDefaultByExpressionAsync;;1 P
(;;P Q
x;;Q R
=>;;S U
x;;V W
.;;W X
PanNo;;X ]
==;;^ `
Prom_Details;;a m
.;;m n
Pan;;n q
&&;;r t
x;;u v
.;;v w

PromMobile	;;w Å
==
;;Ç Ñ
Prom_Details
;;Ö ë
.
;;ë í
mobile
;;í ò
&&
;;ô õ
x
;;ú ù
.
;;ù û
IsActive
;;û ¶
==
;;ß ©
true
;;™ Æ
&&
;;Ø ±
x
;;≤ ≥
.
;;≥ ¥
	IsDeleted
;;¥ Ω
==
;;æ ¿
false
;;¡ ∆
,
;;∆ «
token
;;» Õ
)
;;Õ Œ
.
;;Œ œ
ConfigureAwait
;;œ ›
(
;;› ﬁ
false
;;ﬁ „
)
;;„ ‰
;
;;‰ Â
return<< 
_mapper<< 
.<< 
Map<< 
<<< 
RegdUserDTO<< *
><<* +
(<<+ ,

pm_details<<, 6
)<<6 7
;<<7 8
}== 	
public?? 
async?? 
Task?? 
<?? 
OtpTab??  
>??  !!
IsGeneratedOtpExpired??" 7
(??7 8
string??8 >
	mobileNum??? H
,??H I
CancellationToken??J [
token??\ a
)??a b
{@@ 	
varAA 
itemAA 
=AA 
awaitAA 
_smsTrackRepositoryAA 0
.AA0 1+
FirstOrDefaultByExpressionAsyncAA1 P
(AAP Q
xAAQ R
=>AAS U
xAAV W
.AAW X
MobileNoAAX `
==AAa c
	mobileNumAAd m
&&AAn p
xAAq r
.AAr s"
Otpexpirationdatetime	AAs à
>=
AAâ ã
DateTime
AAå î
.
AAî ï
Now
AAï ò
&&
AAô õ
x
AAú ù
.
AAù û
IsActive
AAû ¶
==
AAß ©
true
AA™ Æ
&&
AAØ ±
x
AA≤ ≥
.
AA≥ ¥
	IsDeleted
AA¥ Ω
==
AAæ ¿
false
AA¡ ∆
,
AA∆ «
token
AA» Õ
)
AAÕ Œ
.
AAŒ œ
ConfigureAwait
AAœ ›
(
AA› ﬁ
false
AAﬁ „
)
AA„ ‰
;
AA‰ Â
returnBB 
itemBB 
;BB 
}CC 	
publicEE 
asyncEE 
TaskEE 
SaveOtpEE !
(EE! "
stringEE" (
otpEE) ,
,EE, -
stringEE. 4
	mobileNumEE5 >
,EE> ?
boolEE@ D
	verStatusEEE N
,EEN O
stringEEP V
processEEW ^
,EE^ _
CancellationTokenEE` q
tokenEEr w
)EEw x
{FF 	
intGG 
expTimeGG 
=GG 
ConvertGG !
.GG! "
ToInt32GG" )
(GG) *

_configureGG* 4
[GG4 5
$strGG5 H
]GGH I
)GGI J
;GGJ K
OtpTabHH 
otpDetHH 
=HH 
newHH 
(HH  
)HH  !
{II 
MobileNoJJ 
=JJ 
	mobileNumJJ $
,JJ$ %
OtpKK 
=KK 
otpKK 
,KK 
	VerStatusLL 
=LL 
	verStatusLL %
,LL% &
ProcessMM 
=MM 
processMM !
,MM! "
UserIdNN 
=NN 
	_userInfoNN "
?NN" #
.NN# $
UserIdNN$ *
,NN* +
IsActiveOO 
=OO 
trueOO 
,OO  
	IsDeletedPP 
=PP 
falsePP !
,PP! "
CreatedDateQQ 
=QQ 
DateTimeQQ &
.QQ& '
NowQQ' *
,QQ* +!
OtpexpirationdatetimeRR %
=RR& '
DateTimeRR( 0
.RR0 1
NowRR1 4
.RR4 5

AddSecondsRR5 ?
(RR? @
expTimeRR@ G
)RRG H
}SS 
;SS 
awaitTT 
_smsTrackRepositoryTT %
.TT% &
AddAsyncTT& .
(TT. /
otpDetTT/ 5
,TT5 6
tokenTT7 <
)TT< =
.TT= >
ConfigureAwaitTT> L
(TTL M
falseTTM R
)TTR S
;TTS T
awaitUU 
_workUU 
.UU 
CommitAsyncUU "
(UU" #
tokenUU# (
)UU( )
.UU) *
ConfigureAwaitUU* 8
(UU8 9
falseUU9 >
)UU> ?
;UU? @
}VV 	
publicXX 
asyncXX 
TaskXX 
<XX 
boolXX 
>XX 
IsOtpVerSuccessfullXX  3
(XX3 4
stringXX4 :
otpXX; >
,XX> ?
stringXX@ F
	mobileNumXXG P
,XXP Q
stringXXR X
processXXY `
,XX` a
CancellationTokenXXb s
tokenXXt y
)XXy z
{YY 	
varZZ 
respZZ 
=ZZ 
awaitZZ 
_smsTrackRepositoryZZ 0
.ZZ0 1+
FirstOrDefaultByExpressionAsyncZZ1 P
(ZZP Q
xZZQ R
=>ZZS U
xZZV W
.ZZW X
MobileNoZZX `
==ZZa c
	mobileNumZZd m
&&ZZn p
xZZq r
.ZZr s
OtpZZs v
==ZZw y
otpZZz }
&&	ZZ~ Ä
x
ZZÅ Ç
.
ZZÇ É
Process
ZZÉ ä
==
ZZã ç
process
ZZé ï
&&
ZZñ ò
x
ZZô ö
.
ZZö õ#
Otpexpirationdatetime
ZZõ ∞
>=
ZZ± ≥
DateTime
ZZ¥ º
.
ZZº Ω
Now
ZZΩ ¿
&&
ZZ¡ √
x
ZZƒ ≈
.
ZZ≈ ∆
IsActive
ZZ∆ Œ
==
ZZœ —
true
ZZ“ ÷
&&
ZZ◊ Ÿ
x
ZZ⁄ €
.
ZZ€ ‹
	IsDeleted
ZZ‹ Â
==
ZZÊ Ë
false
ZZÈ Ó
,
ZZÓ Ô
token
ZZ ı
)
ZZı ˆ
.
ZZˆ ˜
ConfigureAwait
ZZ˜ Ö
(
ZZÖ Ü
false
ZZÜ ã
)
ZZã å
;
ZZå ç
if[[ 
([[ 
resp[[ 
!=[[ 
null[[ 
)[[ 
{\\ 
return]] 
true]] 
;]] 
}^^ 
return__ 
false__ 
;__ 
}`` 	
publicbb 
asyncbb 
Taskbb 
<bb 
OtpTabbb  
>bb  ! 
PostSuccessDeleteRecbb" 6
(bb6 7
stringbb7 =
mobilebb> D
,bbD E
stringbbF L
processbbM T
,bbT U
CancellationTokenbbV g
tokenbbh m
)bbm n
{cc 	
vardd 
itemdd 
=dd 
awaitdd 
_smsTrackRepositorydd 0
.dd0 1+
FirstOrDefaultByExpressionAsyncdd1 P
(ddP Q
xddQ R
=>ddS U
xddV W
.ddW X
MobileNoddX `
==dda c
mobileddd j
&&ddk m
xddn o
.ddo p
Processddp w
==ddx z
process	dd{ Ç
&&
ddÉ Ö
x
ddÜ á
.
ddá à
IsActive
ddà ê
==
ddë ì
true
ddî ò
&&
ddô õ
x
ddú ù
.
ddù û
	IsDeleted
ddû ß
==
dd® ™
false
dd´ ∞
,
dd∞ ±
token
dd≤ ∑
)
dd∑ ∏
.
dd∏ π
ConfigureAwait
ddπ «
(
dd« »
false
dd» Õ
)
ddÕ Œ
;
ddŒ œ
itemee 
.ee 
	IsDeletedee 
=ee 
trueee !
;ee! "
itemff 
.ff 
IsActiveff 
=ff 
falseff !
;ff! "
itemgg 
.gg 
ModifiedDategg 
=gg 
DateTimegg  (
.gg( )
UtcNowgg) /
;gg/ 0
awaithh 
_smsTrackRepositoryhh %
.hh% &
UpdateAsynchh& 1
(hh1 2
itemhh2 6
,hh6 7
tokenhh8 =
)hh= >
;hh> ?
awaitii 
_workii 
.ii 
CommitAsyncii #
(ii# $
tokenii$ )
)ii) *
.ii* +
ConfigureAwaitii+ 9
(ii9 :
falseii: ?
)ii? @
;ii@ A
returnjj 
itemjj 
;jj 
}kk 	
publicmm 
asyncmm 
Taskmm 
<mm 
stringmm  
>mm  !
FetchMobileByPanmm" 2
(mm2 3
stringmm3 9
panNummm: @
,mm@ A
CancellationTokenmmB S
tokenmmT Y
)mmY Z
{nn 	
varoo 
dataoo 
=oo 
awaitoo 
_userRepositoryoo ,
.oo, -+
FirstOrDefaultByExpressionAsyncoo- L
(ooL M
xooM N
=>ooO Q
xooR S
.ooS T
UserPanooT [
==oo\ ^
panNumoo_ e
&&oof h
xooi j
.ooj k
IsActiveook s
==oot v
trueoow {
&&oo| ~
x	oo Ä
.
ooÄ Å
	IsDeleted
ooÅ ä
==
ooã ç
false
ooé ì
,
ooì î
token
ooï ö
)
ooö õ
.
ooõ ú
ConfigureAwait
ooú ™
(
oo™ ´
false
oo´ ∞
)
oo∞ ±
;
oo± ≤
returnpp 
datapp 
.pp 
UserMobilenopp $
;pp$ %
}qq 	
}rr 
}ss ¨ñ
JD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\TokenService.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
{ 
class 	
TokenService
 
: 
ITokenService &
{ 
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
private 
readonly 
IEntityRepository *
<* +
EmpsessionTab+ 8
>8 9
_empSession: E
;E F
private 
readonly 
IEntityRepository *
<* +
PromsessionTab+ 9
>9 :
_promSession; G
;G H
private 
readonly 
IUnitOfWork $
_work% *
;* +
public 
TokenService 
( 
IConfiguration *
configuration+ 8
,8 9
IEntityRepository: K
<K L
EmpsessionTabL Y
>Y Z

empSession[ e
,e f
IEntityRepositoryg x
<x y
PromsessionTab	y á
>
á à
promSession
â î
,
î ï
IUnitOfWork
ï †
work
° •
)
• ¶
{ 	
_configuration 
= 
configuration *
;* +
_empSession 
= 

empSession $
;$ %
_promSession 
= 
promSession &
;& '
_work 
= 
work 
; 
}   	
public!! 
string!! 
GenerateAccessToken!! )
(!!) *
IEnumerable!!* 5
<!!5 6
Claim!!6 ;
>!!; <
claims!!= C
)!!C D
{"" 	
var## 
	secretKey## 
=## 
new##  
SymmetricSecurityKey##  4
(##4 5
Encoding##5 =
.##= >
UTF8##> B
.##B C
GetBytes##C K
(##K L
_configuration##L Z
[##Z [
$str##[ g
]##g h
)##h i
)##i j
;##j k
var$$ 
signinCredentials$$ !
=$$" #
new$$$ '
SigningCredentials$$( :
($$: ;
	secretKey$$; D
,$$D E
SecurityAlgorithms$$F X
.$$X Y

HmacSha256$$Y c
)$$c d
;$$d e
var%% 
tokeOptions%% 
=%% 
new%% !
JwtSecurityToken%%" 2
(%%2 3
issuer&& 
:&& 
_configuration&& &
[&&& '
$str&&' 8
]&&8 9
,&&9 :
audience'' 
:'' 
_configuration'' (
[''( )
$str'') <
]''< =
,''= >
claims(( 
:(( 
claims(( 
,(( 
expires)) 
:)) 
DateTime)) !
.))! "
Now))" %
.))% &

AddMinutes))& 0
())0 1
Convert))1 8
.))8 9
ToInt32))9 @
())@ A
_configuration))A O
[))O P
$str))P g
]))g h
)))h i
)))i j
,))j k
signingCredentials** "
:**" #
signinCredentials**$ 5
)++ 
;++ 
var,, 
tokenString,, 
=,, 
new,, !#
JwtSecurityTokenHandler,," 9
(,,9 :
),,: ;
.,,; <

WriteToken,,< F
(,,F G
tokeOptions,,G R
),,R S
;,,S T
return-- 
tokenString-- 
;-- 
}.. 	
public00 
string00  
GenerateRefreshToken00 *
(00* +
)00+ ,
{11 	
var22 
randomNumber22 
=22 
new22 "
byte22# '
[22' (
$num22( *
]22* +
;22+ ,
using33 
var33 
rng33 
=33 !
RandomNumberGenerator33 1
.331 2
Create332 8
(338 9
)339 :
;33: ;
rng44 
.44 
GetBytes44 
(44 
randomNumber44 %
)44% &
;44& '
return55 
Convert55 
.55 
ToBase64String55 )
(55) *
randomNumber55* 6
)556 7
;557 8
}66 	
public88 
ClaimsPrincipal88 (
GetPrincipalFromExpiredToken88 ;
(88; <
string88< B
token88C H
)88H I
{99 	
var:: %
tokenValidationParameters:: )
=::* +
new::, /%
TokenValidationParameters::0 I
{;; 
ValidateAudience<<  
=<<! "
false<<# (
,<<( )
ValidateIssuer== 
===  
false==! &
,==& '$
ValidateIssuerSigningKey>> (
=>>) *
true>>+ /
,>>/ 0
IssuerSigningKey??  
=??! "
new??# & 
SymmetricSecurityKey??' ;
(??; <
Encoding??< D
.??D E
UTF8??E I
.??I J
GetBytes??J R
(??R S
_configuration??S a
[??a b
$str??b n
]??n o
)??o p
)??p q
,??q r
ValidateLifetime@@  
=@@! "
false@@# (
}AA 
;AA 
varBB 
tokenHandlerBB 
=BB 
newBB "#
JwtSecurityTokenHandlerBB# :
(BB: ;
)BB; <
;BB< =
varCC 
	principalCC 
=CC 
tokenHandlerCC (
.CC( )
ValidateTokenCC) 6
(CC6 7
tokenCC7 <
,CC< =%
tokenValidationParametersCC> W
,CCW X
outCCY \
SecurityTokenCC] j
securityTokenCCk x
)CCx y
;CCy z
ifDD 
(DD 
securityTokenDD 
isDD  
notDD! $
JwtSecurityTokenDD% 5
jwtSecurityTokenDD6 F
||DDG I
!DDJ K
jwtSecurityTokenDDK [
.DD[ \
HeaderDD\ b
.DDb c
AlgDDc f
.DDf g
EqualsDDg m
(DDm n
SecurityAlgorithms	DDn Ä
.
DDÄ Å

HmacSha256
DDÅ ã
,
DDã å
StringComparison
DDç ù
.
DDù û(
InvariantCultureIgnoreCase
DDû ∏
)
DD∏ π
)
DDπ ∫
throwEE 
newEE "
SecurityTokenExceptionEE 0
(EE0 1
$strEE1 @
)EE@ A
;EEA B
returnFF 
	principalFF 
;FF 
}GG 	
publicII 
asyncII 
TaskII 
<II 
TokenDTOII "
>II" #
RefreshII$ +
(II+ ,
TokenDTOII, 4

tokenModelII5 ?
,II? @
CancellationTokenIIA R
tokenIIS X
)IIX Y
{JJ 	
stringLL 
refreshTokenLL 
=LL  !

tokenModelLL" ,
.LL, -
Refresh_TokenLL- :
;LL: ;
varNN 
	principalNN 
=NN (
GetPrincipalFromExpiredTokenNN 8
(NN8 9

tokenModelNN9 C
.NNC D
Access_TokenNND P
)NNP Q
;NNQ R
varQQ 
userQQ 
=QQ 
awaitQQ 
_empSessionQQ (
.QQ( )+
FirstOrDefaultByExpressionAsyncQQ) H
(QQH I
xQQI J
=>QQK M
xQQN O
.QQO P
AccesstokenQQP [
==QQ\ ^

tokenModelQQ_ i
.QQi j
Access_TokenQQj v
&&QQw y
xQQz {
.QQ{ |
Refreshtoken	QQ| à
==
QQâ ã
refreshToken
QQå ò
,
QQò ô
token
QQö ü
)
QQü †
.
QQ† °
ConfigureAwait
QQ° Ø
(
QQØ ∞
false
QQ∞ µ
)
QQµ ∂
;
QQ∂ ∑
ifRR 
(RR 
userRR 
==RR 
nullRR 
||RR 
userRR  $
.RR$ %&
RefreshtokenexpirydatetimeRR% ?
<=RR@ B
DateTimeRRC K
.RRK L
NowRRL O
)RRO P
{SS 
returnTT 
nullTT 
;TT 
}UU 
varWW 
newAccessTokenWW 
=WW  
GenerateAccessTokenWW! 4
(WW4 5
	principalWW5 >
.WW> ?
ClaimsWW? E
)WWE F
;WWF G
varXX 
newRefreshTokenXX 
=XX  ! 
GenerateRefreshTokenXX" 6
(XX6 7
)XX7 8
;XX8 9
awaitYY 
UpdateRefreshTokenYY $
(YY$ %
userYY% )
.YY) *
EmpIdYY* /
,YY/ 0
newAccessTokenYY1 ?
,YY? @
newRefreshTokenYYA P
,YYP Q
tokenYYQ V
)YYV W
.YYW X
ConfigureAwaitYYX f
(YYf g
falseYYg l
)YYl m
;YYm n
;YYo p
return[[ 
new[[ 
TokenDTO[[ 
{\\ 
Access_Token]] 
=]] 
newAccessToken]] -
,]]- .
Refresh_Token^^ 
=^^ 
newRefreshToken^^  /
}__ 
;__ 
}`` 	
publicbb 
asyncbb 
Taskbb 
<bb 
TokenDTObb "
>bb" #
PromoterRefreshbb$ 3
(bb3 4
TokenDTObb4 <

tokenModelbb= G
,bbG H
CancellationTokenbbI Z
tokenbb[ `
)bb` a
{cc 	
stringdd 
refreshTokendd 
=dd  !

tokenModeldd" ,
.dd, -
Refresh_Tokendd- :
;dd: ;
varff 
userff 
=ff 
awaitff 
_promSessionff )
.ff) *+
FirstOrDefaultByExpressionAsyncff* I
(ffI J
xffJ K
=>ffL N
xffO P
.ffP Q
RefreshtokenffQ ]
==ff^ `
refreshTokenffa m
,ffm n
tokenffo t
)fft u
.ffu v
ConfigureAwait	ffv Ñ
(
ffÑ Ö
false
ffÖ ä
)
ffä ã
;
ffã å
varhh 
	principalhh 
=hh (
GetPrincipalFromExpiredTokenhh 8
(hh8 9
userhh9 =
.hh= >
Accesstokenhh> I
)hhI J
;hhJ K
ifjj 
(jj 
userjj 
==jj 
nulljj 
||jj 
userjj  $
.jj$ %&
Refreshtokenexpirydatetimejj% ?
<=jj@ B
DateTimejjC K
.jjK L
NowjjL O
)jjO P
{kk 
returnll 
nullll 
;ll 
}mm 
ifoo 
(oo 
useroo 
.oo %
Accesstokenexpirydatetimeoo -
>=oo. 0
DateTimeoo1 9
.oo9 :
Nowoo: =
)oo= >
{pp 
returnqq 
newqq 
TokenDTOqq #
{rr 
Access_Tokenss  
=ss! "
userss# '
.ss' (
Accesstokenss( 3
,ss3 4
Refresh_Tokentt !
=tt" #
usertt$ (
.tt( )
Refreshtokentt) 5
}uu 
;uu 
}vv 
varxx 
newAccessTokenxx 
=xx  
GenerateAccessTokenxx! 4
(xx4 5
	principalxx5 >
.xx> ?
Claimsxx? E
)xxE F
;xxF G
varyy 
newRefreshTokenyy 
=yy  ! 
GenerateRefreshTokenyy" 6
(yy6 7
)yy7 8
;yy8 9
awaitzz "
UpdatePromRefreshTokenzz (
(zz( )
userzz) -
.zz- .
PromPanzz. 5
,zz5 6
newAccessTokenzz7 E
,zzE F
newRefreshTokenzzG V
,zzV W
tokenzzX ]
)zz] ^
.zz^ _
ConfigureAwaitzz_ m
(zzm n
falsezzn s
)zzs t
;zzt u
;zzv w
await{{ 
_work{{ 
.{{ 
CommitAsync{{ #
({{# $
token{{$ )
){{) *
.{{* +
ConfigureAwait{{+ 9
({{9 :
false{{: ?
){{? @
;{{@ A
return|| 
new|| 
TokenDTO|| 
{}} 
Access_Token~~ 
=~~ 
newAccessToken~~ -
,~~- .
Refresh_Token 
= 
newRefreshToken  /
}
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
private
ÇÇ 
async
ÇÇ 
Task
ÇÇ 
<
ÇÇ 
bool
ÇÇ 
>
ÇÇ   
UpdateRefreshToken
ÇÇ! 3
(
ÇÇ3 4
string
ÇÇ4 :
EmpId
ÇÇ; @
,
ÇÇ@ A
string
ÇÇB H
AccessToken
ÇÇI T
,
ÇÇT U
string
ÇÇV \
RefreshToken
ÇÇ] i
,
ÇÇi j
CancellationToken
ÇÇk |
tokenÇÇ} Ç
)ÇÇÇ É
{
ÉÉ 	
var
ÖÖ 
loginHistory
ÖÖ  
=
ÖÖ! "
await
ÖÖ" '
_empSession
ÖÖ( 3
.
ÖÖ3 4-
FirstOrDefaultByExpressionAsync
ÖÖ4 S
(
ÖÖS T
x
ÖÖT U
=>
ÖÖV X
x
ÖÖY Z
.
ÖÖZ [
EmpId
ÖÖ[ `
==
ÖÖa c
EmpId
ÖÖd i
,
ÖÖi j
token
ÖÖk p
)
ÖÖp q
.
ÖÖq r
ConfigureAwaitÖÖr Ä
(ÖÖÄ Å
falseÖÖÅ Ü
)ÖÖÜ á
;ÖÖá à
if
áá 
(
áá 
loginHistory
áá  
==
áá! #
null
áá$ (
)
áá( )
return
àà 
false
àà  
;
àà  !
else
ââ 
{
ää 
loginHistory
ãã  
.
ãã  !
Accesstoken
ãã! ,
=
ãã- .
AccessToken
ãã/ :
;
ãã: ;
loginHistory
åå  
.
åå  !
Refreshtoken
åå! -
=
åå. /
RefreshToken
åå0 <
;
åå< =
loginHistory
çç  
.
çç  !
SessionStatus
çç! .
=
çç/ 0
true
çç1 5
;
çç5 6
loginHistory
éé  
.
éé  !
LoginDateTime
éé! .
=
éé/ 0
DateTime
éé1 9
.
éé9 :
Now
éé: =
;
éé= >
loginHistory
èè  
.
èè  ! 
Refreshtokenrevoke
èè! 3
=
èè4 5
false
èè6 ;
;
èè; <
loginHistory
êê  
.
êê  !
Accesstokenrevoke
êê! 2
=
êê3 4
false
êê5 :
;
êê: ;
loginHistory
ëë  
.
ëë  !'
Accesstokenexpirydatetime
ëë! :
=
ëë; <
DateTime
ëë= E
.
ëëE F
Now
ëëF I
.
ëëI J

AddMinutes
ëëJ T
(
ëëT U
Convert
ëëU \
.
ëë\ ]
ToInt32
ëë] d
(
ëëd e
_configuration
ëëe s
[
ëës t
$strëët ã
]ëëã å
)ëëå ç
)ëëç é
;ëëé è
loginHistory
íí  
.
íí  !(
Refreshtokenexpirydatetime
íí! ;
=
íí< =
DateTime
íí> F
.
ííF G
Now
ííG J
.
ííJ K

AddMinutes
ííK U
(
ííU V
Convert
ííV ]
.
íí] ^
ToInt32
íí^ e
(
ííe f
_configuration
ííf t
[
íít u
$strííu ç
]ííç é
)ííé è
)ííè ê
;ííê ë
await
îî 
_empSession
îî %
.
îî% &
UpdateAsync
îî& 1
(
îî1 2
loginHistory
îî2 >
,
îî> ?
token
îî@ E
)
îîE F
.
îîF G
ConfigureAwait
îîG U
(
îîU V
false
îîV [
)
îî[ \
;
îî\ ]
return
ïï 
true
ïï 
;
ïï  
}
ññ 
}
òò 	
private
ôô 
async
ôô 
Task
ôô 
<
ôô 
bool
ôô 
>
ôô  $
UpdatePromRefreshToken
ôô! 7
(
ôô7 8
string
ôô8 >
promPan
ôô? F
,
ôôF G
string
ôôH N
AccessToken
ôôO Z
,
ôôZ [
string
ôô\ b
RefreshToken
ôôc o
,
ôôo p 
CancellationTokenôôq Ç
tokenôôÉ à
)ôôà â
{
öö 	
var
úú 
loginHistory
úú 
=
úú 
await
úú $
_promSession
úú% 1
.
úú1 2-
FirstOrDefaultByExpressionAsync
úú2 Q
(
úúQ R
x
úúR S
=>
úúT V
x
úúW X
.
úúX Y
PromPan
úúY `
==
úúa c
promPan
úúd k
,
úúk l
token
úúm r
)
úúr s
.
úús t
ConfigureAwaitúút Ç
(úúÇ É
falseúúÉ à
)úúà â
;úúâ ä
if
ûû 
(
ûû 
loginHistory
ûû 
==
ûû 
null
ûû  $
)
ûû$ %
return
üü 
false
üü 
;
üü 
else
†† 
{
°° 
loginHistory
¢¢ 
.
¢¢ 
Accesstoken
¢¢ (
=
¢¢) *
AccessToken
¢¢+ 6
;
¢¢6 7
loginHistory
££ 
.
££ 
Refreshtoken
££ )
=
££* +
RefreshToken
££, 8
;
££8 9
loginHistory
§§ 
.
§§ 
SessionStatus
§§ *
=
§§+ ,
true
§§- 1
;
§§1 2
loginHistory
•• 
.
•• 
LoginDateTime
•• *
=
••+ ,
DateTime
••- 5
.
••5 6
Now
••6 9
;
••9 :
loginHistory
¶¶ 
.
¶¶  
Refreshtokenrevoke
¶¶ /
=
¶¶0 1
false
¶¶2 7
;
¶¶7 8
loginHistory
ßß 
.
ßß 
Accesstokenrevoke
ßß .
=
ßß/ 0
false
ßß1 6
;
ßß6 7
loginHistory
®® 
.
®® '
Accesstokenexpirydatetime
®® 6
=
®®7 8
DateTime
®®9 A
.
®®A B
Now
®®B E
.
®®E F

AddMinutes
®®F P
(
®®P Q
Convert
®®Q X
.
®®X Y
ToInt32
®®Y `
(
®®` a
_configuration
®®a o
[
®®o p
$str®®p á
]®®á à
)®®à â
)®®â ä
;®®ä ã
loginHistory
©© 
.
©© (
Refreshtokenexpirydatetime
©© 7
=
©©8 9
DateTime
©©: B
.
©©B C
Now
©©C F
.
©©F G

AddMinutes
©©G Q
(
©©Q R
Convert
©©R Y
.
©©Y Z
ToInt32
©©Z a
(
©©a b
_configuration
©©b p
[
©©p q
$str©©q â
]©©â ä
)©©ä ã
)©©ã å
;©©å ç
await
´´ 
_promSession
´´ "
.
´´" #
UpdateAsync
´´# .
(
´´. /
loginHistory
´´/ ;
,
´´; <
token
´´= B
)
´´B C
.
´´C D
ConfigureAwait
´´D R
(
´´R S
false
´´S X
)
´´X Y
;
´´Y Z
return
¨¨ 
true
¨¨ 
;
¨¨ 
}
≠≠ 
}
ØØ 	
}
∞∞ 
}±± ◊|
LD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\Internal\Service\UserLogHistory.cs
	namespace 	
KAR
 
. 
KSFC 
. 
API 
. 
ServiceFacade $
.$ %
Internal% -
.- .
Service. 5
{ 
public 

class 
UserLogHistory 
:  !
IUserLogHistory" 1
{ 
private 
readonly 
IEntityRepository *
<* +
RegduserTab+ 6
>6 7
_userRepository8 G
;G H
private 
readonly 
IEntityRepository *
<* +
PromsessionTab+ 9
>9 :%
_promotersesionRepository; T
;T U
private 
readonly 
IEntityRepository *
<* +
EmpsessionTab+ 8
>8 9 
_empsesionRepository: N
;N O
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
private 
readonly 
IUnitOfWork $
_work% *
;* +
public 
UserLogHistory 
( 
IEntityRepository /
</ 0
RegduserTab0 ;
>; <
userRepository= K
,K L
IEntityRepositoryM ^
<^ _
PromsessionTab_ m
>m n%
promotersesionRepository	o á
,
á à
IConfiguration
â ó
configuration
ò •
,
• ¶
IEntityRepository 
< 
EmpsessionTab +
>+ ,
empsesionRepository- @
,@ A
IUnitOfWorkB M
workN R
)R S
{ 	
_userRepository 
= 
userRepository ,
;, -%
_promotersesionRepository %
=& '$
promotersesionRepository( @
;@ A 
_empsesionRepository  
=! "
empsesionRepository# 6
;6 7
_configuration 
= 
configuration *
;* +
_work 
= 
work 
; 
} 	
public<< 
async<< 
Task<< 
<<< 
bool<< 
><< &
UpdateCustomerLoginHistory<<  :
(<<: ;
string<<; A
IP<<B D
,<<D E
string<<F L
panNum<<M S
,<<S T
string<<U [
AccessToken<<\ g
,<<g h
string<<i o
RefreshToken<<p |
,<<| }
CancellationToken	<<~ è
token
<<ê ï
)
<<ï ñ
{== 	
var?? 
userPan?? 
=?? 
await?? 
_userRepository??  /
.??/ 0+
FirstOrDefaultByExpressionAsync??0 O
(??O P
x??P Q
=>??R T
x??U V
.??V W
UserPan??W ^
==??_ a
panNum??b h
,??h i
token??j o
)??o p
.??p q
ConfigureAwait??q 
(	?? Ä
false
??Ä Ö
)
??Ö Ü
;
??Ü á
List@@ 
<@@ 
PromsessionTab@@ 
>@@  
lstloginHistory@@! 0
=@@1 2
await@@3 8%
_promotersesionRepository@@9 R
.@@R S!
FindByExpressionAsync@@S h
(@@h i
a@@i j
=>@@k m
a@@n o
.@@o p
PromPan@@p w
==@@x z
userPan	@@{ Ç
.
@@Ç É
UserPan
@@É ä
,
@@ä ã
token
@@å ë
)
@@ë í
.
@@í ì
ConfigureAwait
@@ì °
(
@@° ¢
false
@@¢ ß
)
@@ß ®
;
@@® ©
lstloginHistoryAA 
.AA 
ForEachAA #
(AA# $
aAA$ %
=>AA& (
{BB 
aCC 
.CC 
SessionStatusCC 
=CC  !
falseCC" '
;CC' (
aDD 
.DD 
AccesstokenrevokeDD #
=DD$ %
trueDD& *
;DD* +
aEE 
.EE 
RefreshtokenrevokeEE $
=EE% &
trueEE' +
;EE+ ,
}FF 
)FF 
;FF 
PromsessionTabHH 
loginHistoryHH '
=HH( )
awaitHH* /%
_promotersesionRepositoryHH0 I
.HHI J+
FirstOrDefaultByExpressionAsyncHHJ i
(HHi j
aHHj k
=>HHl n
aHHo p
.HHp q
PromPanHHq x
==HHy {
userPan	HH| É
.
HHÉ Ñ
UserPan
HHÑ ã
,
HHã å
token
HHç í
)
HHí ì
.
HHì î
ConfigureAwait
HHî ¢
(
HH¢ £
false
HH£ ®
)
HH® ©
;
HH© ™
ifII 
(II 
loginHistoryII 
!=II 
nullII  $
)II$ %
{JJ 
loginHistoryKK 
.KK 
IpadressKK %
=KK& '
IPKK( *
;KK* +
loginHistoryLL 
.LL 
PromPanLL $
=LL% &
panNumLL' -
;LL- .
loginHistoryMM 
.MM 
AccesstokenMM (
=MM) *
AccessTokenMM+ 6
;MM6 7
loginHistoryNN 
.NN 
RefreshtokenNN )
=NN* +
RefreshTokenNN, 8
;NN8 9
loginHistoryOO 
.OO 
SessionStatusOO *
=OO+ ,
trueOO- 1
;OO1 2
loginHistoryPP 
.PP 
RefreshtokenrevokePP /
=PP0 1
falsePP2 7
;PP7 8
loginHistoryQQ 
.QQ 
AccesstokenrevokeQQ .
=QQ/ 0
falseQQ1 6
;QQ6 7
loginHistoryRR 
.RR 
LoginDateTimeRR *
=RR+ ,
DateTimeRR- 5
.RR5 6
NowRR6 9
;RR9 :
loginHistorySS 
.SS %
AccesstokenexpirydatetimeSS 6
=SS7 8
DateTimeSS9 A
.SSA B
NowSSB E
.SSE F

AddMinutesSSF P
(SSP Q
ConvertSSQ X
.SSX Y
ToInt32SSY `
(SS` a
_configurationSSa o
[SSo p
$str	SSp á
]
SSá à
)
SSà â
)
SSâ ä
;
SSä ã
loginHistoryTT 
.TT &
RefreshtokenexpirydatetimeTT 7
=TT8 9
DateTimeTT: B
.TTB C
NowTTC F
.TTF G

AddMinutesTTG Q
(TTQ R
ConvertTTR Y
.TTY Z
ToInt32TTZ a
(TTa b
_configurationTTb p
[TTp q
$str	TTq â
]
TTâ ä
)
TTä ã
)
TTã å
;
TTå ç
awaitUU %
_promotersesionRepositoryUU /
.UU/ 0
UpdateAsyncUU0 ;
(UU; <
loginHistoryUU< H
,UUH I
tokenUUJ O
)UUO P
.UUP Q
ConfigureAwaitUUQ _
(UU_ `
falseUU` e
)UUe f
;UUf g
}VV 
elseWW 
{XX 
loginHistoryYY 
=YY 
newYY "
PromsessionTabYY# 1
(YY1 2
)YY2 3
{ZZ 
Ipadress[[ 
=[[ 
IP[[ !
,[[! "
PromPan\\ 
=\\ 
panNum\\ $
,\\$ %
Accesstoken]] 
=]]  !
AccessToken]]" -
,]]- .
Refreshtoken^^  
=^^! "
RefreshToken^^# /
,^^/ 0
SessionStatus__ !
=__" #
true__$ (
,__( )
Refreshtokenrevoke`` &
=``' (
false``) .
,``. /
Accesstokenrevokeaa %
=aa& '
falseaa( -
,aa- .
LoginDateTimebb !
=bb" #
DateTimebb$ ,
.bb, -
Nowbb- 0
,bb0 1%
Accesstokenexpirydatetimedd -
=dd. /
DateTimedd0 8
.dd8 9
Nowdd9 <
.dd< =

AddMinutesdd= G
(ddG H
ConvertddH O
.ddO P
ToInt32ddP W
(ddW X
_configurationddX f
[ddf g
$strddg ~
]dd~ 
)	dd Ä
)
ddÄ Å
,
ddÅ Ç&
Refreshtokenexpirydatetimeee .
=ee/ 0
DateTimeee1 9
.ee9 :
Nowee: =
.ee= >

AddMinutesee> H
(eeH I
ConverteeI P
.eeP Q
ToInt32eeQ X
(eeX Y
_configurationeeY g
[eeg h
$str	eeh Ä
]
eeÄ Å
)
eeÅ Ç
)
eeÇ É
}ff 
;ff 
awaitgg %
_promotersesionRepositorygg /
.gg/ 0
AddAsyncgg0 8
(gg8 9
loginHistorygg9 E
,ggE F
tokenggG L
)ggL M
.ggM N
ConfigureAwaitggN \
(gg\ ]
falsegg] b
)ggb c
;ggc d
}hh 
awaitii 
_workii 
.ii 
CommitAsyncii #
(ii# $
tokenii$ )
)ii) *
.ii* +
ConfigureAwaitii+ 9
(ii9 :
falseii: ?
)ii? @
;ii@ A
returnjj 
truejj 
;jj 
}kk 	
publicmm 
asyncmm 
Taskmm 
<mm 
boolmm 
>mm #
UpdateAdminLoginHistorymm  7
(mm7 8
stringmm8 >
empIdmm? D
,mmD E
stringmmF L
AccessTokenmmM X
,mmX Y
stringmmZ `
RefreshTokenmma m
,mmm n
stringmmo u
ipmmv x
,mmx y
CancellationToken	mmz ã
token
mmå ë
)
mmë í
{nn 	
Listqq 
<qq 
EmpsessionTabqq 
>qq 
lstloginHistoryqq  /
=qq0 1
awaitqq2 7 
_empsesionRepositoryqq8 L
.qqL M!
FindByExpressionAsyncqqM b
(qqb c
aqqc d
=>qqe g
aqqh i
.qqi j
EmpIdqqj o
==qqp r
empIdqqs x
,qqx y
tokenqqz 
)	qq Ä
.
qqÄ Å
ConfigureAwait
qqÅ è
(
qqè ê
false
qqê ï
)
qqï ñ
;
qqñ ó
lstloginHistoryrr 
.rr 
ForEachrr #
(rr# $
arr$ %
=>rr& (
{ss 
att 
.tt 
SessionStatustt 
=tt  !
falsett" '
;tt' (
auu 
.uu 
Accesstokenrevokeuu #
=uu$ %
trueuu& *
;uu* +
avv 
.vv 
Refreshtokenrevokevv $
=vv% &
truevv' +
;vv+ ,
}ww 
)ww 
;ww 
EmpsessionTabyy 
loginHistoryyy &
=yy' (
awaityy) . 
_empsesionRepositoryyy/ C
.yyC D+
FirstOrDefaultByExpressionAsyncyyD c
(yyc d
ayyd e
=>yyf h
ayyi j
.yyj k
EmpIdyyk p
==yyq s
empIdyyt y
,yyy z
token	yy{ Ä
)
yyÄ Å
.
yyÅ Ç
ConfigureAwait
yyÇ ê
(
yyê ë
false
yyë ñ
)
yyñ ó
;
yyó ò
;
yyô ö
ifzz 
(zz 
loginHistoryzz 
!=zz 
nullzz  $
)zz$ %
{{{ 
loginHistory|| 
.|| 
Ipadress|| %
=||& '
ip||( *
;||* +
loginHistory}} 
.}} 
EmpId}} "
=}}# $
empId}}% *
;}}* +
loginHistory~~ 
.~~ 
Accesstoken~~ (
=~~) *
AccessToken~~+ 6
;~~6 7
loginHistory 
. 
Refreshtoken )
=* +
RefreshToken, 8
;8 9
loginHistory
ÄÄ 
.
ÄÄ 
SessionStatus
ÄÄ *
=
ÄÄ+ ,
true
ÄÄ- 1
;
ÄÄ1 2
loginHistory
ÅÅ 
.
ÅÅ  
Refreshtokenrevoke
ÅÅ /
=
ÅÅ0 1
false
ÅÅ2 7
;
ÅÅ7 8
loginHistory
ÇÇ 
.
ÇÇ 
Accesstokenrevoke
ÇÇ .
=
ÇÇ/ 0
false
ÇÇ1 6
;
ÇÇ6 7
loginHistory
ÉÉ 
.
ÉÉ 
LoginDateTime
ÉÉ *
=
ÉÉ+ ,
DateTime
ÉÉ- 5
.
ÉÉ5 6
Now
ÉÉ6 9
;
ÉÉ9 :
loginHistory
ÑÑ 
.
ÑÑ '
Accesstokenexpirydatetime
ÑÑ 6
=
ÑÑ7 8
DateTime
ÑÑ9 A
.
ÑÑA B
Now
ÑÑB E
.
ÑÑE F

AddMinutes
ÑÑF P
(
ÑÑP Q
Convert
ÑÑQ X
.
ÑÑX Y
ToInt32
ÑÑY `
(
ÑÑ` a
_configuration
ÑÑa o
[
ÑÑo p
$strÑÑp á
]ÑÑá à
)ÑÑà â
)ÑÑâ ä
;ÑÑä ã
loginHistory
ÖÖ 
.
ÖÖ (
Refreshtokenexpirydatetime
ÖÖ 7
=
ÖÖ8 9
DateTime
ÖÖ: B
.
ÖÖB C
Now
ÖÖC F
.
ÖÖF G

AddMinutes
ÖÖG Q
(
ÖÖQ R
Convert
ÖÖR Y
.
ÖÖY Z
ToInt32
ÖÖZ a
(
ÖÖa b
_configuration
ÖÖb p
[
ÖÖp q
$strÖÖq â
]ÖÖâ ä
)ÖÖä ã
)ÖÖã å
;ÖÖå ç
await
ÜÜ "
_empsesionRepository
ÜÜ *
.
ÜÜ* +
UpdateAsync
ÜÜ+ 6
(
ÜÜ6 7
loginHistory
ÜÜ7 C
,
ÜÜC D
token
ÜÜE J
)
ÜÜJ K
.
ÜÜK L
ConfigureAwait
ÜÜL Z
(
ÜÜZ [
false
ÜÜ[ `
)
ÜÜ` a
;
ÜÜa b
}
áá 
else
àà 
{
ââ 
loginHistory
ää 
=
ää 
new
ää "
EmpsessionTab
ää# 0
(
ää0 1
)
ää1 2
{
ãã 
Ipadress
åå 
=
åå 
ip
åå !
,
åå! "
EmpId
çç 
=
çç 
empId
çç !
,
çç! "
Accesstoken
éé 
=
éé  !
AccessToken
éé" -
,
éé- .
Refreshtoken
èè  
=
èè! "
RefreshToken
èè# /
,
èè/ 0
SessionStatus
êê !
=
êê" #
true
êê$ (
,
êê( ) 
Refreshtokenrevoke
ëë &
=
ëë' (
false
ëë) .
,
ëë. /
Accesstokenrevoke
íí %
=
íí& '
false
íí( -
,
íí- .
LoginDateTime
ìì !
=
ìì" #
DateTime
ìì$ ,
.
ìì, -
Now
ìì- 0
,
ìì0 1'
Accesstokenexpirydatetime
ïï -
=
ïï. /
DateTime
ïï0 8
.
ïï8 9
Now
ïï9 <
.
ïï< =

AddMinutes
ïï= G
(
ïïG H
Convert
ïïH O
.
ïïO P
ToInt32
ïïP W
(
ïïW X
_configuration
ïïX f
[
ïïf g
$str
ïïg ~
]
ïï~ 
)ïï Ä
)ïïÄ Å
,ïïÅ Ç(
Refreshtokenexpirydatetime
ññ .
=
ññ/ 0
DateTime
ññ1 9
.
ññ9 :
Now
ññ: =
.
ññ= >

AddMinutes
ññ> H
(
ññH I
Convert
ññI P
.
ññP Q
ToInt32
ññQ X
(
ññX Y
_configuration
ññY g
[
ññg h
$strññh Ä
]ññÄ Å
)ññÅ Ç
)ññÇ É
}
óó 
;
óó 
await
òò "
_empsesionRepository
òò *
.
òò* +
AddAsync
òò+ 3
(
òò3 4
loginHistory
òò4 @
,
òò@ A
token
òòB G
)
òòG H
.
òòH I
ConfigureAwait
òòI W
(
òòW X
false
òòX ]
)
òò] ^
;
òò^ _
}
ôô 
await
öö 
_work
öö 
.
öö 
CommitAsync
öö #
(
öö# $
token
öö$ )
)
öö) *
.
öö* +
ConfigureAwait
öö+ 9
(
öö9 :
false
öö: ?
)
öö? @
;
öö@ A
return
õõ 
true
õõ 
;
õõ 
}
úú 	
}
€€ 
}‹‹ ¡•
HD:\KSFC_AO\API\KAR.KSFC.API.ServiceFacade\ServiceCollectionExtensions.cs
	namespace99 	
KAR99
 
.99 
KSFC99 
.99 
API99 
.99 
ServiceFacade99 $
{:: 
public;; 

static;; 
class;; '
ServiceCollectionExtensions;; 3
{<< 
public== 
static== 
IServiceCollection== (
RegisterAppServices==) <
(==< =
this=== A
IServiceCollection==B T
services==U ]
)==] ^
{>> 	
services?? 
.?? 
	AddScoped?? 
<?? 
IMobileService?? -
,??- .
MobileService??/ <
>??< =
(??= >
)??> ?
;??? @
services@@ 
.@@ 
	AddScoped@@ 
<@@ 
IDisposable@@ *
,@@* +
	DbFactory@@, 5
>@@5 6
(@@6 7
)@@7 8
;@@8 9
servicesAA 
.AA 
	AddScopedAA 
<AA 
IPanServiceAA *
,AA* +

PanServiceAA, 6
>AA6 7
(AA7 8
)AA8 9
;AA9 :
servicesBB 
.BB 
AddTransientBB !
<BB! "
ITokenServiceBB" /
,BB/ 0
TokenServiceBB1 =
>BB= >
(BB> ?
)BB? @
;BB@ A
servicesCC 
.CC 
	AddScopedCC 
<CC 
IUserLogHistoryCC .
,CC. /
UserLogHistoryCC0 >
>CC> ?
(CC? @
)CC@ A
;CCA B
servicesDD 
.DD 
	AddScopedDD 
<DD 
IAccountServiceDD .
,DD. /
AccountServiceDD0 >
>DD> ?
(DD? @
)DD@ A
;DDA B
servicesEE 
.EE 
	AddScopedEE 
<EE 
ISmsServiceEE *
,EE* +

SmsServiceEE, 6
>EE6 7
(EE7 8
)EE8 9
;EE9 :
servicesFF 
.FF 
	AddScopedFF 
<FF 
IDscServiceFF *
,FF* +

DscServiceFF, 6
>FF6 7
(FF7 8
)FF8 9
;FF9 :
servicesGG 
.GG 
	AddScopedGG 
<GG 
IEmailServiceGG ,
,GG, -
EmailServiceGG. :
>GG: ;
(GG; <
)GG< =
;GG= >
servicesHH 
.HH 
	AddScopedHH 
<HH 
IFileServiceHH +
,HH+ ,
FileServiceHH- 8
>HH8 9
(HH9 :
)HH: ;
;HH; <
servicesII 
.II 
	AddScopedII 
<II 
IBasicDetailsII ,
,II, -
BasicDetailsServiceII. A
>IIA B
(IIB C
)IIC D
;IID E
servicesJJ 
.JJ 
	AddScopedJJ 
<JJ 
IAddressDetailsJJ .
,JJ. /!
AddressDetailsServiceJJ0 E
>JJE F
(JJF G
)JJG H
;JJH I
servicesKK 
.KK 
	AddScopedKK 
<KK 
IBankDetailsKK +
,KK+ ,
BankDetailsServiceKK- ?
>KK? @
(KK@ A
)KKA B
;KKB C
servicesLL 
.LL 
	AddScopedLL 
<LL  
IRegistrationDetailsLL 3
,LL3 4&
RegistrationDetailsServiceLL5 O
>LLO P
(LLP Q
)LLQ R
;LLR S
servicesMM 
.MM 
	AddScopedMM 
<MM 
IPromoterDetailsMM /
,MM/ 0"
PromoterDetailsServiceMM1 G
>MMG H
(MMH I
)MMI J
;MMJ K
servicesNN 
.NN 
	AddScopedNN 
<NN %
IPromoterLiabilityDetailsNN 8
,NN8 9+
PromoterLiabilityDetailsServiceNN: Y
>NNY Z
(NNZ [
)NN[ \
;NN\ ]
servicesOO 
.OO 
	AddScopedOO 
<OO &
IPromoterLiabilityNetWorthOO 9
,OO9 :,
 PromoterLiabilityNetWorthServiceOO; [
>OO[ \
(OO\ ]
)OO] ^
;OO^ _
servicesPP 
.PP 
	AddScopedPP 
<PP *
IPromoterAssetsNetWorthDetailsPP =
,PP= >0
$PromoterAssetsNetWorthDetailsServicePP? c
>PPc d
(PPd e
)PPe f
;PPf g
servicesQQ 
.QQ 
	AddScopedQQ 
<QQ 
IGuarantorDetailsQQ 0
,QQ0 1#
GuarantorDetailsServiceQQ2 I
>QQI J
(QQJ K
)QQK L
;QQL M
servicesRR 
.RR 
	AddScopedRR 
<RR &
IGuarantorLiabilityDetailsRR 9
,RR9 :,
 GuarantorLiabilityDetailsServiceRR; [
>RR[ \
(RR\ ]
)RR] ^
;RR^ _
servicesSS 
.SS 
	AddScopedSS 
<SS +
IGuarantorAssetsNetWorthDetailsSS >
,SS> ?1
%GuarantorAssetsNetWorthDetailsServiceSS@ e
>SSe f
(SSf g
)SSg h
;SSh i
servicesTT 
.TT 
	AddScopedTT 
<TT '
IGuarantorLiabilityNetWorthTT :
,TT: ;-
!GuarantorLiabilityNetWorthServiceTT< ]
>TT] ^
(TT^ _
)TT_ `
;TT` a
servicesUU 
.UU 
	AddScopedUU 
<UU *
ISisterConcernFinancialDetailsUU =
,UU= >0
$SisterConcernFinancialDetailsServiceUU? c
>UUc d
(UUd e
)UUe f
;UUf g
servicesVV 
.VV 
	AddScopedVV 
<VV !
ISisterConcernDetailsVV 4
,VV4 5'
SisterConcernDetailsServiceVV6 Q
>VVQ R
(VVR S
)VVS T
;VVT U
servicesWW 
.WW 
	AddScopedWW 
<WW 
IEnquiryHomeServiceWW 2
,WW2 3
EnquiryHomeServiceWW4 F
>WWF G
(WWG H
)WWH I
;WWI J
servicesXX 
.XX 
	AddScopedXX 
<XX "
IWorkingCapitalDetailsXX 5
,XX5 6(
WorkingCapitalDetailsServiceXX7 S
>XXS T
(XXT U
)XXU V
;XXV W
servicesYY 
.YY 
	AddScopedYY 
<YY 
IMeansofFinanceYY .
,YY. /!
MeansofFinanceServiceYY0 E
>YYE F
(YYF G
)YYG H
;YYH I
servicesZZ 
.ZZ 
	AddScopedZZ 
<ZZ 
ISecurityDetailsZZ /
,ZZ/ 0"
SecurityDetailsServiceZZ1 G
>ZZG H
(ZZH I
)ZZI J
;ZZJ K
services[[ 
.[[ 
	AddScoped[[ 
<[[ 
ICommonService[[ -
,[[- .
CommonService[[/ <
>[[< =
([[= >
)[[> ?
;[[? @
services\\ 
.\\ 
	AddScoped\\ 
<\\ 
IAssignOffice\\ ,
,\\, -
AssignOfficeService\\. A
>\\A B
(\\B C
)\\C D
;\\D E
services]] 
.]] 
	AddScoped]] 
<]] $
IProjectFinancialDetails]] 7
,]]7 8*
ProjectFinancialDetailsService]]9 W
>]]W X
(]]X Y
)]]Y Z
;]]Z [
services^^ 
.^^ 
	AddScoped^^ 
<^^ 
IProjectCostDetails^^ 2
,^^2 3
ProjectCostService^^4 F
>^^F G
(^^G H
)^^H I
;^^I J
services__ 
.__ 
	AddScoped__ 
<__ 
IIdmService__ *
,__* +

IdmService__, 6
>__6 7
(__7 8
)__8 9
;__9 :
services`` 
.`` 
	AddScoped`` 
<`` 
IIdmFileService`` .
,``. /
IdmFileService``0 >
>``> ?
(``? @
)``@ A
;``A B
servicesaa 
.aa 
	AddScopedaa 
<aa &
ILegalDocumentationServiceaa 9
,aa9 :%
LegalDocumentationServiceaa; T
>aaT U
(aaU V
)aaV W
;aaW X
servicesbb 
.bb 
	AddScopedbb 
<bb  
IDisbursementServicebb 3
,bb3 4
DisbursementServicebb5 H
>bbH I
(bbI J
)bbJ K
;bbK L
servicescc 
.cc 
	AddScopedcc 
<cc $
IInspectionOfUnitServicecc 7
,cc7 8#
InspectionOfUnitServicecc9 P
>ccP Q
(ccQ R
)ccR S
;ccS T
servicesdd 
.dd 
	AddScopeddd 
<dd 
IUnitDetailsServicedd 2
,dd2 3
UnitDetailsServicedd4 F
>ddF G
(ddG H
)ddH I
;ddI J
servicesee 
.ee 
	AddScopedee 
<ee 
IAuditServiceee ,
,ee, -
AuditServiceee. :
>ee: ;
(ee; <
)ee< =
;ee= >
servicesff 
.ff 
	AddScopedff 
<ff "
ILoanAccountingServiceff 5
,ff5 6!
LoanAccountingServiceff7 L
>ffL M
(ffM N
)ffN O
;ffO P
servicesgg 
.gg 
	AddScopedgg 
<gg &
ILoanRelatedReceiptServicegg 9
,gg9 :%
LoanRelatedReceiptServicegg; T
>ggT U
(ggU V
)ggV W
;ggW X
serviceshh 
.hh 
	AddScopedhh 
<hh *
ILoanAccountingPromoterServicehh =
,hh= >)
LoanAccountingPromoterServicehh? \
>hh\ ]
(hh] ^
)hh^ _
;hh_ `
servicesii 
.ii 
	AddScopedii 
<ii *
ILoanRelatedReceiptPromServiceii =
,ii= >)
LoanRelatedReceiptPromServiceii? \
>ii\ ]
(ii] ^
)ii^ _
;ii_ `
serviceskk 
.kk 
	AddScopedkk 
<kk 1
%ICreationOfSecurityandAquisitionAssetkk D
,kkD E0
$CreationOfSecurityandAquisitionAssetkkF j
>kkj k
(kkk l
)kkl m
;kkm n
servicesll 
.ll 
	AddScopedll 
<ll 1
%ICreationOfDisbursmentProposalServicell D
,llD E)
CreationOfDisbursmentProposalllF c
>llc d
(lld e
)lle f
;llf g
servicesnn 
.nn 
	AddScopednn 
<nn &
IEntryOfOtherDebitsServicenn 9
,nn9 :%
EntryOfOtherDebitsServicenn; T
>nnT U
(nnU V
)nnV W
;nnW X
servicesoo 
.oo 
	AddScopedoo 
<oo "
ILoanAllocationServiceoo 5
,oo5 6!
LoanAllocationServiceoo7 L
>ooL M
(ooM N
)ooN O
;ooO P
servicespp 
.pp 
	AddScopedpp 
<pp 
IEmployeeServicepp /
,pp/ 0
EmployeeServicepp0 ?
>pp? @
(pp@ A
)ppA B
;ppB C
servicesqq 
.qq 
	AddScopedqq 
<qq 
ModuleServiceqq ,
>qq, -
(qq- .
)qq. /
;qq/ 0
servicesrr 
.rr 
	AddScopedrr 
<rr 
RoleServicerr *
>rr* +
(rr+ ,
)rr, -
;rr- .
servicesss 
.ss 
	AddScopedss 
<ss 
AttributeServicess /
>ss/ 0
(ss0 1
)ss1 2
;ss2 3
servicestt 
.tt 
	AddScopedtt 
<tt  
AttributeUnitServicett 3
>tt3 4
(tt4 5
)tt5 6
;tt6 7
servicesuu 
.uu 
	AddScopeduu 
<uu (
AttributeUnitOperatorServiceuu ;
>uu; <
(uu< =
)uu= >
;uu> ?
servicesvv 
.vv 
	AddScopedvv 
<vv 
SubAttributeServicevv 2
>vv2 3
(vv3 4
)vv4 5
;vv5 6
servicesww 
.ww 
	AddScopedww 
<ww 
ChairServiceww +
>ww+ ,
(ww, -
)ww- .
;ww. /
servicesxx 
.xx 
	AddScopedxx 
<xx $
DelegationOfPowerServicexx 7
>xx7 8
(xx8 9
)xx9 :
;xx: ;
servicesyy 
.yy 
	AddScopedyy 
<yy +
DelegationOfPowerHistoryServiceyy >
>yy> ?
(yy? @
)yy@ A
;yyA B
serviceszz 
.zz 
	AddScopedzz 
<zz &
EmployeeChairDetailServicezz 9
>zz9 :
(zz: ;
)zz; <
;zz< =
services{{ 
.{{ 
	AddScoped{{ 
<{{ '
EmployeeChairHistoryService{{ :
>{{: ;
({{; <
){{< =
;{{= >
services|| 
.|| 
	AddScoped|| 
<|| 
HierarchyService|| /
>||/ 0
(||0 1
)||1 2
;||2 3
services}} 
.}} 
	AddScoped}} 
<}} 
ProjectCostService}} 1
>}}1 2
(}}2 3
)}}3 4
;}}4 5
services~~ 
.~~ 
	AddScoped~~ 
<~~ '
SisterConcernDetailsService~~ :
>~~: ;
(~~; <
)~~< =
;~~= >
services
ÄÄ 
.
ÄÄ 
AddTransient
ÄÄ !
<
ÄÄ! "
Func
ÄÄ" &
<
ÄÄ& '
ServiceEnum
ÄÄ' 2
,
ÄÄ2 3+
IGenericAdminModuleRepository
ÄÄ4 Q
>
ÄÄQ R
>
ÄÄR S
(
ÄÄS T
serviceProvider
ÄÄT c
=>
ÄÄd f
key
ÄÄg j
=>
ÄÄk m
{
ÅÅ 
switch
ÇÇ 
(
ÇÇ 
key
ÇÇ 
)
ÇÇ 
{
ÉÉ 
case
ÑÑ 
ServiceEnum
ÑÑ $
.
ÑÑ$ %
ModuleService
ÑÑ% 2
:
ÑÑ2 3
return
ÖÖ 
serviceProvider
ÖÖ .
.
ÖÖ. /

GetService
ÖÖ/ 9
<
ÖÖ9 :
ModuleService
ÖÖ: G
>
ÖÖG H
(
ÖÖH I
)
ÖÖI J
;
ÖÖJ K
case
ÜÜ 
ServiceEnum
ÜÜ $
.
ÜÜ$ %
RoleService
ÜÜ% 0
:
ÜÜ0 1
return
áá 
serviceProvider
áá .
.
áá. /

GetService
áá/ 9
<
áá9 :
RoleService
áá: E
>
ááE F
(
ááF G
)
ááG H
;
ááH I
case
àà 
ServiceEnum
àà $
.
àà$ %
AttributeService
àà% 5
:
àà5 6
return
ââ 
serviceProvider
ââ .
.
ââ. /

GetService
ââ/ 9
<
ââ9 :
AttributeService
ââ: J
>
ââJ K
(
ââK L
)
ââL M
;
ââM N
case
ää 
ServiceEnum
ää $
.
ää$ %"
AttributeUnitService
ää% 9
:
ää9 :
return
ãã 
serviceProvider
ãã .
.
ãã. /

GetService
ãã/ 9
<
ãã9 :"
AttributeUnitService
ãã: N
>
ããN O
(
ããO P
)
ããP Q
;
ããQ R
case
åå 
ServiceEnum
åå $
.
åå$ %*
AttributeUnitOperatorService
åå% A
:
ååA B
return
çç 
serviceProvider
çç .
.
çç. /

GetService
çç/ 9
<
çç9 :*
AttributeUnitOperatorService
çç: V
>
ççV W
(
ççW X
)
ççX Y
;
ççY Z
case
éé 
ServiceEnum
éé $
.
éé$ %!
SubAttributeService
éé% 8
:
éé8 9
return
èè 
serviceProvider
èè .
.
èè. /

GetService
èè/ 9
<
èè9 :!
SubAttributeService
èè: M
>
èèM N
(
èèN O
)
èèO P
;
èèP Q
case
êê 
ServiceEnum
êê $
.
êê$ % 
ChairMasterService
êê% 7
:
êê7 8
return
ëë 
serviceProvider
ëë .
.
ëë. /

GetService
ëë/ 9
<
ëë9 :
ChairService
ëë: F
>
ëëF G
(
ëëG H
)
ëëH I
;
ëëI J
case
íí 
ServiceEnum
íí $
.
íí$ %&
DelegationOfPowerService
íí% =
:
íí= >
return
ìì 
serviceProvider
ìì .
.
ìì. /

GetService
ìì/ 9
<
ìì9 :&
DelegationOfPowerService
ìì: R
>
ììR S
(
ììS T
)
ììT U
;
ììU V
case
îî 
ServiceEnum
îî $
.
îî$ %-
DelegationOfPowerHistoryService
îî% D
:
îîD E
return
ïï 
serviceProvider
ïï .
.
ïï. /

GetService
ïï/ 9
<
ïï9 :-
DelegationOfPowerHistoryService
ïï: Y
>
ïïY Z
(
ïïZ [
)
ïï[ \
;
ïï\ ]
case
ññ 
ServiceEnum
ññ $
.
ññ$ %)
EmployeeChairDetailsService
ññ% @
:
ññ@ A
return
óó 
serviceProvider
óó .
.
óó. /

GetService
óó/ 9
<
óó9 :(
EmployeeChairDetailService
óó: T
>
óóT U
(
óóU V
)
óóV W
;
óóW X
case
òò 
ServiceEnum
òò $
.
òò$ %/
!EmployeeChairHistoryDetailService
òò% F
:
òòF G
return
ôô 
serviceProvider
ôô .
.
ôô. /

GetService
ôô/ 9
<
ôô9 :)
EmployeeChairHistoryService
ôô: U
>
ôôU V
(
ôôV W
)
ôôW X
;
ôôX Y
case
öö 
ServiceEnum
öö $
.
öö$ %)
HierarchyChairMasterService
öö% @
:
öö@ A
return
õõ 
serviceProvider
õõ .
.
õõ. /

GetService
õõ/ 9
<
õõ9 :
HierarchyService
õõ: J
>
õõJ K
(
õõK L
)
õõL M
;
õõM N
default
úú 
:
úú 
return
ùù 
null
ùù #
;
ùù# $
}
ûû 
}
üü 
)
üü 
;
üü 
return
°° 
services
°° 
;
°° 
}
¢¢ 	
public
§§ 
static
§§  
IServiceCollection
§§ (

JwtService
§§) 3
(
§§3 4
this
§§4 8 
IServiceCollection
§§9 K
services
§§L T
,
§§T U
IConfiguration
§§V d
configuration
§§e r
)
§§r s
{
•• 	
services
ßß 
.
ßß 
AddAuthentication
ßß &
(
ßß& '
options
ßß' .
=>
ßß/ 1
{
®® 
options
©© 
.
©© '
DefaultAuthenticateScheme
©© 1
=
©©2 3
JwtBearerDefaults
©©4 E
.
©©E F"
AuthenticationScheme
©©F Z
;
©©Z [
options
™™ 
.
™™ $
DefaultChallengeScheme
™™ .
=
™™/ 0
JwtBearerDefaults
™™1 B
.
™™B C"
AuthenticationScheme
™™C W
;
™™W X
options
´´ 
.
´´ 
DefaultScheme
´´ %
=
´´& '
JwtBearerDefaults
´´( 9
.
´´9 :"
AuthenticationScheme
´´: N
;
´´N O
}
¨¨ 
)
¨¨ 
.
ÆÆ 
AddJwtBearer
ÆÆ 
(
ÆÆ 
options
ÆÆ !
=>
ÆÆ" $
{
ØØ 
options
ΩΩ 
.
ΩΩ 
	SaveToken
ΩΩ !
=
ΩΩ" #
true
ΩΩ$ (
;
ΩΩ( )
options
ææ 
.
ææ "
RequireHttpsMetadata
ææ ,
=
ææ- .
false
ææ/ 4
;
ææ4 5
options
øø 
.
øø '
TokenValidationParameters
øø 1
=
øø2 3
new
øø4 7'
TokenValidationParameters
øø8 Q
(
øøQ R
)
øøR S
{
¿¿ 
ValidateIssuer
¡¡ "
=
¡¡# $
true
¡¡% )
,
¡¡) *
ValidateAudience
¬¬ $
=
¬¬% &
true
¬¬' +
,
¬¬+ ,
ValidateLifetime
√√ $
=
√√% &
true
√√' +
,
√√+ ,&
ValidateIssuerSigningKey
ƒƒ ,
=
ƒƒ- .
true
ƒƒ/ 3
,
ƒƒ3 4
	ClockSkew
≈≈ 
=
≈≈ 
TimeSpan
≈≈  (
.
≈≈( )
Zero
≈≈) -
,
≈≈- .
ValidAudience
∆∆ !
=
∆∆" #
configuration
∆∆$ 1
[
∆∆1 2
$str
∆∆2 E
]
∆∆E F
,
∆∆F G
ValidIssuer
«« 
=
««  !
configuration
««" /
[
««/ 0
$str
««0 A
]
««A B
,
««B C
IssuerSigningKey
»» $
=
»»% &
new
»»' *"
SymmetricSecurityKey
»»+ ?
(
»»? @
Encoding
»»@ H
.
»»H I
UTF8
»»I M
.
»»M N
GetBytes
»»N V
(
»»V W
configuration
»»W d
[
»»d e
$str
»»e q
]
»»q r
)
»»r s
)
»»s t
}
…… 
;
…… 
}
◊◊ 
)
◊◊ 
;
◊◊ 
return
ÿÿ 
services
ÿÿ 
;
ÿÿ 
}
ŸŸ 	
}
€€ 
}‹‹ 